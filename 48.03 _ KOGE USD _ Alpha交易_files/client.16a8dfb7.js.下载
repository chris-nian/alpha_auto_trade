(()=>{"use strict";var e={71432:function(e,t,i){i.d(t,{Ep:()=>p,P1:()=>r,Q$:()=>s,Tw:()=>n,Y4:()=>d,Z4:()=>g,_q:()=>l,aE:()=>m,bM:()=>o,d0:()=>h,qY:()=>a,rk:()=>u});let r=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.34981 3V1H3.6501V3H1.94995V13H3.65015V15H5.34981V13H7.05V3H5.34981ZM5.34981 11.3H3.6501V4.7H5.34981V11.3Z" fill="currentColor"/>
<path d="M12.3499 3V1H10.6502V3H8.95001V13H10.6502V15H12.3499V13H14.0501V3H12.3499ZM12.3499 11.3H10.6502V4.7H12.3499V11.3Z" fill="currentColor"/>
</svg>`,s=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13 2.7H8.94998L12.04 5.8L10.84 7L8.83998 5V10.98L10.82 9L12.03 10.2L8.92998 13.3H13V15H2.97998V13.3H7.02998L3.93998 10.2L5.13998 9L7.13998 11V5.02L5.15998 7L3.94998 5.8L7.04998 2.7H2.97998V1H13V2.7Z" fill="currentColor"/>
</svg>`,a=`<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.13965 8.039V15.9599L12 19.9208L18.8604 15.9599V8.039L12 4.07806L5.13965 8.039ZM20.6602 16.1337L20.6475 16.3329C20.5863 16.7902 20.3161 17.1981 19.9102 17.4326L12.75 21.5673L12.5713 21.6552C12.2056 21.8058 11.7944 21.8058 11.4287 21.6552L11.25 21.5673L4.08984 17.4326C3.68389 17.1981 3.41368 16.7902 3.35254 16.3329L3.33984 16.1337V7.86615C3.33984 7.33029 3.6258 6.83528 4.08984 6.56732L11.25 2.43255C11.714 2.16474 12.286 2.16474 12.75 2.43255L19.9102 6.56732C20.3742 6.83528 20.6602 7.33029 20.6602 7.86615V16.1337Z" fill="currentColor"/>
<path d="M12 8.82007L15.182 12.002L12 15.184L8.81802 12.002L12 8.82007Z" fill="currentColor"/>
</svg>
`,o=`<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.3524 5.23901C14.1616 5.23905 15.9078 5.90377 17.2587 7.10718L22.331 11.6267C22.5541 11.8256 22.5541 12.1749 22.331 12.3738L17.2587 16.8923C15.9078 18.0958 14.1617 18.7614 12.3524 18.7615H11.6483C9.83906 18.7615 8.09203 18.0959 6.74111 16.8923L1.66885 12.3738C1.44566 12.1749 1.44568 11.8256 1.66885 11.6267L6.74111 7.10718C8.09203 5.90363 9.83906 5.23901 11.6483 5.23901H12.3524ZM11.6483 7.03882C10.366 7.03882 9.12521 7.48092 8.13369 8.28589L7.93838 8.4519L3.95498 11.9998L7.93838 15.5486L8.13369 15.7146C9.12519 16.5195 10.3661 16.9607 11.6483 16.9607H12.3524C13.7201 16.9607 15.0402 16.4584 16.0614 15.5486L20.0438 11.9998L16.0614 8.4519C15.0402 7.54211 13.7201 7.03886 12.3524 7.03882H11.6483Z" fill="currentColor"/>
<rect x="9.03369" y="11.9978" width="4.1951" height="4.1951" transform="rotate(-45 9.03369 11.9978)" fill="currentColor"/>
</svg>
`,l=`<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.3451 7.12476C16.655 6.77704 17.1739 6.72668 17.5433 6.9939L17.6156 7.05151L21.9965 10.9548C22.6214 11.5116 22.6214 12.4889 21.9965 13.0457L17.4086 17.1326C16.012 18.3767 14.2067 19.0642 12.3363 19.0642H11.6947C10.15 19.0642 8.65036 18.5944 7.38807 17.7302C7.30716 17.7041 7.24216 17.6725 7.19666 17.6462C7.13589 17.6111 7.08685 17.5744 7.05409 17.5486L6.95252 17.4626L6.88709 17.3982C6.57871 17.0619 6.56924 16.5401 6.87928 16.1921C7.18169 15.8527 7.68277 15.7969 8.05018 16.0427C8.11762 16.0687 8.17446 16.0981 8.21717 16.1228C8.26345 16.1496 8.30745 16.1783 8.34803 16.2068C9.32382 16.8917 10.4917 17.2644 11.6947 17.2644H12.3363C13.7651 17.2644 15.1445 16.7392 16.2113 15.7888L20.4633 11.9998L16.4183 8.39526L16.3529 8.33081C16.0446 7.99451 16.0351 7.47273 16.3451 7.12476ZM12.3695 4.9353L12.4017 4.93823C12.947 4.97758 13.5502 5.03153 14.1195 5.14624C14.6065 5.24452 14.9215 5.71878 14.8236 6.20581C14.7255 6.69295 14.2512 7.00883 13.764 6.91089C13.324 6.82223 12.8299 6.7742 12.309 6.73608H11.6947C10.3553 6.73608 9.05955 7.19716 8.02381 8.03784L7.81971 8.21167L3.57557 11.9919L5.84901 13.9724L5.91541 14.0359C6.22763 14.3687 6.24301 14.8904 5.9369 15.2419C5.63085 15.5934 5.11214 15.6498 4.73963 15.3865L4.66737 15.3298L2.05116 13.0515C1.41534 12.4977 1.40999 11.5119 2.03944 10.9509L6.62245 6.86694L6.88905 6.64038C8.2449 5.53974 9.94129 4.9353 11.6947 4.9353H12.3695Z" fill="currentColor"/>
<path d="M10.6147 13.5667L13.5848 10.5966L14.999 12.0108L12.029 14.9809L10.6147 13.5667Z" fill="currentColor"/>
<path d="M19.5105 3.23171L19.5788 3.17025C19.9323 2.88178 20.4543 2.90215 20.7838 3.23171C21.1134 3.56127 21.1338 4.08319 20.8453 4.43669L20.7838 4.50505L4.52037 20.7685C4.1689 21.12 3.5985 21.12 3.24702 20.7685C2.89555 20.417 2.89555 19.8466 3.24702 19.4952L19.5105 3.23171Z" fill="currentColor"/>
</svg>
`,n='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.863 17.863L10.726 12 4.863 6.137a.9.9 0 011.274-1.274L12 10.727l5.863-5.864a.9.9 0 011.274 1.274L13.273 12l5.864 5.863.061.069a.9.9 0 01-1.266 1.266l-.069-.061L12 13.273l-5.863 5.864a.9.9 0 01-1.274-1.274z" fill="currentColor"></path></svg>',d=`<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg""><path d="M11.432 15.698a.9.9 0 001.205-.061l6-6 .061-.069a.9.9 0 00-1.266-1.266l-.069.061L12 13.727 6.637 8.363a.9.9 0 00-1.274 1.274l6 6 .069.061z" fill="currentColor"></path></svg>
`,c=e=>`<svg width="300" height="60" viewBox="0 0 300 60" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.6096 30L6.83425 36.7383L0 30L6.83425 23.2031L13.6096 30ZM30.165 13.5352L41.8303 25.1367L48.6646 18.3398L30.165 0L11.6654 18.3984L18.4996 25.1953L30.165 13.5352ZM53.4957 23.2031L46.7203 30L53.5546 36.7969L60.3888 30L53.4957 23.2031ZM30.165 46.4648L18.4996 34.8047L11.6654 41.6016L30.165 60L48.6646 41.6016L41.8303 34.8047L30.165 46.4648ZM30.165 36.7383L36.9992 29.9414L30.165 23.2031L23.3307 30L30.165 36.7383ZM102.042 37.4414V37.3242C102.042 32.9297 99.6858 30.7031 95.8562 29.2383C98.2129 27.9492 100.216 25.8398 100.216 22.1484V22.0312C100.216 16.875 96.033 13.5352 89.3166 13.5352H73.9395V46.4062H89.6701C97.1524 46.4648 102.042 43.418 102.042 37.4414ZM92.9694 23.3789C92.9694 25.8398 90.9662 26.8359 87.7258 26.8359H81.0094V19.8633H88.1972C91.2608 19.8633 92.9694 21.0938 92.9694 23.2617V23.3789ZM94.7957 36.5039C94.7957 38.9648 92.8515 40.0781 89.6701 40.0781H81.0094V32.8711H89.4344C93.1461 32.8711 94.7957 34.2188 94.7957 36.4453V36.5039ZM117.302 46.4648V13.5352H109.996V46.4062H117.302V46.4648ZM156.422 46.4648V13.5352H149.234V33.8086L133.739 13.5352H127.023V46.4062H134.211V25.5469L150.236 46.4648H156.422ZM196.72 46.4648L182.522 13.3594H175.805L161.606 46.4648H169.089L172.093 39.082H186.057L189.061 46.4648H196.72ZM183.464 32.6953H174.686L179.104 22.0312L183.464 32.6953ZM231.422 46.4648V13.5352H224.234V33.8086L208.739 13.5352H202.023V46.4062H209.211V25.5469L225.236 46.4648H231.422ZM268.951 41.1328L264.297 36.5039C261.705 38.8477 259.407 40.3711 255.577 40.3711C249.921 40.3711 245.974 35.6836 245.974 30.0586V29.8828C245.974 24.2578 249.98 19.6289 255.577 19.6289C258.877 19.6289 261.469 21.0352 264.061 23.3203L268.716 17.9883C265.652 15 261.94 12.8906 255.695 12.8906C245.562 12.8906 238.433 20.5664 238.433 29.8828V30C238.433 39.4336 245.679 46.9336 255.401 46.9336C261.764 46.9922 265.534 44.7656 268.951 41.1328ZM300 46.4648V40.0195H282.031V33.1055H297.643V26.6602H282.031V19.9805H299.764V13.5352H274.843V46.4062H300V46.4648Z" fill="${e}"/>
</svg>
`,h=c("#EAECEF"),u=c("#202630"),g="M3 1.75h6v1.5H3zM3 5.25h6v1.5H3zM3 8.75h6v1.5H3z",m="M2.79025 2.40641L1.90636 3.29029L4.11607 5.5L1.90636 7.70971L2.79025 8.59359L4.99996 6.38388L7.20966 8.59359L8.09355 7.70971L5.88384 5.5L8.09355 3.29029L7.20966 2.40641L4.99996 4.61612L2.79025 2.40641Z",p="M6.14592 1.35417L7.39592 1.35417L7.39591 6.97917L8.85425 6.97917L6.77091 9.0625L4.68758 6.97916L6.14591 6.97916L6.14592 1.35417ZM2.39591 8.85417L3.64591 8.85417L3.64591 3.02083L5.10425 3.02083L3.02091 0.9375L0.937581 3.02083L2.39591 3.02083L2.39591 8.85417Z"},51597:function(e,t,i){i.d(t,{H:()=>a,Z:()=>o});var r=i(87363);let s={visible:!1,setVisible:()=>null},a=()=>{let[e,t]=(0,r.useState)(s.visible);return(0,r.useMemo)(()=>({visible:e,setVisible:t}),[e,t])},o=(0,r.createContext)(s)},14460:function(e,t,i){i.d(t,{H:()=>a,Z:()=>o});var r=i(87363);let s={visible:!1,setVisible:()=>null,currentId:"",setCurrentId:()=>null,position:{x:0,y:0},setPosition:()=>null},a=()=>{let[e,t]=(0,r.useState)(s.visible),[i,a]=(0,r.useState)(s.currentId),[o,l]=(0,r.useState)(s.position);return(0,r.useMemo)(()=>({visible:e,setVisible:t,currentId:i,setCurrentId:a,position:o,setPosition:l}),[e,t,i,a,o,l])},o=(0,r.createContext)(s)},25888:function(e,t,i){i.d(t,{H:()=>a,Z:()=>o});var r=i(87363);let s={visible:!1,setVisible:()=>null,price:0,setPrice:()=>null,formattedPrice:"",setFormattedPrice:()=>null,mousePosition:{x:0,y:0},setMousePosition:()=>null},a=()=>{let[e,t]=(0,r.useState)(s.visible),[i,a]=(0,r.useState)(s.price),[o,l]=(0,r.useState)(s.formattedPrice),[n,d]=(0,r.useState)(s.mousePosition);return{visible:e,setVisible:t,price:i,setPrice:a,formattedPrice:o,setFormattedPrice:l,mousePosition:n,setMousePosition:d}},o=(0,r.createContext)(s)},9869:function(e,t,i){i.d(t,{Z:()=>$});var r,s,a,o,l=i(52322),n=i(87363),d=i(99507),c=i(34291),h=i.n(c),u=i(27722),g=i(16709),m=i.n(g),p=i(81867),x=i(88294),f=i(66257),b=i(98064),y=i(27866),v=i(64084),C=i(87585),w=i(58792);let S=({onClickAway:e,onClick:t})=>{let i=(0,n.useRef)(null);(0,y.Z)(i,e);let{getI18n:r}=(0,b.K_)(),s=(0,n.useMemo)(()=>r("color-picker-remove-color",{defaultValue:"Remove Color"}),[r]);return(0,l.jsxs)(v.Z,{ref:i,className:"bg-PrimaryText items-center justify-between px-[12px] py-[8px] cursor-pointer shadow gap-[4px] text-SecondaryBg rounded-[8px]",onClick:t,children:[(0,l.jsx)(w.Z,{className:"w-[16px] h-[16px]"}),s]})},T=({color:e,onClick:t=()=>null,onContextMenu:i=()=>null,isSelected:r=!1,isRemoveSelected:s=!1})=>{let a="rgb(255, 255, 255)"===e;return(0,l.jsx)(v.Z,{className:m()("border-[1px] w-[24px] h-[24px] border-solid items-center justify-center rounded-[2px]",{"border-PrimaryYellow":r,"border-[transparent]":!r,"border-Input":s}),children:(0,l.jsx)(u.ZP,{className:m()("flex items-center justify-center rounded-[2px] cursor-pointer",{"m-[1px]":a&&r||!a,"m-[0px] border-[1px] border-solid border-Line":a&&!r}),style:{width:"20px",height:"20px",background:e},onClick:t,onContextMenu:i})})},A=e=>e.enableContextMenu?(0,l.jsx)(C.Z,{enablePortal:!0,useReactPopper:!0,open:e.contextMenuProps.showMenu,placement:"top",overlay:(0,l.jsx)(S,{onClickAway:e.contextMenuProps.onClickAway,onClick:e.contextMenuProps.onRemoveColor}),children:(0,l.jsx)(T,{onClick:e.onClick,onContextMenu:e.contextMenuProps.onContextMenu,isSelected:e.isSelected,isRemoveSelected:e.contextMenuProps.showMenu,color:e.color})}):(0,l.jsx)(T,{onClick:e.onClick,isSelected:e.isSelected,color:e.color}),_=({r:e,g:t,b:i})=>{let r=0,s=0,a=0,o=Math.max(e,t,i),l=o-Math.min(e,t,i);return(r=Math.floor(60*(r=0===l?0:e===o?(t-i)/l%6:t===o?(i-e)/l+2:(e-t)/l+4)))<0&&(r+=360),{h:r,s:Math.round((0===o?0:l/o)*100),v:Math.round(o/255*100)}},L=({h:e,s:t,v:i})=>{let r=[],s=(i/=100)*(t/=100),a=e/60,o=s*(1-Math.abs(a%2-1)),l=i-s;switch(parseInt(`${a}`,10)){case 0:r=[s,o,0];break;case 1:r=[o,s,0];break;case 2:r=[0,s,o];break;case 3:r=[0,o,s];break;case 4:r=[o,0,s];break;case 5:r=[s,0,o]}if(0===r.length)throw Error("hsv color is not valid");return{r:Math.round(255*(r[0]+l)),g:Math.round(255*(r[1]+l)),b:Math.round(255*(r[2]+l))}};var k=i(14077),I=i(27875),P=i.n(I),E=i(97362);let B=({color:e,onChangeColor:t})=>{let i=(0,n.useMemo)(()=>{try{return(0,d.Z)(e)}catch(e){return(0,d.Z)("rgba(0,0,0,1)")}},[e]),r=(0,n.useMemo)(()=>{let[e,t,r]=i.rgb();return _({r:e,g:t,b:r})},[i]),[s,a]=(0,n.useState)(!1),[o,{width:c,height:h}]=(0,k.Z)(),u=(0,n.useCallback)(e=>{let i=e.currentTarget.getBoundingClientRect(),s=P()(e.clientX-i.x,0,c),a=P()(e.clientY-i.y,0,h),{r:o,g:l,b:n}=L({h:r.h,s:Math.round(s/c*100),v:Math.round((1-a/h)*100)});t(`rgb(${o},${l},${n})`)},[c,h,r.h,t]),g=(0,n.useCallback)(e=>{a(!0),u(e)},[a,u]),m=(0,n.useCallback)(e=>{s&&u(e)},[s,u]),p=(0,n.useCallback)(()=>{a(!1)},[a]);return(0,l.jsxs)(E.Z,{className:"flex h-[160px] relative overflow-hidden items-center rounded-[6px]",style:{background:`hsl(${r.h}, 100%, 50%)`},ref:o,onMouseDown:g,onMouseMove:m,onMouseUp:p,children:[(0,l.jsx)(E.Z,{className:"w-full absolute",style:{height:`${h}px`,background:"linear-gradient(to right, #fff, rgba(255,255,255,0))"}}),(0,l.jsx)(E.Z,{className:"w-full absolute",style:{height:`${h}px`,background:"linear-gradient(to top, #000, rgba(0,0,0,0))"}}),(0,l.jsx)(E.Z,{className:"absolute border-solid border-[2px] rounded-full border-white shadow",style:{width:"18px",height:"18px",left:`${Math.min(r.s/100*c-9,c-1)}px`,top:`${Math.min((1-r.v/100)*h-9,h-1)}px`}})]})},N=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/g,M=["rgb(0,0,0)","rgb(32, 38, 48)","rgb(51, 59, 71)","rgb(67, 70, 80)","rgb(93, 96, 106)","rgb(120, 123, 133)","rgb(149, 152, 160)","rgb(178, 181, 189)","rgb(234, 236, 239)","rgb(255, 255, 255)"],D=["rgb(246, 70, 93)","rgb(241, 157, 56)","rgb(252, 236, 96)","rgb(46, 189, 133)","rgb(68, 150, 130)","rgb(84, 185, 209)","rgb(56, 96, 246)","rgb(97, 60, 176)","rgb(143, 49, 170)","rgb(214, 56, 100)"],V=["rgb(237, 165, 166)","rgb(247, 206, 138)","rgb(253, 245, 167)","rgb(175, 212, 171)","rgb(134, 202, 189)","rgb(150, 219, 232)","rgb(153, 189, 244)","rgb(175, 157, 214)","rgb(197, 149, 212)","rgb(230, 148, 176)","rgb(231, 130, 131)","rgb(244, 186, 96)","rgb(253, 241, 136)","rgb(144, 197, 138)","rgb(103, 186, 168)","rgb(115, 205, 222)","rgb(106, 154, 239)","rgb(144, 118, 199)","rgb(175, 108, 195)","rgb(223, 107, 145)","rgb(228, 94, 99)","rgb(242, 171, 70)","rgb(252, 239, 114)","rgb(123, 185, 114)","rgb(82, 168, 148)","rgb(95, 195, 215)","rgb(68, 119, 237)","rgb(120, 88, 188)","rgb(159, 77, 182)","rgb(218, 78, 122)","rgb(164, 52, 55)","rgb(229, 130, 48)","rgb(242, 194, 79)","rgb(80, 140, 70)","rgb(43, 100, 86)","rgb(66, 148, 164)","rgb(37, 71, 196)","rgb(76, 46, 162)","rgb(113, 38, 156)","rgb(178, 45, 91)","rgb(117, 34, 37)","rgb(213, 91, 38)","rgb(230, 133, 55)","rgb(47, 92, 40)","rgb(17, 50, 42)","rgb(39, 94, 99)","rgb(23, 49, 147)","rgb(46, 28, 140)","rgb(68, 23, 134)","rgb(124, 29, 77)"];(r=a||(a={}))[r.Add=0]="Add",r[r.Edit=1]="Edit";let j=({color:e,onChangeColor:t,onChangeAlpha:i,onClickConfirm:r,onClickCancel:s,onClickAdd:a,mode:o=0})=>{let{getI18n:c}=(0,b.K_)(),h=(0,n.useMemo)(()=>{try{return(0,d.Z)(e)}catch(e){return(0,d.Z)("rgba(0,0,0,1)")}},[e]),g=(0,n.useMemo)(()=>h.alpha(),[h]),m=(0,n.useMemo)(()=>{let[e,t,i]=h.rgb();return _({r:e,g:t,b:i})},[h]),[y,v]=(0,n.useMemo)(()=>[h.alpha(0).css(),h.alpha(1).css()],[h]),[C,w]=(0,n.useState)(h.hex("rgb")),S=(0,n.useMemo)(()=>c("color-picker-cancel",{defaultValue:"Cancel"}),[c]),T=(0,n.useMemo)(()=>c("color-picker-add",{defaultValue:"Add"}),[c]),k=(0,n.useMemo)(()=>c("color-picker-confirm",{defaultValue:"Confirm"}),[c]),I=(0,n.useCallback)(()=>a(h.css()),[h,a]),P=(0,n.useMemo)(()=>(0,l.jsx)(p.Z,{sz:"small",variant:"primary",className:"flex-1",onClick:r,children:k}),[k,r]),E=(0,n.useMemo)(()=>(0,l.jsx)(p.Z,{sz:"small",variant:"secondary",className:"flex-1",style:{minHeight:"auto"},onClick:s,children:S}),[S,s]),M=(0,n.useMemo)(()=>(0,l.jsx)(p.Z,{sz:"small",variant:"primary",className:"flex-1",style:{minHeight:"auto"},onClick:I,children:T}),[T,I]),D=(0,n.useCallback)(e=>{t(e);try{let t=(0,d.Z)(e).hex("rgb");w(t)}catch(e){}},[t]),V=(0,n.useCallback)(e=>{try{let{r:i,g:r,b:s}=L({h:Math.round(e),s:m.s,v:m.v}),a=`rgb(${i},${r},${s})`;t(a);let o=(0,d.Z)(a).hex("rgb");w(o)}catch(e){}},[m.s,m.v,t]),j=(0,n.useCallback)(e=>i(+(.01*Math.round(e)).toFixed(2)),[i]),R=(0,n.useCallback)(e=>{w(e),N.test(e)&&t(e)},[t]);return(0,l.jsxs)(u.ZP,{className:"flex flex-col bg-[--color-CardBg]",children:[(0,l.jsx)(u.ZP,{className:"mb-[8px]",children:(0,l.jsx)(B,{color:e,onChangeColor:D})}),(0,l.jsxs)(u.ZP,{className:"grid mb-[8px]",style:{gap:"8px",gridTemplateColumns:"max-content auto",gridTemplateRows:"auto"},children:[(0,l.jsx)(A,{color:e}),(0,l.jsx)(x.Z,{style:{fontSize:"12px",textAlign:"center"},size:"small",variant:"line",className:"!h-[24px] flex justify-center items-center !w-[64px] !rounded-[4px] [&_input]:w-full !p-0",value:C,onChange:R})]}),(0,l.jsx)(f.Z,{max:360,value:m.h,onChange:V,className:"h-full [&_.bn-slider-track]:invisible",style:{marginBottom:"8px",marginTop:"0px",marginLeft:"0px",marginRight:"0px",background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)",borderRadius:"12px"}}),(0,l.jsx)(f.Z,{max:100,value:100*g,onChange:j,className:"h-full [&_.bn-slider-track]:invisible",style:{marginBottom:"8px",marginTop:"0px",marginLeft:"0px",marginRight:"0px",background:`linear-gradient(to right, ${y}, ${v})`,borderRadius:"12px"}}),0===o?(0,l.jsxs)(u.ZP,{className:"flex flex-row h-[32px]",style:{gap:"8px"},children:[E,M]}):P]})};var R=i(31563),O=i(10081);let F=()=>(0,l.jsx)(u.ZP,{className:"w-full mt-[8px]",style:{borderBottomColor:"var(--color-Line)",borderBottomStyle:"solid",borderBottomWidth:"1px"}}),H=({className:e,children:t})=>(0,l.jsx)(u.ZP,{className:m()("grid gap-[4px]",e),style:{gridTemplateColumns:"repeat(10,20px)",gridTemplateRows:"auto"},children:t}),Z=({currentRgbString:e,colors:t,onChangeColor:i,className:r})=>(0,l.jsx)(H,{className:r,children:t.map((t,r)=>(0,l.jsx)(A,{color:t,onClick:()=>i(t),isSelected:e===t},r))}),U=({currentRgbString:e,colors:t,onChangeColor:i,onClickAddButton:r,onRemoveColor:s})=>{let[a,o]=(0,n.useState)(-1),{getI18n:d}=(0,b.K_)();return(0,l.jsxs)(H,{className:"py-[10px] gap-[8px] flex-wrap",children:[t.map((t,r)=>(0,l.jsx)(A,{color:t,onClick:()=>i(t),isSelected:e===t,enableContextMenu:!0,contextMenuProps:{onClickAway:()=>{a===r&&o(-1)},onContextMenu:e=>{e.stopPropagation(),e.preventDefault(),o(r)},onRemoveColor:()=>{a===r&&(o(-1),s(t,r))},showMenu:a===r}},r)),20===t.length?null:(0,l.jsx)(R.Z,{enablePortal:!0,useReactPopper:!0,arrow:!0,bubbleClassName:"",tooltips:d("color-picker-add-color",{defaultValue:"Add Custom Color"}),children:(0,l.jsx)(u.ZP,{className:"w-[20px] flex items-center justify-center cursor-pointer h-[20px] hover:bg-Input rounded-[2px] overflow-hidden",children:(0,l.jsx)(O.Z,{className:"w-[16px] h-[16px] text-IconNormal",onClick:r})})})]})},W=({color:e,onChangeColor:t,onChangeAlpha:i,customizedColors:r,onClickAddCustomizedColor:s,onClickRemoveCustomizedColor:a})=>{let o=(0,n.useCallback)(e=>t(e),[t]),c=(0,n.useCallback)(e=>i(+(.01*Math.round(e)).toFixed(2)),[i]),h=(0,n.useMemo)(()=>{try{return(0,d.Z)(e)}catch(e){return(0,d.Z)("rgba(0,0,0,1)")}},[e]),[g,m]=(0,n.useMemo)(()=>[h.alpha(0).css(),h.alpha(1).css()],[h]),p=(0,n.useMemo)(()=>h.alpha(),[h]);return(0,l.jsxs)(u.ZP,{className:"flex flex-col bg-[--color-CardBg]",children:[(0,l.jsx)(Z,{className:"mb-[4px]",currentRgbString:m,colors:M,onChangeColor:o}),(0,l.jsx)(Z,{className:"mb-[10px]",currentRgbString:m,colors:D,onChangeColor:o}),(0,l.jsx)(Z,{currentRgbString:m,colors:V,onChangeColor:o}),(0,l.jsx)(F,{}),(0,l.jsx)(U,{currentRgbString:m,colors:r,onChangeColor:o,onClickAddButton:s,onRemoveColor:a}),(0,l.jsx)(f.Z,{max:100,value:100*p,onChange:c,className:"h-full [&_.bn-slider-track]:invisible",style:{margin:0,background:`linear-gradient(to right, ${g}, ${m})`,borderRadius:"12px"}})]})};(s=o||(o={}))[s.Default=0]="Default",s[s.Custom=1]="Custom";let $=({color:e="rgba(255,255,255,0)",candlestickInstance:t,onChange:i=h()})=>{let[r,s]=(0,n.useState)(e),[o,c]=(0,n.useState)(a.Add),[g,p]=(0,n.useState)(0),[x,f]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=t.settingStore,i=({key:t,value:i,type:r})=>{"load"===r&&f(e.getValue("@customColors")),"@customColors"===t&&f(i)};return e.subscribeValueChanged(i),()=>{e.unsubscribeValueChanged(i)}},[t]);let b=(0,n.useCallback)(()=>{p(0)},[p]),y=(0,n.useCallback)(e=>{let i=t.settingStore,r=[...i.getValue("@customColors")||[],e];i.setValue("@customColors",r),p(0)},[t]),v=(0,n.useCallback)(()=>{p(0)},[p]),C=(0,n.useCallback)(()=>{c(a.Edit),p(1)},[c,p]),w=(0,n.useCallback)(()=>{c(a.Add),p(1)},[c,p]),S=(0,n.useCallback)((e,i)=>{let r=t.settingStore,s=(r.getValue("@customColors")||[]).filter((e,t)=>i!==t);r.setValue("@customColors",s)},[t]),T=(0,n.useCallback)(e=>{s(t=>{try{let r=(0,d.Z)(t).alpha(),s=(0,d.Z)(e).alpha(r).css();return i(s),s}catch(e){return t}})},[i]),A=(0,n.useCallback)(e=>{s(t=>{try{let r=(0,d.Z)(t).alpha(e).css();return i(r),r}catch(e){return t}})},[i]);return(0,l.jsx)(u.ZP,{className:m()("bg-CardBg w-[256px] min-h-[287px] p-[8px]"),onClick:e=>e.stopPropagation(),children:1===g?(0,l.jsx)(j,{color:r,mode:o,onChangeColor:T,onChangeAlpha:A,onClickConfirm:()=>setTimeout(b,0),onClickCancel:()=>setTimeout(v,0),onClickAdd:e=>setTimeout(()=>y(e),0)}):(0,l.jsx)(W,{color:r,customizedColors:x,onChangeColor:T,onChangeAlpha:A,onClickCustomize:C,onClickAddCustomizedColor:()=>setTimeout(w,0),onClickRemoveCustomizedColor:S})})}},77047:function(e,t,i){i.d(t,{TO:()=>y,oC:()=>b,yO:()=>f});var r=i(52322),s=i(87363),a=i(27722),o=i(51445),l=i(39326),n=i(12103),d=i(63541),c=i(604),h=i(89814),u=i(96191),g=i(93454);let m="calc(100%)",p="-10px",x=({disabled:e,children:t,subChildren:i,subChildrenWrapperWidth:o,onClick:l,...n})=>{let d=(0,s.useRef)(null),[c,h]=(0,s.useState)({left:m,top:p}),[u,x]=(0,s.useState)(!1),f=(0,s.useCallback)(e=>{e.stopPropagation(),l?.(e)},[l]),b=(0,s.useCallback)(()=>x(!0),[]),y=(0,s.useCallback)(()=>{x(!1),h({left:m,top:p})},[]);return(0,s.useEffect)(()=>{if(!u)return;let e=d.current?.getBoundingClientRect();if(!e)return;let t={w:window.innerWidth,h:window.innerHeight},i=e.x+e.width<t.w?{left:m}:{right:m},r=e.y+e.height<t.h?{top:p}:{bottom:p};h({...i,...r})},[u]),(0,r.jsxs)(a.ZP,{...n,onClick:f,onMouseEnter:b,onMouseLeave:y,className:"relative grid grid-rows-[54px] px-[15px] md:grid-rows-[38px] md:px-[10px] items-center cursor-pointer gap-[--space-2xs] hover:bg-[--color-Input]",children:[t,i&&u?(0,r.jsx)(g.X,{ref:d,style:{position:"absolute",...c},wrapperWidth:o,children:i}):null]})},f=({children:e,icon:t,squishIcon:i=!1,squishArrow:s=!1,onClick:o,subChildren:l,subChildrenWrapperWidth:n})=>(0,r.jsxs)(x,{style:{gridTemplateColumns:"auto 1fr auto"},subChildren:l,subChildrenWrapperWidth:n,onClick:o,children:[i?null:(0,r.jsx)(a.ZP,{className:"w-[20px] h-[20px]",children:t?(0,r.jsx)(t,{className:"w-full h-full text-[--color-IconNormal]"}):null}),(0,r.jsx)(a.ZP,{className:"typography-body3 text-[--color-PrimaryText]",children:e}),s?null:(0,r.jsx)(a.ZP,{className:"w-[16px] h-[16px]",children:l?(0,r.jsx)(d.Z,{className:"w-full h-full text-[--color-IconNormal]"}):null})]}),b=({children:e,subChildren:t,subChildrenWrapperWidth:i,checked:n,disabled:g,onClick:m,closeLevel1:p,totalLevel1:f=0})=>{let{isMobile:b}=(0,u.F)(),[y,v]=(0,s.useState)(!1),C=!!t,w=(0,s.useCallback)(e=>{if(!g){if(b&&C)return v(!0);m?.(e)}},[g,b,C,m]),S=(0,s.useCallback)(()=>v(!1),[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x,{style:{gridTemplateColumns:"1fr auto"},subChildren:t,subChildrenWrapperWidth:i,onClick:w,children:[(0,r.jsx)(o.Z,{sz:"lg",value:"",checked:n,disabled:g,children:e}),(0,r.jsx)(a.ZP,{className:"w-[16px] h-[16px]",children:t?(0,r.jsx)(d.Z,{className:"w-full h-full text-[--color-IconNormal]"}):null})]}),b&&(0,r.jsx)(l.Z,{visible:y,direction:"bottom",onClose:S,enablePortal:!0,enableScrollSpace:!1,children:(0,r.jsxs)(a.ZP,{style:{minHeight:(f+1)*54},className:"mt-[16px]",children:[(0,r.jsxs)(a.ZP,{className:"flex items-center justify-between py-[14px] px-[15px]",children:[(0,r.jsx)(c.Z,{className:"text-[20px] text-PrimaryText",onClick:S}),(0,r.jsx)(a.ZP,{className:"t-headline4",children:e}),(0,r.jsx)(h.Z,{className:"text-[20px] cursor-pointer text-IconNormal",onClick:()=>{S(),p?.()}})]}),t]})})]})},y=({children:e,onClick:t,checked:i})=>(0,r.jsxs)(x,{style:{gridTemplateColumns:"1fr auto"},onClick:t,children:[(0,r.jsx)(a.ZP,{className:"typography-body3 text-[--color-PrimaryText]",children:e}),(0,r.jsx)(n.Z,{size:"small",checked:i,defaultChecked:i})]})},93454:function(e,t,i){i.d(t,{X:()=>o});var r=i(52322),s=i(87363),a=i(27722);let o=(0,s.forwardRef)(({children:e,wrapperWidth:t="max-content",...i},s)=>(0,r.jsx)(a.ZP,{...i,style:{boxShadow:"var(--shadow-shadow2)",zIndex:"var(--zindex-dropdown)",...i.style,width:t},className:"flex flex-col rounded-[12px] bg-[--color-CardBg] py-[10px]",ref:s,children:e}))},66557:function(e,t,i){i.d(t,{g:()=>P});var r=i(52322),s=i(87363),a=i(77047),o=i(98064),l=i(43061),n=i(24084);let d=({children:e,feature:t,candlestick:i})=>{let o=(0,n.JI)({candlestick:i,feature:t}),l=(0,s.useCallback)(()=>i?.toggleFeature(t),[i,t]);return(0,r.jsx)(a.TO,{onClick:l,checked:o,children:e})};var c=i(96191);let h=({candlestick:e,percentageScale:t,logarithmicScale:i,invertedScale:h,closeLevel1:u,totalLevel1:g})=>{let{getI18n:m}=(0,o.K_)(),{isMobile:p}=(0,c.F)(),x=(0,s.useMemo)(()=>m("contextMenu-scale",{defaultValue:"Scale"}),[m]),f=(0,s.useMemo)(()=>m("contextMenu-precentageView",{defaultValue:"Percentage View"}),[m]),b=(0,s.useMemo)(()=>m("contextMenu-logarithmicView",{defaultValue:"Logarithmic View"}),[m]),y=(0,s.useMemo)(()=>m("contextMenu-invertedView",{defaultValue:"Inverted View"}),[m]),{checked:v}=(0,n.ou)({candlestick:e,features:[l.AN.PercentageScale,l.AN.LogarithmicScale,l.AN.InvertedScale]}),C=(0,s.useCallback)(()=>{e&&(e.getFeatureToggleState(l.AN.PercentageScale)&&e.toggleFeature(l.AN.PercentageScale),e.getFeatureToggleState(l.AN.LogarithmicScale)&&e.toggleFeature(l.AN.LogarithmicScale),e.getFeatureToggleState(l.AN.InvertedScale)&&e.toggleFeature(l.AN.InvertedScale))},[e]);return t.visible||i.visible||h.visible?(0,r.jsx)(a.oC,{disabled:!v&&!p,checked:v,onClick:C,closeLevel1:u,totalLevel1:g,subChildren:(0,r.jsxs)(r.Fragment,{children:[t.visible?(0,r.jsx)(d,{candlestick:e,feature:l.AN.PercentageScale,children:f}):null,i.visible?(0,r.jsx)(d,{candlestick:e,feature:l.AN.LogarithmicScale,children:b}):null,h.visible?(0,r.jsx)(d,{candlestick:e,feature:l.AN.InvertedScale,children:y}):null]}),children:x}):null},u=({candlestick:e,marketPriceLine:t,countdown:i,askBid:c,closeLevel1:h,totalLevel1:u})=>{let{getI18n:g}=(0,o.K_)(),m=(0,s.useMemo)(()=>g("contextMenu-priceLineRaw",{defaultValue:"Price Line"}),[g]),p=(0,s.useMemo)(()=>g("contextMenu-priceLine",{defaultValue:"Market Price Line"}),[g]),x=(0,s.useMemo)(()=>g("contextMenu-countdown",{defaultValue:"Count Down"}),[g]),f=(0,s.useMemo)(()=>g("contextMenu-bidAndAskPrice",{defaultValue:"Bid & Ask Price"}),[g]),{checked:b}=(0,n.ou)({candlestick:e,features:[l.AN.Countdown,l.AN.PriceLine,l.AN.AskBid]}),y=(0,s.useCallback)(()=>{e&&(b?(e.getFeatureToggleState(l.AN.PriceLine)&&e.toggleFeature(l.AN.PriceLine),e.getFeatureToggleState(l.AN.Countdown)&&e.toggleFeature(l.AN.Countdown),e.getFeatureToggleState(l.AN.AskBid)&&e.toggleFeature(l.AN.AskBid)):(t.visible&&e.toggleFeature(l.AN.PriceLine),i.visible&&e.toggleFeature(l.AN.Countdown),c.visible&&e.toggleFeature(l.AN.AskBid)))},[c.visible,e,b,i.visible,t.visible]);return t.visible||i.visible||c.visible?(0,r.jsx)(a.oC,{checked:b,onClick:y,closeLevel1:h,totalLevel1:u,subChildren:(0,r.jsxs)(r.Fragment,{children:[t.visible?(0,r.jsx)(d,{candlestick:e,feature:l.AN.PriceLine,children:p}):null,i.visible?(0,r.jsx)(d,{candlestick:e,feature:l.AN.Countdown,children:x}):null,c.visible?(0,r.jsx)(d,{candlestick:e,feature:l.AN.AskBid,children:f}):null]}),children:m}):null},g=({candlestick:e,floatingWindow:t,plusButton:i,closeLevel1:c,totalLevel1:h})=>{let{getI18n:u}=(0,o.K_)(),g=(0,s.useMemo)(()=>u("contextMenu-quickOrder",{defaultValue:"Quick Order"}),[u]),m=(0,s.useMemo)(()=>u("contextMenu-floatingWindow",{defaultValue:"Floating Window"}),[u]),p=(0,s.useMemo)(()=>u("contextMenu-plusButton",{defaultValue:"Plus Button"}),[u]),x=(0,n.JI)({candlestick:e,feature:l.AN.ChartTrading}),f=t.visible&&t.toggled,b=(0,s.useMemo)(()=>t.visible&&f||i.visible&&x,[x,t.visible,f,i.visible]),y=(0,s.useCallback)(()=>{b?(t.visible&&t.onToggled({toggled:!1,source:"parent"}),i.visible&&e?.getFeatureToggleState(l.AN.ChartTrading)&&e.toggleFeature(l.AN.ChartTrading)):(t.visible&&t.onToggled({toggled:!0,source:"parent"}),i.visible&&e?.toggleFeature(l.AN.ChartTrading))},[e,b,t,i.visible]);return t.visible||i.visible?(0,r.jsx)(a.oC,{checked:b,onClick:y,closeLevel1:c,totalLevel1:h,subChildren:(0,r.jsxs)(r.Fragment,{children:[t.visible&&(0,r.jsx)(a.TO,{onClick:()=>t.visible&&t.onToggled?.({toggled:f,source:"self"}),checked:f,children:m}),i.visible&&(0,r.jsx)(d,{candlestick:e,feature:l.AN.ChartTrading,children:p})]}),children:g}):null},m=({children:e,feature:t,candlestick:i,onToggled:o})=>{let l=(0,n.JI)({candlestick:i,feature:t}),d=(0,s.useCallback)(()=>{i?.toggleFeature(t),o?.()},[i,t,o]);return(0,r.jsx)(a.oC,{onClick:d,checked:l,children:e})},p=({candlestick:e,visible:t,onToggled:i})=>{let{getI18n:a}=(0,o.K_)(),n=(0,s.useMemo)(()=>a("contextMenu-informationMines",{defaultValue:"Spotlight"}),[a]);return t?(0,r.jsx)(m,{candlestick:e,feature:l.AN.InformationMines,onToggled:i,children:n}):null};var x=i(31563),f=i(27722);let b=({children:e,tooltip:t})=>{let{isMobile:i}=(0,c.F)(),s=(0,r.jsx)(x.Z,{enablePortal:!i,useReactPopper:!0,arrow:!0,tooltips:t,children:(0,r.jsx)(f.ZP,{className:"typography-body3 underline decoration-dotted decoration-[--color-TertiaryText] underline-offset-[5px]",children:e})});return i?(0,r.jsx)(f.ZP,{onClick:e=>e.stopPropagation(),children:s}):s},y=({children:e,isActive:t=!1,onClick:i})=>{let a=(0,s.useMemo)(()=>["w-full","h-full","flex","items-center","justify-center","rounded-[6px]",t?"bg-[--color-DisableText]":"bg-[--color-Line]","hover:opacity-80","text-[--color-PrimaryText]","typography-subtitle3","cursor-pointer"].join(" "),[t]);return(0,r.jsx)(f.ZP,{className:a,onClick:i,children:e})},v=({items:e,selected:t,onChange:i})=>(0,r.jsx)(f.ZP,{className:"flex flex-row gap-[4px] h-[24px] px-[10px] mb-[10px]",children:e.map(({value:e,text:s},a)=>(0,r.jsx)(y,{isActive:e===t,onClick:t=>{t.stopPropagation(),i(e)},children:s},a))}),C=({tooltip:e,updatedOn:t,buy:i,sell:l,closeLevel1:n,totalLevel1:d})=>{let{getI18n:c}=(0,o.K_)(),h=(0,s.useMemo)(()=>c("contextMenu-avergePrice",{defaultValue:"Average Price"}),[c]),u=(0,s.useMemo)(()=>e||`${c("contextMenu-averagePrice-tooltip",{defaultValue:'Based on your "selected time period," the average Buy/Sell price of orders will be displayed on the corresponding Spot/Margin K-line chart. For more data, please go to "Trade Analysis." Data updated on:'})} ${t}`,[e,c,t]),g=(0,s.useMemo)(()=>c("contextMenu-buyAveragePrice",{defaultValue:"Buy Average Price"}),[c]),m=(0,s.useMemo)(()=>c("contextMenu-sellAveragePrice",{defaultValue:"Sell Average Price"}),[c]),p=i.visible&&i.toggled,x=l.visible&&l.toggled,f=(0,s.useMemo)(()=>p||x,[p,x]),y=(0,s.useCallback)(()=>{f?(i.visible&&i.onToggled?.({toggled:!1,source:"parent"}),l.visible&&l.onToggled?.({toggled:!1,source:"parent"})):(i.visible&&i.onToggled?.({toggled:!0,source:"parent"}),l.visible&&l.onToggled?.({toggled:!0,source:"parent"}))},[i,f,l]);return i.visible||l.visible?(0,r.jsx)(a.oC,{checked:f,onClick:y,closeLevel1:n,totalLevel1:d,subChildrenWrapperWidth:"235px",subChildren:(0,r.jsxs)(r.Fragment,{children:[i.visible?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.TO,{onClick:()=>i.visible&&i.onToggled({toggled:p,source:"self"}),checked:p,children:g}),p&&(0,r.jsx)(v,{items:i.items,selected:i.selected,onChange:i.onPeriodChanged})]}):null,l.visible?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.TO,{onClick:()=>l.visible&&l.onToggled({toggled:x,source:"self"}),checked:x,children:m}),x&&(0,r.jsx)(v,{items:l.items,selected:l.selected,onChange:l.onPeriodChanged})]}):null]}),children:(0,r.jsx)(b,{tooltip:u,children:h})}):null},w=e=>{let{getI18n:t}=(0,o.K_)(),i=(0,s.useMemo)(()=>t("contextMenu-openOrders",{defaultValue:"Open Orders"}),[t]);return e.visible?(0,r.jsx)(a.oC,{onClick:()=>e.onToggled?.({toggled:e.toggled,source:"self"}),checked:e.toggled,children:i}):null},S=e=>{let{getI18n:t}=(0,o.K_)(),i=(0,s.useMemo)(()=>t("contextMenu-positions",{defaultValue:"Positions"}),[t]);return e.visible?(0,r.jsx)(a.oC,{onClick:()=>e.onToggled?.({toggled:e.toggled,source:"self"}),checked:e.toggled,children:i}):null},T=e=>{let{getI18n:t}=(0,o.K_)(),i=(0,s.useMemo)(()=>t("contextMenu-orderHistory",{defaultValue:"Order History"}),[t]);return e.visible?(0,r.jsx)(a.oC,{onClick:()=>e.onToggled?.({toggled:e.toggled,source:"self"}),checked:e.toggled,children:(0,r.jsx)(b,{tooltip:e.tooltip,children:i})}):null},A=e=>{let{getI18n:t}=(0,o.K_)(),i=(0,s.useMemo)(()=>t("contextMenu-price-alert",{defaultValue:"Price Alert"}),[t]),l=(0,s.useMemo)(()=>t("contextMenu-price-alert-tooltip",{defaultValue:"Price alerts created on App will be displayed on chart. Supported Alerts: Price Reaches, Price Rises Above, Price Drops To"}),[t]);return e.visible?(0,r.jsx)(a.oC,{onClick:()=>e.onToggled?.({toggled:e.toggled,source:"self"}),checked:e.toggled,children:(0,r.jsx)(b,{tooltip:l,children:i})}):null},_=e=>{let{getI18n:t}=(0,o.K_)(),i=(0,s.useMemo)(()=>t("contextMenu-breakevenPrice",{defaultValue:"Breakeven Price"}),[t]);return e.visible?(0,r.jsx)(a.oC,{onClick:()=>e.onToggled?.({toggled:e.toggled,source:"self"}),checked:e.toggled,children:i}):null},L=e=>{let{getI18n:t}=(0,o.K_)(),i=(0,s.useMemo)(()=>t("contextMenu-costPrice",{defaultValue:"Cost Price"}),[t]),l=(0,s.useMemo)(()=>t("contextMenu-costPrice-tooltip",{defaultValue:"The Cost Price = (Cost Price before last purchase * Amount + Price of the last purchase * Amount) / Balance after the last purchase"}),[t]);return e.visible?(0,r.jsx)(a.oC,{onClick:()=>e.onToggled?.({toggled:e.toggled,source:"self"}),checked:e.toggled,children:(0,r.jsx)(b,{tooltip:l,children:i})}):null},k=e=>{let{getI18n:t}=(0,o.K_)(),i=(0,s.useMemo)(()=>t("contextMenu-liquidationPrice",{defaultValue:"Liquidation Price"}),[t]);return e.visible?(0,r.jsx)(a.oC,{onClick:()=>e.onToggled?.({toggled:e.toggled,source:"self"}),checked:e.toggled,children:i}):null},I=e=>{let{getI18n:t}=(0,o.K_)(),i=(0,s.useMemo)(()=>t("contextMenu-botPreview",{defaultValue:"Bot Preview"}),[t]);return e.visible?(0,r.jsx)(a.oC,{onClick:()=>e.onToggled?.({toggled:e.toggled,source:"self"}),checked:e.toggled,children:i}):null},P=({candlestick:e,quickOrder:t,scale:i,priceLine:a,averagePrice:o,openOrders:l,positions:n,orderHistory:d,priceAlert:c,breakevenPrice:m,costPrice:x,liquidationPrice:f,botPreview:b,spotlight:y})=>(0,s.useMemo)(()=>[t.floatingWindow.visible||t.plusButton.visible?(0,r.jsx)(g,{candlestick:e,...t},"QuickOrder"):null,l.visible?(0,r.jsx)(w,{...l},"OpenOrders"):null,n.visible?(0,r.jsx)(S,{...n},"Positions"):null,d.visible?(0,r.jsx)(T,{...d},"OrderHistory"):null,b.visible?(0,r.jsx)(I,{...b},"BotPreview"):null,m.visible?(0,r.jsx)(_,{...m},"BreakevenPrice"):null,f.visible?(0,r.jsx)(k,{...f},"LiquidationPrice"):null,o.buy.visible||o.sell.visible?(0,r.jsx)(C,{...o},"AveragePrice"):null,c.visible?(0,r.jsx)(A,{...c},"PriceAlert"):null,a.askBid.visible||a.countdown.visible||a.marketPriceLine.visible?(0,r.jsx)(u,{candlestick:e,...a},"PriceLine"):null,x?.visible?(0,r.jsx)(L,{...x},"CostPrice"):null,i.invertedScale.visible||i.logarithmicScale.visible||i.percentageScale.visible?(0,r.jsx)(h,{candlestick:e,...i},"Scale"):null,y.visible?(0,r.jsx)(p,{candlestick:e,...y},"Spotlight"):null],[o,b,x,m,f,e,l,d,n,c,a,t,i,y])},24084:function(e,t,i){i.d(t,{JI:()=>d,av:()=>n,ou:()=>l});var r=i(87363),s=i(97351),a=i(2839),o=i(81669);let l=({candlestick:e,features:t})=>{let i=(0,s.Z)();(0,r.useEffect)(()=>e?(e.on("settingsLoaded",i),e.on("featureToggled",i),()=>{e.off("settingsLoaded",i),e.off("featureToggled",i)}):()=>null,[e,i]);let a=(0,r.useCallback)(()=>t.reduce((t,i)=>t||e?.getFeatureToggleState(i)||!1,!1),[e,t]),o=(0,r.useCallback)(()=>t.map(t=>e?.getFeatureToggleState(t)||!1),[e,t]);return{checked:a(),results:o()}},n=({candlestick:e})=>{let[t,i]=(0,r.useState)(0),[s,l]=(0,r.useState)(""),[n,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=({panel:e,price:t,formattedPrice:r})=>{if(!(e instanceof o.Z))return;let s=e.panelType===a.wh.BASE;d(e.panelType===a.wh.BASE),s&&t&&r&&(i(t),l(r))};return e.on("contextmenu",t),()=>e.off("contextmenu",t)},[e]),{price:t,formattedPrice:s,isBasePanel:n}},d=({candlestick:e,feature:t})=>{let i=(0,s.Z)();return(0,r.useEffect)(()=>e?(e.on("settingsLoaded",i),e.on("featureToggled",i),()=>{e.off("settingsLoaded",i),e.off("featureToggled",i)}):()=>null,[e,i]),e?.getFeatureToggleState(t)||!1}},78779:function(e,t,i){i.r(t),i.d(t,{default:()=>ea});var r,s,a=i(52322),o=i(87363),l=i(97209),n=i(12436),d=i.n(n),c=i(2839),h=i(98064),u=i(49129),g=i(26888),m=i(92920),p=i(33156),x=i(35777),f=i(60425),b=i(14909),y=i(23690),v=i(3652),C=i(94099),w=i(60024),S=i(93828),T=i(1417),A=i(88750),_=i(604),L=i(80441),k=i(2338),I=i(62968),P=i(3615),E=i(17377),B=i(5376),N=i(36831),M=i(94642),D=i(71148),V=i(45546),j=i(58792),R=i(72580);let O=e=>(0,a.jsx)(R.Z,{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.55265 11.2502C7.08454 12.2356 6.08016 12.9168 4.91667 12.9168C3.30584 12.9168 2 11.611 2 10.0002C2 8.38933 3.30584 7.0835 4.91667 7.0835C6.08016 7.0835 7.08454 7.76477 7.55265 8.75016H12.7807C13.2488 7.76477 14.2532 7.0835 15.4167 7.0835C17.0275 7.0835 18.3333 8.38933 18.3333 10.0002C18.3333 11.611 17.0275 12.9168 15.4167 12.9168C14.2532 12.9168 13.2488 12.2356 12.7807 11.2502H7.55265Z",fill:"currentColor"})}),F=e=>(0,a.jsxs)(R.Z,{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("rect",{x:"6.22754",y:"15.6206",width:"2.08333",height:"16.5519",transform:"rotate(-135 6.22754 15.6206)",fill:"currentColor"}),(0,a.jsx)("circle",{cx:"12.1824",cy:"8.19259",r:"2.91667",transform:"rotate(-135 12.1824 8.19259)",fill:"currentColor"}),(0,a.jsx)("circle",{cx:"5.70068",cy:"14.6745",r:"2.91667",transform:"rotate(-135 5.70068 14.6745)",fill:"currentColor"})]});var H=i(43061);(r=s||(s={}))[r.MENU_CURSOR=0]="MENU_CURSOR",r[r.MENU_TOOLS=1]="MENU_TOOLS",r[r.MENU_CONTROL=2]="MENU_CONTROL",r[r.MENU_HANDLER=3]="MENU_HANDLER",r[r.MENU_TOOLS_LINE=4]="MENU_TOOLS_LINE",r[r.MENU_TOOLS_TRACK=5]="MENU_TOOLS_TRACK",r[r.MENU_TOOLS_ARROW=6]="MENU_TOOLS_ARROW",r[r.MENU_TOOLS_TEXT=7]="MENU_TOOLS_TEXT";let Z=[{key:0,children:[{key:c.Us.DefaultCursor,icon:()=>g.Z,i18nKey:H.Wi.DRAW_DEFAULT_CURSOR,i18n:"Cursor",multiSelect:!1},{key:c.Us.CrossHairCursor,icon:()=>m.Z,i18nKey:H.Wi.DRAW_CROSS_CURSOR,i18n:"Cross Cursor",multiSelect:!1}]},{key:1,children:[{key:4,activeKey:c.Us.TrendLine,children:[{key:c.Us.TrendLine,icon:()=>p.Z,i18nKey:H.Wi.DRAW_TREND_LINE,i18n:"Trend Line",multiSelect:!1},{key:c.Us.ExtendTrendLine,icon:()=>x.Z,i18nKey:H.Wi.DRAW_EX_TREND_LINE,i18n:"Extended Trend Line",multiSelect:!1},{key:c.Us.HorizontalLine,icon:()=>f.Z,i18nKey:H.Wi.DRAW_HORIZONTAL_LINE,i18n:"Horizontal Line",multiSelect:!1},{key:c.Us.HorizontalExtendedLine,icon:()=>O,i18nKey:H.Wi.DRAW_HORIZONTAL_EXTENDED_LINE,i18n:"Extended Horizontal Line",multiSelect:!1},{key:c.Us.VerticalLine,icon:()=>b.Z,i18nKey:H.Wi.DRAW_VERTICAL_LINE,i18n:"Vertical Line",multiSelect:!1},{key:c.Us.CrossLine,icon:()=>y.Z,i18nKey:H.Wi.DRAW_CROSS_LINE,i18n:"Crose Line",multiSelect:!1},{key:c.Us.ParallelLine,icon:()=>v.Z,i18nKey:H.Wi.DRAW_PARRLLEL_LINE,i18n:"Parallel Line",multiSelect:!1},{key:c.Us.RayLine,icon:()=>F,i18nKey:H.Wi.DRAW_RAY_LINE,i18n:"Ray",multiSelect:!1},{key:c.Us.PriceLine,icon:()=>C.Z,i18nKey:H.Wi.DRAW_PRICE_LINE,i18n:"Price Line",multiSelect:!1},{key:c.Us.ArrowLine,icon:()=>w.Z,i18nKey:H.Wi.DRAW_ARROW_LINE,i18n:"Arrow Line",multiSelect:!1},{key:c.Us.InfoLine,icon:()=>S.Z,i18nKey:H.Wi.DRAW_INFO_LINE,i18n:"Info Line",multiSelect:!1}]},{key:6,activeKey:c.Us.RightArrow,children:[{key:c.Us.UpArrow,icon:()=>T.Z,i18nKey:H.Wi.DRAW_UP_ARROW,i18n:"Up Arrow",multiSelect:!1},{key:c.Us.DownArrow,icon:()=>A.Z,i18nKey:H.Wi.DRAW_DOWN_ARROW,i18n:"Down Arrow",multiSelect:!1},{key:c.Us.LeftArrow,icon:()=>_.Z,i18nKey:H.Wi.DRAW_LEFT_ARROW,i18n:"Left Arrow",multiSelect:!1},{key:c.Us.RightArrow,icon:()=>L.Z,i18nKey:H.Wi.DRAW_RIGHT_ARROW,i18n:"Right Arrow",multiSelect:!1}]},{key:c.Us.FibonacciLine,icon:()=>k.Z,i18nKey:H.Wi.DRAW_FIB_LINE,i18n:"Fibonacci Retracement",multiSelect:!1},{key:c.Us.Rectangle,icon:()=>I.Z,i18nKey:H.Wi.DRAW_RECTANGLE,i18n:"Rectangle",multiSelect:!1},{key:c.Us.Text,icon:()=>P.Z,i18nKey:H.Wi.DRAW_TEXT,i18n:"Text",multiSelect:!1}]},{key:2,children:[{key:c.Us.Magnet,icon:()=>E.Z,i18nKey:H.Wi.DRAW_MAGNET,i18n:"Magnet",multiSelect:!0},{key:c.Us.KeepDrawing,icon:()=>B.Z,i18nKey:H.Wi.DRAW_CONTINUE,i18n:"Keep Drawing",multiSelect:!0},{key:c.Us.LockDraw,icon:e=>e?N.Z:M.Z,i18nKey:H.Wi.DRAW_LOCK,i18n:"Lock Drawing Tools",multiSelect:!0},{key:c.Us.ToggleVisible,icon:e=>e?D.Z:V.Z,i18nKey:H.Wi.DRAW_TOGGLE,i18n:"Hide All Drawings",multiSelect:!0}]},{key:3,children:[{key:c.Us.Delete,icon:()=>j.Z,i18nKey:H.Wi.DRAW_DELETE_ALL,i18n:"Delete All",multiSelect:!1}]}];var U=i(16709),W=i.n(U);let $=({children:e,isHiddenDrawPanel:t})=>(0,a.jsx)("div",{className:W()("absolute justify-center h-full z-10 bg-BasicBg transition-all border-solid border-0 border-r-[1px] border-r-Line",{"w-0":t,"w-[48px]":!t}),children:e});var z=i(46598),K=i(30617);let X="h-5 w-5 mx-auto text-IconNormal hover:text-PrimaryText",Y=({arrow:e,visible:t,onClick:i})=>(0,a.jsx)("div",{className:W()("flex kline-draw-panel_down absolute w-full text-center bg-BasicBg h-5 left-0 z-20 cursor-pointer",e,{"top-0":"up"===e,"bottom-0":"down"===e,"!hidden":!t}),onClick:i,children:"up"===e?(0,a.jsx)(z.Z,{className:X}):(0,a.jsx)(K.Z,{className:X})});var G=i(31563),q=i(63541),Q=i(25708);let J=({isHiddenDrawPanel:e,onClick:t})=>{let{getI18n:i}=(0,h.K_)(),r=(0,o.useMemo)(()=>i("show-drawings-panel",{defaultValue:"Show Drawings panel"}),[i]),s=(0,o.useMemo)(()=>W()("z-20 absolute bottom-[48px] transition-all",{"left-[2px]":e,"left-[42px]":!e}),[e]),l=(0,o.useMemo)(()=>e?q.Z:Q.Z,[e]),n=(0,o.useMemo)(()=>!e,[e]);return(0,a.jsx)(G.Z,{open:!n&&void 0,arrow:!0,useReactPopper:!0,bubbleClassName:"text-SecondaryBg bg-PrimaryText typography-caption1 opacity-95 rounded-[8px]",placement:"right",tooltips:r,className:s,disabled:n,children:(0,a.jsx)("div",{className:"flex items-center justify-center w-[12px] h-[32px] cursor-pointer rounded bg-BasicBg hover:bg-Line text-IconNormal hover:text-PrimaryText border-Line border-solid border-[1px]",onClick:t,children:(0,a.jsx)(l,{className:"min-w-[12px] h-[12px]"})})})},ee=({icon:e,isActive:t,onClick:i,tooltips:r})=>{let s=(0,o.useCallback)(e=>{i(e),e.nativeEvent.stopImmediatePropagation()},[i]),l=(0,o.useMemo)(()=>`h-[32px] w-[32px] p-[4px] cursor-pointer hover:text-PrimaryText ${t?"text-PrimaryText":"text-IconNormal"}`,[t]);return(0,a.jsx)(G.Z,{arrow:!0,enablePortal:!0,useReactPopper:!0,placement:"right",tooltips:r,className:l,children:(0,a.jsx)(e,{className:"w-[24px] h-[24px]",onClick:s})})};var et=i(87585),ei=i(79676);let er=({items:e})=>(0,a.jsx)("div",{className:"py-[10px] bg-CardBg",children:(0,a.jsx)("div",{className:"max-h-80 overflow-auto",children:e.map(({onClick:e,icon:t,text:i,active:r},s)=>(0,a.jsxs)("div",{className:"relative flex justify-between items-center h-[38px] min-w-[160px] px-[10px] hover:bg-Input cursor-pointer",onClick:e,children:[(0,a.jsxs)("div",{className:"flex flex-row gap-[5px] items-center",children:[(0,a.jsx)(t,{className:`h-[20px] w-[20px] ${r?"text-PrimaryText":"text-IconNormal"}`}),(0,a.jsx)("div",{className:`text-PrimaryText ${r?"typography-subtitle2":"typography-body3"}`,children:i})]}),(0,a.jsx)(ei.Z,{className:"text-PrimaryText w-4 h-full",style:{visibility:r?"visible":"hidden"}})]},s))})}),es=({items:e,onVisibleChange:t,toggled:i,children:r})=>{let s=(0,o.useMemo)(()=>i?Q.Z:q.Z,[i]);return(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[r,(0,a.jsx)(et.Z,{once:!0,enablePortal:!0,useReactPopper:!0,enableClickBubble:!0,offset:2,trigger:"click",placement:"right-start",className:"absolute w-[12px] h-full rounded-[4px] justify-center items-center hover:bg-CardBg text-IconNormal hover:text-PrimaryText cursor-pointer left-[calc(100%-5px)]",bubbleClassName:"border-Line border-solid border-[1px] rounded-xl !overflow-hidden",reactPopperProps:{offsetX:-15},onVisibleChange:t,overlay:(0,a.jsx)(er,{items:e}),children:(0,a.jsx)(s,{className:"h-3 w-3"})})]})},ea=(0,o.memo)(({candlestickInstance:e})=>{let{getI18n:t}=(0,h.K_)(),[i,r]=(0,o.useState)(!0),[n,g]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1),[x,f]=(0,o.useState)(""),[b,y]=(0,o.useState)(!1),v=(0,o.useRef)(null),C=(0,o.useMemo)(()=>t("delete-drawing","All drawings will be permanently deleted"),[t]),w=(0,o.useCallback)(()=>e.settingStore.getValue("@drawTool.currentAction"),[e]),[S,{updateValue:T,toggleValue:A,getValue:_}]=(0,h.OW)({onlyKey:w()}),L=(0,o.useCallback)(()=>r(e=>!e),[r]),k=(0,o.useCallback)(()=>{v?.current?.scrollBy({top:-60})},[v.current]),I=(0,o.useCallback)(()=>{v?.current?.scrollBy({top:60})},[v.current]),P=(0,h.fB)(()=>{let e=v.current,{lastElementChild:t}=e||{};if(e&&t){let{scrollTop:i,offsetHeight:r}=e,{offsetHeight:s,offsetTop:a}=t;g(i>0),p(i<a-r+s)}},10),E=(0,o.useCallback)((t,i)=>{i===s.MENU_CURSOR&&e.settingStore.setValue("@drawTool.currentAction",t),e.fire("clickDrawingTool",{data:t});let r=e.getEditor(),a=w();switch(i){case s.MENU_CURSOR:_(c.Us.ToggleVisible)&&e.toggleAnnotationsVisible(),T({onlyKey:t,[c.Us.ToggleVisible]:!1}),e.fire("unSelectAnnotation"),r.reset();break;case s.MENU_TOOLS:_(c.Us.ToggleVisible)&&e.toggleAnnotationsVisible(),_(c.Us.LockDraw)&&e.setAnnotationLockStatus(!1),T({onlyKey:t,[c.Us.ToggleVisible]:!1,[c.Us.LockDraw]:!1}),r.setCompleteDrawCallback(()=>{_(c.Us.KeepDrawing)||(T({onlyKey:a}),e.executeActionByType(a))}),e.selectAnnotation(void 0,t);break;case s.MENU_CONTROL:A(t),t===c.Us.ToggleVisible&&(T({onlyKey:a}),e.executeActionByType(a));break;case s.MENU_HANDLER:r.setCompleteDrawCallback(()=>{_(c.Us.KeepDrawing)||(T({onlyKey:a}),e.executeActionByType(a))})}t===c.Us.Delete?(y(!0),e.getEditor().clearSelectAnnotation(),e.unSelectAnnotation()):e.executeActionByType(t)},[e,w,_,T,A]),B=(0,o.useCallback)((e,t,i,r)=>{t.activeKey=i,E(i,r),e.nativeEvent.stopImmediatePropagation()},[E]);(0,o.useEffect)(()=>{let e=v.current;if(!e)return;let t=d()(()=>{let t=e.scrollTop<1,i=1>Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight);g(!t),p(!i)},250);e.addEventListener("scroll",t);let i=new l.Z(t);return i.observe(e),()=>{e.removeEventListener("scroll",t),i.disconnect()}},[v.current]),(0,o.useEffect)(()=>{e.getEditor().clearEvents()},[e]);let N=w();(0,o.useEffect)(()=>{T({onlyKey:N}),e.executeActionByType(N)},[N,e,T]);let M=(0,o.useMemo)(()=>Z.map(({key:e,children:i})=>(0,a.jsx)("div",{className:"flex flex-col border-Line border-solid border-0 border-b-[1px] last:border-b-0 py-[4px] gap-[4px]",children:i.map(i=>{let{children:r,activeKey:s,key:o}=i;if(r){let l=r.find(({key:e})=>e===s);return(0,a.jsx)(es,{items:r.map(({key:r,icon:a,i18n:o,i18nKey:l})=>({onClick:t=>B(t,i,r,e),icon:a(),text:t(l,{defaultValue:o})||"",active:s===r})),onVisibleChange:e=>f(e?o:""),toggled:x===o,children:l&&(0,a.jsx)(ee,{icon:l.icon(l.key===S.onlyKey),isActive:l.key===S.onlyKey,onClick:()=>E(l.key,e),tooltips:t(l.i18nKey,{defaultValue:l.i18n})})},o)}let{key:l,i18nKey:n,i18n:d,icon:c,multiSelect:h}=i,u=h?!!S[l]:l===S.onlyKey;return(0,a.jsx)(ee,{icon:c(u),isActive:u,onClick:()=>E(l,e),tooltips:t(n,{defaultValue:d})},l)})},e)),[S,t,x,B,E]),D=(0,o.useCallback)(()=>{y(!1)},[y]),V=(0,o.useCallback)(()=>{e.executeActionByType(c.Us.Delete),y(!1)},[e]);return(0,a.jsxs)("div",{className:"absolute h-full",children:[(0,a.jsxs)($,{isHiddenDrawPanel:i,children:[(0,a.jsx)(Y,{arrow:"up",visible:n,onClick:k}),(0,a.jsx)("div",{ref:v,className:"flex flex-col items-center bg-BasicBg absolute h-full w-full overflow-x-hidden overflow-y-auto scroll-smooth no-scrollbar",onScroll:P,children:M}),(0,a.jsx)(Y,{arrow:"down",visible:m,onClick:I}),(0,a.jsx)(u.Z,{visible:b,text:C,onCancel:D,onConfirm:V})]}),(0,a.jsx)(J,{isHiddenDrawPanel:i,onClick:L})]})})},14285:function(e,t,i){i.d(t,{Z:()=>m,b:()=>p});var r=i(87363),s=i(97351),a=i(99507),o=i(34291),l=i.n(o),n=i(98537),d=i.n(n),c=i(63226),h=i(37418);let u=e=>{try{return(0,a.Z)(e).css()}catch(t){return e}},g={candlestickInstance:void 0,modalVisible:!1,closeModal:l(),allIndicators:[],selectedIndicators:[],activeIndicatorId:c.OK.MA,setActiveIndicatorId:l(),onReset:l(),onSave:l(),updateValue:l(),updateValueNeedReload:l(),updateColor:l(),selectIndicator:l()},m=(0,r.createContext)(g),p=({candlestickInstance:e,onClose:t})=>{let i=(0,s.Z)(),[a,o]=(0,r.useState)(g.modalVisible),[l,n]=(0,r.useState)(g.activeIndicatorId),[c,m]=(0,r.useState)(g.allIndicators),[p,x]=(0,r.useState)(g.selectedIndicators);(0,r.useEffect)(()=>{let t=e.indicatorStore;return t.subscribeValueChanged(i),()=>t.unsubscribeValueChanged(i)},[e,i]),(0,r.useEffect)(()=>{let t=({id:e})=>{n(e),o(!0)},i=({data:e})=>m(e),r=({data:e})=>x(e.map(({id:e})=>e));return e.on("showIndicatorDialog",t),e.on("allIndicatorsChange",i),e.on("selectIndicatorsChange",r),m(e.getAllIndicators()),x(e.getSelectIndicators().map(({name:e})=>e)),()=>{e.off("showIndicatorDialog",t),e.off("allIndicatorsChange",i),e.off("selectIndicatorsChange",r)}},[e]);let f=(0,r.useCallback)(({id:t,name:i,isCustom:r,isMain:s=!1})=>{e&&(e.fire("indicatorAddedOrRemoved",{data:i}),e.hasIndicatorByName(t)?e.closeIndicatorByName(t):r?e.fire("customIndicatorClick",{data:{id:t,name:i,isMain:s}}):e.addIndicatorByName(t))},[e]),b=(0,r.useCallback)((t,i=!1)=>{e&&(i?e.updateIndicatorParams(t):(e.updateTitle(t),e.update()))},[e]),y=(0,r.useCallback)(()=>{let t=e.indicatorStore,r=t.getDefaultValue(l),s=t.getValue(l),a=d()({},r,{showSeries:s?.showSeries??r.showSeries});t.setValue(l,a),b(l,!0),i(),e?.fire("indicatorReset")},[e,l,b,i]),v=(0,r.useCallback)(()=>{t?.(p.join("_")),o(!1)},[t,p]),C=(0,r.useCallback)(()=>{v(),e?.fire("indicatorSaved")},[e,v]),w=(0,r.useCallback)(({id:t,key:i,value:r,needReload:s=!1})=>{e&&(e.indicatorStore.setValue(i,r),b(t,s))},[e,b]),S=(0,r.useCallback)(({id:e,key:t,value:i})=>{w({id:e,key:t,value:i,needReload:!0})},[w]),T=(0,r.useCallback)(({id:t,key:i,value:r,needReload:s=!1})=>{let a=e.indicatorStore,o=a.getValue(i);return"object"!=typeof o?void console.warn(`[candlestick] path to ${i} is not an object`,o):o?.type!=="color"?void console.warn(`[candlestick] ${i} is not a color type`,o):void(a.setValue(i,(0,h.LF)({value:r,pristine:u(o.value)===u(r)})),b(t,s))},[e,b]);return{candlestickInstance:e,modalVisible:a,allIndicators:c,activeIndicatorId:l,setActiveIndicatorId:n,onReset:y,onSave:C,updateValue:w,updateValueNeedReload:S,updateColor:T,closeModal:v,selectIndicator:f,selectedIndicators:p}}},49129:function(e,t,i){i.d(t,{Z:()=>d});var r=i(52322),s=i(87363),a=i(30060),o=i(81867),l=i(32680),n=i(98064);let d=({visible:e,text:t,onCancel:i,onConfirm:d})=>{let{getI18n:c}=(0,n.K_)(),h=(0,s.useMemo)(()=>c("color-picker-cancel",{defaultValue:"Cancel"}),[c]),u=(0,s.useMemo)(()=>c("color-picker-confirm",{defaultValue:"Confirm"}),[c]);return(0,r.jsxs)(a.ZP,{enablePortal:!0,visible:e,children:[(0,r.jsxs)(a.ZP.Content,{className:"flex flex-col items-center gap-[16px]",children:[(0,r.jsx)(l.Z,{className:"w-[96px] h-[96px]"}),(0,r.jsx)("div",{className:"typography-body3 text-PrimaryText text-center",children:t})]}),(0,r.jsxs)(a.ZP.Footer,{className:"p-[24px]",children:[(0,r.jsx)(o.Z,{variant:"secondary",className:"flex-1 cursor-pointer",onClick:i,children:h}),(0,r.jsx)(o.Z,{variant:"primary",className:"flex-1 cursor-pointer",onClick:d,children:u})]})]})}},23829:function(e,t,i){i.d(t,{Z:()=>h,l:()=>s});var r,s,a=i(62086),o=i(36844);let l=class{setShowRedDot(e){this.showRedDot=e}setState(e){this.state=e,this.updateState()}updateState(){if(this.normalIcon&&this.hoverIcon&&this.toggledIcon)switch(this.state){case"hover":this.icon.setImage(this.hoverIcon),this.redDot.setAttr("isVisible",!1);break;case"toggled":this.icon.setImage(this.toggledIcon),this.redDot.setAttr("isVisible",!1);break;default:this.icon.setImage(this.normalIcon),this.redDot.setAttr("isVisible",this.showRedDot)}}idle(){switch(this.state){case"hover":case"toggled":this.setState("idle")}}hover(e){return this.icon.isHover(e)?("idle"===this.state&&this.setState("hover"),!0):("hover"===this.state&&this.setState("idle"),!1)}toggle(e){if(this.icon.isHover(e)){switch(this.state){case"toggled":this.setState("hover");break;case"hover":this.setState("toggled")}return!0}switch(this.state){case"toggled":case"hover":this.setState("idle")}return!1}async setIcons({normalIconUrl:e,hoveredIconUrl:t,toggledIconUrl:i}){await this.setNormalIcon(e),await this.setHoverIcon(t),await this.setToggledIcon(i)}async setNormalIcon(e){let t=await (0,a.pk)({url:e});this.normalIcon=t,this.updateState()}async setHoverIcon(e){let t=await (0,a.pk)({url:e});this.hoverIcon=t,this.updateState()}async setToggledIcon(e){let t=await (0,a.pk)({url:e});this.toggledIcon=t,this.updateState()}constructor({normalIconUrl:e,hoveredIconUrl:t,toggledIconUrl:i,showRedDot:r}){this.icon=new o.Ee({width:22,height:22,isLoading:!0}),this.redDot=new o.Cd({width:3,height:3,fill:!0,fillStyle:"#FCD535",strokeStyle:"#FCD535",radius:4,isVisible:!1}),this.state="idle",this.normalIcon=null,this.hoverIcon=null,this.toggledIcon=null,this.setShowRedDot(r),this.setIcons({normalIconUrl:e,hoveredIconUrl:t,toggledIconUrl:i})}},n=({color:e})=>`
  <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 5C9.5 7.48528 7.48528 9.5 5 9.5C2.51472 9.5 0.5 7.48528 0.5 5C0.5 2.51472 2.51472 0.5 5 0.5C7.48528 0.5 9.5 2.51472 9.5 5ZM5.8837 4.99955L7.38652 6.50237L6.50264 7.38625L4.99982 5.88343L3.49741 7.38584L2.61353 6.50195L4.11593 4.99955L2.61355 3.49716L3.49744 2.61328L4.99982 4.11566L6.50261 2.61287L7.3865 3.49675L5.8837 4.99955Z" fill="${e}"/>
  </svg>
`,d={dark:{normal:n({color:"#5E6673"}),hovered:n({color:"#EAECEF"})},light:{normal:n({color:"#B7BDC6"}),hovered:n({color:"#202630"})}},c=class{setState(e){this.state=e,this.updateState()}updateState(){this.normalIcon&&this.hoveredIcon&&("hovered"===this.state?this.icon.setImage(this.hoveredIcon):this.icon.setImage(this.normalIcon))}idle(){"hovered"===this.state&&this.setState("idle")}hover(e){return this.icon.isHover(e)?("idle"===this.state&&this.setState("hovered"),!0):("hovered"===this.state&&this.setState("idle"),!1)}toggle(e){return this.updateState(),this.icon.isHover(e)}async setIcons({theme:e}={theme:"dark"}){await this.setNormalIcon(e),await this.setHoveredIcon(e)}async setNormalIcon(e){let t=await (0,a.ZA)(d[e].normal);this.normalIcon=t,this.updateState()}async setHoveredIcon(e){let t=await (0,a.ZA)(d[e].hovered);this.hoveredIcon=t,this.updateState()}constructor({theme:e}){this.state="idle",this.icon=new o.Ee({width:10,height:10,isLoading:!0,isVisible:!1}),this.normalIcon=null,this.hoveredIcon=null,this.setIcons({theme:e})}};(r=s||(s={})).Body="Body",r.Close="Close",r.None="None";let h=class{idle(){this.bodyIcon.idle(),this.closeIcon.idle(),this.closeIcon.icon.setAttr("isVisible",!1)}hover(e){let t=this.bodyIcon.hover(e),i=this.closeIcon.hover(e),r=t||i,s=!r&&this.bodyIcon.showRedDot;return this.bodyIcon.redDot.setAttr("isVisible",s),this.closeIcon.icon.setAttr("isVisible",r),t?"Body":i?"Close":"None"}toggle(e){let t=this.bodyIcon.toggle(e),i=this.closeIcon.toggle(e);return this.closeIcon.icon.setAttr("isVisible",t||i),i?"Close":t?"Body":"None"}isHover(e){return this.bodyIcon.icon.isHover(e)||this.closeIcon.icon.isHover(e)}getShapes(){return[this.closeIcon.icon,this.bodyIcon.redDot,this.bodyIcon.icon]}async setIcons({normalIconUrl:e,hoveredIconUrl:t,toggledIconUrl:i,theme:r}){await this.bodyIcon.setIcons({normalIconUrl:e,hoveredIconUrl:t,toggledIconUrl:i}),await this.closeIcon.setIcons({theme:r})}constructor({id:e,normalIconUrl:t,hoveredIconUrl:i,toggledIconUrl:r,showRedDot:s,theme:a}){this.id=e,this.bodyIcon=new l({normalIconUrl:t,hoveredIconUrl:i,toggledIconUrl:r,showRedDot:s}),this.closeIcon=new c({theme:a})}}},59626:function(e,t,i){i.d(t,{Z:()=>s});var r=i(44277);let s=class{get devicePixelRatio(){return(0,r.x_)()}getConfig(){return this.config}setAttrs(e){return Object.keys(e||{}).forEach(t=>{this.setAttr(t,e[t])}),this}getAttr(e){return this.config[e]}setAttr(e,t){let i=this.config[e];return i===t||(void 0===t?delete this.config[e]:this.config[e]=t,this._fireChangeEvent(e,i,t)),this}on(e,t,i,r){let s="string"==typeof t?t:"",a="function"==typeof i?i:t,o="boolean"==typeof r?r:i;if("function"!=typeof a)throw Error("Must provide event handler");let l=this.eventListeners[e];return l||(this.eventListeners[e]=l=[]),l.some(e=>e.name===s&&e.handler===a)||(o?l.unshift({name:s,handler:a}):l.push({name:s,handler:a})),this}once(e,t,i){let r="string"==typeof t?t:"",s="function"==typeof i?i:t;if("function"!=typeof s)throw Error("Must provide event handler");let a=t=>{s.call(this,t),this.off(e,r,a)};this.on(e,r,a)}off(e,t,i){e||Object.keys(this.eventListeners||{}).forEach(e=>{this._off(e)});let r="string"==typeof t?t:"";"function"==typeof t&&(i=t),this.eventListeners[e]?this._off(e,r,i):Object.keys(this.eventListeners||{}).forEach(t=>{this._off(t,e,i)})}fire(e,t={}){t.target=t.target||this,this._fire(e,t)}watch(e,t,i=!1){Array.isArray(e)?e.forEach(e=>this._registerListener(e,t,i)):this._registerListener(e,t,i)}unwatch(e,t){Array.isArray(e)?e.forEach(e=>this._unwatch(e,t)):this._unwatch(e,t)}hasWathedProperty(e){return this.watchMap.has(e)}watchProperty(e,t){if(this.watchMap.has(e)){let i=this.watchMap.get(e);i.includes(t)||i.push(t)}else this.watchMap.set(e,[t])}setWatchProperty(e,t,i,s={}){let a=e[t]!==i;a&&(e[t]=i);let o=this.watchMap.get(t);o&&o.forEach(e=>{a&&(e.textContent=i),(0,r.AS)(e,s)})}_off(e,t,i){let r=this.eventListeners[e];if(r){let s=r.slice(0);for(let e=s.length-1;e>=0;e--){let{name:r,handler:a}=s[e];t&&r!==t||i&&i!==a||s.splice(e,1)}s.length>0?this.eventListeners[e]=s:delete this.eventListeners[e]}}_fireChangeEvent(e,t,i){let r=this.attrListeners[e];r&&r.forEach(e=>{e.handler({oldVal:t,newVal:i})})}_fire(e,t={}){let i=this.eventListeners[e];i&&(t.currentTarget=this,t.type=e,i.forEach(e=>{e.handler.call(this,t)}))}_registerListener(e,t,i=!1){let r=this.attrListeners[e];r||(this.attrListeners[e]=r=[]),r.some(e=>t&&e.handler===t)||r.push({handler:t}),i&&t.call(this,{oldVal:this.getAttr(e),newVal:this.getAttr(e)})}_unwatch(e,t){let i=this.attrListeners[e];if(i){let r=i.filter(e=>t&&e.handler!==t);r.length>0?this.attrListeners[e]=r:delete this.attrListeners[e]}}constructor(){this.eventListeners={},this.attrListeners={},this.watchMap=new Map}};s.defaultConfig={devicePixelRatio:(0,r.x_)(),isMobile:(0,r.tq)(),isMouseover:!1,isMousedown:!1}},72009:function(e,t,i){let r,s;i.d(t,{ZP:()=>p,a:()=>g});var a=i(27875),o=i.n(a),l=i(829),n=i.n(l),d=i(91417),c=i(2839),h=i(27868),u=i(44277);let g=22,m=({ctx:e,label:t,font:i,textMetrics:r,bound:s,borderRadius:a,padding:o,textAlign:l=c.PH.Left})=>{let n=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent,{text:d,color:u,bgColor:g,borderColor:m,textPositionShift:p={x:0,y:0}}=t;if(e.beginPath(),h.Z.roundRect(e,s,a),e.closePath(),e.fillStyle=g,e.strokeStyle=m,e.fill(),e.stroke(),e.textAlign=l,e.textBaseline=c.Wr.Top,e.fillStyle=u,e.font=i,l===c.PH.Left){let t=o[3];e.fillText(d,s.x+t+p.x,s.y+(s.height-n)/2+p.y)}else{let t=o[1];e.fillText(d,s.x-t+s.width+p.x,s.y+(s.height-n)/2+p.y)}},p=class e{static calculateTextWidth(t="",i=10,r=1){let s=e.getCacheCanvas();s.font=`${i}px sans-serif`;let a=Math.round(s.measureText(t.trim()).width);return r>1?Math.round(a/r)*r:a}static calculateTextHeight(t="",i=10){let r=e.getCacheCanvas();r.font=`${i}px sans-serif`;let s=r.measureText(t.trim());return Math.abs(s.actualBoundingBoxAscent)+Math.abs(s.actualBoundingBoxDescent)}static drawImage(e,t,i,r){let s=i.x+.5*i.width-.5*r.width,a=.5*i.height+.5*r.height;e.drawImage(t,s,-a,r.width,r.height)}drawHorizontalCrossLine(e,t,i,r){let{minX:s,maxX:a}=i;e.save(),e.setLineDash(r),e.beginPath(),h.Z.drawLine(e,s,-t.y,a,-t.y),e.stroke(),e.restore()}drawVerticleCrossLine(e,t,i,r){let{minY:s,maxY:a}=i;e.save(),e.setLineDash(r),e.beginPath(),h.Z.drawLine(e,t.x,s,t.x,a),e.stroke(),e.restore()}drawXAxisLabel({ctx:e,point:t,label:i,candlestick:r,height:s=22}){let a=r.getAttr("xAxis"),l=r.getTimeAxisWidget();e.font="400 12px BinanceNova";let n=e.measureText(i.text),d=Math.ceil(n.width)+8,c=t.x-d/2;m({ctx:e,label:i,bound:{x:o()(c,0,l.getBound().width-d),y:t.y+(a.height-s)/2,width:d,height:s},font:"400 12px BinanceNova",textMetrics:n,borderRadius:[4,4,4,4],padding:[0,4,0,4]})}drawYAxisLabel({ctx:e,point:t,labels:i,height:r=g,radii:s=4,font:a="400 12px BinanceNova",styleType:o="full-rounded",padding:l=[2,8,2,8]}){let[n,d]=[l[1],l[3]],c=i.reduce(e=>e+r,0),h=i.map(({text:t})=>(e.font=a,e.measureText(t))),u=h.reduce((e,{width:t})=>Math.max(e,t),0)+n+d,p=e=>{let t=0===e?s:0,r=e===i.length-1?s:0;return"semi-rounded"===o?[0,t,r,0]:[t,t,r,r]};i.reduce((i,s,o)=>(m({ctx:e,bound:{x:t.x,y:i,width:u,height:r},label:s,font:a,textMetrics:h[o],borderRadius:p(o),padding:l}),i+r),t.y-c/2)}drawAskBidLabels({ctx:e,labels:t,font:i="400 10px BinanceNova",height:r=16,radii:s=4,padding:a=[0,5,0,5]}){let[o,l]=[a[1],a[3]],h=n()(t,({point:e})=>e.y),u=h.map(({text:t})=>(e.font=i,e.measureText(t))),g=u.reduce((e,{width:t})=>Math.max(e,t),0)+l+o,[p,x]=h.map(({point:e})=>new d.Z(e.x,e.y,g,r));if(d.Z.isOverlaped(p,x)){let t=e=>{let t=0===e?s:0,i=e===h.length-1?s:0;return[t,t,i,i]};h.reduce((s,o,l)=>(m({ctx:e,bound:{x:o.point.x-g,y:s-r,width:g,height:r},label:o,font:i,textMetrics:u[l],borderRadius:t(l),padding:a,textAlign:c.PH.Right}),s+r),h[0].point.y)}else h.forEach((t,o)=>{m({ctx:e,bound:{x:t.point.x-g,y:t.point.y-r/2,width:g,height:r},label:t,font:i,textMetrics:u[o],borderRadius:[s,s,s,s],padding:a,textAlign:c.PH.Right})})}drawCursorDot(e,{x:t,y:i,color:r}){e.beginPath(),e.arc(t,i,2,0,2*Math.PI),e.closePath(),e.fillStyle=r,e.fill()}drawBarCandlesticks(e,t){t.forEach(t=>{let{x:i,width:r,highY:s,lowY:a,openY:o,closeY:l,color:n}=t,d=r/2;(0,u.ui)(e,{strokeStyle:n}),e.beginPath(),h.Z.drawLine(e,i,-s,i,-a),h.Z.drawLine(e,i,-o,i-d,-o),h.Z.drawLine(e,i,-l,i+d,-l),e.stroke()})}drawSmallTriangle(e,t,i){e.save(),e.translate(t.x,t.y),e.beginPath(),i&&e.scale(-1,1),e.moveTo(1,0),e.lineTo(5,-5),e.lineTo(5,5),e.lineTo(1,0),e.fill(),e.closePath(),e.restore()}drawArrow(e,t,i){e.save(),e.translate(t.x,t.y),e.beginPath(),i&&e.scale(1,-1),e.rect(-4,0,9,2),e.moveTo(.5,2),e.lineTo(5,7),e.lineTo(3,7),e.lineTo(3,12),e.lineTo(-2,12),e.lineTo(-2,7),e.lineTo(-4,7),e.lineTo(.5,2),e.fill(),e.closePath(),e.restore()}drawTranscation(e,t,i,r,s,a){if(e.save(),e.translate(Math.round(t.x),Math.round(t.y)),this.drawArrow(e,{x:0,y:0},!i),a)if(i){e.translate(0,12),e.textAlign="center",e.textBaseline="top";let t=e.measureText(s);e.fillText(s,0,0),e.translate(0,t.actualBoundingBoxDescent+2),e.fillText(`+${r}`,0,0)}else{e.translate(0,-12),e.textAlign="center",e.textBaseline="bottom";let t=e.measureText(s);e.fillText(s,0,0),e.translate(0,-t.actualBoundingBoxAscent-2),e.fillText(`-${r}`,0,0)}return e.restore(),a?36:14}drawImage(e,t,i,r){let s=i.x+.5*i.width-.5*r.width,a=.5*i.height+.5*r.height;e.drawImage(t,s,-a,r.width,r.height)}constructor(){this.drawCrossLine=(e,t,i)=>{e.setLineDash([4,4]),e.beginPath();let{minX:r,minY:s,maxX:a,maxY:o}=i;h.Z.drawLine(e,r,-t.y,a,-t.y),h.Z.drawLine(e,t.x,s,t.x,o),e.stroke()},this.drawLabel=(e,t,i)=>{let{x:r,y:s}=t,{text:a,px:o,py:l,color:n,bgColor:d,borderColor:u,width:g,height:m}=i;e.strokeStyle=u,e.fillStyle=d,e.fillRect(r,s,g,m),e.strokeRect(r,s,g,m),e.textAlign=c.PH.Left,e.textBaseline=c.Wr.Top,e.fillStyle=n;let p=r+o,x=s+l;h.Z.drawText(e,a,p,x)},this.drawCandlestickBars=(e,t)=>{t.forEach(t=>{let{x:i,y:r,width:s,height:a,lowY:o,highY:l,color:n,borderColor:d,wickColor:c}=t,g=i-.5*s;if(s<2){(0,u.ui)(e,{fillStyle:n,strokeStyle:n});let t=l-o,r=1>Math.abs(t)?1:t;h.Z.fillRect(e,i,-l,.75,r),h.Z.strokeRect(e,i,-l,.75,r)}else(0,u.ui)(e,{strokeStyle:c}),e.beginPath(),h.Z.drawLine(e,i,-l,i,-o),e.stroke(),(0,u.ui)(e,{fillStyle:n,strokeStyle:d}),h.Z.fillRect(e,g,-r,s,a),h.Z.strokeRect(e,g,-r,s,a)})},this.drawHollowCandlestickBars=(e,t)=>{t.forEach(t=>{let{x:i,y:r,width:s,height:a,lowY:o,highY:l,close:n,open:d,color:c,borderColor:g,wickColor:m}=t,p=i-.5*s;s<2?((0,u.ui)(e,{strokeStyle:c}),e.beginPath(),h.Z.drawLine(e,i,-o,i,-l),e.stroke()):((0,u.ui)(e,{strokeStyle:m}),e.beginPath(),h.Z.drawLine(e,i,-l,i,-o),e.stroke(),(0,u.ui)(e,{fillStyle:c,strokeStyle:g}),n<d?h.Z.fillRect(e,p,-r,s,a):h.Z.clearRect(e,{x:p,y:-r,width:s,height:a}),h.Z.strokeRect(e,p,-r,s,a))})},this.drawPolyline=(e,t)=>{e.beginPath(),h.Z.drawLines(e,t),e.stroke()},this.drawGrid=(e,t,i=[],r)=>{let{width:s,height:a}=t;e.beginPath(),r.forEach(t=>{h.Z.drawLine(e,0,-t,s,-t)}),i.forEach(t=>{h.Z.drawLine(e,t,0,t,-a)}),e.stroke()},this.drawVertGridLine=(e,t,i=[])=>{let{height:r}=t;e.beginPath(),i.forEach(t=>{h.Z.drawLine(e,t,0,t,-r)}),e.stroke()},this.drawHorzGridLine=(e,t,i)=>{let{width:r}=t;e.beginPath(),i.forEach(t=>{h.Z.drawLine(e,0,-t,r,-t)}),e.stroke()},this.drawPaths=(e,t)=>{e.beginPath(),h.Z.drawLines(e,t),e.fill(),e.stroke()},this.drawPoints=(e,t,i)=>{i?h.Z.drawPoints(e,t,i):(e.beginPath(),h.Z.drawPoints(e,t,i),e.stroke())},this.drawCrossLines=(e,t)=>{e.beginPath(),h.Z.drawCrossLines(e,t),e.stroke()},this.drawBars=(e,t)=>{t.forEach(t=>{let{x:i,y:r,width:s,height:a,strokeColor:o,fillColor:l}=t;s<2?((0,u.ui)(e,{strokeStyle:o}),e.beginPath(),h.Z.drawLine(e,i,r,i,r+a),e.stroke()):((0,u.ui)(e,{strokeStyle:o,fillStyle:l}),h.Z.fillRect(e,i,r,s,a),h.Z.strokeRect(e,i,r,s,a))})},this.drawHollowBars=(e,t)=>{t.forEach((i,r)=>{let{value:s=Number.NEGATIVE_INFINITY}=t[r-1]||{},{x:a,y:o,width:l,height:n,value:d,color:c}=i;l<2?((0,u.ui)(e,{strokeStyle:c}),e.beginPath(),h.Z.drawLine(e,a,o,a,o+n),e.stroke()):d>0&&s>=d||d<0&&s>=d?((0,u.ui)(e,{fillStyle:c}),h.Z.fillRect(e,a,o,l,n)):d>0&&s<d?((0,u.ui)(e,{strokeStyle:c}),h.Z.strokeRect(e,a,o,l,n)):d<0&&s<=d&&((0,u.ui)(e,{strokeStyle:c}),h.Z.strokeRect(e,a,o,l,n))})},this.drawMultiLines=(e,t)=>{e.beginPath(),t.forEach(t=>{h.Z.drawLines(e,t)}),e.stroke()},this.drawArea=(e,t)=>{e.beginPath(),h.Z.drawLines(e,t),e.closePath(),e.fill()},this.drawGradientArea=(e,t,i,{strokeColor:r,fillColor1:s,fillColor2:a,opacity:o})=>{e.save(),e.strokeStyle=r,e.lineWidth=2,e.beginPath(),h.Z.drawLines(e,t),e.stroke();let l=e.createLinearGradient(0,-e.canvas.height/3,0,0);l.addColorStop(0,s),l.addColorStop(1,a),e.beginPath(),h.Z.drawLines(e,i),e.closePath(),e.globalAlpha=o,e.fillStyle=l,e.fill(),e.restore()},this.drawTitle=(e,t,i)=>{h.Z.drawText(e,t,i.x,i.y)}}};p.getCacheCanvas=()=>(r||void 0===document||(s=(r=document.createElement("canvas")).getContext("2d")),s),p.createTextLabel=({text:e="",px:t=6,py:i=6,color:r,bgColor:s,borderColor:a})=>({text:e,px:t,py:i,color:r,bgColor:s,borderColor:a,width:p.calculateTextWidth(e)+2*t,height:p.calculateTextHeight(e)+2*i})},36844:function(e,t,i){i.d(t,{y$:()=>x,__:()=>g,xv:()=>h,Cd:()=>m,Ee:()=>y,nB:()=>f,x1:()=>u,UL:()=>p,jC:()=>b.Z});var r=i(40057),s=i(18149),a=i.n(s),o=i(2839),l=i(55480),n=i(27868),d=i(44277),c=i(66934);let h=class extends r.Z{onCacheChange(){this.isBatchUpdate=!0,this.isDataUpdate=!0,this.getAttr("isCustomized")?this._typesetText():this._setTextData()}onDataChange(){}setText(e){let t=(0,l.HD)(e)||Array.isArray(e)?e:null==e?"":`${e}`;return this.setAttr("content",t),this}getWidth(){let{width:e,textWidth:t,padding:i}=this.getConfig();return e===r.$.AUTO||void 0===e?t+2*i:e+2*i}getHeight(){let{fontSize:e,contents:t,lineHeight:i,padding:r}=this.getConfig();return e*t.length*i+2*r}getTransformOrigin(){let{data:e,textAlign:t,textBaseline:i}=this.getConfig(),{x:r,y:s}=e,a=this.getWidth(),o=this.getHeight();return"center"===t?r-=.5*a:"right"===t&&(r-=a),"middle"===i?s-=.5*o:"bottom"===i&&(s-=o),{x:r,y:s}}getContextStyles(){let{fillStyle:e,textAlign:t,textBaseline:i}=this.getConfig();return{font:this._getTextFont(),fillStyle:e,textAlign:t,textBaseline:i}}drawCacheScene(){if(!this.isBatchUpdate)return;let{contents:e,fillStyle:t,padding:i,textWidth:r,fill:s,background:o}=this.getConfig();if(0===e.length)return;let l=this.getContext();n.Z.clearRect(l);let c=this.overrideSize({width:this.getWidth(),height:this.getHeight()}),h={font:this._getTextFont(),fillStyle:t},u=!a()(h,this.preContextStyles);if(this.isDataUpdate&&(this.preContextStyles=h),c||u||this.isDataUpdate){s&&n.Z.drawBackground(l,o),(0,d.ui)(l,{...h,textAlign:"left",textBaseline:"top"});let t=(this.getWidth()-r)*.5;for(let r=0,s=e.length;r<s;++r){let{y:s}=e[r];n.Z.drawText(l,e[r].text,t,s+i)}}this.isBatchUpdate=!1}drawScene(e){let{data:t,contents:i,fill:r,background:s}=this.getConfig();r&&n.Z.drawBackground(e,s),(0,d.ui)(e,this.getContextStyles());for(let r=0,s=i.length;r<s;++r){let s=t.y+i[r].y;n.Z.drawText(e,i[r].text,t.x,s)}}isHover(e){if(!this.preDetect())return!1;let{x:t,y:i}=this.getTransformOrigin(),r=this.getHeight();return new c.Z.Bound(t,i,this.getWidth(),r).contain([e.x,e.y])}_addLineText(e){this.getAttr("contents").push(e)}_getTextWidth(e){let t=this.getAttr("letterSpacing"),i=Math.max(e.length-1,0);return n.Z.measureTextWidth(e)+t*i}_getTextFont(){let{fontStyle:e,fontVariant:t,fontSize:i,fontFamily:r}=this.getConfig();return`${e} ${t} ${i}px ${r}`}_setTextData(){let{content:e,contents:t,fontSize:i,lineHeight:r,width:s}=this.getConfig(),a=n.Z.getContext();if(Array.isArray(e)||!a)return;t.length=0;let o=e.split("\n"),c=r*i,h=0,u=0,g=(0,l.hj)(s)?s:void 0;a.save(),(0,d.ui)(a,{font:this._getTextFont()});for(let e=0,t=o.length;e<t;e++){let t=o[e],i=this._getTextWidth(t);if(g&&i>g)for(;t;){let e=0,i=t.length,r="",s=0;for(;e<i;){let a=e+i>>>1,o=t.slice(0,a+1),l=this._getTextWidth(o);l<=g?(e=a+1,r=o,s=l):i=a}if(r&&(this._addLineText({text:r,width:s,y:h}),u=Math.max(u,s),h+=c,t=t.slice(e))&&(s=this._getTextWidth(t))<=g){this._addLineText({text:t,width:s,y:h}),u=Math.max(u,s),h+=c;break}}else this._addLineText({text:t,width:i,y:h}),u=Math.max(u,i)}a.restore(),this.setAttr("textWidth",u)}_typesetText(){let{content:e,contents:t,fontSize:i,lineHeight:r}=this.getConfig();if(Array.isArray(e)){t.length=0;let s=r*i,a=0,o=0,l=n.Z.getContext();if(!l)return;l.save(),(0,d.ui)(l,{font:this._getTextFont()});for(let t=0;t<e.length;t++){let i=e[t],r=this._getTextWidth(i);this._addLineText({text:i,width:r,y:o}),o+=s,a=Math.max(a,r)}l.restore(),this.setAttr("textWidth",a)}}constructor(e={}){super(),this.config={...r.Z.defaultConfig,content:"",contents:[],fontSize:10,fontFamily:"sans-serif",fontStyle:"",fontVariant:"",lineHeight:1,letterSpacing:0,textWidth:0,padding:0,background:o.E.White,isCustomized:!1,useCache:!0},this.setAttrs(e),this.watch(["content","fillStyle","background","width","fontSize","letterSpacing","fontFamily","fontStyle","fontVariant","useCache"],this.onCacheChange.bind(this))}},u=class extends r.Z{beforeDrawHook(){if(this.isDataUpdate){let{p1:e,p2:t}=this.getAttr("data");this.setAttrs({width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}),this.isDataUpdate=!1}}getTransformOrigin(){let{p1:e,p2:t}=this.getAttr("data");return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y)}}getContextStyles(){let{strokeStyle:e,lineWidth:t,lineDash:i}=this.getConfig();return{strokeStyle:e,lineWidth:t,lineDash:i}}drawCacheScene(){if(!this.isBatchUpdate)return;let{lineDash:e,data:t}=this.getConfig(),{p1:i,p2:r}=t,s=this.getContext(),o=Math.max(Math.abs(i.x-r.x),1),l=Math.max(Math.abs(i.y-r.y),1),c=this.overrideSize({width:o,height:l});c&&this.setAttrs({width:o,height:l});let h=this.getContextStyles(),u=!a()(h,this.preContextStyles);if(u&&(this.preContextStyles=h,(0,d.ui)(s,h)),e&&s.setLineDash(e),u||c){n.Z.clearRect(s);let{x:e,y:t}=this.getTransformOrigin();n.Z.drawLine(s,i.x-e,i.y-t,r.x-e,r.y-t),s.stroke()}this.isBatchUpdate=!1}drawScene(e){let{lineDash:t,data:i}=this.getConfig();(0,d.ui)(e,this.getContextStyles()),t&&e.setLineDash(t);let{p1:r,p2:s}=i;e.beginPath(),n.Z.drawLine(e,r.x,r.y,s.x,s.y),e.stroke()}isHover(e,t=5){if(!this.preDetect())return!1;let{p1:i,p2:r}=this.getAttr("data");return c.Z.Line.isPointAtSegment(e,i,r,t)}isVisible(e){let t=this.getAttr("isVisible"),i=this.getAttr("data");if(!t||null===i)return!1;let r=new c.Z.Bound(e.x,e.y,e.width,e.height),s=new c.Z.Bound(i.p1.x,-i.p1.y,Math.abs(i.p2.x-i.p1.x),Math.abs(i.p2.y-i.p1.y));return r.isOverlaped(s)}constructor(e={}){super(),this.config={...r.Z.defaultConfig,width:0,height:0},this.setAttrs(e),this.watch(["lineWidth","strokeStyle"],this.onCacheChange.bind(this))}},g=class extends r.Z{beforeDrawHook(){let e=this.getAttr("fixWidth");if(this.isBatchUpdate&&void 0===e){let e=n.Z.getContext();(0,d.ui)(e,{font:this._getTextFont()});let t=this.getAttr("text");this.setAttr("textWidth",n.Z.measureTextWidth(t))}}onDataChange(){this.isBatchUpdate=!0}getDirection(){return(this.getAttr("dir")||"").toUpperCase()}getTransformOrigin(){let{x:e,y:t}=this.getAttr("data")||{},i=this.getWidth(),r=this.getHeight(),s=this.getDirection();return s===o.Nm.Left&&(e-=i,t-=.5*r),s===o.Nm.Right&&(t-=.5*r),s===o.Nm.Up&&(e-=.5*i,t-=r),s===o.Nm.Down&&(e-=.5*i),{x:e,y:t}}getContextStyles(){let{color:e,lineWidth:t,background:i,borderColor:r,text:s}=this.getConfig(),a=this.getDirection(),l={strokeStyle:e,lineWidth:t,fillStyle:e,background:i,borderColor:r,dir:a,text:s,font:this._getTextFont()},n=a===o.Nm.Left?"right":a===o.Nm.Right?"left":"center";return{...l,textBaseline:"middle",textAlign:n}}getWidth(){let{textWidth:e,padding:t,fixWidth:i,text:r}=this.getConfig();if((0,l.hj)(i))return i;let s=Array.isArray(t)?t[0]:t;if(""!==r){let e=n.Z.getContext();(0,d.ui)(e,{font:this._getTextFont()}),this.setAttr("textWidth",n.Z.measureTextWidth(r))}return e+2*s}getHeight(){let{padding:e,fontSize:t,fixHeight:i,arrowHeight:r=0}=this.getConfig();return(0,l.hj)(i)?i:t+2*(Array.isArray(e)?e[1]:e)+r}drawCacheScene(){if(!this.isBatchUpdate)return;let e=this.getContext(),t=this.getWidth(),i=this.getHeight(),r=this.overrideSize({width:t,height:i});r&&this.setAttrs({width:t,height:i});let s=this.getContextStyles(),o=!a()(s,this.preContextStyles);if(o&&(this.preContextStyles=s),o||r){let{background:r,color:s,text:a,borderColor:o,stroke:l,fill:c,lineWidth:h,borderRadius:u,arrowHeight:g=0}=this.getConfig();(0,d.ui)(e,{fillStyle:r,strokeStyle:o,lineWidth:h});let m=i-g,p=this._hasBorderRadius(u);p?(this._drawRoundRect(e,.5,.5,t-2*h,m-2*h,u),c&&e.fill(),l&&e.stroke()):(c&&n.Z.fillRect(e,0,0,t,m),l&&n.Z.strokeRect(e,.5*h,.5*h,t-h,m-h)),this._drawTriangle(e,t/2,m-1,g),(0,d.ui)(e,{fillStyle:s,textAlign:"center",textBaseline:"middle",font:this._getTextFont()});let x=.5*t;n.Z.drawText(e,a,x,m/2+(p?h/2:0))}this.isBatchUpdate=!1}drawScene(e){let t=this.getAttr("data"),i=this.getWidth(),r=this.getHeight();this._drawLabel(e,i,r,t)}isHover(e){if(!this.getAttr("isContain"))return!1;let{x:t,y:i}=this.getTransformOrigin(),r=this.getWidth(),s=this.getHeight();return new c.Z.Bound(t,i,r,s).contain([e.x,e.y])}_drawLabel(e,t,i,r){let{background:s,text:a,borderColor:o,color:l,stroke:c,fill:h,borderRadius:u,arrowHeight:g=0}=this.getConfig();(0,d.ui)(e,{fillStyle:s,strokeStyle:o});let{x:m=0,y:p=0}=r,x=i-g;this._hasBorderRadius(u)?(this._drawRoundRect(e,m,p,t,x,u),h&&e.fill(),c&&e.stroke()):(h&&n.Z.fillRect(e,m,p,t,x),c&&n.Z.strokeRect(e,m,p,t,x)),this._drawTriangle(e,t/2,x-1,g),(0,d.ui)(e,this.getContextStyles()),(0,d.ui)(e,{fillStyle:l,textAlign:"center",textBaseline:"middle"});let f=.5*t,b=.5*x;n.Z.drawText(e,a,f,b)}_drawTriangle(e,t,i,r){e.beginPath(),e.moveTo(t-r,i),e.lineTo(t+r,i),e.lineTo(t,i+r),e.closePath(),e.fill()}_drawRoundRect(e,t,i,r,s,a){if(e.roundRect){e.beginPath(),e.roundRect(t,i,r,s,a);return}let[o,l,n,d]="number"==typeof a?[a,a,a,a]:a;e.beginPath(),e.moveTo(t,i+o),e.arc(t+o,i+o,o,Math.PI,1.5*Math.PI),e.lineTo(t+r-l,i),e.arc(t+r-l,i+l,l,1.5*Math.PI,2*Math.PI),e.lineTo(t+r,i+s-n),e.arc(t+r-n,i+s-n,n,0,.5*Math.PI),e.lineTo(t+d,i+s),e.arc(t+d,i+s-d,d,.5*Math.PI,Math.PI),e.closePath()}_hasBorderRadius(e){return"number"==typeof e&&e>0||Array.isArray(e)&&e.some(e=>e>0)}_getTextFont(){let{fontStyle:e,fontVariant:t,fontSize:i,fontFamily:r}=this.getConfig();return`${e} ${t} ${i}px ${r}`}constructor(e={}){super(),this.config={...r.Z.defaultConfig,width:0,height:0,fontSize:10,fontFamily:"BinanceNova, Arial, sans-serif",fontStyle:"",fontVariant:"",letterSpacing:0,textWidth:0,padding:0,borderRadius:0,borderColor:"#ddd",background:"#ddd",color:"#fff",text:"",dir:o.Nm.Right,useCache:!0},this.setAttrs(e),this.watch(["background","lineWidth","borderColor","color","text","fontSize","letterSpacing","fontFamily","fontStyle","fontVariant","dir","useCache","borderRadius"],this.onDataChange.bind(this))}},m=class extends r.Z{onDataChange(){this.isBatchUpdate=!0}getTransformOrigin(){let{data:{x:e,y:t},radius:i,lineWidth:r}=this.getConfig();return{x:e-i-r,y:t-i-r}}getContextStyles(){let{strokeStyle:e,lineWidth:t,fillStyle:i,stroke:r,fill:s}=this.getConfig();return{strokeStyle:e,lineWidth:t,fillStyle:i,stroke:r,fill:s}}setRadius(e){return this.setAttr("radius",e),this}drawCacheScene(){if(!this.isBatchUpdate)return;let{radius:e,stroke:t,fill:i,lineWidth:r}=this.getConfig();if(e<=0)return;let s=this.getContext(),o={width:2*e+2*r,height:2*e+2*r},l=this.overrideSize(o);l&&this.setAttrs(o);let c=this.getContextStyles(),h=!a()(c,this.preContextStyles);h&&(this.preContextStyles=c),(h||l)&&(s.beginPath(),n.Z.clearRect(s),(0,d.ui)(s,c),n.Z.drawCircle(s,e+r,e+r,e),i&&s.fill(),t&&s.stroke()),this.isBatchUpdate=!1}drawScene(e){let{data:{x:t,y:i},radius:r,stroke:s,fill:a}=this.getConfig();!(r<=0)&&((0,d.ui)(e,this.getContextStyles()),e.beginPath(),n.Z.drawCircle(e,t,i,r),a&&e.fill(),s&&e.stroke())}isHover(e,t=5){if(!this.preDetect())return!1;let i=this.getAttr("data"),r=this.getAttr("radius");return c.Z.Algorith.getSquareDistance(e,i)<=(r+t)**2}constructor(e={}){super(),this.config={...r.Z.defaultConfig,width:0,height:0,radius:0,stroke:!0,fill:!1,useCache:!0},this.setAttrs(e),this.watch(["lineWidth","strokeStyle","fillStyle","radius","fill","stroke","useCache"],this.onDataChange.bind(this))}},p=class extends r.Z{onDataChange(){this.isDataUpdate=!0}getTransformOrigin(){let{x:e,y:t}=this.getAttr("data");return{x:e,y:t}}getContextStyles(){let{strokeStyle:e,lineWidth:t,fillStyle:i,stroke:r,fill:s,globalAlpha:a,borderRadius:o}=this.getConfig();return{strokeStyle:e,lineWidth:t,fillStyle:i,stroke:r,fill:s,globalAlpha:a,borderRadius:o}}getWidth(){let{width:e}=this.getConfig();return e}getHeight(){let{height:e}=this.getConfig();return e}setAnnotherVertex(e){let{x:t,y:i}=this.getAttr("data"),r=Math.min(t,e.x),s=Math.min(i,e.y),a=Math.abs(t-e.x),o=Math.abs(i-e.y);return this.setAttrs({data:{x:r,y:s},width:a,height:o}),this}drawCacheScene(){if(!this.isBatchUpdate)return;let{stroke:e,fill:t,width:i,height:r,borderRadius:s,lineWidth:a,lineDash:o}=this.getConfig();if(i<=0||r<=0)return;let l=this.getContext(),c=this.getContextStyles();this.preContextStyles=c,(0,d.ui)(l,c),o&&l.setLineDash(o),n.Z.clearRect(l),this._hasBorderRadius(s)?(this._drawRoundRect(l,a,a,i,r,s),t&&l.fill(),e&&((0,d.ui)(l,{globalAlpha:1}),l.stroke())):(t&&n.Z.fillRect(l,0,0,i,r),e&&((0,d.ui)(l,{globalAlpha:1}),n.Z.strokeRect(l,.5*a,.5*a,i-a,r-a))),this.isDataUpdate=!1,this.isBatchUpdate=!1}drawScene(e){let{data:{x:t,y:i},width:r,height:s,stroke:a,fill:o,borderRadius:l,lineDash:c,lineWidth:h}=this.getConfig();!(r<=0)&&!(s<=0)&&((0,d.ui)(e,this.getContextStyles()),c&&e.setLineDash(c),this._hasBorderRadius(l)?(this._drawRoundRect(e,t,i,r,s,l),o&&e.fill(),a&&((0,d.ui)(e,{globalAlpha:1}),e.stroke())):(o&&n.Z.fillRect(e,t,i,r,s),a&&((0,d.ui)(e,{globalAlpha:1,lineWidth:h}),n.Z.strokeRect(e,t+.5*h,i+.5*h,r-h,s-h))))}isHover(e){if(!this.preDetect())return!1;let{x:t,y:i}=this.getTransformOrigin(),r=this.getHeight();return new c.Z.Bound(t,i,this.getWidth(),r).contain([e.x,e.y])}_drawRoundRect(e,t,i,r,s,a){let[o,l,n,d]="number"==typeof a?[a,a,a,a]:a;e.beginPath(),e.moveTo(t,i+o),e.arc(t+o,i+o,o,Math.PI,1.5*Math.PI),e.lineTo(t+r-l,i),e.arc(t+r-l,i+l,l,1.5*Math.PI,2*Math.PI),e.lineTo(t+r,i+s-n),e.arc(t+r-n,i+s-n,n,0,.5*Math.PI),e.lineTo(t+d,i+s),e.arc(t+d,i+s-d,d,.5*Math.PI,Math.PI),e.closePath()}_hasBorderRadius(e){return"number"==typeof e&&e>0||Array.isArray(e)&&e.some(e=>e>0)}_onSizeChange(){let e={width:this.getWidth(),height:this.getHeight()};this.overrideSize(e)}constructor(e={}){super(),this.config={...r.Z.defaultConfig,width:0,height:0,borderRadius:0,stroke:!0,fill:!0,globalAlpha:1,useCache:!1},this.setAttrs(e),this.watch(["width","height","lineWidth","strokeStyle","fillStyle","fill","stroke","useCache","borderRadius"],this.onCacheChange.bind(this)),this.watch(["width","height","lineWidth"],this._onSizeChange.bind(this))}},x=class extends r.Z{onDataChange(){let{minX:e,maxX:t,minY:i,maxY:r}=this.getMaxAndMin(),s=Math.max(t-e,1),a=Math.max(r-i,1);this.overrideSize({width:s,height:a}),this.setAttrs({width:s,height:a}),this.setAttr("origin",{x:e,y:i}),this.isDataUpdate=!0,this.isBatchUpdate=!0}getMaxAndMin(){let e=this.getAttr("data"),t=Number.MAX_SAFE_INTEGER,i=-Number.MAX_SAFE_INTEGER;return e.reduce(({minX:e,maxX:t,minY:i,maxY:r},{x:s,y:a})=>(e>s&&(e=s),t<s&&(t=s),i>a&&(i=a),r<a&&(r=a),{minX:e,maxX:t,minY:i,maxY:r}),{minX:t,maxX:i,minY:t,maxY:i})}getTransformOrigin(){return this.getAttr("origin")}getContextStyles(){let{strokeStyle:e,fillStyle:t,lineWidth:i,lineDash:r,globalAlpha:s}=this.getConfig();return{strokeStyle:e,fillStyle:t,lineWidth:i,lineDash:r,globalAlpha:s}}drawCacheScene(){if(!this.isBatchUpdate)return;let{lineDash:e,data:t,stroke:i,fill:r}=this.getConfig(),s=this.getContext(),o=this.getContextStyles();(!a()(o,this.preContextStyles)||this.isDataUpdate)&&(this.preContextStyles=o,(0,d.ui)(s,o)),e&&s.setLineDash(e),s.beginPath(),n.Z.clearRect(s);let{x:l,y:c}=this.getTransformOrigin(),h=t.map(({x:e,y:t})=>({x:e-l,y:t-c}));n.Z.drawLines(s,h),r&&(s.closePath(),s.fill()),i&&s.stroke(),this.isDataUpdate=!1,this.isBatchUpdate=!1}drawScene(e){let{lineDash:t,data:i,stroke:r,fill:s}=this.getConfig();(0,d.ui)(e,this.getContextStyles()),t&&e.setLineDash(t),e.beginPath(),n.Z.drawLines(e,i),s&&(e.closePath(),e.fill()),r&&e.stroke()}isHover(e,t=5){if(!this.preDetect())return!1;let{dis:i}=new c.Z.Polyline(this.getAttr("data")).getNearestPoint(e);return t>=i}constructor(e={}){super(),this.config={...r.Z.defaultConfig,width:0,height:0,prevLineDash:[],fill:!0,stroke:!0,origin:{x:0,y:0},useCache:!0},this.setAttrs(e),this.watch(["lineWidth","fillStyle","strokeStyle","fill","stroke","globalAlpha"],this.onCacheChange.bind(this))}},f=class extends r.Z{onDataChange(){let e=this.getAttr("lineWidth"),{x:t,y:i,width:r,height:s}=new c.Z.Polyline(this.getAttr("data")).getBound(),a=r+e,o=s+e;this.overrideSize({width:a,height:o}),this.setAttrs({width:a,height:o}),this.setAttr("origin",{x:t-.5*e,y:i-.5*e}),this.isDataUpdate=!0,this.isBatchUpdate=!0}getTransformOrigin(){return this.getAttr("origin")}getContextStyles(){let{strokeStyle:e,fillStyle:t,lineWidth:i,lineDash:r,globalAlpha:s}=this.getConfig();return{strokeStyle:e,fillStyle:t,lineWidth:i,lineDash:r,globalAlpha:s}}drawCacheScene(){if(!this.isBatchUpdate)return;let{lineDash:e,data:t,stroke:i,fill:r}=this.getConfig(),s=this.getContext(),o=this.getContextStyles();(!a()(o,this.preContextStyles)||this.isDataUpdate)&&(this.preContextStyles=o,(0,d.ui)(s,o)),e&&s.setLineDash(e),s.beginPath(),n.Z.clearRect(s);let{x:l,y:c}=this.getTransformOrigin();t.forEach(e=>{let t=e.map(({x:e,y:t})=>({x:e-l,y:t-c}));n.Z.drawLines(s,t),r&&(s.closePath(),s.fill())}),i&&((0,d.ui)(s,{globalAlpha:1}),s.stroke()),this.isDataUpdate=!1,this.isBatchUpdate=!1}drawScene(e){let{lineDash:t,data:i,stroke:r,fill:s}=this.getConfig();(0,d.ui)(e,this.getContextStyles()),t&&e.setLineDash(t),e.beginPath(),i.forEach(t=>{let i=t.map(({x:e,y:t})=>({x:e,y:t}));n.Z.drawLines(e,i),s&&(e.closePath(),e.fill())}),r&&((0,d.ui)(e,{globalAlpha:1}),e.stroke())}isHover(e,t=5){if(!this.preDetect())return!1;let{dis:i}=new c.Z.Polyline(this.getAttr("data")).getNearestPoint(e);return t>=i}constructor(e={}){super(),this.config={...r.Z.defaultConfig,width:0,height:0,prevLineDash:[],fill:!0,stroke:!0,origin:{x:0,y:0},useCache:!0},this.setAttrs(e),this.watch(["lineWidth","fillStyle","strokeStyle","fill","stroke","globalAlpha"],this.onCacheChange.bind(this))}};var b=i(57443);let y=class extends r.Z{setImage(e){this.setAttrs({imageSource:e,isLoading:!1});let{width:t,height:i}=this.getConfig();this.overrideSize({width:t,height:i,forceResettingTransform:!0}),this.setAttrs({width:t,height:i}),this.isBatchUpdate=!0}getTransformOrigin(){return this.getAttr("data")}drawCacheScene(){if(!this.isBatchUpdate)return;let{width:e,height:t,imageSource:i}=this.getConfig();e<=0||t<=0||!i||(this.getContext().drawImage(i,0,0,e,t),this.isBatchUpdate=!1)}drawScene(e){let{data:{x:t,y:i},width:r,height:s,imageSource:a}=this.getConfig();r<=0||s<=0||!a||n.Z.drawImage(e,a,t,i,r,s)}isHover(e){if(!this.preDetect())return!1;let{x:t,y:i}=this.getTransformOrigin();return new c.Z.Bound(t,i,this.getWidth(),this.getHeight()).contain([e.x,e.y])}constructor(e={}){super(),this.config={...r.Z.defaultConfig,width:0,height:0,imageSource:null,globalAlpha:1,isLoading:!1,useCache:!0},this.setAttrs(e)}}},57443:function(e,t,i){i.d(t,{Z:()=>d});var r=i(18149),s=i.n(r),a=i(40057),o=i(27868),l=i(44277),n=i(66934);let d=class extends a.Z{onDataChange(){this.isDataUpdate=!0}setPath(e){this.setAttrs({path:e})}getTransformOrigin(){return{...this.getAttr("data")}}getContextStyles(){let{strokeStyle:e,fillStyle:t,stroke:i,fill:r}=this.getConfig();return{strokeStyle:e,fillStyle:t,stroke:i,fill:r}}drawCacheScene(){if(!this.isBatchUpdate)return;let e=this.getWidth(),t=this.getHeight(),i=this.overrideSize({width:e,height:t});i&&this.setAttrs({width:e,height:t});let r=this.getContextStyles();if(!s()(r,this.preContextStyles)||i){let{path:e,fill:t,stroke:i}=this.getConfig(),s=this.getContext();(0,l.ui)(s,r);let a=new Path2D(e);this.drawPath2D({context:s,path:a,fill:t,stroke:i})}this.isDataUpdate=!1,this.isBatchUpdate=!1}drawScene(e){this.drawCacheScene(),this.drawFromCache(e)}isHover(e){if(!this.preDetect())return!1;let{x:t,y:i}=this.getTransformOrigin();return new n.Z.Bound(t,i,this.getWidth(),this.getHeight()).contain([e.x,e.y])}_onSizeChange(){let e={width:this.getWidth(),height:this.getHeight()};this.overrideSize(e)}drawPath2D({context:e,path:t,fill:i,stroke:r}){r&&o.Z.strokePath2D(e,t),i&&o.Z.fillPath2D(e,t)}constructor(e={}){super(),this.config={...a.Z.defaultConfig,path:"",width:0,height:0,fill:!0,stroke:!0,useCache:!0},this.setAttrs(e),this.watch(["path","width","height","strokeStyle","fillStyle","fill","stroke"],this.onCacheChange.bind(this)),this.watch(["width","height"],this._onSizeChange.bind(this))}}},40057:function(e,t,i){i.d(t,{$:()=>r,Z:()=>u});var r,s=i(9850),a=i.n(s),o=i(59626),l=i(2839),n=i(44277),d=i(55480),c=i(27868),h=i(66934);(r||(r={})).AUTO="auto";let u=class extends o.Z{initEvents(){this.watch("data",this.onDataChange.bind(this))}get sceneCanvas(){return this._sceneCanvas||(this._sceneCanvas=(0,n.az)("canvas",{})),this._sceneCanvas}setData(e){return this.setAttr("data",e),this}setParent(e){return this._parent=e,this}getParent(){return this._parent}overrideSize({width:e,height:t,forceResettingTransform:i=!1}){let r=this.getAttr("devicePixelRatio"),s=this.sceneCanvas,a=e*r,o=t*r,[l=0,c=0]=[this.getAttr("width"),this.getAttr("height")];if(!i&&(0,d.hj)(l)&&(0,n.Fr)(l-e)&&(0,n.Fr)(c-t)&&s.width===a&&s.height===o)return!1;(0,n.AS)(s,{width:`${e}px`,height:`${t}px`}),s.width=a,s.height=o;let h=this.getContext();return h.resetTransform?h.resetTransform():h.setTransform(1,0,0,1,0,0),h.scale(r,r),!0}getContext(){return this.sceneCanvas.getContext("2d")}getBound(){let{x:e,y:t}=this.getTransformOrigin();return{x:e,y:t,width:this.getWidth(),height:this.getHeight()}}getConvertBound(){let{x:e,y:t,width:i,height:r}=this.getBound();return{x:e,y:-(t+r),width:i,height:r}}isVisible({x:e,y:t,width:i,height:r}){let s=this.getAttr("isVisible"),a=this.getAttr("data");if(!s||null===a)return!1;let o=new h.Z.Bound(e,t,i,r),{x:l,y:n,width:d,height:c}=this.getConvertBound(),u=new h.Z.Bound(l,n,d,c);return o.isOverlaped(u)}applyTransform(e){let{x:t=0,y:i=0}=this.getTransformOrigin(),r=e||this.getContext(),{m11:s,m12:a,m21:o,m22:l}=r.getTransform();r.setTransform(s,a,o,l,t,i)}drawFromCache(e){let{x:t=0,y:i=0}=this.getTransformOrigin();c.Z.drawImage(e,this.sceneCanvas,t,i,this.getWidth(),this.getHeight())}getWidth(){let e=this.getAttr("width");return(0,d.hj)(e)?Math.max(e,1):1}getHeight(){let e=this.getAttr("height");return(0,d.hj)(e)?Math.max(e,1):1}onDataChange(){this.isDataUpdate=!0}onCacheChange(){this.isBatchUpdate=!0}draw(e,t){e.save(),this.beforeDrawHook();let i=this.getAttr("useCache");(void 0===t?i:t)?(this.drawCacheScene(),this.drawFromCache(e)):this.drawScene(e),e.restore()}clone(e){let t=a()(this.getConfig()),i=new this._constructor(t);return e&&this._bindAsyncAttrs(e,i),i}preDetect(){return this.getAttr("isContain")&&!!this.getAttr("data")}_bindAsyncAttrs(e,t){e.forEach(e=>{this.watch(e,({newVal:i})=>{t.setAttr(e,i)})})}beforeDrawHook(){}getContextStyles(){return{}}constructor(){super(),this.id=(0,n.M8)(),this.isBatchUpdate=!0,this.isDataUpdate=!0,this.preContextStyles={},this.initEvents(),this._constructor=new.target}};u.defaultConfig={...o.Z.defaultConfig,lineCap:"butt",lineDashOffset:0,lineJoin:"miter",lineWidth:1,miterLimit:10,fillStyle:l.E.Black,strokeStyle:l.E.Black,globalAlpha:1,globalCompositeOperation:"source-over",shadowBlur:0,shadowColor:l.E.Black,shadowOffsetX:0,shadowOffsetY:0,font:"10px sans-serif",textAlign:"left",textBaseline:"top",direction:"ltr",stroke:!1,fill:!1,useCache:!1,isVisible:!0,isHover:!1,isContain:!0,data:null,fontKerning:"auto",fontStretch:"normal",fontVariantCaps:"normal",textRendering:"auto",wordSpacing:""}},63226:function(e,t,i){var r,s,a,o;i.d(t,{OK:()=>r,Qv:()=>l,SR:()=>s,z0:()=>n}),(a=r||(r={})).MA="@MA",a.EMA="@EMA",a.WMA="@WMA",a.BOLL="@BOLL",a.VWAP="@VWAP",a.AVL="@AVL",a.TRIX="@TRIX",a.SAR="@SAR",(o=s||(s={})).VOL="@VOL",o.MACD="@MACD",o.RSI="@RSI",o.KDJ="@KDJ",o.OBV="@OBV",o.CCI="@CCI",o.StochRSI="@Stoch RSI",o.WR="@Wm %R",o.DMI="@DMI",o.MTM="@MTM",o.EMV="@EMV",o.OI_UM="@OI-UM",o.OI_CM="@OI-CM",o.LS_ACCO="@LS-Acco",o.LS_POSIT="@LS-Posit",o.LS_RATIO="@LS-Ratio",o.BS_VOL="@BSVol",o.BASIS="@Basis",o.MFI="@MFI";let l=Object.values(r),n=Object.values(s)},37418:function(e,t,i){var r,s,a,o,l,n,d,c,h,u;i.d(t,{Fb:()=>r,LF:()=>m,Mf:()=>s,VQ:()=>l,gJ:()=>o,l1:()=>g,rB:()=>a});let g=["1","2","3","4"];(n=r||(r={})).High="high",n.Low="low",n.Open="open",n.Close="close",(d=s||(s={})).Hollow="hollow",d.Solid="solid",(c=a||(a={}))[c.Candle=0]="Candle",c[c.Line=1]="Line",c[c.Bar=2]="Bar",c[c.Area=3]="Area",(h=o||(o={}))[h.Solid=0]="Solid",h[h.Hollow=1]="Hollow",(u=l||(l={})).BuySell="BuySell",u.Arrow="Arrow";let m=({value:e,pristine:t=!0})=>({type:"color",value:e,pristine:t})},15093:function(e,t,i){i.d(t,{l:()=>r,z:()=>s});let r=5,s=({type:e,minX:t,maxX:i,defaultX:r})=>{switch(e){case"right":return i;case"center":return Math.floor((i+t)/2);case"left":return t;case"date":return r;default:return 0}}},71680:function(e,t,i){i.d(t,{Wo:()=>h,ah:()=>u,pC:()=>c});var r=i(23059),s=i.n(r),a=i(10937),o=i.n(a),l=i(98140),n=i(2839);let d=({item:e,type:t})=>{switch(t){case"open":return[e.open];case"close":return[e.close];case"high":return[e.high];case"low":return[e.low];case"all":return[e.open,e.close,e.low,e.high];default:return[]}},c=({price:e,item:t,toPosition:i=s(),magnetizeTo:r="all",delta:a=1})=>{let l=window.screen.height*(a/100),n=i(e),c={price:e,y:n,delta:0};if(!t)return{price:c.price,y:c.y};let h=d({item:t,type:r}).map(e=>{let t=i(e);return{price:e,y:t,delta:Math.abs(t-c.y)}}).filter(e=>e.delta<=l),u=o()(h,e=>e.delta)||c;return{price:u.price,y:u.y}},h=({type:e})=>{switch(e){case n.oX.Line:case n.oX.GradientArea:case n.oX.TimeGradientArea:return"close";default:return"all"}},u=(e,t)=>t?(0,l.dd)({value:e,candidates:t.filter(e=>"3D"!==e)}):e},81669:function(e,t,i){i.d(t,{Z:()=>en});var r,s,a=i(99507),o=i(1868),l=i.n(o),n=i(9850),d=i.n(n),c=i(21842),h=i.n(c),u=i(55324),g=i.n(u),m=i(10937),p=i.n(m),x=i(71432),f=i(60461),b=i(25609),y=i(68015),v=i.n(y),C=i(27875),w=i.n(C),S=i(11403),T=i.n(S),A=i(73749);let _=e=>-Math.floor(Math.log10(e)),L=(e,t)=>v()(t,_(t-e)),k=e=>(e.sort((e,t)=>e-t),T()(e,(t,i,r)=>{let s=e[r-1],a=s?L(s,i):v()(i,_(i)+1);return t.push(a),t},[])),I=(e,t)=>e>t?10**-Math.floor(Math.log10(e/t)):Math.floor(t/e)+1;(r=s||(s={}))[r.Fix=0]="Fix",r[r.Linear=1]="Linear",r[r.Log=2]="Log";let P=class{get maxScaleCoeff(){return 10}get minScaleCoeff(){return 1}setDomain({min:e,max:t}){switch(this._mode){case 2:case 1:this.domainRange.setMinValue(e).setMaxValue(t),this.domainRange.scaleAroundCenter(this._scaleCoeff);break;case 0:this.domainRange.setMinValue(0).setMaxValue(t*this._scaleCoeff)}}setCurrentScaleCoeff(e){this._scaleCoeff=e,this.domainRange.scaleAroundCenter(this._scaleCoeff)}getCurrentScaleCoeff(){return this._scaleCoeff}setScaleCoeff(e){this._scaleCoeff=w()(e,this.minScaleCoeff,this.maxScaleCoeff)}isValid(){return this.domainRange.getInterval()>0}getAxisData(e=e=>e){let t=this.domainRange.getExtent(),i=this.coordRange.getExtent(),r=Math.max(2,Math.floor(this.coordRange.getDifference()/40));if(2===this._mode){let s=(0,f.Z)(t,i).constant(this._logConstant),a=(0,b.Z)(t,i);return k(a.ticks(r).map(a).map(s.invert)).map(t=>({p:s(t),v:e(t)}))}{let s=(0,b.Z)(t,i);return s.ticks(r).map(t=>({p:s(t),v:e(t)}))}}getRelativeAxisData({baseValue:e}){let t=Math.abs(Math.ceil(this.coordRange.getInterval()/30+1e-5));if(0===t)return[];let[i,r]=this.domainRange.getExtent(),s=.05*e,a=I(s,(r-i)/t),o=s*a,l=[{p:this.getCoordOfValue(e),v:e}];for(let t=e-o;t>i;t-=o)l.unshift({p:this.getCoordOfValue(t),v:t});for(let t=e+o;t<r;t+=o)l.push({p:this.getCoordOfValue(t),v:t});return l}getScaleCoeff(){return this._scaleCoeff}resetScaleCoeff(){this._scaleCoeff=1}getCoordOfValue(e){let t=this.domainRange.getExtent(),i=this.coordRange.getExtent();return 2===this._mode?(0,f.Z)(t,i).constant(this._logConstant)(e):(0,b.Z)(t,i)(e)}getValueOfCoord(e){let t=this.domainRange.getExtent(),i=this.coordRange.getExtent();return 2===this._mode?(0,f.Z)(t,i).constant(this._logConstant).invert(e):(0,b.Z)(t,i).invert(e)}scaleAroundCenter(e){0!==this._mode&&(this.setScaleCoeff(this.getScaleCoeff()*e),this.domainRange.scaleAroundCenter(e))}getMode(){return this._mode}shift(e){let t,i=this.domainRange.getExtent(),r=this.coordRange.getExtent(),[s,a]=[(t=2===this._mode?(0,f.Z)(i,r).constant(this._logConstant):(0,b.Z)(i,r)).invert(r[0]+e),t.invert(r[1]+e)];this.domainRange.setMinValue(s).setMaxValue(a)}constructor({domain:e,coordRange:t,mode:i=1,precision:r}){switch(this._scaleCoeff=1,this.domainRange=new A.Z(e[0],e[1]),this.coordRange=new A.Z(t[0],t[1]),this._mode=i,this._logConstant=1/(10**r*100),this._mode){case 2:case 1:this.domainRange.scaleAroundCenter(this._scaleCoeff)}}},E=class extends P{get maxScaleCoeff(){return 4}get minScaleCoeff(){return 1}scaleAroundCenter(e){this._scaleCoeff*e>this.maxScaleCoeff||this._scaleCoeff*e<this.minScaleCoeff||(this._scaleCoeff*=e,this.domainRange.scaleAboveBottom(e))}constructor(e,t){super({domain:e,coordRange:t,mode:s.Fix,precision:1})}};var B=i(78409),N=i(43061),M=i(2839),D=i(34300),V=i(62086),j=i(44277),R=i(36685),O=i(55480),F=i(37418),H=i(71680),Z=i(53806),U=i(27868),W=i(72009);let $=class extends W.ZP{draw(){}};var z=i(15093),K=i(36844),X=i(34450);let Y=class extends X.Z{_initEvents(){this.on("mousemove","pan",this.onmousemove),this.on("mouseout",this.onmouseout.bind(this)),this.on("mousewheel",this.onmousewheel.bind(this)),this.on("mousedown",N.HD.MOUSE_DOWN,this.onmousedown),this.on("gesturestart",this.ongesture.bind(this)),this.on("gesturechange",this.ongesture.bind(this)),this.on("gestureend",this.ongesture.bind(this))}getCtxsByDrawMode(e){let t=this.getRoot(),i=t.getContext(),r=t.getMarkContext(),s=t.getInfoContext();return({[M.mB.All]:[i,r,s],[M.mB.Resize]:[i,r,s],[M.mB.Marks]:[r]})[e]||[]}clear(e){let t=this.getClearBound();e.forEach(e=>U.Z.clearRect(e,t))}setViewBound(){let e=this.getRoot(),t=this.getParent().getBound(),i=e.getAttr("margin"),{isFloat:r=!1}=e.getAttr("yAxis"),s=this.getAttr("isMobile")&&r?0:i.right;this.setBound({x:t.x,y:t.y,width:t.width-s,height:t.height})}getXYTicksData(){let e=this.getRoot(),t=this.getParent(),i=e.settingStore.getValue("@contextMenu.percentageScale"),r=e.getXAxis()?.getAxisData()||[],s=(i?t.yAxis?.getRelativeAxisData({baseValue:e.getFirstVisibleSeriesDataClosePrice()}):t.yAxis?.getAxisData())||[];return{xData:r.map(e=>e.p),yData:s.map(e=>e.p)}}createTextLabel(e){let t=this.getRoot(),i=t.getColorFromColorTable("cross.defaultLabelTextColor"),r=t.getColorFromColorTable("cross.defaultLabelBgColor"),s=t.getColorFromColorTable("cross.defaultLabelBorderColor");return{...e,color:i,bgColor:r,borderColor:s}}drawFeatures(e=this._lastCursor){if(void 0===e&&void 0===this._lastCursor||(e&&(this._lastCursor=e),!this._isMouseInside))return;let t=this.getRoot(),i=this.getParent(),r=t.getHitContext();this.clearHitContext(),this.initialCtxs([r]);let{show:s=!1}=t.getAttr("crossHair"),a=t.getAttr("enabledFeatures").has(N.AN.ChartTrading),o=t.settingStore.getValue("@contextMenu.chartTrading"),l=this.transformPointToView(e);s?(this.drawCrossHairByTime(r,l),a&&o&&i.panelType===M.wh.BASE&&this.drawPlaceOrder(r,l)):this.drawCursor(r,l),this.restoreCtxs([r])}furtherTransformPointToView(e){let t=this.transformPointToView(e);return{...t,y:-t.y}}drawPlaceOrder(e,t){let i=this.getRoot(),r=this.getParent().magnetizeY({y:t.y}),s=i.getColorFromColorTable("cross.defaultLabelBgColor"),a=i.getColorFromColorTable("cross.defaultLabelBorderColor"),o=i.getColorFromColorTable("icon.plus");e.save();let l=this.placeOrderRect.getAttr("width"),n=W.a*(this.showPercentageLabel()?2:1),d={x:this.bound.width-l-1,y:-r.y-n/2};this.placeOrderRect.setAttr("height",n),this.placeOrderRect.setAttr("fillStyle",s),this.placeOrderRect.setAttr("strokeStyle",a),this.placeOrderRect.setAttr("data",d),this.placeOrderRect.drawScene(e),e.restore(),e.save();let c=this._placeOrderIcon.getAttr("width"),h=this._placeOrderIcon.getAttr("height"),u={x:d.x+(l-c)/2,y:d.y+(n-h)/2};this._placeOrderIcon.setAttr("fillStyle",o),this._placeOrderIcon.setAttr("data",u),this._placeOrderIcon.drawScene(e),e.restore()}drawCursor(e,t){let i=this.getRoot();if(i.getEditor().shouldMagnet()){let r=this.getParent(),s=i.getXAxis(),a=s.getValueOfCoord(t.x),o=r.magnetizeY({y:t.y}),l={x:s.getCoordOfValue(a),y:o.y};this._magnetIcon.setAttr("data",{x:l.x+5,y:-l.y+5}),this._magnetIcon.drawScene(e)}}drawCrossHairByTime(e,t){let i=this.getRoot(),r=i.getEditor(),s=i.getXAxis(),a=s.getValueOfCoord(t.x);i.setCurrentItemByTime(a);let o=this.getParent(),l={minX:0,minY:i.getAttr("margin").top-this.bound.y,maxX:this.bound.width,maxY:i.visibleViewHeight-this.bound.y},n=o.magnetizeY({y:t.y}),d={x:s.getCoordOfValue(a),y:n.y},c=i.settingStore.getValue("@contextMenu.percentageScale"),h=i.getAttr("precision"),u=i.getLastSeriesDataClosePrice(),g=(+o.formatterValue(n.price)-u)/u*100,m=this.createTextLabel({text:`${g>0?"+":""}${(0,R._A)()?(0,R.dD)(g.toFixed(w()(h,2,4))):g.toFixed(w()(h,2,4))}%`}),p=this.getCrossYAxisLabel(n.price),x=this.createTextLabel({text:o.panelType===M.wh.BASE&&c?i.getFirstVisibleSeriesDataAsRelativePercentage({value:n.price}):(0,R._A)()?Number.isNaN(Number(p))?p:(0,R.dD)(p):p}),f={x:this.bound.width+1,y:-d.y},b=this.createTextLabel({text:(0,j.XH)(a,s.getTimeScaleType())}),y={x:s.getCoordOfValue(a),y:i.visibleViewHeight-this.bound.y},v=this.showPercentageLabel()?[x,m]:[x],C=i.getColorFromColorTable("cross.borderLineColor");(0,j.ui)(e,{strokeStyle:C,lineWidth:1}),this.renderer.drawVerticleCrossLine(e,{x:y.x,y:d.y},l,[3,3]),this.renderer.drawHorizontalCrossLine(e,{x:y.x,y:d.y},l,[3,3]),this.renderer.drawCursorDot(e,{x:d.x,y:-d.y,color:C}),r.shouldMagnet()&&(this._magnetIcon.setAttr("data",{x:d.x+5,y:-d.y+5}),this._magnetIcon.drawScene(e)),this.renderer.drawXAxisLabel({ctx:e,point:y,label:b,candlestick:i}),this.renderer.drawYAxisLabel({ctx:e,point:f,labels:v,styleType:"semi-rounded"})}getCrossYAxisLabel(e){let t=this.getParent(),i=2;if(t.panelType===M.wh.BASE){let t=this.getRoot(),{dataFormatter:r}=t.getAttr("candlestick");if(i=t.getAttr("precision"),r===M.aI.Percentage){let t=Math.max(0,i-2);return`${(100*e).toFixed(t)}%`}}return t.formatterValue(e)}clearHitContext(){let e=this.getRoot().getHitContext();U.Z.clearRect(e)}onmousemove(e){let t=this.getRoot(),i=this.getParent(),r=this.furtherTransformPointToView(e.point),s=this.placeOrderRect.isHover(r),a={isRecord:!1,weight:s?600:100,config:{style:s?N.Li.POINTER:N.Li.CROSSHAIR}};t.setCursor(a),i.getAttr("isAbleTriggerMove")&&(this._isMouseInside=!0,this.drawFeatures(e.point))}ongesture(e){if(this._isMouseDown)return;let t=e.originEvent;t.preventDefault();let i=this.getRoot(),r=i.getXAxis(),{x:s}=this.transformPointToView(e.point),a=r.getValueOfCoord(s);"gesturestart"===t.type&&(this.gestureLastScale=t.scale),"gesturechange"===t.type&&(i.zoomByCoeff(this.gestureLastScale/t.scale,a),this.gestureLastScale=t.scale)}onmouseout(){let e=this.getRoot(),t=e.getHitContext();U.Z.clearRect(t),this.clearDragEvent(),e.setCurrentItemByTime(e.getMaxTimestamp()),this._isMouseInside=!1}onmousedown(e){let t=this.furtherTransformPointToView(e.point),i=this.getParent();if(this.placeOrderRect.isHover(t)){let t=this.transformPointToView(e.point),r=i.getPriceOfYPos(t.y),s=i.formatterValue(r);this.getRoot().clickPlaceOrder({price:r,formattedPrice:s,mousePosition:e.point});return}if(e.isDealed)return;let r=e.originEvent;if(this._isMouseDown=!0,r.touches&&r.touches.length>1){this._isScaling=!0,this.onmousescale(e);return}let s=this.getRoot(),{x:a,y:o}=e.point,l=!1;this.on("mousemove",N.HD.MOUSE_DOWN_MOVE,t=>{if(this._isScaling)return;l=!0;let{x:r,y:n}=t.point,d=Math.abs(r-e.point.x),c=2*Math.abs(n-o);i.getAttr("autoScale")?d>c&&(s.shiftTimeLine(a-r),a=r):(s.shiftTimeLine(a-r),i.yAxis?.shift(n-o),a=r,o=n),e.originEvent.preventDefault(),t.originEvent.preventDefault()}),this.on("mouseup",N.HD.MOUSE_DOWN_UP,()=>{l&&this.getRoot().fireAfterTimeShifted(),this._isMouseDown=!1,this.clearDragEvent()})}onmousescale(e){let t=this.getRoot(),{clientX:i,clientX1:r}=e,[s,a]=[i,r],o=!1;this.on("mousemove",N.HD.MOUSE_DOWN_MOVE,i=>{o=!0;let{clientX:r,clientX1:l}=i;if(void 0===l)this.clearDragEvent();else{let e=300*Math.log10(Math.abs((r-l)/(s-a)));if(!Number.isFinite(e))return;e>1?t.zoomIn(e):t.zoomOut(e),s=r,a=l}i.originEvent.preventDefault(),e.originEvent.preventDefault()}),this.on("mouseup",N.HD.MOUSE_DOWN_UP,()=>{this.clearDragEvent(),o&&t.fireAfterTimeShifted()})}wheelEventType(e){let{deltaX:t,deltaY:i}=e;return -3*i===e.wheelDeltaY||Math.abs(t)>=Math.abs(i)?"touchpad":"mousewheel"}onmousewheel(e){let{originEvent:t,point:i}=e,{deltaY:r,deltaX:s,wheelDeltaY:a,ctrlKey:o}=t,l=this.getRoot(),n=this.wheelEventType(t);"ready"===this.wheelMode&&!o&&(this.wheelAccumlateX+=s,this.wheelAccumlateY+=r,Math.abs(this.wheelAccumlateX)>10?this.wheelMode="x":Math.abs(this.wheelAccumlateY)>10&&(this.wheelMode="y")),("y"===this.wheelMode||o||"mousewheel"===n)&&("mousewheel"===n?l.zoomAroundRight(r?-(r/3):a/12):l.zoomAroundRight(o?r:-r)),"x"===this.wheelMode&&l.shiftTimeLine(s),this.wheelResetTimer&&window.clearTimeout(this.wheelResetTimer),o&&this.resetWheelMode(),this.wheelResetTimer=window.setTimeout(this.resetWheelMode,20),this.drawFeatures(i),t.preventDefault()}clearDragEvent(){this.off("mousemove",N.HD.MOUSE_DOWN_MOVE),this.off("mouseup",N.HD.MOUSE_DOWN_UP),this._isScaling=!1}isPlaceOrderHovered(e){let t=this.furtherTransformPointToView(e);return this.placeOrderRect.isHover(t)}showPercentageLabel(){let e=this.getRoot(),t=this.getParent(),i=e.getAttr("isMobile"),{dataFormatter:r}=e.getAttr("candlestick"),s=r===M.aI.Percentage,a=e.settingStore.getValue("@contextMenu.percentageScale");return!i&&!a&&t.panelType===M.wh.BASE&&!s}constructor(){super(),this.config={...d()(X.Z.defaultConfig),zIndex:1},this._isMouseInside=!1,this._isScaling=!1,this._isMouseDown=!1,this.gestureLastScale=1,this.wheelAccumlateX=0,this.wheelAccumlateY=0,this.wheelMode="ready",this._placeOrderIcon=new K.jC({path:"M12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6ZM5.16667 6.83333V10H6.83333V6.83333H10V5.16667H6.83333V2H5.16667V5.16667H2V6.83333H5.16667Z",width:12,height:12,strokeStyle:"transparent"}),this._magnetIcon=new K.jC({path:"M2.07101 2.07084C-0.272135 4.41398 -0.27214 8.21297 2.07101 10.5561L3.95663 12.4417L6.77536 9.623L4.88974 7.73738C4.10334 6.95098 4.10334 5.67597 4.88974 4.88957C5.67615 4.10317 6.95115 4.10317 7.73755 4.88957L9.62317 6.77519L12.4419 3.95645L10.5563 2.07084C8.21314 -0.272309 4.41416 -0.27231 2.07101 2.07084ZM13.3847 4.89926L10.566 7.718L11.9802 9.13221L14.7989 6.31348L13.3847 4.89926ZM7.71817 10.5658L4.89944 13.3845L6.31365 14.7988L9.13238 11.98L7.71817 10.5658Z",width:15,height:15,fillStyle:"#F0B90B",strokeStyle:"transparent"}),this.placeOrderRect=new K.UL({width:22,borderRadius:[4,0,0,4]}),this.resetWheelMode=()=>{this.wheelMode="ready",this.wheelAccumlateX=0,this.wheelAccumlateY=0},this._initEvents()}},G=class extends Y{get parent(){return this.getParent()}render(e){let t=this.getRoot(),i=t.getContext(),r=t.getMarkContext(),s=this.getCtxsByDrawMode(e);if(this.clear(s),this.initialCtxs(s),this.createClipBound(s),e===M.mB.All||e===M.mB.Resize){let{xData:e,yData:r}=this.getXYTicksData(),s=t.settingStore.getValue("@background.vertGridLine.show"),a=t.settingStore.getValue("@background.vertGridLine.color.value"),o=t.settingStore.getValue("@background.vertGridLine.lineWidth");s&&(i.save(),(0,j.ui)(i,{strokeStyle:a,lineWidth:+o}),this.renderer.drawVertGridLine(i,this.bound,e),i.restore());let l=t.settingStore.getValue("@background.horzGridLine.show"),n=t.settingStore.getValue("@background.horzGridLine.color.value"),d=t.settingStore.getValue("@background.horzGridLine.lineWidth");l&&(i.save(),(0,j.ui)(i,{strokeStyle:n,lineWidth:+d}),this.renderer.drawHorzGridLine(i,this.bound,r),i.restore()),this._renderMainIndicatorCharts(i)}t.getAttr("annotationVisible")&&this.plotShapes(r),this.restoreCtxs(s)}drawMainSeries(e,t){let i=this.getRoot(),r=i.settingStore.getValue("@symbol.candlestick.line.color.value"),s=i.settingStore.getValue("@background.color.value"),a=i.settingStore.getValue("@symbol.candlestick.line.width");switch(t){case M.oX.Line:this.plotChart(e,{chartType:M.oX.Line,data:this.getLineData(),zIndex:0,color:r,lineWidth:+a}),this.drawMaxAndMinArrows(e,!0);break;case M.oX.GradientArea:this.plotChart(e,{chartType:M.oX.GradientArea,data:this.getLineData(),zIndex:0,strokeColor:r,fillColor1:r,fillColor2:s,opacity:.5});break;case M.oX.TimeGradientArea:this.plotChart(e,{chartType:M.oX.GradientArea,data:this.getLineData(),zIndex:0,strokeColor:i.getColorFromColorTable("area.stroke"),fillColor1:i.getColorFromColorTable("area.fill1"),fillColor2:s,opacity:.5}),this.drawMaxAndMinArrows(e,!0);break;default:{let i=this.transformToGroup(this.getVisibleBars());this.plotGroupGraphs(e,i,t,e=>({fillStyle:e,strokeStyle:e})),this.drawMaxAndMinArrows(e,!1)}}this.drawLastPriceLine(e),this.drawPercentageViewBaseLine(e)}drawLogo(){let e=this.getRoot(),t=e.getAttr("theme")?.toLowerCase()==="light",i=e.getFrameContext();i&&(0,V.ZA)(t?x.rk:x.d0).then(e=>{U.Z.clearRect(i),this.initialCtxs([i]);let t=this.getAttr("isMobile");i.globalAlpha=t?.07:.04,this.renderer.drawImage(i,e,this.getBound(),t?{width:200,height:40}:{width:300,height:60}),i.restore()})}drawMaxAndMinArrows(e,t=!1){let i=this.getRoot(),r=i.getAttr("precision"),s=i.getColorFromColorTable("text.minMaxPrice"),[a,o]=this.getMaxMinItems(t);if(a&&o){(0,j.ui)(e,{fillStyle:s,strokeStyle:s}),e.beginPath();let t={...a,value:l()(a.value,r)};this.drawArrowText(e,t,-1),this.drawArrowText(e,o,1)}}drawArrowText(e,t,i){let r=this.getParent();(0,j.ui)(e,{textAlign:M.PH.Right,textBaseline:M.Wr.Middle});let s=this.getPosition(t.time,t.value),a=(0,R._A)()?(0,R.dD)(r.formatterValue(t.value)):r.formatterValue(t.value),o=U.Z.measureTextWidth(a),l=-3,n=-12;this.isOverlapLeft(s.x+n-o+l)&&((0,j.ui)(e,{textAlign:M.PH.Left}),l=3,n=12),U.Z.drawLine(e,s.x,s.y+i,s.x+n,s.y+i),U.Z.drawText(e,a,s.x+n+l,s.y+i),e.stroke()}drawBidAskLabels(e){let t=this.getRoot(),i=this.getParent(),r=t.settingStore.getValue("@contextMenu.bidAsk"),s=t.getAttr("askBid")||{ask:0,bid:0},a=+s.ask,o=+s.bid;if(!r||!a||!o)return;let l=t.getI18n("ask","Ask"),n=t.getI18n("bid","Bid"),d=t.getColorFromColorTable("cross.labelTextColor"),c=t.getColorFromColorTable("cross.upLabelBgColor"),h=t.getColorFromColorTable("cross.downLabelBgColor"),u=-i.yAxis.getCoordOfValue(a),g=-i.yAxis.getCoordOfValue(o),[,m]=i.xAxis.getRange(),p=(0,R._A)()?(0,R.dD)(i.formatterValue(a)):i.formatterValue(a),x=(0,R._A)()?(0,R.dD)(i.formatterValue(o)):i.formatterValue(o);this.renderer.drawAskBidLabels({ctx:e,labels:[{text:`${l}     ${p}`,point:{x:m-1,y:u},color:d,bgColor:h,borderColor:h},{text:`${n}     ${x}`,point:{x:m-1,y:g},color:d,bgColor:c,borderColor:c}]})}drawLastPriceLine(e){let t=this.getRoot(),i=this.getParent(),r=t.settingStore.getValue("@contextMenu.priceLine"),s=t.getSeriesData(),a=s[0],o=s[s.length-1];if(!r||!o||!a)return;let[l,n]=i.xAxis.getRange(),d=i.yAxis.getCoordOfValue(o.close),c=o.close>=o.open?t.getColorFromColorTable("cross.upLabelBgColor"):t.getColorFromColorTable("cross.downLabelBgColor");e.save(),(0,j.ui)(e,{strokeStyle:c,lineWidth:1}),this.renderer.drawHorizontalCrossLine(e,{x:0,y:d},{minX:l,maxX:n,minY:0,maxY:0},[4,4]),e.restore()}drawPercentageViewBaseLine(e){let t=this.getRoot(),i=this.getParent(),r=t.settingStore.getValue("@contextMenu.percentageScale"),s=t.getFirstVisibleSeriesDataClosePrice();if(!r||!s)return;let[a,o]=i.xAxis.getRange(),l=i.yAxis.getCoordOfValue(s),n=t.getColorFromColorTable("cross.borderLineColor");e.save(),(0,j.ui)(e,{strokeStyle:n,lineWidth:1}),this.renderer.drawHorizontalCrossLine(e,{x:0,y:l},{minX:a,maxX:o,minY:0,maxY:0},[1,1]),e.restore()}getBarPosition(e){let{yAxis:t}=this.getParent(),{time:i,low:r,high:s,open:a,close:o}=e,l=this.xAxis.getCoordOfValue(i),n=t.getCoordOfValue(r),d=t.getCoordOfValue(s);return{x:l,lowY:n,highY:d,openY:t.getCoordOfValue(a),closeY:t.getCoordOfValue(o)}}getPosition(e,t){return{x:this.xAxis.getCoordOfValue(e),y:-this.parent.yAxis.getCoordOfValue(t)}}getLineData(){let e=this.getRoot().getVisibleSeriesData();return this.checkData(e),e.map(e=>{let{time:t,close:i}=e;return{time:t,value:i}})}getVisibleBars(){let e,t=this.getRoot(),i=t.getVisibleSeriesData();this.checkData(i);let{barWeight:r=.8}=t.getAttr("candlestick"),s=t.settingStore.getValue("@symbol.candlestick.candle.colors.up.color.value"),a=t.settingStore.getValue("@symbol.candlestick.candle.colors.up.borderColor.value"),o=t.settingStore.getValue("@symbol.candlestick.candle.colors.up.wickColor.value"),l=t.settingStore.getValue("@symbol.candlestick.candle.colors.down.color.value"),n=t.settingStore.getValue("@symbol.candlestick.candle.colors.down.borderColor.value"),d=t.settingStore.getValue("@symbol.candlestick.candle.colors.down.wickColor.value"),c=this.getParent().getFixedBarWidth(r),h=864e5>t.getXAxis().getTimeUnitValue();return i.map((r,u)=>{let{x:g,lowY:m,highY:p,openY:x,closeY:f}=this.getBarPosition(r);return h&&u>0&&!(0,j.Fr)(g-e-this.xAxis.unitWidth,1e-5)&&t.fire("dispatchErrorData",{data:{type:"renderError",payload:{prevItem:i[u-1],nextItem:r}}}),e=g,{...r,x:g,y:Math.max(x,f),width:c,height:Math.max(1,Math.abs(f-x)),openY:x,closeY:f,highY:p,lowY:m,color:r.close>=r.open?s:l,borderColor:r.close>=r.open?a:n,wickColor:r.close>=r.open?o:d}})}getMaxMinItems(e=!1){let t=this.getRoot(),i=this.xAxis instanceof Z.Z?t.getVisibleSeriesData():t.getVisibleSeriesData().filter(e=>this.xAxis.domainContains(e.time));if(0===i.length)return[];let r={time:0,value:-Number.MAX_SAFE_INTEGER},s={time:0,value:Number.MAX_SAFE_INTEGER};for(let t=0;t<i.length;t++){let{time:a,close:o,high:l,low:n}=i[t];e?(o>r.value&&(r={time:a,value:o}),o<s.value&&(s={time:a,value:o})):(l>r.value&&(r={time:a,value:l}),n<s.value&&(s={time:a,value:n}))}return[r,s]}isOverlapLeft(e){let[t]=this.xAxis.getRange();return e<t}drawTimeAnchorLine(e){let t=this.getRoot(),i=t.settingStore.getValue("@timeTool.timeAnchor"),r=t.settingStore.getValue("@timeTool.anchorLine");if(!i||!r)return;let s=this.getTimeAnchorDateX(),a={minX:0,minY:t.getAttr("margin").top-this.bound.y,maxX:this.bound.width,maxY:t.visibleViewHeight-this.bound.y},o=t.getColorFromColorTable("cross.borderLineColor");(0,j.ui)(e,{strokeStyle:o,lineWidth:1}),this.renderer.drawVerticleCrossLine(e,{x:s,y:0},a,[3,3])}getTimeAnchorDateX(){let e=this.getRoot(),t=e.getXAxis(),[i,r]=t.getRange(),s=e.settingStore.getValue("@timeTool.anchorPoint"),a=e.settingStore.getValue("@timeTool.timeAnchorDate.value"),o=(0,z.z)({type:s,minX:i,maxX:r,defaultX:t.getCoordOfValue(a)});switch(e.settingStore.getValue("@timeTool.anchorPoint")){case"left":return o+z.l;case"right":return o-z.l;default:return o}}_renderMainIndicatorCharts(e){let t=this.getRoot().settingStore.getValue("@symbol.candlestick.type"),i=this.getParent().getVisibleResults(),r=[],s=[];i.forEach(e=>{let[t,i]=(0,j.ln)(e,e=>e.zIndex<0);r.push(...t),s.push(...i)}),this.drawMainSeries(e,t?.toUpperCase()),this.drawTimeAnchorLine(e),r.sort((e,t)=>(e.zIndex||0)-(t.zIndex||0)),r.forEach(this.plotChart.bind(this,e)),s.sort((e,t)=>(e.zIndex||0)-(t.zIndex||0)),s.forEach(this.plotChart.bind(this,e)),this.drawBidAskLabels(e)}constructor(...e){super(...e),this.renderer=new $,this.checkData=(0,j.P2)(e=>{let t=this.getRoot(),i=t.getXAxis().getTimeUnitValue(),{length:r}=e;if(r>2&&i<864e5&&e[r-1].time>=t.lastDataTime+i)for(let s=r-1;s>=1;s--){let r=e[s-1].time,a=e[s].time;if(a<=t.lastDataTime+i)return;a-r>=2*i&&t.fire("dispatchErrorData",{data:{type:"disConnect",payload:{prevItem:e[s-1],nextItem:e[s]}}})}},500)}},q=class extends W.ZP{draw(e,t){let{width:i,height:r}=t;U.Z.drawLine(e,0,-r,i,-r),e.stroke()}drawUnavaliableText({ctx:e,color:t,text:i,bound:r}){e.save(),e.strokeStyle=t,e.fillStyle=t,e.font="400 12px BinanceNova";let s=e.measureText(i.trim()),a=s.actualBoundingBoxAscent+s.actualBoundingBoxDescent,o={x:(r.width-s.width)/2,y:-((r.height-a)/2)};U.Z.drawText(e,i,o.x,o.y),e.restore()}constructor(...e){super(...e),this.drawCloseIcon=(e,t)=>{let{x:i,y:r,width:s,height:a}=t;e.beginPath(),U.Z.strokeRect(e,i,-(r+a),s,a),U.Z.drawLine(e,i+3,-(r+3),i+s-3,-(r+a-3)),U.Z.drawLine(e,i+3,-(r+a-3),i+s-3,-(r+3)),e.stroke()}}},Q=class extends Y{render(e){let t=this.getRoot(),i=this.getParent().getAttr("indicatorType"),r=t.getContext(),s=this.getCtxsByDrawMode(e);this.clear(s);let a=t.getIndicatorViewByName(i)?.params?.showSeries;if(!(void 0===a||a))return;this.initialCtxs(s),this.createClipBound(r);let{xData:o,yData:l}=this.getXYTicksData(),n=t.settingStore.getValue("@background.vertGridLine.show"),d=t.settingStore.getValue("@background.vertGridLine.color.value"),c=t.settingStore.getValue("@background.vertGridLine.lineWidth");n&&(r.save(),(0,j.ui)(r,{strokeStyle:d,lineWidth:+c}),this.renderer.drawVertGridLine(r,this.bound,o),r.restore());let h=t.settingStore.getValue("@background.horzGridLine.show"),u=t.settingStore.getValue("@background.horzGridLine.color.value"),g=t.settingStore.getValue("@background.horzGridLine.lineWidth");h&&(r.save(),(0,j.ui)(r,{strokeStyle:u,lineWidth:+g}),this.renderer.drawHorzGridLine(r,this.bound,l),r.restore()),this._renderIndicatorCharts(r),this.restoreCtxs(s)}drawUnavailableText({drawMode:e,text:t}){let i=this.getRoot(),r=i.getInfoContext(),s=i.getColorFromColorTable("text.unavailable"),a=this.getCtxsByDrawMode(e);this.clear(a),this.initialCtxs(a),this.createClipBound(r),this.renderer.drawUnavaliableText({ctx:r,color:s,text:t,bound:this.getBound()}),this.restoreCtxs(a)}_renderIndicatorCharts(e){let t=this.getParent(),i=t.getVisibleChartData(t.getPanelId());i.sort((e,t)=>(e.zIndex||0)-(t.zIndex||0)),i.forEach(this.plotChart.bind(this,e))}constructor(...e){super(...e),this.renderer=new q,this.weight=.3}};var J=i(52116),ee=i(34244),et=i.n(ee),ei=i(98140);let er=class extends W.ZP{draw(e,t){e.beginPath(),U.Z.drawLine(e,0,0,0,-t.height),U.Z.drawLine(e,0,0,t.width,0),e.stroke()}constructor(...e){super(...e),this.drawTicks=(e,t,{textMargin:i,tickWidth:r,precision:s,boudHeight:a,textHeight:o})=>{e.beginPath(),t.forEach(t=>{let{p:l,v:n}=t,d=s>=0&&(0,O.hj)(n)?(0,R._A)()?(0,R.dD)(n.toFixed(s)):n.toFixed(s):(0,R._A)()?(0,R.dD)(`${n}`):`${n}`;l>a-.5*o?l=a-.5*o:l<.5*o&&(l=.5*o),e.fillText(d,r+i,-l)}),e.stroke()}}},es=({currentTime:e,interval:t,maxTimestamp:i})=>{let r=(0,ei.m1)(t),s=i+r,a=((s<e?s+r:s)-e)%r;return a>0?a>r?r:a:0},ea=(e,t,i)=>{if(t&&i){let r=et()(i),s=et()(e),a=et()(t);return et()(a).minus(r).abs().gte(s.minus(r).abs())}return!0},eo=({interval:e,time:t})=>{let[,i,r,s,a]=/\d{4}-\d{2}-(\d{2})T(\d{2}):(\d{2}):(\d{2})/.exec(new Date(t).toISOString())||[],[o,l,n,d]=[(+i-1).toString().padStart(2,"0"),r,s,a],{value:c,unit:h}=(0,ei.AS)(e),u=`${n}:${d}`,g=`${l}:${n}:${d}`,m=`${o}D:${l}H`;if(1===c)switch(h){case ei.fb.Hour:return u;case ei.fb.Day:return g}switch(h){case ei.fb.Second:case ei.fb.Minute:return u;case ei.fb.Hour:case ei.fb.Day:return g;default:return m}},el=class extends X.Z{getCtxsByDrawMode(e){let t=this.getRoot(),i=t.getContext(),r=t.getMarkContext();return({[M.mB.All]:[i,r],[M.mB.Resize]:[i,r],[M.mB.Marks]:[r]})[e]||[]}clear(e){let{xAxis:t}=this.getRoot().getConfig(),i=this.getParent(),r=this.getClearBound(i.isLastPanel?t.height:0);e.forEach(e=>U.Z.clearRect(e,r))}render(e){let t=this.getRoot(),i=this.getParent(),{tick:{width:r=5,textMargin:s=5}}=t.getConfig(),a=t.getContext(),o=t.getMarkContext(),l=this.getCtxsByDrawMode(e);if(this.clear(l),this.initialCtxs(l),e===M.mB.All||e===M.mB.Resize){this.createClipBound(a,6*!!i.isLastPanel),(0,j.ui)(a,{strokeStyle:t.getColorFromColorTable("axis.tickLineColor"),fillStyle:t.getColorFromColorTable("axis.tickTextColor"),textBaseline:M.Wr.Middle,textAlign:M.PH.Left,font:"400 12px BinanceNova"});let e={tickWidth:r,textMargin:s,precision:-1,boudHeight:this.getBound().height,textHeight:10};i.panelType===M.wh.BASE&&(e.precision=t.getAttr("precision")),this.renderer.drawTicks(a,this.getTicksData(),e);let o=t.getColorFromColorTable("frame.borderLineColor");(0,j.ui)(a,{strokeStyle:o}),this.renderer.draw(a,this.bound)}this.createClipBound(o),t.getAttr("annotationVisible")&&this.plotShapes(o),this.drawLastUpdateItemShape(o),this.restoreCtxs(l)}drawLastUpdateItemShape(e){let t=this.getRoot(),{interval:i}=t,r=t.getSeriesData(),s=t.settingStore.getValue("@contextMenu.priceLine"),a=t.settingStore.getValue("@contextMenu.countDown"),o=t.getVisibleSeriesData(),l=r[r.length-1],n=o[o.length-1],d=es({currentTime:Date.now(),maxTimestamp:t.getMaxTimestamp(),interval:i});n&&l?.time===n?.time?this.drawLabels({ctx:e,item:n,showCountdown:a,timeUntilNextInterval:d,interval:i}):(n&&this.drawLabels({ctx:e,item:n,showCountdown:a,timeUntilNextInterval:d,interval:i}),l&&s&&this.drawLabels({ctx:e,item:l,showCountdown:!1,timeUntilNextInterval:d,interval:i}))}drawLabels({ctx:e,item:t,showCountdown:i,timeUntilNextInterval:r,interval:s}){let a=this.getParent();if(a.panelType!==M.wh.BASE||!a.yAxis)return;let o=a.yAxis.getCoordOfValue(t.close),l=this.getPriceLabel(t),n=this.getCountdownLabel({time:r,interval:s,item:t}),d={x:1,y:-o};i?this.renderer.drawYAxisLabel({ctx:e,point:d,labels:[{...l,textPositionShift:{x:0,y:1}},{...n,textPositionShift:{x:0,y:-1}}],height:19}):this.renderer.drawYAxisLabel({ctx:e,point:d,labels:[l]})}setViewBound(){let e=this.getRoot(),t=this.getParent().getBound(),{right:i}=e.getAttr("margin"),{x:r,y:s,width:a,height:o}=t;this.setBound({x:r+a-i,y:s,width:i,height:o})}getTicksData(){let e=this.getParent(),t=e.yAxis;if(!t)return[];let i=this.bound.height,r=this.getRoot(),s=r.settingStore.getValue("@contextMenu.percentageScale");if(e.panelType===M.wh.BASE&&s)return t.getRelativeAxisData({baseValue:r.getFirstVisibleSeriesDataClosePrice()}).map(({v:e,...t})=>({...t,v:r.getFirstVisibleSeriesDataAsRelativePercentage({value:+e})}));let a={};return t.getAxisData().map(({p:t,v:i})=>{let r=e.formatterValue(+i);return ea(+i,a[r],+r)&&(a[r]=+i),{p:t,fv:r,v:i}}).reduce((e,{p:t,v:r,fv:s})=>(a[s]===r&&t>=0&&t<=i&&e.push({p:t,v:s}),e),[])}getLongestTickWidth(){let e="400 12px BinanceNova",t=[...this.getTicksData().map(e=>e.v),...this.getMinMaxPercentageText()],i=g()(t,e=>`${e}`.length),r=`${i||""}`,s=U.Z.measureTextWidth("0".repeat(8),{font:e});return Math.max(U.Z.measureTextWidth(r,{font:e}),s)+16}getMinMaxPercentageText(){let e=this.getRoot(),t=e.settingStore.getValue("@contextMenu.percentageScale"),i=this.getParent();if(t||i.panelType===M.wh.EXT||0===i.getVisibleSeriesData().length)return[];let{yAxis:r}=i,s=r.domainRange.getMinValue(),a=r.domainRange.getMaxValue();return[e.getPercentageTextRelativeToLastPrice({price:s}),e.getPercentageTextRelativeToLastPrice({price:a})]}getCountdownLabel({time:e,interval:t,item:{close:i,open:r}}){let s=this.getRoot(),[a,o,l]=i>=r?[s.getColorFromColorTable("countdown.upTextColor"),s.getColorFromColorTable("countdown.upBgColor"),s.getColorFromColorTable("countdown.upBorderColor")]:[s.getColorFromColorTable("countdown.downTextColor"),s.getColorFromColorTable("countdown.downBgColor"),s.getColorFromColorTable("countdown.downBorderColor")];return{text:eo({time:e,interval:t}),color:a,bgColor:o,borderColor:l}}getPriceLabel({close:e,open:t}){let i=this.getRoot(),r=this.getParent(),[s,a]=e>=t?[i.getColorFromColorTable("cross.upLabelBgColor"),i.getColorFromColorTable("cross.upLabelBorderColor")]:[i.getColorFromColorTable("cross.downLabelBgColor"),i.getColorFromColorTable("cross.downLabelBorderColor")];return{text:i.settingStore.getValue("@contextMenu.percentageScale")?i.getFirstVisibleSeriesDataAsRelativePercentage({value:e}):(0,R._A)()?(0,R.dD)(r.formatterValue(e)):`${r.formatterValue(e)}`,color:i.getColorFromColorTable("cross.labelTextColor"),bgColor:s,borderColor:a}}onMouseDoubleClick(){this.getParent().setAttr("autoScale",!0)}onMouseDown({originEvent:e}){this._previousClientY=e.clientY,window.document.body.style.cursor="ns-resize";let t=()=>{window.document.body.style.cursor="auto",window.removeEventListener("mousemove",this._dragHandlerReference),window.removeEventListener("mouseup",t)};window.addEventListener("mousemove",this._dragHandlerReference),window.addEventListener("mouseup",t)}onmousemove(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:N.Li.NSRESIZE},weight:1e3,isRecord:!1})}onmouseout(){this.getRoot().setCursor({key:"gap",isClear:!0,config:{},weight:1e3})}onmousewheel({originEvent:e}){this.zoom(e.deltaY),e.preventDefault()}zoom(e){let t=this.getParent(),i=t.getParent();if(!i)return;i.getAttr("isMobile")||t.setAttr("autoScale",!1);let r=i.getAttr("precision"),{yAxis:a}=t,o=a.getMode()===s.Log?.02/r:.02;a.scaleAroundCenter(e>0?1+o:1/(1+o)),i.updateYAxisWidth({data:i.getSeriesData()}),t.update()}constructor(){super(),this.config={...d()(X.Z.defaultConfig),zIndex:1e3},this.renderer=new er,this._previousClientY=0,this.on("mousedown",this.onMouseDown),this.on("mousemove",this.onmousemove),this.on("mousewheel",this.onmousewheel),this.on("mouseout",this.onmouseout),this.on("dblclick",this.onMouseDoubleClick),setTimeout(()=>{this.getParent().panelType===M.wh.BASE&&setInterval(()=>{this.render(M.mB.Marks)},1e3)},0),this._dragHandlerReference=e=>{let t=e.clientY-this._previousClientY;this._previousClientY=e.clientY,this.zoom(t)}}},en=class extends J.Z{get yAxis(){return this._yAxis||[...this._supplyYAxisMap.values()][0]}get panelType(){return this._panelType}get weight(){return this._weight}get xAxis(){return this.getParent().getXAxis()}get chartResult(){let e=this.getAttr("indicatorType"),{result:t=[]}=this._result.get(e)||{};return t}get results(){return Array.from(this._result.values()).map(({result:e=[]})=>e)}get titleContainer(){return this._titleContainer}get mainPane(){return this._mainWidget}get axisPane(){return this._axisWidget}get timeAxisPane(){return this.getParent().getTimeAxisWidget()}get isLastPanel(){let e=this.getParent().getIPanels();return e[e.length-1]===this}get isDiffPanel(){let e=this.getParent().getIndicatorHelperByName(this.getPanelId());return!!e?.defaultProps.isDiffSource}setYAxis({forceAutoScale:e}={forceAutoScale:!1}){let t=this._panelType===M.wh.BASE,i=this.getPadding(),r=this.getParent(),a=r.getAttr("precision"),o=r.settingStore.getValue("@contextMenu.invertedScale"),l=r.settingStore.getValue("@contextMenu.logarithmicScale"),n=t&&o?[this.bound.height-i,i]:[i,this.bound.height-i],d=t&&l?s.Log:s.Linear;if(this.getAttr("autoScale")||e||void 0===this._yAxis){let{default:e,...t}=this._getYExtent(),r=[e.min,e.max];this._yAxis=e.isScaleCenter?new P({domain:r,coordRange:n,mode:d,precision:a}):new E([0,e.max],[0,this.bound.height-i]),this._supplyYAxisMap.clear(),Object.keys(t||{}).forEach(e=>{let{max:r,min:o,isScaleCenter:l}=t[e],n=l?new P({domain:[o,r],coordRange:[0,this.bound.height-i],mode:s.Linear,precision:a}):new E([0,r],[0,this.bound.height-i]);this._supplyYAxisMap.set(e,n)})}else{let e=this._yAxis.domainRange.getMinValue(),t=this._yAxis.domainRange.getMaxValue();this._yAxis=new P({domain:[e,t],coordRange:n,mode:d,precision:a})}}getPanelId(){return this.getAttr("id")}getYAxisByIndex(e){return this._supplyYAxisMap.get(e)}getAnnotations(){return this._mainWidget.getAnnotations()}getSavedData(){return this._storageData}updateWeight(e){(0,O.hj)(e)&&(this._weight=e)}updateStorageData(){let e=this.getAnnotations(),t=[];for(let i=0,r=e.length;i<r;i++)e[i].getAttr("isNeedStore")&&t.push(e[i].getDescription());this._storageData.annotations=t,this._storageData.indicators=this.getSaveIndicatorsData(),this._storageData.weight=this._weight}save(e){this.updateStorageData(),this.getParent().fireSave(e)}getSaveIndicatorsData(){let e=[],t=this.getParent(),i=t.indicatorStore.getValues();if(this._panelType===M.wh.BASE){let{indicatorViews:r}=t;r.forEach(t=>{let{id:r,title:s,isHistBase:a,isTriggeredByClick:o=!1,isCustom:l=!1,categories:n}=t,d=i[r]||{};a&&e.push({name:s,id:r,type:s,params:d,isTriggeredByClick:o,isCustom:l,categories:n})})}else{let r=this.getPanelId(),{id:s,title:a,isCustom:o=!1,isTriggeredByClick:l=!1,categories:n=[]}=t.getIndicatorViewByName(r)||{},d=s&&i[s]||{};e.push({name:a,id:s,type:a,params:d,isCustom:o,isTriggeredByClick:l,categories:n})}return e}updateCursorStyle(e,t,i){let r=this.getParent(),{style:s}=r.getAttr("crossHair"),a=s;e&&(a=N.Li.POINTER),t&&(a=N.Li.GRAB),i&&(a=N.Li.GRABBING),r.setCursor({config:{style:a},weight:e?500:400,isRecord:!1})}transformAbsoluteXYToPlotItem(e){let{x:t,y:i}=this.transformPointToView(e);return{time:this.xAxis.getValueOfCoord(t),value:this.yAxis.getValueOfCoord(i)}}transformXYToAbsoluteXY(e){let{x:t,y:i}=this.getBound();return{x:t+e.x,y:i-e.y}}getI18n(e,t){return this.getParent().getI18n(e,t)}getMainBound(){let{right:e}=this.getParent().getAttr("margin"),{x:t,y:i,width:r,height:s}=this.bound;return{x:t,y:i,width:r-e,height:s}}getIndicatorResult(e){let{result:t=[]}=this._result.get(e)||{};return t}hasIndicator(e){return this._result.has(e)}updateParams(e,t,i){let r=this.getParent(),s=this._result.get(e),a=r.getIndicatorHelperByName(e);s&&a&&a.getResult(r.getSeriesData(),t,e=>{s.result=e,this.setYAxis(),i?.()})}getVisibleSeriesData(){return this._parent.getVisibleSeriesData()||this._parent.getSeriesData()}setParent(e){if(this._parent)throw Error("Current Node had parent, Pls do not set parent repeatly!");this._parent=e}getParent(){return this._parent}afterSetParent(){this.initEvents()}getPosition({time:e,value:t}){return{x:this.xAxis.getCoordOfValue(e),y:this.yAxis.getCoordOfValue(t)}}getYPos(e){return this.yAxis?.getCoordOfValue(e)}getPriceOfYPos(e){return this.yAxis.getValueOfCoord(e)}getPlotItemByPosition(e,t){return{time:this.xAxis.getValueOfCoord(e),value:this.yAxis.getValueOfCoord(t)}}addWidget(e){return e.setParent(this),this.widgets.push(e),this}addWidgets(e){return e.forEach(e=>{e.setParent(this),this.widgets.push(e)}),this}eachWidgets(e){this.widgets.forEach(t=>{e.call(this,t)})}setViewBound(e){e!==M.Vt.Width&&this.setBound(this.getUpdatedBound()),this.setWidgetsBound(),this.updateTitleContainer()}getAllWeight(){let{iPanels:e}=this.getParent();return e.reduce((e,t)=>e+t.weight,0)}updateViewBound(){this.setBound(this.getUpdatedBound()),this.setWidgetsBound(),this.setYAxis(),this.updateTitleContainer()}updateViewBoundHeight(e,t){let{visibleViewHeight:i}=this.getParent(),r=this.bound.height+e,s=this.getAllWeight();this._weight=r/i*s,this.setBound({...this.bound,y:this.bound.y+t,height:r}),this.setWidgetsBound(),this.setYAxis(),this.updateTitleContainer()}setWidgetsBound(){this.eachWidgets(e=>e.setViewBound())}update(e=M.mB.All){if(this._isWaiting)return;this._isWaiting=!0;let t=this.getParent();setTimeout(()=>{t.hasPanel(this)&&(this.updateImmediate(e),t.getFrontGapOfIPanel(this)?.render(),this._isWaiting=!1)},16)}updateImmediate(e=M.mB.All){this.yAxis&&(this.drawLogo(e),this.widgets.forEach(t=>{t.updateImmediate(e)}),this.drawUnavailableText(e),this.updateTitleLabel(),this._isFirstRender=!1)}removeWidget(e){for(let t=0;t<this.widgets.length;t++)if(this.widgets[t]===e){this.widgets.splice(t,1);break}return this}removeIndicator(e){this._result.delete(e)}initEvents(){let e=this.getParent(),t=this.getPanelId(),i=e.getIndicatorHelperByName(t);this.watch("autoScale",()=>{this.getAttr("autoScale")&&this.autoScaleYAxis(),e.fire("autoScaleChanged",{panel:this})}),i?.defaultProps.isDiffSource?(i?.subscribe?.(()=>{this.updateChartData(0,()=>{this.setYAxis(),this.update()})}),this.onSymbolIntervalChanged(),e.on("intervalChanged",this.onSymbolIntervalChanged),e.on("symbolChanged",this.onSymbolIntervalChanged),e.on("afterTimeShifted",t,(0,j.Ds)(e=>{(0,D.Ic)(e,{abortPredicate:()=>i.isFetchtingData,handleLoadLeft:e=>i.loadData({startTime:e.shiftedMinTime,endTime:e.minTime-1}),handleLoadRight:e=>i.loadData({startTime:e.maxTime,endTime:e.shiftedMaxTime})})},500))):e.watch("theme",this.watchTheme)}destroy(){let e=this.getParent(),{titleContainer:t}=e;this._wrapperContainer&&t.removeChild(this._wrapperContainer);let i=this.getPanelId(),r=e.getIndicatorHelperByName(i);r?.defaultProps.isDiffSource?(r?.unSusbcribe?.(),e.off("afterTimeShifted",i),e.off("intervalChanged",this.onSymbolIntervalChanged),e.off("symbolChanged",this.onSymbolIntervalChanged)):e.unwatch("theme",this.watchTheme),this.setAttr("isDestryed",!0)}updateYExtend({forceAutoScale:e}={forceAutoScale:!1}){let t=this.getAttr("autoScale");(e||t)&&this._updateYExtend()}_updateYExtend(){if(!this.yAxis)return;let{default:e,...t}=this._getYExtent(),i=(e,{min:t,max:i})=>e.setDomain({min:t,max:i});i(this.yAxis,e),Object.keys(t||{}).forEach(e=>{let r=this.getYAxisByIndex(e);r&&i(r,t[e])})}getCloseIconBound(){let{margin:e=10,iconSize:t=40}=this.getConfig();return{x:this.bound.width-e-t,y:this.bound.height-e-t,width:t,height:t}}getVisibleChartData(e){let t=this.getParent(),i=t.getColorFromColorTable("defaultColor"),{interval:r}=t,s=this.xAxis.getTimeUnitValue(),[a,o]=this.xAxis.getDomain(),l=new A.Z(a-s,o+s),n=t.getIndicatorHelperByName(e);if(!n||t.isVolumeDisabled(e)||(n.getSupportedIntervals?.({interval:r}),0))return[];let d=this.getIndicatorResult(e),c={},h=(e,t)=>{let{vals:i,stack:r}=c[e];if(!i)return[0,1,0];let{length:s}=i,a=i.indexOf(t),o=0;return r[e]?.has(t)&&(o=r[e]?.get(t)||0),[a,s,o]},u=d.filter(({visible:e})=>!1!==t.indicatorStore.getValue(e)).map(({data:e,borderData:r,color:s,colors:n,labelColors:d,styleTypes:c,lineWidth:h,...u})=>{let g={...u,data:[],lineWidth:h?t.indicatorStore.getValue(`${h}`):1},m=this.xAxis instanceof B.ZP;try{let h=0,u=e.length,p=0,x=0;if(m)[h,u]=l.getSliceArrayIndexs(e,e=>e.time);else{let i=t.getSeriesData();if(p=i[0]?.time,x=i[i.length-1]?.time,p&&x&&a<=x&&o>=p){let[t,r]=this.xAxis.getRange(),s=this.xAxis.getCoordOfIndex(0),a=this.xAxis.getCoordOfIndex(i.length-1),o=Math.max(t,s),l=Math.min(r,a);if(o<=l){let t=this.xAxis.getIndexOfCoord(o),i=this.xAxis.getIndexOfCoord(l),r=Math.max(0,Math.min(t,e.length-1)),s=Math.max(0,Math.min(i+1,e.length));h=r,u=s}else h=0,u=0}else{let[t,i]=l.getSliceArrayIndexs(e,e=>e.time);h=t,u=i}}let f=n?n.slice(h,u):[],b=d?d.slice(h,u):[],y=c?c.slice(h,u):[];g.data=e.slice(h,u).map((e,t)=>({...e,color:f[t]||s||i,labelColor:b[t]||s||i,...c?{styleType:y[t]||F.Mf.Solid}:{}})),r&&(m?g.borderData=l.sliceArray(r,e=>e.time):p&&x&&a<=x&&o>=p?g.borderData=r.slice(h,u):g.borderData=l.sliceArray(r,e=>e.time))}catch(t){console.error(l,e)}return g});return u.forEach(e=>{let{data:t,chartType:i,visible:r=!0,stack:s,yAxisIndex:a}=e;if(i===M.oX.Bar&&r){let i;s&&(i=u.find(e=>e.name===s&&e.data!==t&&e.yAxisIndex===a)),t.forEach(({time:e})=>{if(void 0===c[e]&&(c[e]={vals:[],stack:{}}),i&&i?.data?.length>1){let r=(0,j.ry)(i.data,({time:t})=>e-t),s=i.data[r];s?.time===e&&(void 0===c[e].stack[e]&&(c[e].stack[e]=new Map),c[e].stack[e].set(t,s.value))}void 0===i&&c[e].vals.push(t)}),e.getBarInfos=h}}),u}getVisibleResults(){let e=this.getParent();return Array.from(this._result?.keys?.()||{}).filter(t=>{let{params:i}=e.getIndicatorViewByName(t)||{},r=i?.showSeries;return void 0===r||!!r}).map(e=>this.getVisibleChartData(e))}getBarDatas(e,{zeroBase:t=0,yAxisIndex:i},r){let s=this.getParent(),a=s.getAttr("candlestick")?.barWeight,o=this.getAttr("barWeight")||a,l=this.getFixedBarWidth(o),n=[],d=void 0!==i?this.getYAxisByIndex(i):this.yAxis;if(!d)return[];let c=d.getCoordOfValue(t);for(let i=0,a=e.length;i<a;i++){let{time:a,value:o,color:h,styleType:u}=e[i];if((0,O.hj)(a)&&(0,O.hj)(o)){let i=this.xAxis.getCoordOfValue(a),[g,m,p]=r?.(a,e)||[0,1,0],x=o,f=Math.max(1,Math.abs(d.getCoordOfValue(x)-c));o<0==p<0&&(x+=p);let b=d.getCoordOfValue(x),y=Math.min(-1,x>t?-b:-c),[v,C]=this.findPosition(i,g,m,l),w=s.indicatorStore.getValue(u)||F.Mf.Solid,S=s.getColorFromColorTable(h||"defaultColor"),T=w===F.Mf.Hollow?"transparent":S;n.push({x:v,y:y,width:C,height:f,value:o,color:S,strokeColor:S,fillColor:T})}}return n}findPosition(e,t,i,r){if(1===i)return[e-.5*r,r];let s=r/(10*i+2*(i-1)),a=10*s,o=2*s,l=i/2,n=0;return[i%2==0?e+(t-l)*(a+o)+.5*o:e+(t-l)*a+Math.round(t-l)*o,a]}getLineDatas(e,t){let i=this.getParent(),r=[],s=void 0!==t?this.getYAxisByIndex(t):this.yAxis;if(!s)return[];for(let t=0,a=e.length;t<a;t++){let{time:a,value:o,color:l,labelColor:n}=e[t];if((0,O.hj)(a)&&(0,O.hj)(o)){let e={x:this.xAxis.getCoordOfValue(a),y:-s.getCoordOfValue(o)};l&&(e.color=i.getColorFromColorTable(l)),n&&(e.labelColor=i.getColorFromColorTable(n)),r.push(e)}}return r}updateTitleContainer(){let e=this.getParent(),t=e.getAttr("isMobile"),i=e.getAttr("margin"),{x:r,y:s,width:a,height:o}=this.getBound(),l={top:`${s-o}px`,left:`${r}px`,maxWidth:`${a-i.right}px`,padding:`${t?2:3}px 4px`};if(this._wrapperContainer)(0,j.AS)(this._wrapperContainer,l);else{let{titleContainer:e}=this.getParent();this._wrapperContainer=(0,j.az)("div",l,"title-wrapper-container"),this._titleContainer=(0,j.az)("div",{},"chart-title-row"),this._indicatorContainer=(0,j.az)("div",{},"chart-title-indicator-container"),this._titleContainer.appendChild(this._indicatorContainer),this._wrapperContainer.appendChild(this._titleContainer),e.appendChild(this._wrapperContainer),this._titleContainer.addEventListener("mouseenter",()=>{this._titleContainer.classList.add("active")}),this._titleContainer.addEventListener("mouseleave",()=>{this._titleContainer.classList.remove("active")})}}formatterValue(e){if(!(0,O.hj)(e))return"";let t=this.getParent(),i=this.getAttr("isFormatNum")||!1,{dataFormatter:r=M.aI.Normal,isFloor:s}=t.getAttr("candlestick"),a=this.getAttr("precision")||t.getAttr("precision");return i?(0,j.Fk)(e):r===M.aI.Percentage&&this.panelType===M.wh.BASE?(0,j.Lo)(e,a):(0,j.gH)(e,a,!!s)}formatOCHL(e,t=h()){if(!(0,O.hj)(e))return"";let i=this.getParent(),r=this.getAttr("precision")||i.getAttr("precision"),s=t(e,r);return(0,j.uf)({number:s,digits:r})}updateTitleLabel(){let e=this.getParent()?.getAttr("currentItem");if(!e||!this._indicatorContainer)return;let t=this.getAttr("titleInfo"),i=this.getAttr("indicatorType"),r=this.getPanelId(),s=this.getParent(),{params:a,title:o}=s.getIndicatorViewByName(r)||{params:{},title:""},l=a?.showSeries,n=this._getTitleLabels(e,i,a);if(0===n.length)return;let d=s.regContetxt,c=n.length+ +(this._panelType===M.wh.EXT),h=!1;c!==this._indicatorContainer.childNodes.length&&(h=!0,this._indicatorContainer.innerHTML="");let u=!0;if(n.forEach(e=>{let{label:i,key:r,styles:a={},className:o}=e,l=i.replace(/\{\{(.*?)\}\}/g,(e,t)=>d[t.trim()]||e);if(a.color&&(a.color=this.determineLabelColor(s.getColorFromColorTable(a.color))),!this._indicatorContainer.querySelector(`[key='${r}']`)){let e=(0,j.az)("span",{paddingRight:"8px"},"default-label-box");e.setAttribute("key",r),this._indicatorContainer?.appendChild(e),t[r]="",o&&(0,V.cn)(e,o),this.watchProperty(r,e)}this.setWatchProperty(t,r,l,a),"none"!==a.display&&(u=u&&!1)}),u){let e=(0,j.az)("span",{paddingRight:"8px"},"default-label-box");e.setAttribute("key",o),e.textContent=o,this._indicatorContainer?.appendChild(e)}h&&this._panelType===M.wh.EXT&&this.addToolIcons(this._indicatorContainer,{id:r,indicatorType:i,visible:void 0===l||!!l}),this._isFirstWatch&&n.length>0&&(this.addFoldIcon(this._titleContainer,r),this._isFirstWatch=!1),this._panelType===M.wh.BASE&&this.updateHistBaseChartsTitle(e)}setIndicatorVisible(e,t,i=!1){let r=this.getParent(),{params:s,...a}=r.getIndicatorViewByName(e),o=s?.showSeries;if((void 0===o||!!o)===t)return;let l=this._wrapperContainer&&this._wrapperContainer.querySelector(`[id="${e}-visible"`);if(l){let[e,i]=t?[x.bM,this.getI18n("indicator-hide","Hide")]:[x._q,this.getI18n("indicator-show","Show")];(0,V.UV)(l,e),l.setAttribute("tooltip",i)}let n={...s,showSeries:t};r.setIndicatorView(e,{...a,params:n,isTriggeredByClick:i}),r.indicatorStore.setValue(e,n),this.setYAxis(),this.update()}drawLogo(e=M.mB.Resize){!this.getParent()?.getAttr("isHiddenLogo")&&(this._isFirstRender||e===M.mB.Resize)&&this._panelType===M.wh.BASE&&this._mainWidget.drawLogo(e)}drawUnavailableText(e=M.mB.Resize){if(this._panelType!==M.wh.EXT)return;let t=this.getParent(),{interval:i}=t,r=this.getAttr("indicatorType"),s=t.getIndicatorHelperByName(r);if(!s)return;let a=s.getSupportedIntervals?.({interval:i})===!1;if(t.isVolumeDisabled(r)){let i=t.getI18n("indicator-disabled-text","Available on Last Price");this._mainWidget.drawUnavailableText({drawMode:e,text:i})}else if(a){let t=s.getUnavailableText?.({interval:i})||"";this._mainWidget.drawUnavailableText({drawMode:e,text:t})}}addFoldIcon(e,t){let i=this.getParent().settingStore,r=`${t}-title-fold`,s=(0,V.o8)({svg:x.Y4});e?.insertBefore(s,e.firstChild);let a=t=>{t?(0,V.cn)(e,"fold"):(0,V.IV)(e,"fold"),e.setAttribute("isFold",t?"true":"false")};s.addEventListener("click",()=>{a("true"!==e.getAttribute("isFold"))}),i?.isLoaded()&&a("true"===i.getValue(r))}getFixedBarWidth(e=.8){let t=this.getParent().getXAxis(),i=t.unitWidth*e,r=t.unitWidth-3,s=t.unitWidth-2;return r>0?r:i>s&&s>0?s:i}autoScaleYAxis(){this.yAxis.resetScaleCoeff(),this._updateYExtend(),this.update()}addToolIcons(e,{indicatorType:t,visible:i,id:r}){if(!this.getAttr("isShowSetting"))return;let s=this.getParent(),[a,o]=i?[x.bM,this.getI18n("indicator-hide","Hide")]:[x._q,this.getI18n("indicator-show","Show")],l=(0,V.o8)({svg:a,id:`${t}-visible`});l.setAttribute("tooltip",o);let n=(0,V.o8)({svg:x.qY}),d=(0,V.o8)({svg:x.Tw}),c=(0,j.az)("div",{},"indicator-title-toolbox");c.append(l,n,d),e?.append(c),n.addEventListener("click",()=>{s?.fire("showIndicatorDialog",{id:r}),s?.fire("clickIndicatorCommonButton",{data:N.iu.Setting})}),n.setAttribute("tooltip",this.getI18n("indicator-settings","Settings")),d.setAttribute("tooltip",this.getI18n("indicator-close","Close")),l.addEventListener("click",()=>{let{params:e}=s.getIndicatorViewByName(r),t=!!e?.showSeries;this.setIndicatorVisible(r,!t,!0),s?.fire("clickIndicatorCommonButton",{data:N.iu.Hide})}),d.addEventListener("click",()=>{s.closeIndicatorByName(r),s?.fire("clickIndicatorCommonButton",{data:N.iu.Delete})}),(0,V.QV)(l),(0,V.QV)(n),(0,V.QV)(d)}updateHistBaseChartsTitle(e){let{indicatorViews:t}=this.getParent(),i=this.getAttr("titleInfo"),r=this.getParent(),s=r.regContetxt;t.forEach(a=>{let{id:o,title:l,indicatorType:n,isHistBase:d,subElement:c,params:h}=a,u=h?.showSeries;if(!d)return;let g=this._getTitleLabels(e,o,h);if(0===g.length)return;let m=c.querySelector(`[key='${o}']`);m||((m=(0,j.az)("div",{},"chart-title-indicator-container")).setAttribute("key",o),c.appendChild(m));let p=!1;g.length+1!==m.childNodes.length&&(p=!0,m.innerHTML="");let x=!0;g.forEach(e=>{let{label:t,key:a,styles:o={},className:l}=e,n=t.replace(/\{\{(.*?)\}\}/g,(e,t)=>s[t.trim()]||e);if(o.color&&(o.color=this.determineLabelColor(r.getColorFromColorTable(o.color))),!m.querySelector(`[key='${a}']`)){let e=(0,j.az)("span",{paddingRight:"8px"},"default-label-box");e.setAttribute("key",a),m?.appendChild(e),i[a]="",l&&(0,V.cn)(e,l),this.watchProperty(a,e)}this.setWatchProperty(i,a,n,o),"none"!==o.display&&(x=x&&!1)});let f=m.querySelector(`[key='${l}']`);f&&(f.style.display=x?"block":"none"),p&&this.addToolIcons(m,{id:o,indicatorType:n,visible:void 0===u||!!u}),c.parentNode||(this._wrapperContainer.appendChild(c),t.find(e=>e.isHistBase)?.id===o&&this.addFoldIcon(c,"main-indicators-fold"))})}getUpdatedBound(){let e=this.getAllWeight(),t=this.getParent(),{width:i,margin:r}=t.getConfig(),{visibleViewHeight:s,iPanels:a}=t,o=0;for(let e=0;e<a.length;e++){let t=a[e];if(t===this)break;o+=t.bound.height}let l=s*this._weight/e,n=i-r.left;return o+=l,{x:r.left,y:o,height:l,width:n}}_initWidgets(){this._axisWidget=new el,this._panelType===M.wh.BASE?this._mainWidget=new G:this._mainWidget=new Q,this.addWidgets([this._mainWidget,this._axisWidget])}_getYExtent(){let e=this.getAttr("indicatorType"),t=this.getParent(),i=t.getAttr("precision"),r={default:{max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:!0,fixMax:!1,fixMin:!1}};if(e===M.A.CANDLE){let e=t.settingStore.getValue("@symbol.candlestick.type"),i=this.getVisibleSeriesData().reduce(({high:t,low:i},r)=>{let{h:s,l:a}=(0,D.T0)({chartType:e,candlestickItem:r});return{high:Math.max(t,s),low:Math.min(i,a)}},{high:Number.MIN_SAFE_INTEGER,low:Number.MAX_SAFE_INTEGER});r.default.max=i.high,r.default.min=i.low,r.default.isScaleCenter=!0;let s=this.getVisibleResults();for(let e=0,t=s.length;e<t;e++)s[e].forEach(({data:e,yAxisIndex:t,isScaleCenter:i=!0,min:s,max:a})=>{let o={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,fixMax:!1,fixMin:!1};if(void 0!==t?(r[t]||(r[t]={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:i,fixMax:!1,fixMin:!1}),o=r[t]):o=r.default,(0,O.hj)(a))o.max=a,o.fixMax=!0;else if(!o.fixMax){let t=g()(e,"value");t&&t.value>o.max&&(o.max=t.value)}if((0,O.hj)(s))o.min=s,o.fixMin=!0;else if(!o.fixMin){let t=p()(e,"value");t&&t.value<o.min&&(o.min=t.value)}})}else this.getVisibleChartData(e).forEach(({chartType:e,data:t=[],yAxisIndex:i,isScaleCenter:s=!0,min:a,max:o,stack:l,zeroBase:n=0,getBarInfos:d})=>{let c={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,fixMax:!1,fixMin:!1};if(void 0!==i?(r[i]||(r[i]={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:!!s,fixMin:!1,fixMax:!1}),c=r[i]):(c=r.default,r.default.isScaleCenter=!!s),(0,O.hj)(o))c.max=o,c.fixMax=!0;else if(!c.fixMax){let e=g()(t,"value");e&&e.value>c.max&&(c.max=e.value)}if((0,O.hj)(a))c.min=a,c.fixMin=!0;else if(!c.fixMin){let e=p()(t,"value");e&&e.value<c.min&&(c.min=e.value)}if(void 0!==l&&e===M.oX.Bar){let e=t.map(({time:e,value:i})=>{let[,,r=0]=d?.(e,t)||[0,1,0];return i<n==r<n?{time:e,value:i+r}:{time:e,value:i}}),i=g()(e,"value");i&&i.value>c.max&&!c.fixMin&&(c.max=i.value);let r=p()(t,"value");r&&r.value<c.min&&!c.fixMax&&(c.min=r.value)}});return Object.keys(r).forEach(e=>{let{min:t,max:s,isScaleCenter:a}=r[e];if((0,j.Fr)(s-t,10**-i)){let i=Math.floor(Math.log(0===s?10:Math.abs(s))/Math.log(10)),o=10**i/2;a||(r[e].max=s+o),r[e].min=t-o,r[e].max=s+o}}),r}_getTitleLabels(e,t,i={}){let r=[],s=this.getParent(),a=s.getAttr("precision"),o=this.getAttr("isFormatNum"),n=s.getXAxis();if(t===M.A.CANDLE){let{time:t,open:i,high:a,low:o,close:d,change:c="0.00%",amplitude:h="0.00%"}=e,u=d>=i?{color:s.getColorFromColorTable("candle.upBarColor")}:{color:s.getColorFromColorTable("candle.downBarColor")},g=this.getI18n("open","Open"),m=this.getI18n("high","High"),p=this.getI18n("close","Close"),x=this.getI18n("low","Low"),f=this.getI18n("change","CHANGE"),b=this.getI18n("amplitude","AMPLITUDE");r.push({label:this._getTitleTime(t,n.getTimeScaleType()),key:"t"},{label:`${g}:`,key:"O"},{label:(0,R._A)()?(0,R.dD)(this.formatOCHL(i)):this.formatOCHL(i),key:"o",styles:u},{label:`${m}:`,key:"H"},{label:(0,R._A)()?(0,R.dD)(this.formatOCHL(a,l())):this.formatOCHL(a,l()),key:"h",styles:u},{label:`${x}:`,key:"L"},{label:(0,R._A)()?(0,R.dD)(this.formatOCHL(o)):this.formatOCHL(o),key:"l",styles:u},{label:`${p}:`,key:"C"},{label:(0,R._A)()?(0,R.dD)(this.formatOCHL(d)):this.formatOCHL(d),key:"c",styles:u},{label:`${f}:`,key:"CHANGE",className:"title_change_label"},{label:c,key:"change",styles:u,className:"title_change_value"},{label:`${b}:`,key:"AMP",className:"title_amplitude_label"},{label:h,key:"amp",styles:u,className:"title_amplitude_value"})}else{let l=s.getIndicatorHelperByName(t);if(void 0===l)return[];let n=s.settingStore.getValue("@contextMenu.percentageScale"),d=l.defaultProps.categories?.includes("main")||!1,c=this.getIndicatorResult(t).map(({visible:e,...t})=>({...t,visible:!1!==s.indicatorStore.getValue(e)})),h=s.isVolumeDisabled(t),u=s.getI18n("indicator-disabled-text","Available On Last Price"),{interval:g}=s,m="@VOL"===t,p=l.getLabel({time:e.time,results:c,isDisabled:h,disabledText:l.defaultProps.isHistBase?`(${u})`:"",interval:g,params:{...i,precision:m&&s.getAttr("volumePrecision")||a,isFormatNum:m?s.getAttr("volumeFormatNumber"):o,formatter:n&&d?e=>s.getFirstVisibleSeriesDataAsRelativePercentage({value:e}):void 0}});r=0===p.length?[{label:l.defaultProps.title,key:t}]:p}return r}_getTitleTime(e,t){let i="YYYY/MM/DD";return t===M.QX.Month?i="YYYY/MM/01":t===M.QX.Minute?i="YYYY/MM/DD HH:mm":t===M.QX.Hour?i="YYYY/MM/DD HH:00":t===M.QX.Second&&(i="YYYY/MM/DD HH:mm:ss"),(0,j.mr)(e,i)}getPadding(){let e=this.getParent().getAttr("isMobile"),t=this._panelType===M.wh.BASE;return e?10*!!t:t?25:10}determineLabelColor(e){let t=this.getParent(),i=t.getAttr("theme"),r=t.getColorFromColorTable("indicator.1"),s=t.getColorFromColorTable("indicator.9");try{let t=(0,a.Z)(e).hex(),o=(0,a.Z)(r).hex(),l=(0,a.Z)(s).hex();if("dark"===i)switch(t){case o:return(0,j.SX)("--color-TextLink");case l:return"#4274FF";default:return e}if(t===o)return(0,j.SX)("--color-TextLink");return e}catch(t){return e}}magnetizeY({y:e}){let t=this.getParent(),i=this.yAxis.getValueOfCoord(e);if(!t.getEditor().shouldMagnet())return{price:i,y:e};let r=t.getAttr("currentItem"),s=(t.settingStore.getValue("@symbol.candlestick.type")||"").toUpperCase();return(0,H.pC)({price:i,item:r,toPosition:this.yAxis.getCoordOfValue.bind(this.yAxis),magnetizeTo:(0,H.Wo)({type:s})})}constructor(e,t){super(),this.widgets=[],this._isWaiting=!1,this._weight=0,this._result=new Map,this._isFirstWatch=!0,this._storageData={annotations:[],indicators:[],weight:.25},this._supplyYAxisMap=new Map,this._isFirstRender=!0,this.onSymbolIntervalChanged=()=>{let e=this.getParent(),t=this.getPanelId(),i=e.getIndicatorHelperByName(t);if(this.getAttr("isDestryed"))return;let{symbol:r,interval:s}=e;if(r&&s){let[t,a=Date.now()]=e.getTimeExtent();i.init(r,s,{startTime:t,endTime:a})}},this.updateChartData=(e=0,t)=>{let i=this.getAttr("indicatorType"),r=this.getPanelId(),s=this.getParent(),{indicatorViews:a}=s,o=s.getSeriesData();if(i!==M.A.CANDLE){let a=s.getIndicatorViewByName(r);if(!a||e>0&&a.isDiffSource)return;let{params:l}=a,n=s.getIndicatorHelperByName(r);if(void 0===n)return;if(e>0&&void 0!==n.updateResult){let t=this._result.get(r),i=o[e];if(t&&i?.time)return void n.updateResult(e,t.result,l,i)}try{n.getResult(o,l,e=>{this._result.set(i,{result:e,params:l,styles:a.styles}),t?.()})}catch(e){console.error(e.message)}}else{let i=a.filter(({isHistBase:e,id:t})=>e&&s.getIndicatorViewByName(t)&&s.getIndicatorHelperByName(t)).length;a.forEach(({id:r,isHistBase:a,params:l})=>{if(!a)return;let n=s.getIndicatorViewByName(r);if(!n)return;let d=s.getIndicatorHelperByName(r);if(d){if(e>0&&void 0!==d.updateResult){let t=this._result.get(r);if(t&&o[e]?.time)return void d.updateResult(e,t.result,l,o[e])}try{d.getResult(o,l,e=>{i--,this._result.set(r,{result:e,params:l,styles:n.styles}),0===i&&t?.()})}catch(e){console.error("indicator get Result occured error: ",e.message)}}})}},this.watchTheme=e=>{this.drawLogo()},this.config={...d()(J.Z.defaultConfig),iconSize:10,margin:5,isShowClose:!1,isShowSetting:!0,titleInfo:{},isFormatNum:!1,isAbleTriggerMove:!0,isDestryed:!1,autoScale:!0,...t},this._panelType=e,this._weight=t?.weight||(this.panelType===M.wh.BASE?.75:.25),this._initWidgets()}}},52116:function(e,t,i){i.d(t,{Z:()=>s});var r=i(59626);let s=class extends r.Z{getBound(){return this.bound}setBound(e){return this.bound=Object.assign(this.bound||{},e),this}updateBound(e,t){this.bound[e]=t}contain(e){return e.x>=this.bound.x&&e.y<=this.bound.y&&e.x-this.bound.x<=this.bound.width&&this.bound.y-e.y<=this.bound.height}transformPointToView(e){return{x:e.x-this.bound.x,y:this.bound.y-e.y}}setCanvasTransform(e){e.scale(this.devicePixelRatio,this.devicePixelRatio),e.translate(this.bound.x,this.bound.y)}initialCtxs(e){e.forEach(e=>{e&&(e.save(),this.setCanvasTransform(e))})}restoreCtxs(e){e.forEach(e=>e?.restore?.())}getClearBound(e=0){let{x:t,y:i,width:r,height:s}=this.bound;return{x:t*this.devicePixelRatio,y:(i-s)*this.devicePixelRatio,width:r*this.devicePixelRatio,height:(s+e)*this.devicePixelRatio}}createClipBound(e,t=0){Array.isArray(e)?e.forEach(this.createClipBound.bind(this)):(e.beginPath(),e.rect(-.5,-this.bound.height-.5,this.bound.width,this.bound.height+t),e.clip())}afterSetParent(){}constructor(...e){super(...e),this.bound={x:0,y:0,width:0,height:0}}};s.defaultConfig={...r.Z.defaultConfig,zIndex:0}},34450:function(e,t,i){i.d(t,{Z:()=>d});var r=i(3440),s=i.n(r),a=i(52116),o=i(81669),l=i(2839),n=i(44277);let d=class extends a.Z{get xAxis(){return this.getRoot().getXAxis()}get root(){return this.getRoot()}get TitleContainer(){return this.root.titleContainer}getShapes(){return this._shapes}getAnnotations(){return Array.from(this._annotationSet)}addAnnotation(e){this._annotationSet.has(e)||this._annotationSet.add(e)}removeAnnotation(e){this._annotationSet.delete(e)}eachAnnotations(e){let t=this.getAnnotations();for(let i=t.length-1;i>=0;--i)e(t[i])}addShapes(e){e.forEach(this.addShape.bind(this))}addShape(e){this._shapes.push(e)}removeShape(e){let t=this._shapes;for(let i=t.length,r=i-1;r>=0;r--)if(t[r]===e){t.splice(r,1);break}}update(e=l.mB.All){this._isWaiting||(this._isWaiting=!0,setTimeout(()=>{this.render(e),this._isWaiting=!1},16))}updateImmediate(e=l.mB.All){this.render(e)}setParent(e){if(this._parent)throw Error("Current Node had parent, Pls do not set parent repeatly!");this._parent=e}getParent(){return this._parent}getRoot(){return this._parent instanceof o.Z?this._parent.getParent():this._parent}getYAxisWidth(){return this.getRoot().getAttr("margin").right||0}getXAxisHeight(){return this.getRoot().getAttr("xAxis").height||0}updateAnnotations(){this._annotationSet.forEach(e=>{e.updateData()})}plotShapes(e){let t=this.getBound();this.updateAnnotations();for(let i=0,r=this._shapes.length;i<r;i++){let r=this._shapes[i],s=r.isVisible({...t,y:0,x:0});r.setAttr("isContain",s),s&&r.draw(e)}}transformToGroup(e,t="color",i=!1){if(i){let{result:i}=e.reduce((e,t,i,{length:r})=>{let{compare:s}=e,a="string"==typeof s?t[s]:s(t);return e.group.push(t),e.result[a]||(e.result[a]=[]),(e.lastCompare!==a||i===r-1)&&(e.result[e.lastCompare||a].push(e.group),e.group=[t]),e.lastCompare=a,e},{result:{},group:[],compare:t,lastCompare:""});return i}return s()(e,t)}plotGroupGraphs(e,t,i,r,s=!1){let a={[l.oX.Line]:this.renderer.drawPolyline,[l.oX.Bar]:this.renderer.drawBars,[l.oX.BarCandle]:this.renderer.drawBarCandlesticks,[l.oX.HollowBar]:this.renderer.drawHollowBars,[l.oX.CandleBar]:this.renderer.drawCandlestickBars,[l.oX.Point]:this.renderer.drawPoints,[l.oX.CrossLine]:this.renderer.drawCrossLines,[l.oX.Area]:this.renderer.drawArea,[l.oX.GradientArea]:this.renderer.drawGradientArea,[l.oX.HollowCandleBar]:this.renderer.drawHollowCandlestickBars}[i];a&&Object.keys(t||{}).forEach(i=>{let o=r(i);(0,n.ui)(e,o),s?t[i].forEach(t=>{a.call(this,e,t)}):a.call(this,e,t[i])})}plotChart(e,t){let i={[l.oX.Line]:this._plotLineChart,[l.oX.Bar]:this._plotBarChart,[l.oX.BarCandle]:this.renderer.drawBarCandlesticks,[l.oX.HollowBar]:this._plotHollowBarChart,[l.oX.Point]:this._plotPointChart,[l.oX.CrossLine]:this._plotCrossChart,[l.oX.Area]:this._plotAreaChart,[l.oX.GradientArea]:this._plotGradientAreaChart,[l.oX.Transcation]:this._plotTranscations},{chartType:r}=t;e.save(),i[r]&&i[r].call(this,e,t),e.restore()}_plotTranscations(e,{data:t=[],color:i="#cc47ed",colorLong:r="#2962ff"}){let s=this.getRoot(),a=this.getParent(),{barWeight:o=.8}=s.getAttr("candlestick"),l=this.xAxis.unitWidth*o>9,d=t.map(e=>e.transcations.filter(e=>!0===e.long).map(t=>({value:t.price,time:e.time}))).reduce((e,t)=>(e.push(...t),e),[]),c=t.map(e=>e.transcations.filter(e=>!1===e.long).map(t=>({value:t.price,time:e.time}))).reduce((e,t)=>(e.push(...t),e),[]);(0,n.ui)(e,{fillStyle:r,strokeStyle:r}),a.getLineDatas(d).forEach(t=>this.renderer.drawSmallTriangle(e,t,!0)),(0,n.ui)(e,{fillStyle:i,strokeStyle:i}),a.getLineDatas(c).forEach(t=>this.renderer.drawSmallTriangle(e,t,!1)),t.forEach(t=>{let s=a.getPosition({time:t.time,value:t.high}),o=a.getPosition({time:t.time,value:t.low});s.y=-s.y,s.y-=5,o.y=-o.y,o.y+=5,(0,n.ui)(e,{fillStyle:i,strokeStyle:i}),t.transcations.filter(e=>!1===e.long).forEach(t=>{let i=this.renderer.drawTranscation(e,s,t.long,t.qty,t.signal,l);s.y-=i}),(0,n.ui)(e,{fillStyle:r,strokeStyle:r}),t.transcations.filter(e=>!0===e.long).forEach(t=>{let i=this.renderer.drawTranscation(e,o,t.long,t.qty,t.signal,l);o.y+=i})})}_plotLineChart(e,{data:t=[],color:i,lineWidth:r,yAxisIndex:s}){let a=this.getParent().getLineDatas(t,s);if(i)(0,n.ui)(e,{strokeStyle:i,lineWidth:r}),this.renderer.drawPolyline(e,a);else{let t=this.transformToGroup(a,"color",!0);this.plotGroupGraphs(e,t,l.oX.Line,e=>({strokeStyle:e,lineWidth:r}),!0)}}_plotBarChart(e,{data:t=[],color:i,lineWidth:r=1,zeroBase:s=0,yAxisIndex:a,getBarInfos:o}){let d=this.getParent(),c=d.getAttr("indicatorType"),h=d.getBarDatas(t,{zeroBase:s,yAxisIndex:a,indicatorType:c},o);if(i)(0,n.ui)(e,{fillStyle:i,lineWidth:r}),this.renderer.drawBars(e,h);else{let t=this.transformToGroup(h,"color");this.plotGroupGraphs(e,t,l.oX.Bar,e=>({fillStyle:e,lineWidth:+r||1}))}}_plotHollowBarChart(e,{data:t=[],color:i,lineWidth:r=1,zeroBase:s=0,yAxisIndex:a,getBarInfos:o}){let d=this.getParent().getBarDatas(t,{zeroBase:s,yAxisIndex:a},o);if(i)(0,n.ui)(e,{fillStyle:i,lineWidth:r}),this.renderer.drawHollowBars(e,d);else{let t=this.transformToGroup(d,"color");this.plotGroupGraphs(e,t,l.oX.HollowBar,e=>({fillStyle:e,lineWidth:+r||1}))}}_plotPointChart(e,{data:t=[],color:i,lineWidth:r=1,yAxisIndex:s}){let a=this.getParent().getLineDatas(t,s);if(i)(0,n.ui)(e,{strokeStyle:i,lineWidth:r}),this.renderer.drawPoints(e,a);else{let t=this.transformToGroup(a,"color");this.plotGroupGraphs(e,t,l.oX.Point,e=>({strokeStyle:e,lineWidth:r}))}}_plotCrossChart(e,{data:t=[],color:i,lineWidth:r=1,yAxisIndex:s}){let a=this.getParent().getLineDatas(t,s);if(i)(0,n.ui)(e,{strokeStyle:i,lineWidth:r}),this.renderer.drawCrossLines(e,a);else{let t=this.transformToGroup(a,"color");this.plotGroupGraphs(e,t,l.oX.CrossLine,e=>({strokeStyle:e,lineWidth:r}))}}_plotAreaChart(e,{data:t=[],borderData:i,color:r,opacity:s=.6,histBase:a=0,yAxisIndex:o}){let d=this.getParent(),c=-d.yAxis.getCoordOfValue(a),h=d.getLineDatas(t,o);if(r)if((0,n.ui)(e,{fillStyle:r,globalAlpha:s}),i){let t=d.getLineDatas(i,o).reverse();this.renderer.drawArea(e,[...h,...t])}else{let t=h[h.length-1]||{x:0,y:0},i=h[0]||{x:0,y:0},r={x:t.x,y:c},s={x:i.x,y:c};h.push(r,s),this.renderer.drawArea(e,h)}else{let t=this._groupAreaData({pointData:h,borderData:i,histBase:c,yAxisIndex:o});this.plotGroupGraphs(e,t,l.oX.Area,e=>({fillStyle:e,globalAlpha:s}),!0)}}_plotGradientAreaChart(e,{data:t=[],borderData:i,strokeColor:r,fillColor1:s,fillColor2:a,opacity:o=.6,histBase:n=0,yAxisIndex:d}){let c=this.getParent(),h=-c.yAxis.getCoordOfValue(n),u=c.getLineDatas(t,d),g={strokeColor:r,fillColor1:s,fillColor2:a,opacity:o};if(r)if(i){let t=[...u,...c.getLineDatas(i,d).reverse()];this.renderer.drawGradientArea(e,t,t,g)}else{let t=u[u.length-1]||{x:0,y:0},i=u[0]||{x:0,y:0},r={x:t.x,y:h},s=[{x:i.x,y:h},...u,r];this.renderer.drawGradientArea(e,u,s,g)}else{let t=this._groupAreaData({pointData:u,borderData:i,histBase:h,yAxisIndex:d});this.plotGroupGraphs(e,t,l.oX.GradientArea,e=>({fillStyle:e,globalAlpha:o}),!0)}}_groupAreaData({pointData:e=[],borderData:t,histBase:i=0,yAxisIndex:r}){let s=this.getParent(),{result:a}=e.reduce((e,t,i,{length:r})=>{let s=t[e.compare];return e.group.j=i,e.result[s]||(e.result[s]=[]),(e.lastCompare&&e.lastCompare!==s||i===r-1)&&(e.result[s].push(e.group),e.group={i:i,j:i}),e.lastCompare=s,e},{result:{},group:{i:0,j:0},compare:"color",lastCompare:""});if(t){let i=s.getLineDatas(t,r);return Object.keys(a).reduce((t,r)=>{let s=a[r];return t[r]=s.map(({i:t,j:r})=>{let s=e.slice(t,r+1),a=i.slice(t,r+1).reverse();return s.concat(a)}),t},{})}return Object.keys(a).reduce((t,r)=>{let s=a[r];return t[r]=s.map(({i:t,j:r})=>{let s=e.slice(t,r+1),a=[{x:e[r].x,y:i},{x:e[t].x,y:i}];return s.concat(a)}),t},{})}drawLogo(e){}drawUnavailableText(e){}constructor(...e){super(...e),this._shapes=[],this._annotationSet=new Set,this._isWaiting=!1}};d.defaultConfig={...a.Z.defaultConfig}},98064:function(e,t,i){i.d(t,{fB:()=>s,K_:()=>h.K,VC:()=>c,OW:()=>l});var r=i(87363);function s(e,t){let i=(0,r.useRef)(0);return(0,r.useCallback)(()=>{let r=Date.now();r-i.current>t&&(e(),i.current=r)},[])}var a=i(18149),o=i.n(a);function l(e){let[t,i]=(0,r.useState)(e),s=(0,r.useRef)(e),a=(0,r.useCallback)(e=>{let t={...s.current,...e};o()(t,s.current)||(s.current=t,i(t))},[]);return[t,{updateValue:a,toggleValue:(0,r.useCallback)(e=>{let t={...s.current};t[e]=!t[e],s.current=t,i(t)},[]),getValue:(0,r.useCallback)(e=>s.current[e],[])}]}i(44277);var n=i(13185),d=i.n(n);let c=(e,t)=>{let i=(0,r.useRef)(1),s=(0,r.useRef)(t);d()(s.current,t)||(i.current*=-1),(0,r.useLayoutEffect)(e,[i.current])};var h=i(65929)},65929:function(e,t,i){i.d(t,{K:()=>s});var r=i(83289);let s=()=>(0,r.Z)("","kline-ui")},98824:function(e,t,i){i.d(t,{b5:()=>ej.b5,T$:()=>I.T$,oX:()=>ef.oX,A8:()=>rT,dD:()=>ey.dD,gW:()=>sG.g,rB:()=>eI.rB,ec:()=>ej.ec,AS:()=>ej.AS,m1:()=>ej.m1,_A:()=>ey._A,NU:()=>sq.default,m_:()=>sY,un:()=>ej.fb,qA:()=>ej.qA});var r,s,a,o,l,n,d,c,h=i(52322),u=i(87363),g=i(13185),m=i.n(g),p=i(27875),x=i.n(p),f=i(9850),b=i.n(f),y=i(54073),v=i.n(y),C=i(18149),w=i.n(C),S=i(97209),T=i(28098),A=i(264),_=i.n(A),L=i(71680),k=i(78848),I=i(34300);let P=e=>{let t={};for(let i=0;i<e.length;i++){let r=e[i],s=t[r.time];s?r.volume>s.volume&&(t[r.time]=r):t[r.time]=r}return Object.values(t).sort((e,t)=>e.time-t.time)};class E{get isFetchingData(){return"loading"===this._fetchState}get timezone(){return this._symbolInfo?.timeZone}setDataProvider(e){return this._dataProvider=e,this}setInterval(e){return e&&!w()(this.interval,e)&&(this.interval=e,this.reset()),this}setSymbol(e){return e&&!w()(this.symbol,e)&&(this.symbol=e,this.reset()),this}getSeriesData(){return this._seriesData}async resolveSymbol(e){let t=this._dataProvider?.resolveSymbol||(()=>Promise.resolve({}));return this._symbolInfo=await t(e),b()(this._symbolInfo)}setLoadCallback(e){this._loadCallback=e}triggerLoading(e){this._loadCallback?.(e)}async getData({seriesData:e,startTime:t,endTime:i,mode:r,symbol:s,interval:a},o,l=!1){try{if("loading"===this._fetchState)return;this._fetchState="loading";let n=this._dataProvider;if(!n||!a||!s)return;let d=(0,L.ah)(a,this._symbolInfo.supportedResolutions);this.baseInterval=d;let c={symbol:s,interval:d,seriesData:e,startTime:t,endTime:i,mode:r,symbolInfo:this._symbolInfo},h=n.getData||n.getBarDatas,u=this.timezone;h.call(n,c,e=>{let{data:t=[],isLoadAll:i}=e;if(this._isSync({interval:a,symbol:s,timezone:u}))if(this.isLoadAll=this.isLoadAll||i,t.length>0){let e=a!==d,i=t;if(e){let{aggregatedBars:e,groupedRawData:r}=(0,k.lu)(t,a,d,this._symbolInfo.timeZone);i=e,(0===this._groupedRawData.length||(0,k.HF)(this._groupedRawData).time<(0,k.HF)(r).time)&&(this._groupedRawData=r)}let r=l?i:this._seriesData.concat(i);this._seriesData=P(r),o(this._seriesData)}else o([])})}catch(e){console.error("basicKline getData occurred error",e)}finally{this._fetchState="done"}}subscribe({symbol:e,interval:t,callback:i,shouldUpdatePredicate:r}){if(!t||!e||!this._dataProvider)return;let s=this._dataProvider.subscribe||this._dataProvider.subcribe,a=(0,L.ah)(t,this._symbolInfo.supportedResolutions),o=a!==t,l=this.timezone;s.call(this._dataProvider,{symbol:e,interval:a},s=>{if(!this._isSync({interval:t,symbol:e,timezone:l})||"done"!==this._fetchState||!this.isSubscriptionEnabled||!r({item:s}))return;if(!o){let e=(0,I.oV)({seriesData:this._seriesData,time:s.time});if(_()(e,0,this._seriesData.length)){let t=this._dataProvider?.handleKlineReplacement?.({originalData:this._seriesData[e],incomingData:s});this._seriesData[e]=t||s,i({item:s,type:"replace"})}else this._seriesData.push(s),i({item:s,type:"new"});return}let a=1e3*(0,k.q8)(s.time,t,this._symbolInfo.timeZone);if(a>this._seriesData[this._seriesData.length-1].time){let e={...s,time:a};(0,k.EB)(this._groupedRawData,s,t,this._symbolInfo.timeZone),this._seriesData.push(e),i({item:s,type:"new"})}else{let e=(0,k.FG)(this._groupedRawData,s,t,this._symbolInfo.timeZone);if(-1===e)return;(0,k.EB)(this._groupedRawData,s,t,this._symbolInfo.timeZone);let r=(0,k.MJ)(this._groupedRawData[this._groupedRawData.length-1-e],t,this._symbolInfo.timeZone);this._seriesData[this._seriesData.length-1-e]=r,i({item:r,type:"replace"})}})}unsubscribe(e){this._dataProvider&&(this._dataProvider.unsubscribe||this._dataProvider.unSubcribe).call(this._dataProvider,e)}subscribeAskBid(e){let{interval:t,symbol:i}=this;if(!t||!i)return;let r=this.timezone;this._dataProvider?.subscribeAskBid?.(s=>{this._isSync({interval:t,symbol:i,timezone:r})&&e(s)})}unsubscribeAskBid(){this._dataProvider?.unsubscribeAskBid?.()}getPositions(e){this._dataProvider?.getPositions?.(e)}subscribePositions(e){this._dataProvider?.subscribePositions?.(t=>{e(t)})}unsubscribePositions(){this._dataProvider?.unsubscribePositions?.()}getOrders(e){this._dataProvider?.getOrders?.(e)}subscribeOrders(e){this._dataProvider?.subscribeOrders?.(t=>{e(t)})}unsubscribeOrders(){this._dataProvider?.unsubscribeOrders?.()}getExecutionOrders(e){this._dataProvider?.getExecutionOrders?.(e)}subscribeExecutionOrders(e){this._dataProvider?.subscribeExecutionOrders?.(t=>{e(t)})}unsubscribeExecutionOrders(){this._dataProvider?.unsubscribeExecutionOrders?.()}getLabelLines(e){this._dataProvider?.getLabelLines?.(e)}subscribeLabelLines(e){this._dataProvider?.subscribeLabelLines?.(t=>{e(t)})}unsubscribeLabelLines(){this._dataProvider?.unsubscribeLabelLines?.()}getSingleLabelLines(e){this._dataProvider?.getSingleLabelLines?.(e)}subscribeSingleLabelLines(e){this._dataProvider?.subscribeSingleLabelLines?.(t=>{e(t)})}unsubscribeSingleLabelLines(){this._dataProvider?.unsubscribeSingleLabelLines?.()}getAlerts(e){this._dataProvider?.getAlerts?.(e)}subscribeAlerts(e){this._dataProvider?.subscribeAlerts?.(t=>{e(t)})}unsubscribeAlerts(){this._dataProvider?.unsubscribeAlerts?.()}reset(){this._seriesData=[],this._groupedRawData=[],this.isLoadAll=!1,this.baseInterval=""}disableSubscription(){this.isSubscriptionEnabled=!1}enableSubscription(){this.isSubscriptionEnabled=!0}_isSync({interval:e,symbol:t,timezone:i}){return w()(e,this.interval)&&w()(t,this.symbol)&&w()(i,this.timezone)}constructor(){this._groupedRawData=[],this.interval="",this.symbol="",this._seriesData=[],this._fetchState="ready",this.isLoadAll=!1,this.isSubscriptionEnabled=!0}}class B{}function N(e){return e&&"function"==typeof e.get}class M extends B{constructor(e){super(),this.get=e}}class D extends B{get(e){return e<(this.defaultStart||0)&&void 0!==this.defaultValue?this.defaultValue:this.cache[e]}set(e,t){return new M(t?i=>i<D.currentTick?this.cache[i]:(this.cache[i]=e.get(i),t.get(i)):t=>t<D.currentTick?this.cache[t]:(this.cache[t]=e.get(t),e.get(t)))}constructor(e,t){super(),this.defaultValue=e,this.defaultStart=t,this.cache=[]}}D.currentTick=NaN;class V extends B{get(e){return this.source instanceof Array?this.source[e]:this.source.get(e)}constructor(e){super(),this.source=e}}function j(e,t){return new D(e,t)}function R(e){return function(t){return N(t)?new M(i=>e(t.get(i))):e(t)}}function O(e){return function(t,i){return N(t)?new M(N(i)?r=>e(t.get(r),i.get(r)):r=>e(t.get(r),i)):N(i)?new M(r=>e(t,i.get(r))):e(t,i)}}let F=O((e,t)=>e+t),H=O((e,t)=>e-t),Z=O((e,t)=>e*t),U=O((e,t)=>e/t),W=O((e,t)=>Math.max(e,t));O((e,t)=>Math.min(e,t));let $=R(e=>void 0===e||Number.isNaN(e)?0:e),z=R(e=>void 0===e?NaN:e),K=R(e=>Math.abs(e));R(e=>Math.acos(e)),R(e=>Math.asin(e)),R(e=>Math.atan(e)),R(e=>Math.ceil(e)),R(e=>Math.cos(e)),R(e=>Math.exp(e)),R(e=>Math.floor(e)),R(e=>Math.log(e)),R(e=>Math.round(e)),R(e=>Math.sin(e)),R(e=>Math.sqrt(e)),R(e=>Math.tan(e));let X=R(e=>1e-10>=Math.abs(e));R(e=>isFinite(e)&&!X(e));let Y=R(e=>Number.isNaN(e)||void 0===e),G=O((e,t)=>e&&t);O((e,t)=>e||t),R(e=>!e);let q=O((e,t)=>e>t);O((e,t)=>e>=t);let Q=O((e,t)=>e<t);O((e,t)=>e<=t);let J=O((e,t)=>e===t);function ee(e,t,i){return new M(r=>{let s=N(t)?t.get(r):t,a=N(i)?i.get(r):i;return e.get(r)?s:a})}function et(e,t){return new M(i=>e.get(i-t))}function ei(e){return new M(e)}function er(e,t){return ei(i=>{let r=0;for(let s=i;s>i-t;s--)Number.isNaN(e.get(s))||(r+=e.get(s));return r})}function es(e,t){return ee(Y(et(e,t-1)),NaN,U(er(e,t),t))}function ea(e,t){let i=er(e,t),r=t-1,s=j(),a=et(s,1),o=U(F(e,Z(a,r)),t),l=ee(Y(et(e,r)),NaN,ee(Y(a),U(i,t),o));return s.set(l)}function eo(e,t){let i=er(e,t),r=j(),s=et(r,1),a=F(U(Z(2,H(e,s)),t+1),s),o=ee(Y(et(e,t-1)),NaN,ee(Y(s),U(i,t),a));return r.set(o)}function el(e,t){return t=Math.round(t),ei(i=>{let r=0;for(let s=t;s>=0;s--)r+=(t-s)*e.get(i-s);return 2*r/(t*(t+1))})}function en(e,t,i,r){return ei(s=>{let a=r;for(let r=s;r>s-t;r--)a=i(a,e.get(r),r);return a})}function ed(e,t){return en(e,t,(e,t)=>isNaN(t)||void 0===t?e:Math.max(e,t),Number.MIN_VALUE)}function ec(e,t){return en(e,t,(e,t)=>isNaN(t)||void 0===t?e:Math.min(e,t),Number.MAX_VALUE)}function eh(e,t,i){return ei(r=>{let s=e.get(r);return void 0!==s?t(s):i})}O((e,t)=>e!==t);class eu{isEmpty(e){for(let t=0;t<this.seriesData.length;t++)if(0!==e.get(t))return!1;return!0}getResult(e){let t=[];for(let i=0;i<this.seriesData.length;i++)D.currentTick=i,t[i]=e.get(i);return D.currentTick=NaN,t}updateResult(e,t,i=0){for(let r=i;r<this.seriesData.length;r++)D.currentTick=r,t[r]=e.get(r);D.currentTick=NaN}source(e){var t;return z((t=this.sources(),eh(t,t=>t[e],void 0)))}sources(){return new V(this.seriesData)}typicalPrice(){return z(eh(this.sources(),({high:e,low:t,close:i})=>(e+t+i)/3,void 0))}plot(e){this.plots.push(e)}label(e){e.styles||(e.styles={}),this.labels.push(e)}mobileLabel(e){this.mobileLabels.push(e)}constructor(e){this.seriesData=[],this.plots=[],this.labels=[],this.mobileLabels=[],this.candlestick=e}}i(1738);var eg=i(72579),em=i.n(eg),ep=i(23059),ex=i.n(ep),ef=i(2839),eb=i(44277),ey=i(36685),ev=i(55480);let eC=Symbol("indicatorParam"),ew=Symbol("indicatorProps");Symbol("indicators");let eS=(e,t)=>{let i=e.length-t.length;return t.map((t,r)=>({time:e[r+i].time,value:t}))};function eT(e,t,i,r){return function(s,a,o){let l=Reflect.getOwnMetadata(eC,s,a)||[];l[o]={label:e,type:t,defaultValue:i,key:r||o.toString()},Reflect.defineMetadata(eC,l,s,a)}}function eA(e){return function(t,i,r){Reflect.defineMetadata(ew,e,t,i)}}function e_({Collection:e,propertyName:t,candlestick:i}){let r=e.prototype,s=Reflect.getOwnMetadata(ew,r,t),a=Reflect.getOwnMetadata(eC,r,t)||[],o=new eu(i),n=new e(o),d=new WeakMap,c=new WeakMap,h=new WeakMap,u=e=>h.get(e),g=e=>{if(void 0===e)return!0;switch(e){case"@VOL.visibles[0]":case"@BOLL.visibles[0]":case"@BOLL.visibles[1]":case"@BOLL.visibles[2]":return!0;default:return i.indicatorStore.getValue(e)}},m=e=>{let t=new Set;o.plots.forEach(e=>{let{series:i,colorSeries:r,labelColorSeries:s,visible:a}=e;g(a)&&(t.add(i),r&&t.add(r),s&&t.add(s),e.type===ef.oX.Area&&e.borderSeries&&t.add(e.borderSeries),e.type===ef.oX.Bar&&e.styleTypeSeries&&t.add(e.styleTypeSeries))}),o.labels.forEach(e=>{g(e.visible)&&e.series&&t.add(e.series)}),o.mobileLabels.forEach(e=>{e.series&&t.add(e.series)}),t.forEach(t=>{let i=h.get(t);i?o.updateResult(t,i,e):h.set(t,o.getResult(t))})};function p(e,t){d.has(e)||d.set(e,t)}return{defaultProps:s,paramMetas:a,getResult(e,i,r){let s=a.map(e=>{if(void 0!==e){let t=em()(i,e.key);if(void 0===t)return e.defaultValue;switch(e.type){case l.INT:t="number"!=typeof t?parseInt(t):t;break;case l.FLOAT:t="number"!=typeof t?parseFloat(t):t}return t}});o.seriesData=e,o.plots.splice(0),o.labels.splice(0),o.plots.splice(0),n[t].apply(n,s),m(0);let d=[];o.plots.forEach(e=>{let{type:t,series:i,colorSeries:r,labelColorSeries:s,styleTypeSeries:a,color:l,lineWidth:n,zIndex:h=-1,visible:m,...x}=e;if(!g(m))return;let f=r&&u(r),b=a&&u(a),y=b?{styleTypes:b}:{},v=s&&u(s),C={...f?{colors:f}:{color:l},...v?{labelColors:v}:{}},w=u(i),S=eS(o.seriesData,w);if(e.type===ef.oX.Area)if(e.borderSeries){let i=u(e.borderSeries),r=eS(o.seriesData,i);d.push({...x,chartType:t,lineWidth:n,data:S,borderData:r,visible:m,...C,...y,zIndex:h}),p(e.series,[d.length-1]),p(e.borderSeries,[d.length-1]),c.set(e,[d.length-1])}else d.push({...x,chartType:t,lineWidth:n,data:S,visible:m,...C,...y,histBase:e.histBase,zIndex:h}),p(e.series,[d.length-1]),c.set(e,[d.length-1]);else{let r={...x,chartType:t,lineWidth:n,data:S,visible:m};d.push({...r,...C,...y,zIndex:h}),p(i,[d.length-1]),c.set(e,[d.length-1])}}),r?.(d)},updateResult(e,t,i){m(e),o.plots.forEach(i=>{let{series:r,colorSeries:s,styleTypeSeries:a}=i,l=s&&u(s),n=a&&u(a),d=c.get(i),h=u(r);if(d&&h)if(i.type===ef.oX.Area){let{data:r,borderData:s}=t[d[0]];for(let t=e;t<o.seriesData.length;t++)r[t]={time:o.seriesData[t].time,value:h[t]};if(s&&i.borderSeries){let t=u(i.borderSeries);for(let i=e;i<o.seriesData.length;i++)s[i]={time:o.seriesData[i].time,value:t[i]}}}else{let{data:i}=t[d[0]];for(let t=e;t<o.seriesData.length;t++)i[t]={time:o.seriesData[t].time,value:h[t],...l?{color:l[t]}:{},...n?{styleType:n[t]}:{}}}})},getLabel:({results:e,params:r,time:a,isDisabled:l=!1,disabledText:n=""})=>{let{labels:c}=o,{precision:h,formatter:u=ex()}=r;if(l){let[e]=c;return[{label:`${String(t)} ${n}`,key:`${s.id}`,styles:{...e.styles,display:"block"}}]}let g=c;if(("@MA"===s.id||"@EMA"===s.id||"@WMA"===s.id)&&(g=c.filter(e=>void 0!==e.visible&&i.indicatorStore.getValue(e.visible))),"@VOL"===s.id&&!i.getAttr("volumeUseBase")){let e=c.find(({title:e})=>"Vol({{baseAsset}}):"===e);e&&(e.title="Vol:")}return g.reduce((t,i,o)=>{if(i.series&&void 0!==a&&e.length>0){let l=d.get(i.series);if(l){let n=l.map(t=>e[t]).map(({data:e,color:t,colors:i,labelColors:r,visible:s})=>{let o=function(e,t){let i=(0,eb.ry)(e,e=>{let{time:i}=e;return t-i});return e[i]&&e[i].time===t?i:void 0}(e,a),l=void 0!==o&&e[o],n=t;return void 0!==o&&(n=r?r[o]:i?i[o]:t),{item:l,color:n,visible:!!s}}).find(e=>void 0!==e.item),d=n&&!n.visible?"none":"block";if(i.forceShow&&(d="block"),i.title&&t.push({label:i.title,key:`${s.title}[${o}]`,styles:{...i.styles,display:d}}),n&&n.item){let e;if(i.formmater)e=u(i.formmater?.(n.item.value));else if(i.formatNumber??r.isFormatNum??s.isFormatNum)e=(0,eb.Fk)(n.item.value,3);else if(void 0!==i.precision||void 0!==h){let{value:t}=n.item,r=(0,ev.hj)(i.precision)?i.precision:h;e=u((0,eb.FH)(t,r))}else e=u(n.item.value);t.push({label:Number.isNaN(Number(e))?e.toString():(0,ey._A)()?(0,ey.dD)(e):e.toString(),key:`${s.title}[${o}]Series`,styles:{color:n.color,...i.styles,display:d}})}else t.push({label:"NaN",key:`${s.title}[${o}]Series`,styles:{...i.styles,display:d}})}}else i.title&&t.push({label:i.title,key:`${s.title}[${o}]`,styles:{...i.styles}});return t},[])},getUnavailableText:()=>"",getSupportedIntervals:()=>!0}}var eL=i(85452);class ek{constructor(e){this.ctx=e}}var eI=i(37418);class eP extends ek{MA(e,t,i,r,s,a,o,l,n,d,c,h,u,g,m,p,x,f,b,y){[{series:es(this.ctx.source(t),e),period:e},{series:es(this.ctx.source(r),i),period:i},{series:es(this.ctx.source(a),s),period:s},{series:es(this.ctx.source(l),o),period:o},{series:es(this.ctx.source(d),n),period:n},{series:es(this.ctx.source(h),c),period:c},{series:es(this.ctx.source(g),u),period:u},{series:es(this.ctx.source(p),m),period:m},{series:es(this.ctx.source(f),x),period:x},{series:es(this.ctx.source(y),b),period:b}].forEach(({series:e,period:t},i)=>{this.ctx.plot({series:e,type:ef.oX.Line,color:`@MA.colors[${i}].value`,lineWidth:`@MA.lineWidths[${i}]`,visible:`@MA.visibles[${i}]`}),this.ctx.label({title:`MA(${t}):`,series:e,visible:`@MA.visibles[${i}]`})})}EMA(e,t,i,r,s,a,o,l,n,d,c,h,u,g,m,p,x,f,b,y){[{series:eo(this.ctx.source(t),e),period:e},{series:eo(this.ctx.source(r),i),period:i},{series:eo(this.ctx.source(a),s),period:s},{series:eo(this.ctx.source(l),o),period:o},{series:eo(this.ctx.source(d),n),period:n},{series:eo(this.ctx.source(h),c),period:c},{series:eo(this.ctx.source(g),u),period:u},{series:eo(this.ctx.source(p),m),period:m},{series:eo(this.ctx.source(f),x),period:x},{series:eo(this.ctx.source(y),b),period:b}].forEach(({series:e,period:t},i)=>{this.ctx.plot({series:e,type:ef.oX.Line,color:`@EMA.colors[${i}].value`,lineWidth:`@EMA.lineWidths[${i}]`,visible:`@EMA.visibles[${i}]`}),this.ctx.label({title:`EMA(${t}):`,series:e,visible:`@EMA.visibles[${i}]`})})}WMA(e,t,i,r,s,a,o,l,n,d,c,h,u,g,m,p,x,f,b,y){[{series:el(this.ctx.source(t),e),period:e},{series:el(this.ctx.source(r),i),period:i},{series:el(this.ctx.source(a),s),period:s},{series:el(this.ctx.source(l),o),period:o},{series:el(this.ctx.source(d),n),period:n},{series:el(this.ctx.source(h),c),period:c},{series:el(this.ctx.source(g),u),period:u},{series:el(this.ctx.source(p),m),period:m},{series:el(this.ctx.source(f),x),period:x},{series:el(this.ctx.source(y),b),period:b}].forEach(({series:e,period:t},i)=>{this.ctx.plot({series:e,type:ef.oX.Line,color:`@WMA.colors[${i}].value`,lineWidth:`@WMA.lineWidths[${i}]`,visible:`@WMA.visibles[${i}]`}),this.ctx.label({title:`WMA(${t}):`,series:e,visible:`@WMA.visibles[${i}]`})})}MACD(e,t,i,r){let s=this.ctx.candlestick.indicatorStore.getValue("@MACD.longGrowth.isBullishColor"),a=this.ctx.candlestick.indicatorStore.getValue("@MACD.longFall.isBullishColor"),o=this.ctx.candlestick.indicatorStore.getValue("@MACD.shortGrowth.isBullishColor"),l=this.ctx.candlestick.indicatorStore.getValue("@MACD.shortFall.isBullishColor"),n="volume.upBarColor",d="volume.downBarColor",c=this.ctx.source(r),h=H(eo(c,e),eo(c,t)),u=eo(h,i),g=H(h,u),m=function(...e){return ei(t=>e.map(e=>e.get(t)))}(et(g,1),g),p=([e,t])=>t>0&&e>=t?a?n:d:t<0&&e>=t?l?n:d:t>0&&e<t?s?n:d:o?n:d;this.ctx.plot({series:g,type:ef.oX.Bar,colorSeries:eh(m,p,"defaultColor"),labelColorSeries:eh(m,p,"defaultColor"),styleTypeSeries:eh(m,([e,t])=>t>0&&e>=t?"@MACD.longFall.style":t<0&&e>=t?"@MACD.shortFall.style":t>0&&e<t?"@MACD.longGrowth.style":"@MACD.shortGrowth.style",eI.Mf.Solid),visible:"@MACD.visibles.MACD"}),this.ctx.plot({series:u,type:ef.oX.Line,color:"@MACD.colors.DEA.value",lineWidth:"@MACD.lineWidths.DEA",visible:"@MACD.visibles.DEA"}),this.ctx.plot({series:h,type:ef.oX.Line,color:"@MACD.colors.DIF.value",lineWidth:"@MACD.lineWidths.DIF",visible:"@MACD.visibles.DIF"}),this.ctx.label({title:`MACD(${e}, ${t}, ${i})`}),this.ctx.label({series:u}),this.ctx.label({series:h}),this.ctx.label({series:g})}VOL(e,t){let i,r,s=this.ctx.source("volume"),a=this.ctx.source("quantity"),o=this.ctx.source("baseVolume"),l=this.ctx.source("quoteQuantity"),n=ee(Y(o),s,o),d=ee(Y(l),a,l),c=this.ctx.isEmpty(d);this.ctx.plot({series:n,type:ef.oX.Bar,colorSeries:eh(this.ctx.sources(),({open:e,close:t})=>t>=e?"volume.upBarColor":"volume.downBarColor","defaultColor"),labelColorSeries:eh(this.ctx.sources(),({open:e,close:t})=>t>=e?"volume.upTextColor":"volume.downTextColor","defaultColor"),styleTypeSeries:eh(this.ctx.sources(),({open:e,close:t})=>t>=e?"@VOL.long.style":"@VOL.short.style",eI.Mf.Solid),isScaleCenter:!1}),c||this.ctx.plot({series:d,type:ef.oX.Bar,labelColorSeries:eh(this.ctx.sources(),({open:e,close:t})=>t>=e?"volume.upTextColor":"volume.downTextColor","defaultColor"),visible:"@VOL.visibles[0]",isScaleCenter:!1,yAxisIndex:"1"}),e&&(i=es(n,e),this.ctx.plot({series:i,type:ef.oX.Line,color:"@VOL.maVol1.color.value",lineWidth:"@VOL.maVol1.lineWidth",visible:"@VOL.maVol1.visible"})),t&&(r=es(n,t),this.ctx.plot({series:r,type:ef.oX.Line,color:"@VOL.maVol2.color.value",lineWidth:"@VOL.maVol2.lineWidth",visible:"@VOL.maVol2.visible"})),this.ctx.label({title:"Vol({{baseAsset}}):",series:n}),c||this.ctx.label({title:"Vol({{quoteAsset}})",series:d,forceShow:!0}),i&&this.ctx.label({series:i}),r&&this.ctx.label({series:r})}TRIX(e){let t=eo(eo(eo(this.ctx.source("close"),e),e),e);this.ctx.plot({series:t,type:ef.oX.Line,color:"@TRIX.color.value",lineWidth:"@TRIX.lineWidth"}),this.ctx.label({title:`TRIX(${e}):`,series:t})}}(0,eL.gn)([eA({id:"@MA",title:"MA",isHistBase:!0,isScaleCenter:!0,categories:["main"]}),(0,eL.fM)(0,eT("Length 0","INT",7,"periods[0]")),(0,eL.fM)(1,eT("Source 0","SOURCE","close","sources[0]")),(0,eL.fM)(2,eT("Length 1","INT",25,"periods[1]")),(0,eL.fM)(3,eT("Source 1","SOURCE","close","sources[1]")),(0,eL.fM)(4,eT("Length 2","INT",99,"periods[2]")),(0,eL.fM)(5,eT("Source 2","SOURCE","close","sources[2]")),(0,eL.fM)(6,eT("Length 3","INT",120,"periods[3]")),(0,eL.fM)(7,eT("Source 3","SOURCE","close","sources[3]")),(0,eL.fM)(8,eT("Length 4","INT",150,"periods[4]")),(0,eL.fM)(9,eT("Source 4","SOURCE","close","sources[4]")),(0,eL.fM)(10,eT("Length 5","INT",0,"periods[5]")),(0,eL.fM)(11,eT("Source 5","SOURCE","close","sources[5]")),(0,eL.fM)(12,eT("Length 6","INT",0,"periods[6]")),(0,eL.fM)(13,eT("Source 6","SOURCE","close","sources[6]")),(0,eL.fM)(14,eT("Length 7","INT",0,"periods[7]")),(0,eL.fM)(15,eT("Source 7","SOURCE","close","sources[7]")),(0,eL.fM)(16,eT("Length 8","INT",0,"periods[8]")),(0,eL.fM)(17,eT("Source 8","SOURCE","close","sources[8]")),(0,eL.fM)(18,eT("Length 9","INT",0,"periods[9]")),(0,eL.fM)(19,eT("Source 9","SOURCE","close","sources[9]")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n]),(0,eL.w6)("design:returntype",void 0)],eP.prototype,"MA",null),(0,eL.gn)([eA({id:"@EMA",title:"EMA",isHistBase:!0,isScaleCenter:!0,categories:["main"]}),(0,eL.fM)(0,eT("Length 1","INT",7,"periods[0]")),(0,eL.fM)(1,eT("Source 1","SOURCE","close","sources[0]")),(0,eL.fM)(2,eT("Length 2","INT",25,"periods[1]")),(0,eL.fM)(3,eT("Source 2","SOURCE","close","sources[1]")),(0,eL.fM)(4,eT("Length 3","INT",99,"periods[2]")),(0,eL.fM)(5,eT("Source 3","SOURCE","close","sources[2]")),(0,eL.fM)(6,eT("Length 4","INT",120,"periods[3]")),(0,eL.fM)(7,eT("Source 4","SOURCE","close","sources[3]")),(0,eL.fM)(8,eT("Length 5","INT",120,"periods[4]")),(0,eL.fM)(9,eT("Source 5","SOURCE","close","sources[4]")),(0,eL.fM)(10,eT("Length 6","INT",120,"periods[5]")),(0,eL.fM)(11,eT("Source 6","SOURCE","close","sources[5]")),(0,eL.fM)(12,eT("Length 7","INT",0,"periods[6]")),(0,eL.fM)(13,eT("Source 7","SOURCE","close","sources[6]")),(0,eL.fM)(14,eT("Length 8","INT",0,"periods[7]")),(0,eL.fM)(15,eT("Source 8","SOURCE","close","sources[7]")),(0,eL.fM)(16,eT("Length 9","INT",0,"periods[8]")),(0,eL.fM)(17,eT("Source 9","SOURCE","close","sources[8]")),(0,eL.fM)(18,eT("Length 10","INT",0,"periods[9]")),(0,eL.fM)(19,eT("Source 10","SOURCE","close","sources[9]")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n]),(0,eL.w6)("design:returntype",void 0)],eP.prototype,"EMA",null),(0,eL.gn)([eA({id:"@WMA",title:"WMA",isHistBase:!0,isScaleCenter:!0,categories:["main"]}),(0,eL.fM)(0,eT("Length 1","INT",7,"periods[0]")),(0,eL.fM)(1,eT("Source 1","SOURCE","close","sources[0]")),(0,eL.fM)(2,eT("Length 2","INT",25,"periods[1]")),(0,eL.fM)(3,eT("Source 2","SOURCE","close","sources[1]")),(0,eL.fM)(4,eT("Length 3","INT",99,"periods[2]")),(0,eL.fM)(5,eT("Source 3","SOURCE","close","sources[2]")),(0,eL.fM)(6,eT("Length 4","INT",120,"periods[3]")),(0,eL.fM)(7,eT("Source 4","SOURCE","close","sources[3]")),(0,eL.fM)(8,eT("Length 5","INT",120,"periods[4]")),(0,eL.fM)(9,eT("Source 5","SOURCE","close","sources[4]")),(0,eL.fM)(10,eT("Length 6","INT",120,"periods[5]")),(0,eL.fM)(11,eT("Source 6","SOURCE","close","sources[5]")),(0,eL.fM)(12,eT("Length 7","INT",0,"periods[6]")),(0,eL.fM)(13,eT("Source 7","SOURCE","close","sources[6]")),(0,eL.fM)(14,eT("Length 8","INT",0,"periods[7]")),(0,eL.fM)(15,eT("Source 8","SOURCE","close","sources[7]")),(0,eL.fM)(16,eT("Length 9","INT",0,"periods[8]")),(0,eL.fM)(17,eT("Source 9","SOURCE","close","sources[8]")),(0,eL.fM)(18,eT("Length 10","INT",0,"periods[9]")),(0,eL.fM)(19,eT("Source 10","SOURCE","close","sources[9]")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n,Number,void 0===n?Object:n]),(0,eL.w6)("design:returntype",void 0)],eP.prototype,"WMA",null),(0,eL.gn)([eA({id:"@MACD",title:"MACD",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("Fast Length","INT",12,"fastPeriod")),(0,eL.fM)(1,eT("Slow Length","INT",26,"slowPeriod")),(0,eL.fM)(2,eT("Signal Length","INT",9,"signalPeriod")),(0,eL.fM)(3,eT("Source","SOURCE","close","source")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number,Number,void 0===n?Object:n]),(0,eL.w6)("design:returntype",void 0)],eP.prototype,"MACD",null),(0,eL.gn)([eA({id:"@VOL",title:"VOL",isHistBase:!1,isScaleCenter:!1,isFormatNum:!0,categories:["sub"]}),(0,eL.fM)(0,eT("MAVOL1Period","INT",7,"maVol1.period")),(0,eL.fM)(1,eT("MAVOL2Period","INT",14,"maVol2.period")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number]),(0,eL.w6)("design:returntype",void 0)],eP.prototype,"VOL",null),(0,eL.gn)([eA({id:"@TRIX",title:"TRIX",isHistBase:!0,isScaleCenter:!0,categories:["main"]}),(0,eL.fM)(0,eT("Length","INT",9,"period")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number]),(0,eL.w6)("design:returntype",void 0)],eP.prototype,"TRIX",null);class eE extends ek{RSI(e,t,i){let r=this.ctx.source("close"),s=et(r,1),a=W(H(r,s),0),o=W(H(s,r),0);[e,t,i].forEach((e,t)=>{let i=U(ea(a,e),ea(o,e)),r=H(100,U(100,F(1,i)));this.ctx.plot({series:r,type:ef.oX.Line,color:`@RSI.colors[${t}].value`,lineWidth:`@RSI.lineWidths[${t}]`,visible:`@RSI.visibles[${t}]`}),this.ctx.label({title:`RSI(${e})`,series:r})})}MFI(e,t,i){let r=this.ctx.typicalPrice(),s=this.ctx.source("volume"),a=ei(e=>{let t=r.get(e-1);if(isNaN(t))return[0,0];let i=r.get(e),a=i*s.get(e);return i>t?[a,0]:[0,a]}),o=eh(a,([e])=>e,0),l=eh(a,([,e])=>e,0);[e,t,i].forEach((e,t)=>{let i=U(er(o,e),er(l,e)),r=ee(X(i),0,H(100,U(100,F(1,i))));this.ctx.plot({series:r,type:ef.oX.Line,color:`@MFI.colors[${t}].value`,lineWidth:`@MFI.lineWidths[${t}]`,visible:`@MFI.visibles[${t}]`}),this.ctx.label({title:`MFI(${e})`,series:r})})}CCI(e){let t=this.ctx.typicalPrice(),i=es(t,e),r=function(e,t){let i=es(e,t);return ei(r=>{let s=i.get(r),a=0;for(let i=r;i>r-t;i--)a+=Math.abs(e.get(i)-s);return a/t})}(t,e),s=U(H(t,i),Z(r,.015));this.ctx.plot({series:s,type:ef.oX.Line,color:"@CCI.color.value",lineWidth:"@CCI.lineWidth"}),this.ctx.label({title:`CCI(${e})`,series:s})}}(0,eL.gn)([eA({id:"@RSI",title:"RSI",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("Length 1","INT",6,"periods[0]")),(0,eL.fM)(1,eT("Length 2","INT",12,"periods[1]")),(0,eL.fM)(2,eT("Length 3","INT",24,"periods[2]")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number,Number]),(0,eL.w6)("design:returntype",void 0)],eE.prototype,"RSI",null),(0,eL.gn)([eA({id:"@MFI",title:"MFI",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("Length 1","INT",7,"periods[0]")),(0,eL.fM)(1,eT("Length 2","INT",14,"periods[1]")),(0,eL.fM)(2,eT("Length 3","INT",21,"periods[2]")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number,Number]),(0,eL.w6)("design:returntype",void 0)],eE.prototype,"MFI",null),(0,eL.gn)([eA({id:"@CCI",title:"CCI",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("Length","INT",20,"period")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number]),(0,eL.w6)("design:returntype",void 0)],eE.prototype,"CCI",null);class eB extends ek{VWAP(e){let t=this.ctx.source("volume");if(this.ctx.isEmpty(t)){this.ctx.plot({series:t,type:ef.oX.Line,color:"@VWAP.color",lineWidth:"@VWAP.lineWidth"}),this.ctx.label({title:`VWAP(${e})`,series:t});return}let i=U(er(Z(this.ctx.typicalPrice(),t),e),er(t,e)),r=ei(e=>{let t=i.get(e);if(t!==1/0&&t!==-1/0&&!Number.isNaN(t))return t;for(let t=e;t>0;t--){let e=i.get(t);if(e!==1/0&&e!==-1/0&&!Number.isNaN(e))return e}return 0});this.ctx.plot({series:r,type:ef.oX.Line,color:"@VWAP.color.value",lineWidth:"@VWAP.lineWidth"}),this.ctx.label({title:`VWAP(${e})`,series:r})}OBV(e,t){let i=this.ctx.source("volume"),r=this.ctx.source("close"),s=ee(q(r,et(r,1)),1,ee(Q(r,et(r,1)),-1,0)),a=j(),o=a.set(F($(et(a,1)),Z(s,i))),l=es(o,e),n=eo(o,t);this.ctx.plot({series:o,type:ef.oX.Line,color:"@OBV.color.value",lineWidth:"@OBV.lineWidth"}),this.ctx.plot({series:l,type:ef.oX.Line,visible:"@OBV.ma.visible",color:"@OBV.ma.color.value",lineWidth:"@OBV.ma.lineWidth"}),this.ctx.plot({series:n,type:ef.oX.Line,visible:"@OBV.ema.visible",color:"@OBV.ema.color.value",lineWidth:"@OBV.ema.lineWidth"}),this.ctx.label({title:"OBV",series:o,formatNumber:!0}),this.ctx.label({title:`MA(${e})`,series:l,formatNumber:!0}),this.ctx.label({title:`EMA(${t})`,series:n,formatNumber:!0})}AVL(){let e=this.ctx.source("volume");if(this.ctx.isEmpty(e)){this.ctx.plot({series:e,type:ef.oX.Line,color:"@AVL.color.value",lineWidth:"@AVL.lineWidth"}),this.ctx.label({title:"AVL",series:e});return}let t=this.ctx.source("quantity");if(this.ctx.isEmpty(t)){let e=eh(t,()=>NaN,NaN);this.ctx.plot({series:e,type:ef.oX.Line,color:"@AVL.color.value",lineWidth:"@AVL.lineWidth"}),this.ctx.label({title:"AVL",series:e});return}let i=U(t,e);this.ctx.plot({series:i,type:ef.oX.Line,color:"@AVL.color.value",lineWidth:"@AVL.lineWidth"}),this.ctx.label({title:"AVL",series:i})}}(0,eL.gn)([eA({id:"@VWAP",title:"VWAP",isHistBase:!0,isScaleCenter:!0,categories:["main"]}),(0,eL.fM)(0,eT("Length","INT",14,"period")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number]),(0,eL.w6)("design:returntype",void 0)],eB.prototype,"VWAP",null),(0,eL.gn)([eA({id:"@OBV",title:"OBV",isHistBase:!1,isScaleCenter:!0,isFormatNum:!0,categories:["sub"]}),(0,eL.fM)(0,eT("MAPeriod","INT",7,"ma.period")),(0,eL.fM)(1,eT("EMAPeriod","INT",7,"ema.period")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number]),(0,eL.w6)("design:returntype",void 0)],eB.prototype,"OBV",null),(0,eL.gn)([eA({id:"@AVL",title:"AVL",isHistBase:!0,isScaleCenter:!0,categories:["main"]}),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[]),(0,eL.w6)("design:returntype",void 0)],eB.prototype,"AVL",null);class eN extends ek{KDJ(e,t,i){let r=this.ctx.source("close"),s=this.ctx.source("low"),a=this.ctx.source("high"),o=ec(s,e),l=ed(a,e),n=ee(J(o,l),0,Z(100,U(H(r,o),H(l,o)))),d=j(50,e-1),c=j(50,e-1),h=ei(t=>t<e-1),u=d.set(F(Z(1-1/t,ee(h,NaN,et(d,1))),Z(1/t,n))),g=c.set(F(Z(1-1/i,ee(h,NaN,et(c,1))),Z(1/i,u))),m=H(Z(u,3),Z(g,2));this.ctx.plot({series:u,type:ef.oX.Line,color:"@KDJ.colors[0].value",lineWidth:"@KDJ.lineWidths[0]",visible:"@KDJ.visibles[0]"}),this.ctx.plot({series:g,type:ef.oX.Line,color:"@KDJ.colors[1].value",lineWidth:"@KDJ.lineWidths[1]",visible:"@KDJ.visibles[1]"}),this.ctx.plot({series:m,type:ef.oX.Line,color:"@KDJ.colors[2].value",lineWidth:"@KDJ.lineWidths[2]",visible:"@KDJ.visibles[2]"}),this.ctx.label({title:`KDJ(${e}, ${t}, ${i})`}),this.ctx.label({title:"K",series:u}),this.ctx.label({title:"D",series:g}),this.ctx.label({title:"J",series:m})}}(0,eL.gn)([eA({id:"@KDJ",title:"KDJ",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("K%","INT",9,"period[0]")),(0,eL.fM)(1,eT("D%","INT",3,"period[1]")),(0,eL.fM)(2,eT("Length","INT",3,"period[2]")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number,Number]),(0,eL.w6)("design:returntype",void 0)],eN.prototype,"KDJ",null);class eM extends ek{BOLL(e,t){let i=this.ctx.source("close"),r=Z(function(e,t){let i=es(e,t);return ei(r=>{let s=i.get(r),a=0;for(let i=r;i>r-t;i--)a+=(e.get(i)-s)**2;return Math.sqrt(a/t)})}(i,e),t),s=es(i,e),a=F(s,r),o=H(s,r);this.ctx.plot({series:a,type:ef.oX.Line,color:"@BOLL.colors[0].value",lineWidth:"@BOLL.lineWidths[0]",visible:"@BOLL.visibles[0]"}),this.ctx.plot({series:s,type:ef.oX.Line,color:"@BOLL.colors[1].value",lineWidth:"@BOLL.lineWidths[1]",visible:"@BOLL.visibles[1]"}),this.ctx.plot({series:o,type:ef.oX.Line,color:"@BOLL.colors[2].value",lineWidth:"@BOLL.lineWidths[2]",visible:"@BOLL.visibles[2]"}),this.ctx.plot({series:a,borderSeries:o,type:ef.oX.Area,color:"@BOLL.background.value",visible:"@BOLL.backgroundVisible"}),this.ctx.label({title:`BOLL(${e}, ${t})`}),this.ctx.label({title:"UP",series:a}),this.ctx.label({title:"MB",series:s}),this.ctx.label({title:"DN",series:o})}}(0,eL.gn)([eA({id:"@BOLL",title:"BOLL",isHistBase:!0,isScaleCenter:!0,categories:["main"]}),(0,eL.fM)(0,eT("Length","INT",21,"period")),(0,eL.fM)(1,eT("Multipler","FLOAT",2,"stdDev")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number]),(0,eL.w6)("design:returntype",void 0)],eM.prototype,"BOLL",null);class eD extends ek{StochRSI(e,t,i,r){let s=function(e,t){let i=et(e,1),r=W(H(e,i),0),s=W(H(i,e),0),a=U(ea(r,t),ea(s,t));return H(100,U(100,F(1,a)))}(this.ctx.source("close"),e),a=es(function(e,t,i,r){var s=U(Z(100,H(e,ec(i,r))),H(ed(t,r),ec(i,r)));let a=j();return a.set(ee(Y(s),et(a,1),s))}(s,s,s,t),i),o=es(a,r);this.ctx.plot({series:a,type:ef.oX.Line,color:"@Stoch RSI.colors.smoothK.value",lineWidth:"@Stoch RSI.lineWidths.smoothK",visible:"@Stoch RSI.visibles.smoothK"}),this.ctx.plot({series:o,type:ef.oX.Line,color:"@Stoch RSI.colors.smoothD.value",lineWidth:"@Stoch RSI.lineWidths.smoothD",visible:"@Stoch RSI.visibles.smoothD"}),this.ctx.label({title:`Stoch RSI(${e}, ${t}, ${i}, ${r})`}),this.ctx.label({series:a}),this.ctx.label({series:o})}WR(e){let t=this.ctx.source("close"),i=this.ctx.source("high"),r=this.ctx.source("low"),s=Z(U(H(ed(i,e),t),H(ed(i,e),ec(r,e))),-100);this.ctx.plot({series:s,type:ef.oX.Line,color:"@Wm %R.color.value",lineWidth:"@Wm %R.lineWidth"}),this.ctx.label({title:`Wm %R(${e})`,series:s})}MTM(e,t){let i=this.ctx.source(t),r=H(i,et(i,e));this.ctx.plot({series:r,type:ef.oX.Line,color:"@MTM.color.value",lineWidth:"@MTM.lineWidth"}),this.ctx.label({title:`MTM(${e})`,series:r})}}(0,eL.gn)([eA({id:"@Stoch RSI",title:"Stoch RSI",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("LengthRSI","INT",14,"rsiPeriod")),(0,eL.fM)(1,eT("LengthStoch","INT",14,"stochasticPeriod")),(0,eL.fM)(2,eT("SmoothK","INT",3,"kPeriod")),(0,eL.fM)(3,eT("SmoothD","INT",3,"dPeriod")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number,Number,Number]),(0,eL.w6)("design:returntype",void 0)],eD.prototype,"StochRSI",null),(0,eL.gn)([eA({id:"@Wm %R",title:"Wm %R",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("Length","INT",14,"period")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number]),(0,eL.w6)("design:returntype",void 0)],eD.prototype,"WR",null),(0,eL.gn)([eA({id:"@MTM",title:"MTM",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("Length","INT",14,"period")),(0,eL.fM)(1,eT("Source","SOURCE","close","source")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,void 0===n?Object:n]),(0,eL.w6)("design:returntype",void 0)],eD.prototype,"MTM",null);class eV extends ek{DMI(e){let t=this.ctx.source("high"),i=this.ctx.source("low"),r=this.ctx.source("close"),s=H(t,et(t,1)),a=H(et(i,1),i),o=ee(G(q(s,a),q(s,0)),s,0),l=ee(G(q(a,s),q(a,0)),a,0),n=W(H(t,i),W(K(H(t,et(r,1))),K(H(i,et(r,1))))),d=ea(o,e),c=ea(l,e),h=ea(n,e),u=Z(U(d,h),100),g=Z(U(c,h),100),m=ea(Z(K(U(H(u,g),F(u,g))),100),e);this.ctx.plot({type:ef.oX.Line,series:u,color:"@DMI.colors.pDI.value",lineWidth:"@DMI.lineWidths.pDI",visible:"@DMI.visibles.pDI"}),this.ctx.plot({type:ef.oX.Line,series:g,color:"@DMI.colors.nDI.value",lineWidth:"@DMI.lineWidths.nDI",visible:"@DMI.visibles.nDI"}),this.ctx.plot({type:ef.oX.Line,series:m,color:"@DMI.colors.dx.value",lineWidth:"@DMI.lineWidths.dx",visible:"@DMI.visibles.dx"}),this.ctx.label({title:`DMI(${e})`}),this.ctx.label({series:u,precision:4}),this.ctx.label({series:g,precision:4}),this.ctx.label({series:m,precision:4})}EMV(e,t){let i=this.ctx.source("high"),r=this.ctx.source("low"),s=this.ctx.source("volume"),a=H(U(F(i,r),2),U(F(et(i,1),et(r,1)),2)),o=U(U(s,t),H(i,r)),l=es(U(a,o),e);this.ctx.plot({type:ef.oX.Line,series:l,color:"@EMV.color.value",lineWidth:"@EMV.lineWidth"}),this.ctx.label({title:`EMV(${t}, ${e})`}),this.ctx.label({series:l,precision:4})}SAR(e,t){let i=this.ctx.source("low"),r=this.ctx.source("high"),s=[],a=[],o=[],l=[],n=ei(n=>(n>1?(a[n]=a[n-1]+l[n-1]*(o[n-1]-a[n-1]),o[n]=o[n-1],l[n]=l[n-1],s[n]=s[n-1],s[n]?(a[n]=Math.min(a[n],i.get(n-2),i.get(n-1)),r.get(n)>o[n]&&(o[n]=r.get(n),l[n]=Math.min(l[n]+e,t))):(a[n]=Math.max(a[n],r.get(n-2),r.get(n-1)),i.get(n)<o[n]&&(o[n]=i.get(n),l[n]=Math.min(l[n]+e,t))),(s[n]&&i.get(n)<a[n]||!s[n]&&r.get(n)>a[n])&&(l[n]=e,a[n]=o[n],s[n]=!s[n],o[n]=s[n]?r.get(n):i.get(n))):(a[n]=i.get(n),o[n]=r.get(n),l[n]=e,s[n]=!0),a[n]));this.ctx.plot({type:ef.oX.Point,series:n,color:"@SAR.color.value"}),this.ctx.label({title:`SAR(${e}, ${t})`}),this.ctx.label({series:n})}}(0,eL.gn)([eA({id:"@DMI",title:"DMI",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("Length","INT",14,"period")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number]),(0,eL.w6)("design:returntype",void 0)],eV.prototype,"DMI",null),(0,eL.gn)([eA({id:"@EMV",title:"EMV",isHistBase:!1,isScaleCenter:!0,categories:["sub"]}),(0,eL.fM)(0,eT("Length","INT",14,"period")),(0,eL.fM)(1,eT("Divisor","FLOAT",1e4,"x")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number]),(0,eL.w6)("design:returntype",void 0)],eV.prototype,"EMV",null),(0,eL.gn)([eA({id:"@SAR",title:"SAR",isHistBase:!0,isScaleCenter:!0,categories:["main"]}),(0,eL.fM)(0,eT("Start","FLOAT",.02,"step")),(0,eL.fM)(1,eT("Maximum","FLOAT",.2,"x")),(0,eL.w6)("design:type",Function),(0,eL.w6)("design:paramtypes",[Number,Number]),(0,eL.w6)("design:returntype",void 0)],eV.prototype,"SAR",null);var ej=i(98140);let eR=e=>{let t={};return e.filter(({time:e})=>!t[e]&&(t[e]=1,!0)).sort((e,t)=>e.time-t.time)},eO=e=>{let t,i,r=[],s=null,a="",o=[],l=!1,n=!1,d=(0,eb.Ds)((i={})=>{c(i,!0),function(){s&&s();let i={symbol:a,interval:t},r=function(e){return t=>w()(e,t)}(i);s=e.subscribe(i,e=>{if(!r({symbol:a,interval:t}))return;let{length:i}=o;if(i>0){let t=o[i-1]?.time;e.time>t?o.push(e):o.splice(i-1,1,e),h()}})}()},100);function c(r={},s=!1){var d;if(l)return;if(r.endTime){if(r.startTime=r.startTime||r.endTime-500*(0,ej.m1)(t),r.endTime=i?Math.min(i,r.endTime):r.endTime,i=Math.min(r.startTime,i),r.endTime<r.startTime)throw Error("custom indicator fetch data occured time error");r.limit=Math.ceil((r.endTime-r.startTime)/(0,ej.m1)(t)+1)}let u={...r,symbol:a,interval:t},g=(d=u,e=>w()(d,e));n=!0,e.getData(u,({data:e,isLoadAll:i})=>{g({...u,symbol:a,interval:t})&&(o=s?e:eR(o.concat(e)),l=i,n=!1,h())})}function h(){r.forEach(e=>{e()})}return{...e,init:(e,r,n)=>{a=e,t=r,o.length=0,i=0,l=!1,s&&s(),d(n)},getResult:function(t,i,r){e.getResult(o,{},e=>{r(e)})},subscribe:function(e){-1===r.indexOf(e)&&r.push(e)},unSusbcribe:function(){s&&s(),s=null,r.length=0},loadData:(e={})=>c(e),isFetchingData:n,reset:()=>{o.length=0,l=!1}}};(r=l||(l={})).INT="INT",r.FLOAT="FLOAT",r.SOURCE="SOURCE",r.SELECT="SELECT",r.STRING="STRING",(s=n||(n={})).HIGH="high",s.LOW="low",s.OPEN="open",s.CLOSE="close";let eF={VOL:e=>e_({Collection:eP,propertyName:"VOL",candlestick:e}),MA:e=>e_({Collection:eP,propertyName:"MA",candlestick:e}),EMA:e=>e_({Collection:eP,propertyName:"EMA",candlestick:e}),WMA:e=>e_({Collection:eP,propertyName:"WMA",candlestick:e}),MACD:e=>e_({Collection:eP,propertyName:"MACD",candlestick:e}),RSI:e=>e_({Collection:eE,propertyName:"RSI",candlestick:e}),MFI:e=>e_({Collection:eE,propertyName:"MFI",candlestick:e}),BOLL:e=>e_({Collection:eM,propertyName:"BOLL",candlestick:e}),KDJ:e=>e_({Collection:eN,propertyName:"KDJ",candlestick:e}),OBV:e=>e_({Collection:eB,propertyName:"OBV",candlestick:e}),CCI:e=>e_({Collection:eE,propertyName:"CCI",candlestick:e}),VWAP:e=>e_({Collection:eB,propertyName:"VWAP",candlestick:e}),StochRSI:e=>e_({Collection:eD,propertyName:"StochRSI",candlestick:e}),WR:e=>e_({Collection:eD,propertyName:"WR",candlestick:e}),AVL:e=>e_({Collection:eB,propertyName:"AVL",candlestick:e}),DMI:e=>e_({Collection:eV,propertyName:"DMI",candlestick:e}),MTM:e=>e_({Collection:eD,propertyName:"MTM",candlestick:e}),TRIX:e=>e_({Collection:eP,propertyName:"TRIX",candlestick:e}),EMV:e=>e_({Collection:eV,propertyName:"EMV",candlestick:e}),SAR:e=>e_({Collection:eV,propertyName:"SAR",candlestick:e})},eH=["@VOL","@EMV","@VWAP","@OBV","@AVL"],eZ=e=>Object.keys(eF).reduce((t,i)=>{let r=eF[i];if(!r)return console.warn("[candlestick] fn is not found"),t;let s=r(e);if(!s)return console.warn("[candlestick] indicatorBase is not found"),t;let a=s?.defaultProps?.id;return a?t[a]=s:console.warn("[candlestick] id is not found"),t},{}),eU=e=>{let t=eZ(e);return eH.reduce((e,i)=>(e[i]=t[i],e),{})};var eW=i(78409),e$=i(53806);let ez=e=>{let{interval:t,baseInterval:i,domain:r,range:s,data:a,scaleCoeff:o,isLessThanMonths:l,timeUnitValue:n,timezone:d}=e;if(i&&t!==i)return new e$.Z({domain:r,range:s,data:a,scaleCoeff:o,isLessThanMonths:l,timeUnitValue:n,interval:t,baseInterval:i,timezone:d});let c={domain:r,range:[s[0],s[1]],data:a,scaleCoeff:o,isLessThanMonths:l,timeUnitValue:n};return new eW.ZP(c)};var eK=i(10649),eX=i(37799),eY=i(43061),eG=i(27868);let eq=e=>e<.5?8*e*e*e*e:1-(-2*e+2)**4/2,eQ=({f:e=eq,duration:t})=>i=>e(x()(i/t,0,1)),eJ=({colorTable:e=eY.kn})=>{let t=e["indicator.1"],i=e["indicator.2"],r=e["indicator.3"],s=e["indicator.4"],a=e["indicator.5"],o=e["indicator.6"],l=e["indicator.7"],n=e["indicator.8"],d=e["indicator.9"],c=e["indicator.10"],h={showSeries:!0,periods:[7,25,99,0,0,0,0,0,0,0],sources:[eI.Fb.Close,eI.Fb.Close,eI.Fb.Close,eI.Fb.Close,eI.Fb.Close,eI.Fb.Close,eI.Fb.Close,eI.Fb.Close,eI.Fb.Close,eI.Fb.Close],lineWidths:["1","1","1","1","1","1","1","1","1","1"],colors:[(0,eI.LF)({value:t}),(0,eI.LF)({value:i}),(0,eI.LF)({value:r}),(0,eI.LF)({value:s}),(0,eI.LF)({value:a}),(0,eI.LF)({value:o}),(0,eI.LF)({value:l}),(0,eI.LF)({value:n}),(0,eI.LF)({value:d}),(0,eI.LF)({value:c})],visibles:[!0,!0,!0,!1,!1,!1,!1,!1,!1,!1]};return{"@MA":h,"@EMA":b()(h),"@WMA":b()(h),"@MACD":{showSeries:!0,fastPeriod:12,slowPeriod:26,signalPeriod:9,visibles:{DEA:!0,DIF:!0,MACD:!0},lineWidths:{DEA:eI.l1["0"],DIF:eI.l1["0"]},colors:{DEA:(0,eI.LF)({value:i}),DIF:(0,eI.LF)({value:r})},longGrowth:{style:eI.Mf.Hollow,isBullishColor:!0},longFall:{style:eI.Mf.Solid,isBullishColor:!0},shortGrowth:{style:eI.Mf.Hollow,isBullishColor:!1},shortFall:{style:eI.Mf.Solid,isBullishColor:!1}},"@VOL":{showSeries:!0,visibles:[!1],long:{style:eI.Mf.Solid},short:{style:eI.Mf.Solid},maVol1:{period:7,lineWidth:eI.l1["1"],color:(0,eI.LF)({value:n}),visible:!0},maVol2:{period:14,lineWidth:eI.l1["1"],color:(0,eI.LF)({value:s}),visible:!0}},"@TRIX":{showSeries:!0,period:9,color:(0,eI.LF)({value:t}),lineWidth:eI.l1["0"]},"@Stoch RSI":{showSeries:!0,rsiPeriod:14,stochasticPeriod:14,kPeriod:3,dPeriod:3,visibles:{smoothK:!0,smoothD:!0},lineWidths:{smoothK:eI.l1["0"],smoothD:eI.l1["0"]},colors:{smoothK:(0,eI.LF)({value:i}),smoothD:(0,eI.LF)({value:r})}},"@Wm %R":{showSeries:!0,period:14,color:(0,eI.LF)({value:t}),lineWidth:eI.l1["0"]},"@MTM":{showSeries:!0,period:14,source:eI.Fb.Close,color:(0,eI.LF)({value:t}),lineWidth:eI.l1["0"]},"@DMI":{showSeries:!0,period:14,visibles:{pDI:!0,nDI:!0,dx:!0},lineWidths:{pDI:eI.l1["0"],nDI:eI.l1["0"],dx:eI.l1["0"]},colors:{pDI:(0,eI.LF)({value:i}),nDI:(0,eI.LF)({value:r}),dx:(0,eI.LF)({value:t})}},"@EMV":{showSeries:!0,period:14,x:1e4,color:(0,eI.LF)({value:t}),lineWidth:eI.l1["0"]},"@SAR":{showSeries:!0,step:.02,x:.2,color:(0,eI.LF)({value:t})},"@RSI":{showSeries:!0,periods:[6,12,24],lineWidths:[eI.l1["0"],eI.l1["0"],eI.l1["0"]],colors:[(0,eI.LF)({value:i}),(0,eI.LF)({value:r}),(0,eI.LF)({value:t})],visibles:[!0,!0,!0]},"@MFI":{showSeries:!0,periods:[7,14,21],lineWidths:[eI.l1["0"],eI.l1["0"],eI.l1["0"]],colors:[(0,eI.LF)({value:i}),(0,eI.LF)({value:r}),(0,eI.LF)({value:t})],visibles:[!0,!0,!0]},"@CCI":{showSeries:!0,period:9,color:(0,eI.LF)({value:t}),lineWidth:eI.l1["0"]},"@KDJ":{showSeries:!0,period:[9,3,3],lineWidths:[eI.l1["0"],eI.l1["0"],eI.l1["0"]],colors:[(0,eI.LF)({value:i}),(0,eI.LF)({value:r}),(0,eI.LF)({value:t})],visibles:[!0,!0,!0]},"@OBV":{showSeries:!0,color:(0,eI.LF)({value:t}),lineWidth:eI.l1["0"],ma:{period:7,visible:!1,color:(0,eI.LF)({value:i}),lineWidth:eI.l1["0"]},ema:{period:7,visible:!1,color:(0,eI.LF)({value:r}),lineWidth:eI.l1["0"]}},"@BOLL":{showSeries:!0,period:20,stdDev:2,background:(0,eI.LF)({value:(0,eb.DZ)(r,.1)}),backgroundVisible:!0,lineWidths:[eI.l1["0"],eI.l1["0"],eI.l1["0"]],colors:[(0,eI.LF)({value:r}),(0,eI.LF)({value:i}),(0,eI.LF)({value:r})],visibles:[!0,!0,!0]},"@VWAP":{showSeries:!0,period:14,color:(0,eI.LF)({value:t}),lineWidth:eI.l1["0"]},"@AVL":{showSeries:!0,color:(0,eI.LF)({value:t}),lineWidth:eI.l1["0"]},"@OI-UM":{showSeries:!0,bar:{color:(0,eI.LF)({value:"rgba(14, 203, 129, 0.7)"})},nv:{color:(0,eI.LF)({value:o}),lineWidth:eI.l1["2"]}},"@OI-CM":{showSeries:!0,bar:{color:(0,eI.LF)({value:"rgba(14, 203, 129, 0.7)"})}},"@LS-Acco":{showSeries:!0,bar:{buyColor:(0,eI.LF)({value:d}),sellColor:(0,eI.LF)({value:o})},ratio:{color:(0,eI.LF)({value:i}),lineWidth:eI.l1["2"]}},"@LS-Posit":{showSeries:!0,bar:{buyColor:(0,eI.LF)({value:d}),sellColor:(0,eI.LF)({value:o})},ratio:{color:(0,eI.LF)({value:i}),lineWidth:eI.l1["2"]}},"@LS-Ratio":{showSeries:!0,bar:{buyColor:(0,eI.LF)({value:d}),sellColor:(0,eI.LF)({value:o})},ratio:{color:(0,eI.LF)({value:i}),lineWidth:eI.l1["2"]}},"@BSVol":{showSeries:!0,buyColor:(0,eI.LF)({value:d}),sellColor:(0,eI.LF)({value:o})},"@Basis":{showSeries:!0,basisColor:(0,eI.LF)({value:t}),futurePriceColor:(0,eI.LF)({value:o}),priceIndexColor:(0,eI.LF)({value:d})}}};var e0=i(98537),e1=i.n(e0),e2=i(16765),e5=i.n(e2),e3=i(89466),e6=i.n(e3);let e4=({object:e,modify:t,path:i})=>e6()(e,(e,r,s)=>{let a=[...i,s];if("object"==typeof r){let i=e4({object:r,modify:t,path:a});e[s]=t({value:i,path:a})}else e[s]=t({value:r,path:a})}),e8=({object:e,modify:t})=>e4({object:e,modify:t,path:[]}),e7=({settings:e,defaultSettings:t})=>{try{return e8({object:e,modify:({value:e,path:i})=>{if(e?.type==="color"&&e?.pristine){let r=em()(t,[...i,"value"])||e?.value;return(0,eI.LF)({value:r})}return e}})}catch(t){return console.log("[candlestick] something went wrong while overriding colors",e,t),e}},e9=class{isLoaded(){return this._isLoaded}load({data:e}){let t=e1()({},this.defaultValue,e||{});this.value=e7({settings:t,defaultSettings:this.defaultValue}),this._isLoaded=!0,this.onValueChangedSubscribers.forEach(e=>e({key:"",value:void 0,type:"load"}))}subscribeValueChanged(e){this.onValueChangedSubscribers.add(e),this.isLoaded()&&e({key:"",value:void 0,type:"load"})}unsubscribeValueChanged(e){this.onValueChangedSubscribers.delete(e)}getDefaultValue(e){return em()(this.defaultValue,e)}getDefaultValues(){return this.defaultValue}setValue(e,t){let i=em()(this.value,e);w()(i,t)||(e5()(this.value,e,t),this.onValueChangedSubscribers.forEach(i=>i({key:e,value:t,type:"update"})))}getValue(e){return em()(this.value,e)??this.getDefaultValue(e)}getValues(){return this.value||this.getDefaultValues()}constructor(){this.onValueChangedSubscribers=new Set,this._isLoaded=!1}},te=class extends e9{changeColorTable(e){this.defaultValue=eJ({colorTable:e})}getMADescriptions(e="MA"){return[...Array(10).keys()].map(t=>({label:`${e}${t+1}`,periodsKey:`@${e}.periods[${t}]`,sourcesKey:`@${e}.sources[${t}]`,colorsKey:`@${e}.colors[${t}]`,lineWidthsKey:`@${e}.lineWidths[${t}]`,visiblesKey:`@${e}.visibles[${t}]`,period:this.getValue(`@${e}.periods[${t}]`),source:this.getValue(`@${e}.sources[${t}]`),color:this.getValue(`@${e}.colors[${t}]`),lineWidth:this.getValue(`@${e}.lineWidths[${t}]`),visible:!!this.getValue(`@${e}.visibles[${t}]`)}))}getRSIDescriptions(e="RSI"){return[...[,,,].keys()].map(t=>({label:e,periodsKey:`@${e}.periods[${t}]`,colorsKey:`@${e}.colors[${t}]`,lineWidthsKey:`@${e}.lineWidths[${t}]`,visiblesKey:`@${e}.visibles[${t}]`,period:this.getValue(`@${e}.periods[${t}]`),color:this.getValue(`@${e}.colors[${t}]`),lineWidth:this.getValue(`@${e}.lineWidths[${t}]`),visible:!!this.getValue(`@${e}.visibles[${t}]`)}))}getMFIDescriptions(e="MFI"){return[...[,,,].keys()].map(t=>({label:e,periodsKey:`@${e}.periods[${t}]`,colorsKey:`@${e}.colors[${t}]`,lineWidthsKey:`@${e}.lineWidths[${t}]`,visiblesKey:`@${e}.visibles[${t}]`,period:this.getValue(`@${e}.periods[${t}]`),color:this.getValue(`@${e}.colors[${t}]`),lineWidth:this.getValue(`@${e}.lineWidths[${t}]`),visible:!!this.getValue(`@${e}.visibles[${t}]`)}))}constructor({colorTable:e}){super(),this.defaultValue=eJ({colorTable:e})}},tt=({colorTable:e=eY.kn})=>({"@symbol":{candlestick:{type:ef.oX.CandleBar,style:eI.rB.Candle,candle:{style:eI.gJ.Solid,colors:{up:{color:(0,eI.LF)({value:e["candle.upBarColor"]}),borderColor:(0,eI.LF)({value:e["candle.upBarColor"]}),wickColor:(0,eI.LF)({value:e["candle.upBarColor"]})},down:{color:(0,eI.LF)({value:e["candle.downBarColor"]}),borderColor:(0,eI.LF)({value:e["candle.downBarColor"]}),wickColor:(0,eI.LF)({value:e["candle.downBarColor"]})}}},line:{color:(0,eI.LF)({value:"rgba(240,185,11,1)"}),width:eI.l1["1"]},executionOrderStyle:eI.VQ.BuySell}},"@background":{color:(0,eI.LF)({value:e.background}),vertGridLine:{show:!0,lineWidth:eI.l1["0"],color:(0,eI.LF)({value:e["vertGridLine.color"]})},horzGridLine:{show:!0,lineWidth:eI.l1["0"],color:(0,eI.LF)({value:e["horzGridLine.color"]})}},"@contextMenu":{countDown:!1,bidAsk:!1,priceLine:!1,percentageScale:!1,logarithmicScale:!1,invertedScale:!1,chartTrading:!0,informationMines:!0},"@drawTool":{currentAction:ef.Us.CrossHairCursor},"@annotationTool":{position:{x:0,y:0}},"@customColors":[],"@timeTool":{tab:"go-to-date",timeAnchor:!1,timeAnchorDate:{value:Date.now(),pristine:!0},anchorPoint:"date",anchorLine:!1,acrossTokens:!1}}),ti=class extends e9{changeColorTable(e){this.defaultValue=tt({colorTable:e}),this.value=e7({settings:this.value,defaultSettings:this.defaultValue}),this.onValueChangedSubscribers.forEach(e=>e({key:"",value:this.value,type:"update/color-table"}))}setChartType(e){let t="@symbol.candlestick.style",i="@symbol.candlestick.candle.style";switch(e){case ef.oX.CandleBar:this.setValue(t,eI.rB.Candle),this.setValue(i,eI.gJ.Solid);break;case ef.oX.HollowCandleBar:this.setValue(t,eI.rB.Candle),this.setValue(i,eI.gJ.Hollow);break;case ef.oX.BarCandle:this.setValue(t,eI.rB.Bar);break;case ef.oX.Line:this.setValue(t,eI.rB.Line);break;case ef.oX.GradientArea:this.setValue(t,eI.rB.Area)}this.setValue("@symbol.candlestick.type",e)}getCalculatedChartType(){let e=this.getValue("@symbol.candlestick.type"),t=this.getValue("@symbol.candlestick.style"),i=this.getValue("@symbol.candlestick.candle.style");switch(t){case eI.rB.Bar:return{type:e,typeFromSetting:ef.oX.BarCandle};case eI.rB.Area:return{type:e,typeFromSetting:ef.oX.GradientArea};case eI.rB.Line:return{type:e,typeFromSetting:ef.oX.Line};case eI.rB.Candle:default:switch(i){case eI.gJ.Hollow:return{type:e,typeFromSetting:ef.oX.HollowCandleBar};case eI.gJ.Solid:default:return{type:e,typeFromSetting:ef.oX.CandleBar}}}}constructor({colorTable:e}){super(),this.defaultValue=tt({colorTable:e})}};var tr=i(59626),ts=i(81669),ta=i(34450),to=i(72009);let tl=class extends to.ZP{draw(e,t){let{width:i}=t;eG.Z.fillRect(e,0,0,i,1)}};var tn=i(91417);let td=class extends ta.Z{get frontPanel(){return this._frontPanel}set frontPanel(e){this._frontPanel=e}get nextPanel(){return this._nextPanel}set nextPanel(e){this._nextPanel=e}clear(){let e=this.getRoot().getContext(),{x:t,y:i,width:r}=this.getClearBound();eG.Z.clearRect(e,{x:t,y:i,width:r,height:1})}render(){let e=this.getRoot(),t=e.getContext();t.save(),this.setCanvasTransform(t);let i=e.getColorFromColorTable("frame.borderLineColor");(0,eb.ui)(t,{fillStyle:i}),this.renderer.draw(t,this.bound),t.restore()}setViewBound(){let e=this._frontPanel.getBound();this.setBound({...e,height:0})}contain(e){let{x:t,y:i,width:r,height:s}=this.bound,a=new tn.Z(t,0,r,s),o=[e.x,i-e.y];return a.expand(0,5).contain(o)}_initEvents(){this.on("mousedown",this._onmousedown),this.on("mousemove",this._onmousemove),this.on("mouseout",this._onmouseout)}_onmousemove(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:eY.Li.NSRESIZE},weight:1e3,isRecord:!1,key:"gap"})}_onmouseout(){this.getRoot().setCursor({key:"gap",isClear:!0,config:{},weight:1e3})}_onmousedown(e){let{point:{y:t},originEvent:i}=e,r=this.getRoot();this._clearDragEvent(),this._frontPanel.setAttr("isAbleTriggerMove",!1),this._nextPanel.setAttr("isAbleTriggerMove",!1);let s=!1;r.on("mousemove","gap",e=>{let{y:i}=e.point,r=i-t,{height:a}=this._frontPanel.getBound(),{height:o}=this._nextPanel.getBound();a+r<=30||o-r<=30||(s=!0,this._frontPanel.updateViewBoundHeight(r,r),this.setBound({...this.bound,y:this.bound.y+r}),this._nextPanel.updateViewBoundHeight(-r,0),this._frontPanel.update(ef.mB.Resize),this._nextPanel.update(ef.mB.Resize),t=i)}),r.on("mouseup","gap",()=>{this._frontPanel.setAttr("isAbleTriggerMove",!0),this._nextPanel.setAttr("isAbleTriggerMove",!0),this._clearDragEvent(),s&&(this._frontPanel.save({type:"indicator"}),this._nextPanel.save({type:"indicator"}))}),i.preventDefault()}_clearDragEvent(){let e=this.getRoot();e.off("mousemove","gap"),e.off("mouseup","gap")}constructor(e,t){super(),this.config={...b()(ta.Z.defaultConfig),zIndex:100},this.renderer=new tl,this._frontPanel=e,this._nextPanel=t,this._initEvents()}},tc=class extends tr.Z{get indicatorViews(){return Array.from(this._indicatorViews.values())}registerModule(e,t){t&&this.moduleManager[e]!==t&&(this.moduleManager[e]=t)}getModule(e){return this.moduleManager[e]}getIndicatorParams(e){return this.indicatorStore.getValues()[e]}getIndicatorViewByName(e){return this._indicatorViews.get(e)}setIndicatorView(e,t){this._indicatorViews.set(e,t)}deleteIndicatorViewByName(e){this._indicatorViews.delete(e)}getPanels(e){return e?this.panels.filter(t=>e(t)):this.panels}getIPanels(){return this.panels.filter(e=>e instanceof ts.Z)}getFrontGapOfIPanel(e){let t=this.getPanels(),i=!1;for(let r=t.length-1;r>=0;r--){let s=t[r];if(i&&s instanceof td)return s;i=s===e}}addPanels(e){return e.forEach(e=>{this.setWidgetParent(e),this.panels.push(e)}),this}addElement(e){let t=this.getAttr("container");t&&e&&t.appendChild(e)}addElemens(e){let t=this.getAttr("container");t&&e.forEach(e=>t.appendChild(e))}eachPanels(e,t){void 0===t?this.panels.forEach((t,i)=>{e.call(this,t,i)}):t?this.panels.slice(0).sort((e,t)=>t.getAttr("zIndex")-e.getAttr("zIndex")).forEach(t=>{e.call(this,t)}):this.panels.slice(0).sort((e,t)=>e.getAttr("zIndex")-t.getAttr("zIndex")).forEach(t=>{e.call(this,t)})}update(e=ef.mB.All){!this._isWaiting&&this._isLoaded&&(this._isWaiting=!0,this._lastRenderTimer=requestAnimationFrame(()=>{cancelAnimationFrame(this._lastRenderTimer),this._lastRenderTimer=null,this.renderImmediate(e),this._isWaiting=!1}))}renderImmediate(e=ef.mB.All){this._isLoaded&&(this._lastRenderTimer&&cancelAnimationFrame(this._lastRenderTimer),this.eachPanels(t=>{t.updateImmediate(e)},!1),this._isWaiting=!1)}removePanel(e){for(let t=0;t<this.panels.length;t++)if(this.panels[t]===e){this.panels.splice(t,1),e instanceof ts.Z&&(this._indicatorViews.delete(e.getAttr("indicatorType")),e.destroy());break}return this}removePanels(e){for(let t=this.panels.length-1;t>=0;t--){let i=this.panels[t];if(e.has(i)&&(this.panels.splice(t,1),e.delete(i),i instanceof ts.Z&&(this._indicatorViews.delete(i.getAttr("indicatorType")),i.destroy()),0===e.size))return}}initPanelBound(e=ef.Vt.All){this.eachPanels(t=>{t.setViewBound(e)})}updatePanelBound(){this.eachPanels(e=>{e instanceof ts.Z&&e.updateViewBound(),e instanceof td&&e.setViewBound()})}resizeAllPanelBound(){this.eachPanels(e=>{e instanceof ts.Z?e.updateViewBound():e.setViewBound()})}initPanelYAxis(){this.eachPanels(e=>{e instanceof ts.Z&&e.setYAxis()})}getLongestYAxisWidth(){let e=[];return this.eachPanels(t=>{t instanceof ts.Z&&e.push(t.axisPane.getLongestTickWidth())}),Math.max(...e)}filterPanels(e){return this.panels.filter(t=>e.call(this,t))}getPanel(e){return this.panels.find(e)}hasPanel(e){return this.panels.some(t=>t===e)}setIsLoaded(e){this._isLoaded=e}isLoaded(){return this._isLoaded}getColorTable(){return this._colorTable}setColorTable(e){this._colorTable=e}registerI18n(e){this.getI18n=e}constructor(...e){super(...e),this.panels=[],this._indicatorViews=new Map,this._isLoaded=!1,this._isWaiting=!1,this._colorTable=eY.nJ,this.indicatorStore=new te({colorTable:eY.nJ}),this.settingStore=new ti({colorTable:eY.nJ}),this.getI18n=(e,t)=>t,this.moduleManager={}}};var th=i(97370),tu=i(55231),tg=i(36844);let tm={radius:6,hover_border_width:1,border_width:2,highlight_border_width:4,border_color:ef.E.Blue3,fill_color:"#ffffff",hover_border_color:"#EA3CF7",text_color:"#ffffff",default_line_color:ef.E.Blue3,default_area_color:"rgba(50, 141, 253, 0.2)",default_border_color:"#9013FE",default_text_color:"#848E9C"},tp={[ef.Us.TrendLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.HorizontalExtendedLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.ExtendTrendLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.ArrowLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.InfoLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.RayLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.LeftArrow]:{color:tm.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.RightArrow]:{color:tm.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.UpArrow]:{color:tm.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.DownArrow]:{color:tm.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.FibonacciLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,background:tm.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.ParallelLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,background:tm.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.PriceLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.Rectangle]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,background:tm.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.HorizontalLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.VerticalLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.CrossLine]:{color:tm.default_line_color,lineWidth:1,lineStyle:ef.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[ef.Us.Text]:{textColor:tm.default_text_color,background:"rgba(0, 0, 0, 0)",textFontSize:16,isTextBold:!1,isTextEdit:!1,isLock:!1,showColor:!1,showBg:!0,showWidth:!1,showStyle:!1,showFontSize:!0,showTextColor:!0,showTextBold:!0,showTextEdit:!0,showLock:!1,showDelete:!1}},tx=e=>{switch(e){case ef.TD.DOTTED:return[2,2];case ef.TD.DASHED:return[6,6];case ef.TD.DASHED_2:return[4,4];case ef.TD.SOLID:default:return[]}},tf={radius:6,hover_border_width:1,border_width:2,highlight_border_width:4,border_color:ef.E.Blue3,fill_color:"#ffffff",hover_border_color:"#EA3CF7",text_color:"#ffffff",default_line_color:ef.E.Blue3,default_border_color:"#9013FE"},tb=class extends tr.Z{static getCacheStyle(e,t){return(this.cacheStyle[e]||{})[t]}static updateCacheStyle(e,t){let i=this.cacheStyle[e]||{};this.cacheStyle[e]={...i,...t}}static getPreEditAttributes(e){return{...this.cacheStyle[e]||{},showTextEdit:!1,showLock:!1,showDelete:!1}}get parent(){return this._parent}isLock(){return this.getAttr("isLock")}getParent(){return this._parent}setParent(e){return this._parent=e,this}setData(e){return this.setAttr("data",e),this}getData(){return this.getAttr("data")}isIndependent(){return!1}initWeakMap(){this.getShapes().forEach(e=>{this.shapeWeakMap.set(e,null)})}initEvents(){let e=null;this.watch("isEdit",({newVal:t})=>{t||(e=this.getAttr("data"))}),this.watch(["isHover","isEdit"],()=>{this.getAttr("isComplete")&&(this.setVisibleShapes(),this.update())}),this.watch("isComplete",({newVal:t})=>{if(!t)return;this.update();let i=this.getAttr("data");w()(i,e)||this.syncStorage()}),this.watch(["color","lineWidth","lineStyle","background","isLock","text","textColor","textFontSize","isTextBold"],({oldVal:e,newVal:t})=>{!w()(e,t)&&this.isValid()&&this.syncStorage()}),this.on("mousedown",eY.HD.MOUSE_DOWN,this.delectShapeEdit.bind(this)),this.on("mousemove",eY.HD.MOUSE_MOVE,this.delectShapeMousemove.bind(this)),this.watch("color",this.watchStyleHook.bind(this,"color")),this.watch("lineWidth",this.watchStyleHook.bind(this,"lineWidth")),this.watch("lineStyle",this.watchStyleHook.bind(this,"lineStyle")),this.watch("background",this.watchStyleHook.bind(this,"background")),this.watch("textColor",this.watchStyleHook.bind(this,"textColor")),this.watch("textFontSize",this.watchStyleHook.bind(this,"textFontSize")),this.watch("isTextBold",this.watchStyleHook.bind(this,"isTextBold")),this.initCustomEvents()}addWidgetShapes(e,t){let i=this._addWidgetShape.bind(this,e);t.forEach(i)}setAnnotationToWidgets(e){e.forEach(e=>{e.addAnnotation(this)})}startDraw(){this.setAttr("isComplete",!1)}compeleDraw(){setTimeout(()=>{this.setAttr("isComplete",!0)})}isValid(){return!!this.getData()}transformYPoint(e){return{x:e.x,y:-e.y}}remove(e=!0){this.destroy(),this.syncStorage(),e&&this._parent&&(this.update(),this._parent.getParent().unSelectAnnotation())}destroy(){let e=this.getShapes();for(let t=0;t<e.length;++t){let i=e[t],r=this.shapeWeakMap.get(i);r&&(r.removeShape(i),r.removeAnnotation(this),this.shapeWeakMap.delete(i))}this.afterDestroy()}clearShapes(){this.getShapes().forEach(e=>{let t=this.shapeWeakMap.get(e);if(t)try{t.removeShape(e),this.shapeWeakMap.delete(e)}catch(e){throw console.warn("log error, target: ",t),e}})}getRenderPanes(){let e=this.getParent();if(!e)return[];let{mainPane:t,axisPane:i,timeAxisPane:r}=e;return[t,i,r]}render(){this.getRenderPanes().forEach(e=>{e.update(ef.mB.Marks)})}update(){let e=this.getParent();!this._isWating&&e&&(this._isWating=!0,requestAnimationFrame(()=>{this.render(),this._isWating=!1}))}updateData(){this.updateTick(this.updateImmediate)}updateTick(e){if(this._lastTick!==this._currentTick){let t=this._currentTick;this._currentTick=this._lastTick,"function"==typeof e&&e.call(this),Promise.resolve().then(()=>{this._lastTick=t})}}delectShapeEdit(e){if(this._parent){let t=this._parent.getParent(),{mainPane:i}=this._parent,r=this.getAttr("isComplete"),s=this.getAttr("isNeedStore");if(r&&s){let{x:r,y:s}=i.transformPointToView(e.point);this.isHover({x:r,y:-s})&&!e.isDealed?(this.setAttr("isEdit",!0),t.selectAnnotation(this,this.getAttr("type"))):(t.unSelectAnnotation(),this.setAttr("isEdit",!1))}}}delectShapeMousemove(e){if(this._parent){let{mainPane:t}=this._parent,{x:i,y:r}=t.transformPointToView(e.point);this.isHover({x:i,y:-r})?(this._parent.updateCursorStyle(!0,this.isHoverDragable({x:i,y:-r}),this.isDragging()),e.isDealed||this.setAttr("isHover",!0),e.isDealed=!0):(this._parent.updateCursorStyle(!1,!1,!1),this.setAttr("isHover",!1))}}contain(){return!!this.getParent()}updateVertexBorderAndVisible(e,t){let i=t?tf.hover_border_color:tf.border_color;this.updateVertex(e,{isVisible:!t,strokeStyle:i})}updateVertex(e,t){Array.isArray(e)?e.forEach(e=>{e.setAttrs(t)}):e.setAttrs(t)}recoverDragVertexts(){let e={isVisible:!0,strokeStyle:tf.border_color,radius:tf.radius};this.updateVertex(this.getVertexs(),e)}getNoDragVertexs(e){let t=this.getVertexs(),i=t.indexOf(e);return t.splice(i,1),t}updateHighlightVertexBorderWidth(e,t){let i=e.getAttr("lineWidth"),r=this.getAttr("isEdit"),s=t?tf.highlight_border_width:r?tf.border_width:tf.hover_border_width;return e.setAttr("lineWidth",s),i!==s}initCustomEvents(){}getEditAttribute(){let{color:e,lineWidth:t,lineStyle:i,background:r,isLock:s,textColor:a,textFontSize:o,isTextBold:l,isTextEdit:n}=this.getConfig();return{showColor:!0,color:e,showWidth:!0,lineWidth:t,showStyle:!0,lineStyle:i,showBg:!1,background:r,isLock:s,showTextColor:!1,textColor:a,showFontSize:!1,textFontSize:o,showTextBold:!1,isTextBold:l,showTextEdit:!1,isTextEdit:n,showLock:!0,showDelete:!0}}applyAttributes(e){this.setAttrs(e)}getDescription(){let{data:e,type:t,color:i,background:r,lineWidth:s,lineStyle:a,isLock:o}=this.getConfig();return{data:e,type:t,color:i,background:r,lineWidth:s,lineStyle:a,isLock:o}}getCacheStyleKey(){return this.getAttr("type")}isDisableDrag(){let e=this.getParent(),t=e?.getParent();return!this.getAttr("isComplete")||t.getAttr("annotationLock")||this.isLock()}getDefaultStyle(){return tp[this.getCacheStyleKey()]}refreshDefaultStyle(){let e=this.getDefaultStyle();this.applyAttributes(e)}watchStyleHook(e){switch(e){case"color":{let e=this.getAttr("color");this.updateColor(e);break}case"lineWidth":{let e=this.getAttr("lineWidth");this.updateLineWidth(e);break}case"lineStyle":{let e=this.getAttr("lineStyle");this.updateLineStyle(tx(e));break}case"background":{let e=this.getAttr("background");this.updateBackground(e);break}case"textColor":{let e=this.getAttr("textColor");this.updateTextColor(e);break}case"textFontSize":{let e=this.getAttr("textFontSize");this.updateTextSize(e);break}case"isTextBold":{let e=this.getAttr("isTextBold");this.updateTextBold(e?ef.HS.BOLD:ef.HS.NORMAL)}}this.update()}getPoint(e){if(!this.parent)return{time:0,value:0};let t=this.parent.transformAbsoluteXYToPlotItem(e),i=this.parent.transformPointToView(e),r=this.parent.magnetizeY({y:i.y});return{...t,value:r.price}}updateColor(e){}updateLineWidth(e){}updateLineStyle(e){}updateBackground(e){}updateTextColor(e){}updateTextSize(e){}updateTextBold(e){}afterDestroy(){}_addWidgetShape(e,t){this.shapeWeakMap.get(t)!==e&&(this.shapeWeakMap.set(t,e),e.addShape(t))}isHoverDragable(e){return!1}isDragging(){return!1}constructor(){super(),this.id=(0,eb.M8)(),this.shapeWeakMap=new WeakMap,this._lastTick=0,this._currentTick=1,this._isWating=!1,this.syncStorage=(0,eb.Ds)(()=>{let e=this.getParent();this.getAttr("isSaveable")&&e&&e.save({type:"annotation"})},100),this.initEvents()}};tb.dragVertex=new tg.Cd({data:{x:0,y:0},radius:tf.radius,strokeStyle:tf.border_color,fillStyle:tf.fill_color,fill:!0,lineWidth:tf.border_width}),tb.dragRect=new tg.UL({data:{x:0,y:0},width:12,height:12,borderRadius:2,strokeStyle:tf.border_color,fillStyle:tf.fill_color,lineWidth:tf.border_width,useCache:!0}),tb.line=new tg.x1({strokeStyle:tf.default_line_color,lineWidth:1}),tb.text=new tg.xv({content:"",fillStyle:tf.default_line_color,fontSize:12}),tb.defaultConfig={...tr.Z.defaultConfig,type:ef.Us.LeftArrow,data:null,isHover:!1,isEdit:!0,isComplete:!1,isLock:!1,color:"",lineWidth:1,lineStyle:ef.TD.SOLID,background:"",textColor:"#848E9C",textFontSize:16,isTextBold:!1,isTextEdit:!1,isNeedStore:!0,isSaveable:!1},tb.cacheStyle=b()(tp);let ty=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n}=this.getData(),{x:d,y:c}=e.getPosition(l),{x:h,y:u}=e.getPosition(n);this.line.setData({p1:{x:d,y:-c},p2:{x:h,y:-u}}),this.xLabel1.setAttrs({data:{x:d,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:h,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-c},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-u},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(d,h),y:-o},width:Math.abs(d-h),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(c,u)},width:i.bound.width,height:Math.abs(c-u)}),this.dragVertex1.setAttrs({data:{x:d,y:-c}}),this.dragVertex2.setAttrs({data:{x:h,y:-u}}),this.addWidgetShapes(t,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,r,i])}getShapes(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",ef.Us.TrendLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}updateColor(e){this.line.setAttr("strokeStyle",e)}updateLineWidth(e){this.line.setAttr("lineWidth",e)}updateLineStyle(e){this.line.setAttr("lineDash",e)}isHover(e){return this.line.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){let{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e),this.dragVertex1.setAttrs({isVisible:t||e,radius:tf.radius,lineWidth:e?tf.border_width:tf.hover_border_width}),this.dragVertex2.setAttrs({isVisible:t||e,radius:tf.radius,lineWidth:e?tf.border_width:tf.hover_border_width})}getVertexs(){return[this.dragVertex1,this.dragVertex2]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)?this.line:void 0}_highlightVertex(e){let{isEdit:t,isHover:i}=this.getConfig();if(t||i){let{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(s)),o=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(s));(a||o)&&this.update()}}_onmousedown(e){let t=this.getParent();if(e.isDealed||!t||this.isDisableDrag())return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s===this.line?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex1,s===this.dragVertex1),this.updateVertexBorderAndVisible(this.dragVertex2,s===this.dragVertex2),this._dragVertex(t,s)))}_dragVertex(e,t){let i,{mainPane:r}=e;t===this.dragVertex1?(this.dragVertex2.setAttr("strokeStyle",tf.hover_border_color),i="p1"):(this.dragVertex1.setAttr("strokeStyle",tf.hover_border_color),i="p2"),r.on("mousemove",ef.Us.TrendLine,e=>{let t=this.getPoint(e.point),r=this.getAttr("data");this.setData({...r,[i]:t}),this.update()}),r.on("mouseup",ef.Us.TrendLine,()=>{r.off(ef.Us.TrendLine),this.recoverDragVertexts(),this.compeleDraw()})}_dragLine(e,{x:t,y:i}){let{mainPane:r}=e,{p1:s,p2:a}=this.getData(),{x:o,y:l}=e.getPosition(s),{x:n,y:d}=e.getPosition(a),c=0,h=0;r.on("mousemove",ef.Us.TrendLine,r=>{let{x:s,y:a}=e.transformPointToView(r.point);c=s-t,h=a-i;let u=e.getPlotItemByPosition(o+c,l+h),g=e.getPlotItemByPosition(n+c,d+h);this.setData({p1:u,p2:g}),this.update()}),r.on("mouseup",ef.Us.TrendLine,()=>{r.off(ef.Us.TrendLine),this.compeleDraw()})}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.TrendLine},this.line=new tg.x1({strokeStyle:tf.default_line_color,lineWidth:1}),this.yLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.yLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.xLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.yRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.dragVertex1=tb.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=tb.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}},tv=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n}=this.getData(),{x:d,y:c}=e.getPosition(l),{x:h,y:u}=e.getPosition(n);this.line.setData({p1:{x:d,y:-c},p2:{x:h,y:-u}}),this.xLabel1.setAttrs({data:{x:d,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:h,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-c},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-u},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(d,h),y:-o},width:Math.abs(d-h),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(c,u)},width:i.bound.width,height:Math.abs(c-u)}),this.dragVertex1.setAttrs({data:{x:d,y:-c}}),this.dragVertex2.setAttrs({data:{x:h,y:-u}}),this.addWidgetShapes(t,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,r,i])}getShapes(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",ef.Us.HorizontalExtendedLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}updateColor(e){this.line.setAttr("strokeStyle",e)}updateLineWidth(e){this.line.setAttr("lineWidth",e)}updateLineStyle(e){this.line.setAttr("lineDash",e)}isHover(e){return this.line.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){let{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e),this.dragVertex1.setAttrs({isVisible:t||e,radius:tf.radius,lineWidth:e?tf.border_width:tf.hover_border_width}),this.dragVertex2.setAttrs({isVisible:t||e,radius:tf.radius,lineWidth:e?tf.border_width:tf.hover_border_width})}getVertexs(){return[this.dragVertex1,this.dragVertex2]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)?this.line:void 0}_highlightVertex(e){let{isEdit:t,isHover:i}=this.getConfig();if(t||i){let{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(s)),o=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(s));(a||o)&&this.update()}}_onmousedown(e){if(e.isDealed)return;let t=this.getParent();if(this.isDisableDrag())return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s===this.line?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex1,s===this.dragVertex1),this.updateVertexBorderAndVisible(this.dragVertex2,s===this.dragVertex2),this._dragVertex(t,s)))}_dragVertex(e,t){let i,{mainPane:r}=e;t===this.dragVertex1?(this.dragVertex2.setAttr("strokeStyle",tf.hover_border_color),i="p1"):(this.dragVertex1.setAttr("strokeStyle",tf.hover_border_color),i="p2"),r.on("mousemove",ef.Us.HorizontalExtendedLine,t=>{let{time:r}=e.transformAbsoluteXYToPlotItem(t.point),s=this.getAttr("data"),a="p1"===i?{p1:{...s.p1,time:r}}:{p2:{...s.p2,time:r}};this.setData({...s,...a}),this.update()}),r.on("mouseup",ef.Us.HorizontalExtendedLine,()=>{r.off(ef.Us.HorizontalExtendedLine),this.recoverDragVertexts(),this.compeleDraw()})}_dragLine(e,{x:t,y:i}){let{mainPane:r}=e,{p1:s,p2:a}=this.getData(),{x:o,y:l}=e.getPosition(s),{x:n,y:d}=e.getPosition(a),c=0,h=0;r.on("mousemove",ef.Us.HorizontalExtendedLine,r=>{let{x:s,y:a}=e.transformPointToView(r.point);c=s-t,h=a-i;let u=e.getPlotItemByPosition(o+c,l+h),g=e.getPlotItemByPosition(n+c,d+h);this.setData({p1:u,p2:g}),this.update()}),r.on("mouseup",ef.Us.HorizontalExtendedLine,()=>{r.off(ef.Us.HorizontalExtendedLine),this.compeleDraw()})}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.HorizontalExtendedLine},this.line=new tg.x1({strokeStyle:tf.default_line_color,lineWidth:1}),this.yLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.yLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.xLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.yRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.dragVertex1=tb.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=tb.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}};var tC=i(66934);let tw=class extends ty{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n}=this.getData(),d=e.getPosition(l),{x:c,y:h}=d,u=e.getPosition(n),{x:g,y:m}=u,{width:p,height:x}=t.getBound();if(tC.Z.Algorith.isSamePoint(d,u))this.line.setData({p1:{x:c,y:-h},p2:{x:g,y:-m}});else{let e=new tC.Z.Bound(0,0,p,x),t=tC.Z.Line.getIntersectWidthBound(d,u,e);2===t.length?this.line.setData({p1:{x:t[0].x,y:-t[0].y},p2:{x:t[1].x,y:-t[1].y}}):this.line.setData(null)}this.xLabel1.setAttrs({data:{x:c,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:g,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-h},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(c,g),y:-o},width:Math.abs(c-g),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(h,m)},width:i.bound.width,height:Math.abs(h-m)}),this.dragVertex1.setAttrs({data:{x:c,y:-h}}),this.dragVertex2.setAttrs({data:{x:g,y:-m}}),this.addWidgetShapes(t,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,r,i])}constructor(){super(),this.setAttr("type",ef.Us.ExtendTrendLine)}};var tS=i(62086),tT=i(71432);let tA=(0,ej.qA)(ej.fb.Day),t_=(0,ej.qA)(ej.fb.Day),tL=(0,ej.qA)(ej.fb.Day),tk=class extends ty{updateImmediate(){this.barImage.getAttr("imageSource")||this.barImage.getAttr("isLoading")||(this.barImage.setAttr("isLoading",!0),(0,tS.ZA)(tT.P1).then(e=>{this.barImage.setImage(e)})),this.priceDiffImage.getAttr("imageSource")||this.priceDiffImage.getAttr("isLoading")||(this.priceDiffImage.setAttr("isLoading",!0),(0,tS.ZA)(tT.Q$).then(e=>{this.priceDiffImage.setImage(e)}));let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n}=this.getData(),{x:d,y:c}=e.getPosition(l),{x:h,y:u}=e.getPosition(n);this.line.setData({p1:{x:d,y:-c},p2:{x:h,y:-u}});let g=this.barImage.getAttr("width"),m=this.barImage.getAttr("height"),p=this.priceDiffImage.getAttr("width"),x=this.priceDiffImage.getAttr("height"),f=Math.max(180,this._textWidth+16+Math.max(g,p)+5),b=8,y=-80,v=(d-h)*(c-u)>0;(0,eb.Fr)(d-h,10)?(b=8,y=-36):(0,eb.Fr)(c-u,10)?(b=-(.5*f),y=-80):v&&(b=-f-8,y=-80);let C=(d+h)*.5+b,w=-(.5*(c+u))+y;this.rect.setAttrs({data:{x:C,y:w},width:f,height:72}),w+=12,this.barImage.setData({x:C+8,y:w}),this.text1.setData({x:C+8+g+5,y:w+.5*m}),w+=24,this.priceDiffImage.setData({x:C+8,y:w}),this.text2.setData({x:C+8+p+5,y:w+.5*x}),this.xLabel1.setAttrs({data:{x:d,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:h,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-c},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-u},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(d,h),y:-o},width:Math.abs(d-h),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(c,u)},width:i.bound.width,height:Math.abs(c-u)}),this.dragVertex1.setAttrs({data:{x:d,y:-c}}),this.dragVertex2.setAttrs({data:{x:h,y:-u}}),this.addWidgetShapes(t,[this.line,this.dragVertex1,this.dragVertex2,this.rect,this.barImage,this.priceDiffImage,this.text1,this.text2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,r,i])}getShapes(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2,this.rect,this.barImage,this.priceDiffImage,this.text1,this.text2]}updateColor(e){this.line.setAttr("strokeStyle",e),this.text1.setAttr("fillStyle",e),this.text2.setAttr("fillStyle",e)}_updateInfo({newVal:{p1:e,p2:t}}){let i=this.getParent();if(!i)return;let[r,s]=i.getParent().getTimeExtent(),{xAxis:a}=i,{unitWidth:o}=a,l=Math.min(e.time,t.time),n=Math.max(e.time,t.time);l=Math.min(s,Math.max(r,l)),n=Math.max(r,Math.min(s,n));let{x:d}=i.getPosition({...e,time:l}),{x:c}=i.getPosition({...e,time:n});this.text1.setAttr("content",`${Math.round((c-d)/o)} ${i.getI18n(eY.Wi.DRAW_BAR,"bars")}(${this._getFormatInterval(l,n,i)})`),this.text2.setAttr("content",`${(0,ey._A)()?(0,ey.dD)(i.formatterValue(t.value-e.value)):i.formatterValue(t.value-e.value)}(${(0,ey._A)()?(0,ey.dD)((0,eb.gt)((t.value-e.value)/e.value)):(0,eb.gt)((t.value-e.value)/e.value)})`);let h=this.text1.getAttr("textWidth"),u=this.text2.getAttr("textWidth");this._textWidth=Math.ceil(Math.max(h,u))}_getFormatInterval(e,t,i){let r=t-e;if(0===r)return"no data";let s=[],a=Math.floor(r/tA),o=r%tA;a>0&&s.push(`${a}${i.getI18n(eY.Wi.DRAW_DAY,"D")}`);let l=Math.floor(o/tL);o=r%tL,l>0&&s.push(`${l}${i.getI18n(eY.Wi.DRAW_HOUR,"h")}`);let n=Math.floor(o/t_);return n>0&&s.push(`${n}${i.getI18n(eY.Wi.DRAW_MINUTE,"m")}`),s.join(", ")}constructor(){super(),this.rect=new tg.UL({fillStyle:"rgba(42, 47, 55, 0.75)",stroke:!1}),this.barImage=new tg.Ee({width:16,height:16}),this.priceDiffImage=new tg.Ee({width:16,height:16}),this.text1=tb.text.clone().setAttrs({fillStyle:"#E6E8EA",textBaseline:"middle"}),this.text2=tb.text.clone().setAttrs({fillStyle:"#E6E8EA",textBaseline:"middle"}),this._textWidth=0,this.setAttr("type",ef.Us.InfoLine),this.watch(["data"],this._updateInfo.bind(this))}},tI=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{width:l,height:n}=t.getBound(),d=this.getData(),{x:c,y:h}=e.getPosition(d),u=this.getAttr("type");u===ef.Us.VerticalLine?this.line1.setData({p1:{x:c,y:0},p2:{x:c,y:-n}}):u===ef.Us.HorizontalLine?this.line1.setData({p1:{x:0,y:-h},p2:{x:l,y:-h}}):u===ef.Us.CrossLine&&(this.line1.setData({p1:{x:c,y:0},p2:{x:c,y:-n}}),this.line2.setData({p1:{x:0,y:-h},p2:{x:l,y:-h}})),this.xLabel.setAttrs({data:{x:c,y:-o},text:(0,eb.XH)(d.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel.setAttrs({data:{x:0,y:-h},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(d.value)):e.formatterValue(d.value),fixWidth:a}),this.dragVertex.setAttrs({data:{x:c-6,y:-h-6}}),u===ef.Us.CrossLine?this.addWidgetShapes(t,[this.line1,this.line2,this.dragVertex]):this.addWidgetShapes(t,[this.line1,this.dragVertex]),this.addWidgetShapes(r,[this.xLabel]),this.addWidgetShapes(i,[this.yLabel]),this.setAnnotationToWidgets([t,r,i])}isCross(){return this.getAttr("type")===ef.Us.CrossLine}getShapes(){let e=[this.line1,this.dragVertex,this.xLabel,this.yLabel];return this.isCross()&&e.push(this.line2),e}updateColor(e){this.line1.setAttr("strokeStyle",e),this.line2.setAttr("strokeStyle",e)}updateLineWidth(e){this.line1.setAttr("lineWidth",e),this.line2.setAttr("lineWidth",e)}updateLineStyle(e){this.line1.setAttr("lineDash",e),this.line2.setAttr("lineDash",e)}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",ef.Us.HorizontalLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){let t=this.getAttr("type");return this.line1.isHover(e)||t===ef.Us.CrossLine&&this.line2.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){let{isEdit:e,isHover:t}=this.getConfig();this.xLabel.setAttr("isVisible",e),this.yLabel.setAttr("isVisible",e),this.dragVertex.setAttrs({isVisible:t||e,lineWidth:e?tf.border_width:tf.hover_border_width})}getVertexs(){return[this.dragVertex]}getDescription(){let{data:e,type:t,background:i,color:r,lineWidth:s,lineStyle:a,isLock:o}=this.getConfig();return{data:e,type:t,color:r,background:i,isLock:o,lineWidth:s,lineStyle:a}}_highlightVertex(e){let{isEdit:t,isHover:i}=this.getConfig();if(t||i){let{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point);this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover({x:i,y:-r}))&&this.update()}}getDragVertex(e){let t=this.getAttr("type");return this.dragVertex.isHover(e)?this.dragVertex:this.line1.isHover(e)?this.line1:t===ef.Us.CrossLine&&this.line2.isHover(e)?this.line2:void 0}_onmousedown(e){if(e.isDealed)return;let t=this.getParent();if(this.isDisableDrag())return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s instanceof tg.x1?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t)))}_dragVertex(e){let{mainPane:t}=e;t.on("mousemove",ef.Us.HorizontalLine,e=>{let t=this.getPoint(e.point);this.setData(t),this.update()}),t.on("mouseup",ef.Us.HorizontalLine,()=>{t.off(ef.Us.HorizontalLine),this.recoverDragVertexts(),this.compeleDraw()})}_dragLine(e,{x:t,y:i}){let{mainPane:r}=e,s=this.getData(),{x:a,y:o}=e.getPosition(s),l=this.getAttr("type");r.on("mousemove",ef.Us.HorizontalLine,r=>{let{x:s,y:n}=e.transformPointToView(r.point),d=s-t,c=n-i;if(l===ef.Us.VerticalLine){if((0,eb.Fr)(d))return;this.setData(e.getPlotItemByPosition(a+d,o))}else if(l===ef.Us.HorizontalLine){if((0,eb.Fr)(c))return;this.setData(e.getPlotItemByPosition(a,o+c))}else if(l===ef.Us.CrossLine){if((0,eb.Fr)(d)&&(0,eb.Fr)(c))return;this.setData(e.getPlotItemByPosition(a+d,o+c))}this.update()}),r.on("mouseup",ef.Us.HorizontalLine,()=>{r.off(ef.Us.HorizontalLine),this.compeleDraw()})}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.HorizontalLine},this.line1=tb.line.clone(),this.line2=tb.line.clone(),this.yLabel=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.xLabel=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.dragVertex=tb.dragRect.clone(["fillStyle","strokeStyle"]).setAttrs({width:12,height:12})}},tP=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n}=this.getData(),{x:d,y:c}=e.getPosition(l),{x:h,y:u}=e.getPosition(n);this.rect.setData({x:d,y:-c}).setAnnotherVertex({x:h,y:-u}),this.xLabel1.setAttrs({data:{x:d,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:h,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-c},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-u},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(d,h),y:-o},width:Math.abs(d-h),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(c,u)},width:i.bound.width,height:Math.abs(c-u)}),this.dragVertex1.setAttrs({data:{x:d,y:-c}}),this.dragVertex2.setAttrs({data:{x:h,y:-c}}),this.dragVertex3.setAttrs({data:{x:h,y:-u}}),this.dragVertex4.setAttrs({data:{x:d,y:-u}}),this.addWidgetShapes(t,[this.rect,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,r,i])}getShapes(){return[this.rect,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",ef.Us.Rectangle,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}updateColor(e){this.rect.setAttrs({stroke:!0,strokeStyle:e})}updateBackground(e){this.rect.setAttr("fillStyle",e)}updateLineWidth(e){this.rect.setAttrs({stroke:!0,lineWidth:e})}updateLineStyle(e){this.rect.setAttrs({stroke:!0,lineDash:e})}isHover(e){return this.rect.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){let{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e);let i={isVisible:t||e,radius:tm.radius,lineWidth:e?tm.border_width:tm.hover_border_width};this.updateVertex(this.getVertexs(),i)}getEditAttribute(){let{color:e,lineWidth:t,lineStyle:i,background:r,isLock:s}=this.getConfig();return{showColor:!0,color:e,showWidth:!0,lineWidth:t,showStyle:!0,lineStyle:i,showBg:!0,background:r,isLock:s,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}}_highlightVertex(e){let{isEdit:t,isHover:i}=this.getConfig();if(t||i){let{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(s)),o=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(s)),l=this.updateHighlightVertexBorderWidth(this.dragVertex3,this.dragVertex3.isHover(s)),n=this.updateHighlightVertexBorderWidth(this.dragVertex4,this.dragVertex4.isHover(s));(a||o||l||n)&&this.update()}}getVertexs(){return[this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.dragVertex3.isHover(e)?this.dragVertex3:this.dragVertex4.isHover(e)?this.dragVertex4:this.rect.isHover(e)?this.rect:void 0}_onmousedown(e){if(e.isDealed)return;let t=this.getParent();if(this.isDisableDrag()||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s===this.rect?this._dragRect(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(s,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(s),!1),this._dragVertex(t,s)))}_dragVertex(e,t){let{mainPane:i}=e;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:tm.hover_border_color}),i.on("mousemove",ef.Us.Rectangle,e=>{let i=this.getPoint(e.point),{p1:r,p2:s}=this.getAttr("data");t===this.dragVertex1&&this.setData({p1:i,p2:s}),t===this.dragVertex2&&this.setData({p1:{time:r.time,value:i.value},p2:{time:i.time,value:s.value}}),t===this.dragVertex3&&this.setData({p1:r,p2:i}),t===this.dragVertex4&&this.setData({p1:{time:i.time,value:r.value},p2:{time:s.time,value:i.value}}),this.update()}),i.on("mouseup",ef.Us.Rectangle,()=>{i.off(ef.Us.Rectangle),this.recoverDragVertexts(),this.compeleDraw()})}_dragRect(e,{x:t,y:i}){let{mainPane:r}=e,{p1:s,p2:a}=this.getData(),{x:o,y:l}=e.getPosition(s),{x:n,y:d}=e.getPosition(a),c=0,h=0;r.on("mousemove",ef.Us.Rectangle,r=>{let{x:s,y:a}=e.transformPointToView(r.point);c=s-t,h=a-i;let u=e.getPlotItemByPosition(o+c,l+h),g=e.getPlotItemByPosition(n+c,d+h);this.setData({p1:u,p2:g}),this.update()}),r.on("mouseup",ef.Us.Rectangle,()=>{r.off(ef.Us.Rectangle),this.compeleDraw()})}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.Rectangle},this.rect=new tg.UL({fillStyle:tm.default_area_color,stroke:!1}),this.yLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.yLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.xLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.yRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.dragVertex1=tb.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=tb.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),this.dragVertex3=tb.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),this.dragVertex4=tb.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}},tE=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n,p3:d}=this.getData(),{x:c,y:h}=e.getPosition(l),{x:u,y:g}=e.getPosition(n),{x:m,y:p}=e.getPosition(d),x=new tC.Z.Vector2(u-c,g-h),f=new tC.Z.Vector2(m-c,p-h),b=tC.Z.Algorith.getCrossMultiply(x,f),y=(0,eb.Fr)(c-u),v=g-h+b/(u-c)+h,C=b/(u-c)+h,w=Math.min(h,g,p),S=Math.max(h,g,p);if(this.path.setData([{x:c,y:-h},{x:u,y:-g},{x:u,y:-v},{x:c,y:-C}]).setAttr("isVisible",!y),this.line1.setData({p1:{x:c,y:-h},p2:{x:u,y:-g}}),this.line2.setData({p1:{x:c,y:-C},p2:{x:u,y:-v}}).setAttr("isVisible",!y),this.xLabel1.setAttrs({data:{x:c,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:u,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-h},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-g},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.yLabel3.setAttrs({data:{x:0,y:-p},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(d.value)):e.formatterValue(d.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(c,u),y:-o},width:Math.abs(c-u),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-S},width:i.bound.width,height:S-w}),this.dragVertex1.setAttrs({data:{x:c,y:-h}}),this.dragVertex2.setAttrs({data:{x:u,y:-g}}),this.dragVertex3.setAttrs({data:{x:(c+u)*.5,y:-(.5*(v+C))}}),this.getAttr("isEdit")&&this.getAttr("isComplete")&&!(0,eb.Fr)(c-u)){let t=e.getPlotItemByPosition(c,C);this._diffPrice=t.value-l.value}this.addWidgetShapes(t,[this.path,this.line1,this.line2,this.dragVertex1,this.dragVertex2,this.dragVertex3]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2,this.yLabel3]),this.setAnnotationToWidgets([t,r,i])}getShapes(){return[this.path,this.line1,this.line2,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2,this.yLabel3]}updateColor(e){[this.line1,this.line2].forEach(t=>{t.setAttr("strokeStyle",e)}),this.path.setAttrs({stroke:!0,strokeStyle:e})}updateLineWidth(e){[this.line1,this.line2].forEach(t=>{t.setAttr("lineWidth",e)}),this.path.setAttrs({stroke:!0,lineWidth:e})}updateLineStyle(e){[this.line1,this.line2].forEach(t=>{t.setAttr("lineDash",e)}),this.path.setAttrs({stroke:!0,lineDash:e})}updateBackground(e){this.path.setAttr("fillStyle",e)}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",ef.Us.ParallelLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){return this.path.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){let{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yLabel3.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e);let i={isVisible:t||e,radius:tm.radius,lineWidth:e?tm.border_width:tm.hover_border_width};this.updateVertex(this.getVertexs(),i)}isValid(){let{p1:e,p2:t,p3:i}=this.getData()||{};return!!(e&&t&&i)}getEditAttribute(){let{color:e,lineWidth:t,lineStyle:i,background:r,isLock:s}=this.getConfig();return{showColor:!0,color:e,showWidth:!0,lineWidth:t,showStyle:!0,lineStyle:i,showBg:!0,background:r,isLock:s,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}}_highlightVertex(e){let{isEdit:t,isHover:i}=this.getConfig();if(t||i){let{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(s)),o=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(s)),l=this.updateHighlightVertexBorderWidth(this.dragVertex3,this.dragVertex3.isHover(s));(a||o||l)&&this.update()}}getVertexs(){return[this.dragVertex1,this.dragVertex2,this.dragVertex3]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.dragVertex3.isHover(e)?this.dragVertex3:this.line1.isHover(e)?this.line1:this.line2.isHover(e)?this.line2:void 0}_onmousedown(e){if(e.isDealed)return;let t=this.getParent();if(this.isDisableDrag()||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s instanceof tg.x1?this._dragLine(t,{x:i,y:r}):(this.updateVertexBorderAndVisible(s,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(s),!1),this._dragVertex(t,s)))}_dragVertex(e,t){let{mainPane:i}=e;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:tm.hover_border_color}),i.on("mousemove",ef.Us.ParallelLine,e=>{let i=this.getPoint(e.point),{p1:r,p2:s}=this.getAttr("data");t===this.dragVertex1&&this.setData({p1:i,p2:s,p3:{time:i.time,value:i.value+this._diffPrice}}),t===this.dragVertex2&&this.setData({p1:r,p2:i,p3:{time:r.time,value:r.value+this._diffPrice}}),t===this.dragVertex3&&(this.setData({p1:r,p2:s,p3:i}),this._diffPrice=i.value-r.value),this.update()}),i.on("mouseup",ef.Us.ParallelLine,()=>{i.off(ef.Us.ParallelLine),this.recoverDragVertexts(),this.compeleDraw()})}_dragLine(e,{x:t,y:i}){let{mainPane:r}=e,{p1:s,p2:a,p3:o}=this.getData(),{x:l,y:n}=e.getPosition(s),{x:d,y:c}=e.getPosition(a),{x:h,y:u}=e.getPosition(o),g=0,m=0;r.on("mousemove",ef.Us.ParallelLine,r=>{let{x:s,y:a}=e.transformPointToView(r.point);g=s-t,m=a-i;let o=e.getPlotItemByPosition(l+g,n+m),p=e.getPlotItemByPosition(d+g,c+m),x=e.getPlotItemByPosition(h+g,u+m);this.setData({p1:o,p2:p,p3:x}),this.update()}),r.on("mouseup",ef.Us.ParallelLine,()=>{r.off(ef.Us.ParallelLine),this.compeleDraw(),this.recoverDragVertexts(),this.update()})}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.ParallelLine},this.path=new tg.y$({fillStyle:tm.default_area_color,stroke:!1}),this.line1=tb.line.clone(),this.line2=tb.line.clone(),this.yLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.yLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.yLabel3=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.xLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.yRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.dragVertex1=tb.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=tb.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),this.dragVertex3=tb.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}},tB=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n}=this.getData(),{x:d,y:c}=e.getPosition(l),{x:h,y:u}=e.getPosition(n),g=c-u,m=l.value-n.value,p=Math.min(d,h)-10;this.rect.setData({x:d,y:-c}).setAnnotherVertex({x:h,y:-u});let x=-u,f=n.value;this.line1.setAttrs({data:{p1:{x:d,y:x},p2:{x:h,y:x}}}),this.text1.setAttrs({content:`0(${(0,ey._A)()?(0,ey.dD)(e.formatterValue(f)):e.formatterValue(f)})`,data:{x:p,y:-u}}),x=-(u+.382*g),f=n.value+.382*m,this.line2.setAttrs({data:{p1:{x:d,y:x},p2:{x:h,y:x}}}),this.text2.setAttrs({content:`0.382(${(0,ey._A)()?(0,ey.dD)(e.formatterValue(f)):e.formatterValue(f)})`,data:{x:p,y:x}}),x=-(u+.5*g),f=n.value+.5*m,this.line3.setData({p1:{x:d,y:x},p2:{x:h,y:x}}),this.text3.setAttrs({content:`0.5(${(0,ey._A)()?(0,ey.dD)(e.formatterValue(f)):e.formatterValue(f)})`,data:{x:p,y:x}}),x=-(u+.618*g),f=n.value+.618*m,this.line4.setData({p1:{x:d,y:x},p2:{x:h,y:x}}),this.text4.setAttrs({content:`0.618(${(0,ey._A)()?(0,ey.dD)(e.formatterValue(f)):e.formatterValue(f)})`,data:{x:p,y:x}}),x=-c,f=l.value,this.line5.setData({p1:{x:d,y:x},p2:{x:h,y:x}}),this.text5.setAttrs({content:`1(${(0,ey._A)()?(0,ey.dD)(e.formatterValue(f)):e.formatterValue(f)})`,data:{x:p,y:x}}),this.line6.setData({p1:{x:d,y:-c},p2:{x:h,y:-u}}),this.xLabel1.setAttrs({data:{x:d,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:h,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-c},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-u},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(d,h),y:-o},width:Math.abs(d-h),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(c,u)},width:i.bound.width,height:Math.abs(c-u)}),this.dragVertex1.setAttrs({data:{x:d,y:-c}}),this.dragVertex2.setAttrs({data:{x:h,y:-u}}),this.addWidgetShapes(t,[this.rect,this.line1,this.line2,this.line3,this.line4,this.line5,this.line6,this.text1,this.text2,this.text3,this.text4,this.text5,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,r,i])}getShapes(){return[this.rect,this.line1,this.line2,this.line3,this.line4,this.line5,this.line6,this.text1,this.text2,this.text3,this.text4,this.text5,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}updateColor(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach(t=>{t.setAttr("strokeStyle",e)}),[this.text1,this.text2,this.text3,this.text4,this.text5].forEach(t=>{t.setAttr("fillStyle",e)}),this.rect.setAttrs({stroke:!0,strokeStyle:e})}updateLineWidth(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach(t=>{t.setAttr("lineWidth",e)}),this.rect.setAttrs({stroke:!0,lineWidth:e})}updateLineStyle(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach(t=>{t.setAttr("lineDash",e)}),this.rect.setAttrs({stroke:!0,lineDash:e})}updateBackground(e){this.rect.setAttr("fillStyle",e)}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",ef.Us.FibonacciLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){return this.rect.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){let{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e);let i={isVisible:t||e,radius:tf.radius,lineWidth:e?tf.border_width:tf.hover_border_width};this.updateVertex(this.getVertexs(),i)}getEditAttribute(){let{color:e,lineWidth:t,lineStyle:i,background:r,isLock:s}=this.getConfig();return{showColor:!0,color:e,showWidth:!0,lineWidth:t,showStyle:!0,lineStyle:i,showBg:!0,background:r,isLock:s,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}}_highlightVertex(e){let{isEdit:t,isHover:i}=this.getConfig();if(t||i){let{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(s)),o=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(s));(a||o)&&this.update()}}getVertexs(){return[this.dragVertex1,this.dragVertex2]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.rect.isHover(e)?this.rect:void 0}_onmousedown(e){let t=this.getParent();if(this.isDisableDrag()||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s===this.rect?this._dragRect(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(s,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(s),!1),this._dragVertex(t,s)))}_dragVertex(e,t){let{mainPane:i}=e;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:tf.hover_border_color}),i.on("mousemove",ef.Us.FibonacciLine,e=>{let i=this.getPoint(e.point),{p1:r,p2:s}=this.getAttr("data");t===this.dragVertex1&&this.setData({p1:i,p2:s}),t===this.dragVertex2&&this.setData({p1:r,p2:i}),this.update()}),i.on("mouseup",ef.Us.FibonacciLine,()=>{i.off(ef.Us.FibonacciLine),this.recoverDragVertexts(),this.compeleDraw()})}_dragRect(e,{x:t,y:i}){let{mainPane:r}=e,{p1:s,p2:a}=this.getData(),{x:o,y:l}=e.getPosition(s),{x:n,y:d}=e.getPosition(a),c=0,h=0;r.on("mousemove",ef.Us.FibonacciLine,r=>{let{x:s,y:a}=e.transformPointToView(r.point);c=s-t,h=a-i;let u=e.getPlotItemByPosition(o+c,l+h),g=e.getPlotItemByPosition(n+c,d+h);this.setData({p1:u,p2:g}),this.update()}),r.on("mouseup",ef.Us.FibonacciLine,()=>{r.off(ef.Us.FibonacciLine),this.compeleDraw()})}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.FibonacciLine},this.rect=new tg.UL({fillStyle:tf.default_line_color,strokeStyle:tf.default_line_color,stroke:!1}),this.line1=tb.line.clone(),this.line2=tb.line.clone(),this.line3=tb.line.clone(),this.line4=tb.line.clone(),this.line5=tb.line.clone(),this.line6=tb.line.clone().setAttrs({lineDash:[3,3]}),this.text1=tb.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.text2=tb.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.text3=tb.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.text4=tb.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.text5=tb.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.yLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.yLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6}),this.xLabel1=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1}),this.yRange=new tg.UL({fillStyle:"#2f3f59",stroke:!1}),this.dragVertex1=tb.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=tb.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}};var tN=i(36506);(a=d||(d={})).Up="UP",a.Down="DOWN",a.Right="RIGHT",a.Left="LEFT";let tM=class e{static createArrowData(t,i="RIGHT"){let r="RIGHT"===i?-this.Arrow_Offset:this.Arrow_Offset,s=new tN.Z(t.x+r,t.y),a=new tN.Z(0,1).rotate(120),o=new tN.Z(0,0),l=o.clone().add(a.clone().scale(e.Arrow_Len)),n=o.clone().substract(new tN.Z(e.Arrow_Len/2,0)),d=n.clone().substract(new tN.Z(e.Arrow_Len,0)),c=new tN.Z(l.x,-l.y);return"RIGHT"===i?[n,l,o,c,n,d].map(e=>e.clone().add(s).toXY()):[n,l,o,c,n,d].map(e=>e.clone().rotate(180).add(s).toXY())}static createArrowPath(e,t,i={arrowLen:12,len:27,arrowAngle:45}){let r=i.arrowLen||12,s=i.len||27,a=i.arrowAngle||45,o=new tN.Z(e.x,e.y),l=o.clone().add(t.clone().rotate(a).scale(r)).toXY(),n=o.clone().add(t.clone().rotate(-a).scale(r)).toXY(),d=o.clone().add(t.clone().scale(s)).toXY(),c=o.toXY();return[[l,c,n],[c,d]]}};tM.Arrow_Len=8,tM.Arrow_Offset=5;let tD=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t}=e,i=this.getData(),{x:r,y:s}=e.getPosition(i),a=this._getDirVector(),o=tM.createArrowPath({x:r,y:-s},a);this.paths.setData(o),this.dragVertex.setAttrs({data:new tC.Z.Vector2(r,-s).add(a.clone().rotate(180).scale(15)).toXY()}),this.addWidgetShapes(t,[this.paths,this.dragVertex]),this.setAnnotationToWidgets([t])}getShapes(){return[this.paths,this.dragVertex]}getDescription(){let{data:e,type:t,color:i,isLock:r}=this.getConfig();return{data:e,type:t,color:i,isLock:r}}getRenderPanes(){let e=this.getParent();if(!e)return[];let{mainPane:t}=e;return[t]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",`${ef.Us.LeftArrow}-${eY.HD.MOUSE}`,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){return this.paths.isHover(e,20)||!!this.getDragVertex(e)}setVisibleShapes(){let{isEdit:e,isHover:t}=this.getConfig();this.dragVertex.setAttrs({isVisible:t||e,radius:tf.radius,lineWidth:e?tf.border_width:tf.hover_border_width})}getVertexs(){return[this.dragVertex]}getEditAttribute(){let{color:e,isLock:t}=this.getConfig();return{showColor:!0,color:e,showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:"",showBg:!1,background:"",isLock:t,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}}updateColor(e){this.paths.setAttr("strokeStyle",e)}_highlightVertex(e){let{isEdit:t,isHover:i}=this.getConfig();if(t||i){let{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point);this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover({x:i,y:-r}))&&this.update()}}getDragVertex(e){return this.dragVertex.isHover(e)?this.dragVertex:this.paths.isHover(e)?this.paths:void 0}_onmousedown(e){if(e.isDealed)return;let t=this.getParent();if(this.isDisableDrag()||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s instanceof tg.nB?this._dragPaths(t):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t,t.transformPointToView(e.point))))}_getDirVector(){let e=this.getAttr("type"),t=new tC.Z.Vector2(1,0);return e===ef.Us.DownArrow&&t.rotate(-90),e===ef.Us.UpArrow&&t.rotate(90),e===ef.Us.RightArrow&&t.rotate(180),t}_dragVertex(e,t){let{mainPane:i}=e,r=this.getAttr("type"),s=this.getData(),a=e.getPosition(s);i.on("mousemove",`${r}-${eY.HD.MOUSE}`,i=>{let r=e.transformPointToView(i.point).x-t.x,s=this.getPoint({x:a.x+r,y:i.point.y});this.setData(s),this.update()}),i.on("mouseup",`${r}-${eY.HD.MOUSE}`,()=>{i.off(`${r}-${eY.HD.MOUSE}`),this.recoverDragVertexts(),this.compeleDraw()})}_dragPaths(e){let{mainPane:t}=e,i=this.getAttr("type");t.on("mousemove",`${i}-${eY.HD.MOUSE}`,e=>{let t=this.getPoint(e.point);this.setData(t),this.update()}),t.on("mouseup",`${i}-${eY.HD.MOUSE}`,()=>{t.off(`${i}-${eY.HD.MOUSE}`),this.compeleDraw()})}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.LeftArrow},this.paths=new tg.nB().setAttrs({strokeStyle:tf.default_line_color,lineWidth:4,fill:!1,lineJoin:"bevel"}),this.dragVertex=tb.dragVertex.clone(["fillStyle","strokeStyle"])}},tV=class extends ty{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n}=this.getData(),d=e.getPosition(l),{x:c,y:h}=d,u=e.getPosition(n),{x:g,y:m}=u,{width:p,height:x}=t.getBound();if(tC.Z.Algorith.isSamePoint(d,u))this.line.setData({p1:{x:c,y:-h},p2:{x:g,y:-m}});else{let e=new tC.Z.Bound(0,0,p,x),t=tC.Z.Line.getIntersectWidthBound(d,u,e);if(2===t.length){let e=new tC.Z.Vector2(g-c,m-h),i=new tC.Z.Vector2(t[0].x-c,t[0].y-h),r=new tC.Z.Vector2(t[1].x-c,t[1].y-h),s=tC.Z.Algorith.getDotMultiply(e,i)>0,a=tC.Z.Algorith.getDotMultiply(e,r)>0;if(s&&a){let e=i.getSquareLength()>r.getSquareLength()?t[0]:t[1];this.line.setData({p1:{x:c,y:-h},p2:{x:e.x,y:-e.y}})}else a?this.line.setData({p1:{x:c,y:-h},p2:{x:t[1].x,y:-t[1].y}}):this.line.setData({p1:{x:c,y:-h},p2:{x:t[0].x,y:-t[0].y}})}}this.xLabel1.setAttrs({data:{x:c,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:g,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-h},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(c,g),y:-o},width:Math.abs(c-g),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(h,m)},width:i.bound.width,height:Math.abs(h-m)}),this.dragVertex1.setAttrs({data:{x:c,y:-h}}),this.dragVertex2.setAttrs({data:{x:g,y:-m}}),this.addWidgetShapes(t,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,r,i])}constructor(){super(),this.setAttr("type",ef.Us.RayLine)}},tj=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t}=e,i=this.getData(),{x:r,y:s}=e.getPosition(i),{width:a}=t.getBound();this.line.setData({p1:{x:r,y:-s},p2:{x:a,y:-s}}),this.text.setData({x:r,y:-(s+10)}).setText(`${(0,ey._A)()?(0,ey.dD)(e.formatterValue(i.value)):e.formatterValue(i.value)}`),this.dragVertex.setData({x:r,y:-s}),this.addWidgetShapes(t,[this.line,this.dragVertex,this.text]),this.setAnnotationToWidgets([t])}getShapes(){return[this.line,this.dragVertex,this.text]}updateColor(e){this.line.setAttr("strokeStyle",e),this.text.setAttr("fillStyle",e)}updateLineWidth(e){this.line.setAttr("lineWidth",e)}updateLineStyle(e){this.line.setAttr("lineDash",e)}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",ef.Us.HorizontalLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){return this.line.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){let{isEdit:e,isHover:t}=this.getConfig();this.dragVertex.setAttrs({isVisible:t||e,lineWidth:e?tf.border_width:tf.hover_border_width})}getVertexs(){return[this.dragVertex]}_highlightVertex(e){let{isEdit:t,isHover:i}=this.getConfig();if(t||i){let{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point);this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover({x:i,y:-r}))&&this.update()}}getDragVertex(e){return this.dragVertex.isHover(e)?this.dragVertex:this.line.isHover(e)?this.line:void 0}_onmousedown(e){if(e.isDealed)return;let t=this.getParent();if(this.isDisableDrag()||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s instanceof tg.x1?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t)))}_dragVertex(e){let{mainPane:t}=e;t.on("mousemove",ef.Us.HorizontalLine,e=>{let t=this.getPoint(e.point);this.setData(t),this.update()}),t.on("mouseup",ef.Us.HorizontalLine,()=>{t.off(ef.Us.HorizontalLine),this.recoverDragVertexts(),this.compeleDraw()})}_dragLine(e,{x:t,y:i}){let{mainPane:r}=e,s=this.getData(),{x:a,y:o}=e.getPosition(s);r.on("mousemove",ef.Us.HorizontalLine,r=>{let{x:s,y:l}=e.transformPointToView(r.point),n=s-t,d=l-i;(0,eb.Fr)(n)&&(0,eb.Fr)(d)||(this.setData(e.getPlotItemByPosition(a+n,o+d)),this.update())}),r.on("mouseup",ef.Us.HorizontalLine,()=>{r.off(ef.Us.HorizontalLine),this.compeleDraw()})}constructor(){super(),this.config={...b()(tb.defaultConfig),type:ef.Us.PriceLine},this.line=tb.line.clone(),this.text=tb.text.clone().setAttrs({textAlign:"left",textBaseline:"bottom"}),this.dragVertex=tb.dragVertex.clone(["fillStyle","strokeStyle"]),this.setAttr("type",ef.Us.PriceLine)}},tR=class extends ty{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,{p1:l,p2:n}=this.getData(),{x:d,y:c}=e.getPosition(l),{x:h,y:u}=e.getPosition(n),[g]=tM.createArrowPath({x:h,y:u},new tC.Z.Vector2(d-h,c-u).normalize(),{arrowAngle:30});this.path.setData(g.map(({x:e,y:t})=>({x:e,y:-t}))),this.line.setData({p1:{x:d,y:-c},p2:{x:h,y:-u}}),this.xLabel1.setAttrs({data:{x:d,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.xLabel2.setAttrs({data:{x:h,y:-o},text:(0,eb.XH)(n.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel1.setAttrs({data:{x:0,y:-c},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-u},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(n.value)):e.formatterValue(n.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(d,h),y:-o},width:Math.abs(d-h),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(c,u)},width:i.bound.width,height:Math.abs(c-u)}),this.dragVertex1.setAttrs({data:{x:d,y:-c}}),this.dragVertex2.setAttrs({data:{x:h,y:-u}}),this.addWidgetShapes(t,[this.line,this.path,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,r,i])}getShapes(){return[this.line,this.path,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)||this.path.isHover(e)?this.line:void 0}updateColor(e){this.line.setAttr("strokeStyle",e),this.path.setAttr("strokeStyle",e)}updateLineWidth(e){this.line.setAttr("lineWidth",e),this.path.setAttr("lineWidth",e)}updateLineStyle(e){this.line.setAttr("lineDash",e),this.path.setAttr("lineDash",e)}constructor(){super(),this.path=new tg.y$({strokeStyle:tf.default_line_color,lineWidth:1,fill:!1}),this.setAttr("type",ef.Us.ArrowLine)}},tO={mousedown:{eventName:"mousedown",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mousemove:{eventName:"mousemove",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mouseup:{eventName:"mouseup",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mouseout:{eventName:"mouseout",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},wheel:{eventName:"wheel",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},click:{eventName:"click",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},dblclick:{eventName:"dblclick",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},contextmenu:{eventName:"contextmenu",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},resize:{eventName:"resize",handler(e){e()}},gesturestart:{eventName:"gesturestart",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},gesturechange:{eventName:"gesturechange",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},gestureend:{eventName:"gestureend",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}}},tF={mousedown:{eventName:"touchstart",handler(e,t){let i={originEvent:t};Array.from(t.targetTouches).forEach((e,t)=>{let r=0===t?"clientX":`clientX${t}`,s=0===t?"clientY":`clientY${t}`;i[r]=e.clientX,i[s]=e.clientY}),e(i)}},mousemove:{eventName:"touchmove",handler(e,t){let i={originEvent:t};Array.from(t.touches).forEach((e,t)=>{let r=0===t?"clientX":`clientX${t}`,s=0===t?"clientY":`clientY${t}`;i[r]=e.clientX,i[s]=e.clientY}),e(i)}},mouseup:{eventName:"touchend",handler(e,t){let i={originEvent:t};Array.from(t.changedTouches).forEach((e,t)=>{let r=0===t?"clientX":`clientX${t}`,s=0===t?"clientY":`clientY${t}`;i[r]=e.clientX,i[s]=e.clientY}),e(i)}},wheel:{eventName:"wheel",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},click:{eventName:"click",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}}},tH={eventPool:new Map,getEventName(e){let[t,i]=e.split("."),r=Object.assign(tO[t]||{},{nameSpace:i}),s=Object.assign(tF[t]||{},{nameSpace:i});return r.eventName===s.eventName?[r]:[r,s]},on(e,t,i,r=!1){return this.getEventName(t).forEach(({eventName:t,nameSpace:s,handler:a})=>{if(!t)return;let o=a.bind(null,i),l=this.eventPool.get(e);l||(l={[t]:new Map},this.eventPool.set(e,l)),l[t]||(l[t]=new Map);let n=new Map;n.set(i,o),l[t].set(s,n),e.addEventListener(t,o,r)}),this},off(e,t,i,r=!1){let s=this.getEventName(t),a=this.eventPool.get(e);return s.forEach(({eventName:t,nameSpace:s})=>{if(a&&a[t]){let o=a[t],l=o.get(s);if(i){if(l&&i){let s=l.get(i);s&&e.removeEventListener(t,s,r)}}else s?l&&Array.from(l.values()).forEach(i=>{e.removeEventListener(t,i,r)}):Array.from(o.values()).forEach(i=>{Array.from(i.values()).forEach(i=>{e.removeEventListener(t,i,r)})}),o.clear();0===o.size&&delete a[t],0===Object.keys(a).length&&this.eventPool.delete(e)}}),this}},tZ=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;this._textArea||this.createTextAreaElement();let{mainPane:t,axisPane:i,timeAxisPane:r,xAxis:s}=e,a=i.bound.width,o=r.bound.height,l=this.getData(),{x:n,y:d}=e.getPosition(l);this.setTextAreaPosition(e.transformXYToAbsoluteXY({x:n,y:d})),this.text.setData(this.transformYPoint({x:n,y:d})),this.xLabel.setAttrs({data:{x:n,y:-o},text:(0,eb.XH)(l.time,s.getTimeScaleType()),fixHeight:o}),this.yLabel.setAttrs({data:{x:0,y:-d},text:(0,ey._A)()?(0,ey.dD)(e.formatterValue(l.value)):e.formatterValue(l.value),fixWidth:a}),this.addWidgetShapes(t,[this.text]),this.setAnnotationToWidgets([t]),this.addWidgetShapes(r,[this.xLabel]),this.addWidgetShapes(i,[this.yLabel]),this.setAnnotationToWidgets([t,r,i])}getShapes(){return[this.text,this.xLabel,this.yLabel]}updateBackground(e){this.text.setAttrs({fill:!0,background:e})}updateTextColor(e){this.text.setAttr("fillStyle",e)}updateTextSize(e){this.text.setAttr("fontSize",e)}updateTextBold(e){this.text.setAttr("fontVariant",e)}getDescription(){let{data:e,type:t,text:i,isLock:r,textColor:s,background:a,textFontSize:o,isTextBold:l}=this.getConfig();return{data:e,type:t,text:i,textColor:s,background:a,textFontSize:o,isTextBold:l,isLock:r}}getEditAttribute(){let{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:s,isLock:a}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:ef.TD.SOLID,showTextColor:!0,textColor:e,showFontSize:!0,textFontSize:t,showTextBold:!0,isTextBold:i,showBg:!0,background:r,isLock:a,showTextEdit:!0,isTextEdit:s,showLock:!0,showDelete:!0}}getRenderPanes(){let e=this.getParent();if(!e)return[];let{mainPane:t,axisPane:i,timeAxisPane:r}=e;return[t,i,r]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("dblclick",`${ef.Us.Text}-${eY.HD.MOUSE}`,this._dblclick.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("text",({newVal:e=""})=>{let t=e.split("\n").filter(e=>!!e);this.text.setText(t)}),this.watch("isTextEdit",({newVal:e})=>{e&&this._activateEdit(),this.setVisibleShapes()})}isHover(e){let{isTextEdit:t}=this.getConfig();return!t&&this.text.isHover(e)}setVisibleShapes(){let{isEdit:e,isTextEdit:t}=this.getConfig();this.xLabel.setAttr("isVisible",e),this.yLabel.setAttr("isVisible",e),this.text.setAttr("isVisible",!t),!t&&this._textArea&&this._textArea.remove()}getVertexs(){return[]}setTextAreaPosition(e){let t=this.getAttr("isTextEdit"),i=this.text.getWidth(),r=this.text.getHeight();(0,eb.AS)(this._textArea,{width:`${Math.max(150,Math.min(200,i))}px`,height:`${Math.max(100,Math.min(150,r))}px`,transform:`translate(${e.x}px, ${e.y}px)`,visibility:t?"visible":"hidden",fontVariant:this.getAttr("isTextBold")?"bold":"normal",color:this.getAttr("textColor")})}_activateEdit(){let e=this.getParent();if(!e)return;let t=e.getParent();(0,eb.AS)(this._textArea,{visibility:"visible"}),t.addElement(this._textArea),this._textArea.value=this.getAttr("text")||"",this.setAttr("isTextEdit",!0),this.setVisibleShapes(),this.update()}_dblclick(e){let t=this.getParent();if(!t)return;let{x:i,y:r}=t.transformPointToView(e.point);this.text.isHover({x:i,y:-r})&&!this._textArea.parentNode&&(this.setAttr("isTextEdit",!0),this.setAttr("isEdit",!0))}getDragVertex(e){if(this.text.isHover(e))return this.text}_onmousedown(e){if(e.isDealed)return;let t=this.getParent();if(this.isDisableDrag()||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s=this.getDragVertex({x:i,y:-r});s&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,s instanceof tg.xv&&this._dragText({parent:t,initialPoint:t.transformPointToView(e.point)}))}_dragText({parent:e,initialPoint:t}){let{mainPane:i}=e,r=this.getData(),s=e.getPosition(r);i.on("mousemove",`${ef.Us.Text}-${eY.HD.MOUSE}`,i=>{let r=e.transformPointToView(i.point).x-t.x,a=this.getPoint({x:s.x+r,y:i.point.y});this.setData(a),this.update()}),i.on("mouseup",`${ef.Us.Text}-${eY.HD.MOUSE}`,()=>{i.off(`${ef.Us.Text}-${eY.HD.MOUSE}`),this.setAttrs({isTextEdit:!1,isComplete:!0})})}createTextAreaElement(){let e=this.getParent();this._textArea=(0,eb.az)("textarea",{visibility:"hidden"},"text-area-wrap"),e&&e.getParent().addElement(this._textArea),this._textArea.addEventListener("input",(0,eb.P2)(()=>{let{value:e=""}=this._textArea;this.setAttr("text",e)},10)),tH.on(document,"mousedown",e=>{let t=this.getAttr("isTextEdit"),{originEvent:i}=e;t&&i&&!i.target.contains(this._textArea)&&(this._textArea.remove(),this.compeleDraw(),this.update())},!0)}compeleDraw(){this.setAttrs({isTextEdit:!1,isComplete:!0}),this.syncStorage()}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),isTextEdit:!1,type:ef.Us.Text,text:""},this.text=tb.text.clone().setAttrs({fillStyle:"#848E9C",fontSize:16,textBaseline:"top",padding:4,isCustomized:!0,isVisible:!1}),this.xLabel=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Down,fill:!0,padding:[6,2]}),this.yLabel=new tg.__({background:ef.E.Blue3,color:ef.E.White,dir:ef.Nm.Right,fill:!0,padding:6})}};var tU=i(30898),tW=i.n(tU),t$=i(98783),tz=i.n(t$),tK=i(35838),tX=i.n(tK);(o=c||(c={})).LINE="line",o.BODY="body";let tY=e=>e?"line":"body";class tG{update(e){this.id=e.id,this.price=e.price,this.quantity=e.quantity,this.text=e.text,this.showCloseButton=e.showCloseButton,this.editable=e.editable,this.closeIconColor=e.closeIconColor,this.priceBackground=e.priceBackground,this.priceColor=e.priceColor,this.priceBorderColor=e.priceBorderColor,this.quantityBackground=e.quantityBackground,this.quantityColor=e.quantityColor,this.quantityBorderColor=e.quantityBorderColor,this.borderColor=e.borderColor,this.lineColor=e.lineColor,this.priceLabelBackground=e.priceLabelBackground,this.priceLabelBorderColor=e.priceLabelBorderColor,this.priceLabelColor=e.priceLabelColor,this.lineDash=e.lineDash,this.dragSquareIconColor=e.dragSquareIconColor,this.dragSquareBackgroundColor=e.dragSquareBackgroundColor,this.dragSquareDraggingBackgroundColor=e.dragSquareDraggingBackgroundColor,this.draggingLineDash=e.draggingLineDash,this.tooltipBorderColor=e.tooltipBorderColor,this.tooltipBackgroundColor=e.tooltipBackgroundColor,this.tooltipTextColor=e.tooltipTextColor,this.priceTooltipText=e.priceTooltipText,this.quantityTooltipText=e.quantityTooltipText,this.closeTooltipText=e.closeTooltipText,this.onClose=e.onClose,this.onPriceChange=e.onPriceChange,this.onQuantityChange=e.onQuantityChange,this.onClickDragArea=e.onClickDragArea,this.onClickQuantity=e.onClickQuantity,this.onClickPrice=e.onClickPrice}draw({panel:e}){let{mainPane:t}=e,i=e.getParent(),r=i.settingStore.getValue("@contextMenu.percentageScale"),s=e.getYPos(+this.price),a=i.getAttr("isMobile"),{width:o}=e.getMainBound(),l=a?0:.25*o;this.dragIconBorder.setAttrs({strokeStyle:this.borderColor,fillStyle:this._isDragging?this.dragSquareDraggingBackgroundColor:this.dragSquareBackgroundColor,data:{x:l,y:-s-.5*this.dragIconBorder.getHeight()},width:16,height:20,isVisible:this.editable}),this.dragIcon.setAttrs({fillStyle:this.dragSquareIconColor,data:{x:l+(this.dragIconBorder.getWidth()-this.dragIcon.getWidth())*.5,y:-s-.5*this.dragIcon.getHeight()},width:12,height:12,isVisible:this.editable}),l+=this.dragIconBorder.getWidth(),this.priceLabel.setAttrs({background:this.priceBackground,color:this.priceColor,borderColor:this.priceBorderColor,data:{x:l,y:-s},text:this.text,borderRadius:[4*!this.editable,4*(""===this.quantity&&!this.showCloseButton),4*(""===this.quantity&&!this.showCloseButton),4*!this.editable]}),l+=this.priceLabel.getWidth()-1,this.quantityLabel.setAttrs({background:this.quantityBackground,color:this.quantityColor,borderColor:this.quantityBorderColor,data:{x:l,y:-s},text:(0,ey._A)()?Number.isNaN(+this.quantity)?this.quantity:(0,ey.dD)(this.quantity):this.quantity,padding:""!==this.quantity?[12,2]:[0,0],borderRadius:[0,4*!this.showCloseButton,4*!this.showCloseButton,0]}),l+=this.quantityLabel.getWidth()-1,this.closeIconBorder.setAttrs({strokeStyle:this.borderColor,fillStyle:this.dragSquareBackgroundColor,data:{x:l,y:-s-this.closeIconBorder.getHeight()/2},isVisible:this.showCloseButton}),this.closeIcon.setAttrs({fillStyle:this.closeIconColor,data:{x:l+(this.closeIconBorder.getWidth()-this.closeIcon.getWidth())*.5,y:-s-.5*this.closeIcon.getHeight()},isVisible:this.showCloseButton}),l+=this.closeIconBorder.getWidth(),this.line.setAttrs({strokeStyle:this.lineColor,lineDash:this._isDragging?this.draggingLineDash:this.lineDash,data:{p1:{x:l,y:-s},p2:{x:t.getBound().width,y:-s}}}),this.yLabel.setAttrs({background:this.priceLabelBackground,color:this.priceLabelColor,borderColor:this.priceLabelBorderColor,data:{x:1,y:-s},text:r?i.getFirstVisibleSeriesDataAsRelativePercentage({value:+this.price}):(0,ey._A)()?(0,ey.dD)(e.formatterValue(+this.price)):e.formatterValue(+this.price)});let n=this.priceLabel.getAttr("data"),d=this.quantityLabel.getAttr("data"),c=this.closeIcon.getAttr("data");this.priceTooltip.setAttrs({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.priceTooltipText,data:{x:n.x+(this.priceLabel.getWidth()-this.priceTooltip.getWidth())/2,y:n.y-4-(this.priceLabel.getHeight()+this.priceTooltip.getHeight())/2}}),this.quantityTooltip.setAttrs({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.quantityTooltipText,data:{x:d.x+(this.quantityLabel.getWidth()-this.quantityTooltip.getWidth())/2,y:d.y-4-(this.quantityLabel.getHeight()+this.quantityTooltip.getHeight())/2}}),this.closeTooltip.setAttrs({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.closeTooltipText,data:{x:c.x+(this.closeIcon.getWidth()-this.closeTooltip.getWidth())/2,y:c.y-4-(this.closeIcon.getHeight()+this.closeTooltip.getHeight())/2}})}getShapes(){return[...this.getMainPaneShapes(),...this.getPriceAxisPaneShapes(),...this.getTooltipShapes()]}getMainPaneShapes(){return[this.dragIconBorder,this.dragIcon,this.priceLabel,this.quantityLabel,this.closeIconBorder,this.closeIcon,this.line]}getTooltipShapes(){return[this.priceTooltip,this.quantityTooltip,this.closeTooltip]}getPriceAxisPaneShapes(){return[this.yLabel]}isHovered(e){return this.showCloseButton&&this.closeIconBorder.isHover(e)||!!this.editable&&(this.dragIconBorder.isHover(e)||this.line.isHover(e)||this.priceLabel.isHover(e)||this.quantityLabel.isHover(e))}isDragging(){return this._isDragging}handleShowTooltip(e){this.editable&&(this.priceTooltip.setAttrs({isVisible:!!this.priceTooltip.getAttr("text")&&this.priceLabel.isHover(e)||this.dragIconBorder.isHover(e)}),this.quantityTooltip.setAttrs({isVisible:""!==this.quantity&&!!this.quantityTooltip.getAttr("text")&&this.quantityLabel.isHover(e)})),this.closeTooltip.setAttrs({isVisible:this.showCloseButton&&!!this.closeTooltip.getAttr("text")&&this.closeIcon.isHover(e)})}hideTooltip(){this.priceTooltip.setAttrs({isVisible:!1}),this.quantityTooltip.setAttrs({isVisible:!1}),this.closeTooltip.setAttrs({isVisible:!1})}handleMouseDown({pt:e,panel:t,setDealed:i}){if(this._prevPrice=this.price,this._prevQuantity=this.quantity,this.showCloseButton&&this.closeIconBorder.isHover(e))i(),this.onClose?.(this.getDescription());else if(this.editable&&(this.dragIconBorder.isHover(e)||this.priceLabel.isHover(e)||this.line.isHover(e))){i();let r=this.dragIconBorder.isHover(e)?"dragIcon":this.priceLabel.isHover(e)?"price":"line",s=tY("line"===r),a=this.price,o=a;t.mainPane.on("mousemove",`${ef.Us.OpenOrders}`,e=>{let{y:i}=t.transformPointToView(e.point),r=t.formatterValue(t.getPriceOfYPos(i));this.price=r,o=r,this._isDragging=!0}),tH.on(document,`mouseup.${ef.Us.OpenOrders}`,()=>{t.mainPane.off("mousemove",`${ef.Us.OpenOrders}`),tH.off(document,`mouseup.${ef.Us.OpenOrders}`),this._isDragging=!1,o!==a&&this.onPriceChange?.({...this.getDescription(),price:o,triggerType:s}),this.onClickDragArea?.({triggerType:s,prevPrice:a,currentPrice:o}),"price"===r&&this.onClickPrice?.({...this.getDescription(),prevPrice:a,currentPrice:o})})}else this.editable&&""!==this.quantity&&this.quantityLabel.isHover(e)&&this.onClickQuantity?.(this.getDescription())}getDescription(){return{id:this.id,price:this.price,prevPrice:this._prevPrice,quantity:this.quantity,prevQuantity:this._prevQuantity}}constructor(e){this.update(e),this.dragIcon=new tg.jC({path:tT.Z4,width:12,height:12,fillStyle:this.dragSquareIconColor,fill:!0,stroke:!1}),this.dragIconBorder=new tg.UL({fill:!0,strokeStyle:this.borderColor,fillStyle:this.dragSquareBackgroundColor,lineWidth:1,width:16,height:20,borderRadius:[4,0,0,4]}),this.closeIcon=new tg.jC({path:tT.aE,width:10,height:11,fillStyle:this.closeIconColor,fill:!0,stroke:!1}),this.closeIconBorder=new tg.UL({fill:!0,strokeStyle:this.borderColor,fillStyle:this.dragSquareBackgroundColor,lineWidth:1,width:20,height:20,borderRadius:[0,4,4,0]}),this.priceLabel=new tg.__({background:this.priceBackground,color:this.priceColor,borderColor:this.priceBorderColor,dir:ef.Nm.Right,stroke:!0,fill:!0,padding:[12,2],fixHeight:21,lineWidth:1}),this.quantityLabel=new tg.__({background:this.quantityBackground,color:this.quantityColor,borderColor:this.quantityBorderColor,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1}),this.line=new tg.x1({strokeStyle:this.lineColor,lineDash:this.lineDash}),this.yLabel=new tg.__({background:this.priceLabelBackground,color:this.priceLabelColor,borderColor:this.priceLabelBorderColor,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[5,0],borderRadius:4,fixHeight:22,lineWidth:1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"}),this.priceTooltip=new tg.__({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.priceTooltipText,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fixHeight:38,arrowHeight:4,borderRadius:8,lineWidth:1,isVisible:!1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"}),this.quantityTooltip=new tg.__({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.quantityTooltipText,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fixHeight:38,arrowHeight:4,borderRadius:8,lineWidth:1,isVisible:!1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"}),this.closeTooltip=new tg.__({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.closeTooltipText,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fixHeight:38,arrowHeight:4,borderRadius:8,lineWidth:1,isVisible:!1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"})}}let tq=class extends tb{isIndependent(){return!0}updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i}=e,r=[];this.instances.forEach(s=>{s.draw({panel:e}),this.addWidgetShapes(t,s.getMainPaneShapes()),this.addWidgetShapes(i,s.getPriceAxisPaneShapes()),r.push(...s.getTooltipShapes())}),this.addWidgetShapes(t,r),this.setAnnotationToWidgets([t,i])}getShapes(){return tX()(this.instances,e=>e.getShapes())}getDescription(){let{type:e,isNeedStore:t}=this.getConfig();return{type:e,isNeedStore:t}}getEditAttribute(){let{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:s,isLock:a}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:ef.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:s,showLock:!1,showDelete:!1}}getRenderPanes(){let e=this.getParent();if(!e)return[];let{mainPane:t,axisPane:i}=e;return[t,i]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",ef.Us.OpenOrders,this._onMousemove.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("orders",({newVal:e})=>{this.clearShapes();let t=e.map(e=>e.id),i=this.instances.map(e=>e.id),r=tW()(i,t),s=tz()(i,r),a=tz()(r,t);r.forEach(t=>{let i=e.find(e=>e.id===t),r=this.instances.find(e=>e.id===t);i&&r&&r.update(i)}),s.forEach(e=>{let t=this.instances.findIndex(t=>t.id===e);t<0||this.instances.splice(t,1)}),a.forEach(t=>{let i=e.find(e=>e.id===t);i&&this.instances.push(new tG(i))}),this.forceUpdate()})}isHover(e){return this.instances.some(t=>t.isHovered(e))}isHoverDragable(e){let t=this.getTopmostHoveredInstance(e);return!!(t?.dragIconBorder.isHover(e)||t?.priceLabel.isHover(e))}isDragging(){return this.instances.some(e=>e.isDragging())}updateBackground(){}setVisibleShapes(){}getVertexs(){return[]}_onmousedown(e){let t=this.getParent();if(e.isDealed||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.getTopmostHoveredInstance(s);a?.handleMouseDown({pt:s,panel:t,setDealed:()=>e.isDealed=!0})}_onMousemove(e){let t=this.getParent();if(!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.getTopmostHoveredInstance(s);this.instances.forEach(e=>{e!==a&&e.hideTooltip()}),a?.handleShowTooltip(s),this.update()}getTopmostHoveredInstance(e){let t;for(let i=this.instances.length-1;i>-1;i--)if(this.instances[i].isHovered(e)){t=this.instances[i];break}return t}forceUpdate(){this.setAttr("data",[]),this.update()}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),orders:[],isNeedStore:!1},this.instances=[]}};var tQ=i(3440),tJ=i.n(tQ),t0=i(829),t1=i.n(t0),t2=i(96795),t5=i.n(t2),t3=i(35676),t6=i.n(t3);let t4=e=>({...e,buySell:{upArrow:new tg.jC({width:8,height:4,path:"M8.5 4L0.5 4L4.5 0L8.5 4Z",fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),downArrow:new tg.jC({width:8,height:4,path:"M8.5 0 L4.5 4 L0.5 0 L8.5 0Z",fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),rect:new tg.UL({width:14,height:14,borderRadius:4}),sign:new tg.xv},arrow:{upArrow:new tg.jC({width:8,height:12,path:"M4.35355 0.646446C4.15829 0.451184 3.84171 0.451184 3.64645 0.646446L0.464466 3.82843C0.269204 4.02369 0.269204 4.34027 0.464466 4.53553C0.659728 4.7308 0.97631 4.7308 1.17157 4.53553L4 1.70711L6.82843 4.53553C7.02369 4.7308 7.34027 4.7308 7.53553 4.53553C7.7308 4.34027 7.7308 4.02369 7.53553 3.82843L4.35355 0.646446ZM4.5 11L4.5 1L3.5 1L3.5 11L4.5 11Z",fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),downArrow:new tg.jC({width:8,height:12,path:"M3.64645 10.3536C3.84171 10.5488 4.15829 10.5488 4.35355 10.3536L7.53553 7.17157C7.7308 6.97631 7.7308 6.65973 7.53553 6.46447C7.34027 6.2692 7.02369 6.2692 6.82843 6.46447L4 9.29289L1.17157 6.46447C0.97631 6.2692 0.659728 6.2692 0.464466 6.46447C0.269204 6.65973 0.269204 6.97631 0.464466 7.17157L3.64645 10.3536ZM3.5 -2.18557e-08L3.5 10L4.5 10L4.5 2.18557e-08L3.5 -2.18557e-08Z",fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1})},tooltipContainer:{tooltip:new tg.__({background:"gray",color:ef.E.White,borderColor:"gray",dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fontSize:14,lineWidth:1,borderRadius:8,isVisible:!1,font:"400 14px BinanceNova",arrowHeight:4})}}),t8=({startX:e,startY:t,isBuy:i,text:r,textColor:s,borderColor:a,backgroundColor:o,tooltipBackgroundColor:l,tooltipBorderColor:n,tooltipTextColor:d,buySell:{upArrow:c,downArrow:h,sign:u,rect:g},arrow:m,tooltipContainer:{tooltip:p},inverted:x},f)=>{Object.keys(m).forEach(e=>{m[e].setAttrs({isVisible:!1})});let b=e-g.getWidth()/2,y=(g.getHeight()-u.getHeight())/2,v=-(6+g.getHeight())*(f+1),C=6*(f+1)+g.getHeight()*f,w=t+(x?i?v:C:i?C:v),S=e-u.getWidth()/2,T=e-c.getWidth()/2,A=w-c.getHeight()+1,_=w+g.getHeight()-1,L=e-p.getWidth()/2,k=w-c.getHeight()-14-4;g.setAttrs({data:{x:b,y:w},fillStyle:o,strokeStyle:a,isVisible:!0}),u.setAttrs({data:{x:S,y:w+y},content:i?"B":"S",fillStyle:s,isVisible:!0}),c.setAttrs({data:{x:T,y:A},fillStyle:o,strokeStyle:a,isVisible:x?!i:i}),h.setAttrs({data:{x:T,y:_},fillStyle:o,strokeStyle:a,isVisible:x?i:!i}),p.setAttrs({data:{x:L,y:k},text:r,borderColor:n,background:l,color:d})},t7=({startX:e,startY:t,isBuy:i,text:r,borderColor:s,backgroundColor:a,tooltipBackgroundColor:o,tooltipBorderColor:l,tooltipTextColor:n,arrow:{upArrow:d,downArrow:c},buySell:h,tooltipContainer:{tooltip:u},inverted:g},m)=>{Object.keys(h).forEach(e=>{h[e].setAttrs({isVisible:!1})});let p=e-d.getWidth()/2,x=-(5+d.getHeight())*(m+1),f=5*(m+1)+d.getHeight()*m,b=t+(g?i?x:f:i?f:x),y=e-u.getWidth()/2,v=b-d.getHeight()-14-4;d.setAttrs({data:{x:p,y:b},fillStyle:a,strokeStyle:s,isVisible:g?!i:i}),c.setAttrs({data:{x:p,y:b},fillStyle:a,strokeStyle:s,isVisible:g?i:!i}),u.setAttrs({data:{x:y,y:v},text:r,borderColor:l,background:o,color:n})},t9=class extends tb{isIndependent(){return!0}updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,xAxis:i}=e,r=e.getParent(),s=r.settingStore.getValue("@symbol.candlestick.executionOrderStyle"),a=r.settingStore.getValue("@contextMenu.invertedScale"),o=this.executionOrders.map(t=>{let{time:r=t.time,high:s=0,low:o=0,close:l=0}=this.getCurrentItemByTime(t.time)||{},{h:n,l:d}=this.getHighLow({high:s,low:o,close:l}),c=i?.getCoordOfValue(r);return{candlestickTime:r,high:s,low:o,startX:c,startY:-e.getYPos(t.isBuy?d:n),inverted:a,...t}}),l=tJ()(o,"candlestickTime");Object.keys(l).forEach(e=>{t5()(l[e],"isBuy").forEach(e=>{let t=t1()(e,"time");s===eI.VQ.BuySell?t.forEach(t8):t.forEach(t7)})}),this.addWidgetShapes(t,this.getShapes()),this.setAnnotationToWidgets([t])}getShapes(){let e=t6()(this.executionOrders.map(e=>[e.buySell.upArrow,e.buySell.downArrow,e.arrow.upArrow,e.arrow.downArrow])),t=this.executionOrders.map(e=>e.buySell.sign);return[...this.executionOrders.map(e=>e.buySell.rect),...t,...e,...this.executionOrders.map(e=>e.tooltipContainer.tooltip)]}getDescription(){let{data:e,type:t,isNeedStore:i}=this.getConfig();return{id:this.id,data:e,type:t,isNeedStore:i}}getRenderPanes(){let e=this.getParent();if(!e)return[];let{mainPane:t}=e;return[t]}initCustomEvents(){this.on("mousemove",ef.Us.ExecutionOrders,this._onMousemove.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("orders",({newVal:e})=>{this.clearShapes(),this.executionOrders=e.map(t4),this.forceUpdate()})}isHover(e){return this.executionOrders.reduce((t,i)=>t&&(i.buySell.upArrow.isHover(e)||i.buySell.downArrow.isHover(e)||i.arrow.upArrow.isHover(e)||i.arrow.downArrow.isHover(e)),!1)}setVisibleShapes(){}getVertexs(){return[]}_onMousemove(e){let t=this.getParent();if(!t)return;let i=t.getParent().settingStore.getValue("@symbol.candlestick.executionOrderStyle"),{x:r,y:s}=t.transformPointToView(e.point),a={x:r,y:-s};this.executionOrders.forEach(({buySell:e,arrow:t,tooltipContainer:r})=>{let s=i===eI.VQ.BuySell?e.upArrow.isHover(a)||e.downArrow.isHover(a)||e.rect.isHover(a):t.upArrow.isHover(a)||t.downArrow.isHover(a),o=!!r.tooltip.getAttr("text")&&s;r.tooltip.setAttrs({isVisible:o})}),this.update()}compeleDraw(){this.setAttrs({isComplete:!0})}forceUpdate(){this.setAttr("data",[]),this.update()}getHighLow(e){let t=this.getParent()?.getParent(),i=t?.settingStore.getValue("@symbol.candlestick.type");return(0,I.T0)({chartType:i,candlestickItem:e})}getCurrentItemByTime(e){let t=this.getParent();if(!t)return;let{xAxis:i}=t;if(!i)return;let r=t.getParent(),s=i.getTimeUnitValue(),a=r.getVisibleSeriesData();if(a&&!(a.length<1))for(let t=0;t<a.length;t++){let i=e-a[t].time;if(i<0)break;if(i<s)return a[t]}}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.ExecutionOrders,isNeedStore:!1,orders:[]},this.executionOrders=[]}},ie=class{getShapes(){return[this.label,this.priceLabel,this.line]}getWidth(){let e=eG.Z.measureTextWidth(this.text);return Math.max(e,eG.Z.measureTextWidth((0,ey._A)()?(0,ey.dD)(this.priceText):this.priceText))+10}getHeight(){return this.height}draw(e,t){let i=e.getYPos(this.price),r=this.getWidth(),s=t;this.label.setAttrs({data:{x:s,y:-i-this.label.getHeight()/2+1},text:this.text,fixWidth:r}),this.priceLabel.setAttrs({data:{x:s,y:-i+this.priceLabel.getHeight()/2},text:(0,ey._A)()?Number.isNaN(+this.priceText)?this.priceText:(0,ey.dD)(this.priceText):this.priceText,fixWidth:r}),s+=r,this.line.setAttrs({data:{p1:{x:s,y:-i},p2:{x:e.mainPane.getBound().width,y:-i}}})}isHover(e){return this.label.isHover(e)}constructor({price:e,text:t,textBackground:i="#0ECB81",textColor:r=ef.E.White,textBorderColor:s="#474D57",priceText:a,priceBackground:o="#0ECB81",priceColor:l=ef.E.White,priceBorderColor:n="#474D57",lineColor:d="#0ECB81",lineDash:c=[1,1],group:h=""}){this.price=e,this.text=t,this.priceText=a,this.height=36,this.group=h,this.label=new tg.__({background:i,color:r,borderColor:s,dir:ef.Nm.Right,stroke:!0,fill:!0,fixHeight:this.height/2,lineWidth:1,borderRadius:[4,4,0,0]}),this.priceLabel=new tg.__({background:o,color:l,borderColor:n,dir:ef.Nm.Right,stroke:!0,fill:!0,fixHeight:this.height/2,lineWidth:1,borderRadius:[0,0,4,4]}),this.line=new tg.x1({strokeStyle:d,lineDash:c})}},it=class extends tb{isIndependent(){return!0}updateImmediate(){let e=this.getParent();if(!(e&&e.yAxis))return;let{mainPane:t}=e;Object.keys(this.labelLines).forEach(t=>{let i=this.labelLines[t];t.length>0?i.forEach((t,r)=>{let s=i[r-1];if(s){let i=e.getYPos(s.price),r=e.getYPos(t.price),a=t.getHeight(),o=t.getWidth();t.draw(e,i-r<a/2?o:0)}else t.draw(e,0)}):i.forEach(t=>{t.draw(e,0)})}),this.addWidgetShapes(t,this.getShapes()),this.setAnnotationToWidgets([t])}getShapes(){return Object.keys(this.labelLines).reduce((e,t)=>[...e,...tX()(this.labelLines[t],e=>e.getShapes())],[])}getDescription(){let{type:e,isNeedStore:t}=this.getConfig();return{id:this.id,type:e,isNeedStore:t}}getEditAttribute(){let{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:s,isLock:a}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:ef.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:s,showLock:!1,showDelete:!1}}getRenderPanes(){let e=this.getParent();return e?[e.mainPane]:[]}initCustomEvents(){this.watch("data",this.updateImmediate.bind(this)),this.watch("labels",({newVal:e})=>{this.clearShapes();let t=e.map(e=>new ie(e));this.labelLines=tJ()(t,({group:e})=>e),Object.keys(this.labelLines).forEach(e=>{this.labelLines[e].sort((e,t)=>t.price-e.price)}),this.updateImmediate()})}isHover(e){return Object.keys(this.labelLines).reduce((t,i)=>t||this.labelLines[i].some(t=>t.isHover(e)),!1)}setVisibleShapes(){}getVertexs(){return[]}constructor(...e){super(...e),this.labelLines={},this.config={...b()(tb.defaultConfig),type:ef.Us.LabelLines,labels:[],isNeedStore:!1}}},ii=class{getMainPaneShapes(){return[this.label,this.line]}draw({panel:e}){let t=e.getYPos(+this.price),i=0;this.label.setAttrs({data:{x:i,y:-t},text:this.text,color:this.textColor,background:this.textBackground,borderColor:this.textBorderColor}),i+=this.label.getWidth(),this.line.setAttrs({data:{p1:{x:i,y:-t},p2:{x:e.mainPane.getBound().width,y:-t}},strokeStyle:this.lineColor,lineDash:this.lineDash})}isHover(e){return this.label.isHover(e)}update(e){this.id=e.id,this.price=e.price,this.text=e.text,this.textBackground=e.textBackground,this.textColor=e.textColor,this.textBorderColor=e.textBorderColor,this.lineColor=e.lineColor,this.lineDash=e.lineDash}constructor(e){this.update(e),this.label=new tg.__({text:this.text,color:this.textColor,background:this.textBackground,borderColor:this.textBorderColor,dir:ef.Nm.Right,stroke:!0,fill:!0,fixHeight:20,lineWidth:1,padding:[5,0],borderRadius:4,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"}),this.line=new tg.x1({strokeStyle:this.lineColor,lineDash:this.lineDash})}},ir=class extends tb{isIndependent(){return!0}updateImmediate(){let e=this.getParent();if(!(e&&e.yAxis))return;let{mainPane:t}=e;this.instances.forEach(i=>{i.draw({panel:e}),this.addWidgetShapes(t,i.getMainPaneShapes())}),this.setAnnotationToWidgets([t])}getShapes(){return tX()(this.instances,e=>e.getMainPaneShapes())}getDescription(){let{type:e,isNeedStore:t}=this.getConfig();return{id:this.id,type:e,isNeedStore:t}}getEditAttribute(){let{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:s,isLock:a}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:ef.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:s,showLock:!1,showDelete:!1}}getRenderPanes(){let e=this.getParent();return e?[e.mainPane]:[]}initCustomEvents(){this.watch("data",this.updateImmediate.bind(this)),this.watch("labels",({newVal:e})=>{this.clearShapes();let t=e.map(e=>e.id),i=this.instances.map(e=>e.id),r=tW()(i,t),s=tz()(i,r),a=tz()(r,t);r.forEach(t=>{let i=e.find(e=>e.id===t),r=this.instances.find(e=>e.id===t);i&&r&&r.update(i)}),s.forEach(e=>{let t=this.instances.findIndex(t=>t.id===e);t<0||this.instances.splice(t,1)}),a.forEach(t=>{let i=e.find(e=>e.id===t);i&&this.instances.push(new ii(i))}),this.forceUpdate()})}isHover(e){return this.instances.some(t=>t.isHover(e))}setVisibleShapes(){}getVertexs(){return[]}forceUpdate(){this.setAttr("data",[]),this.update()}constructor(...e){super(...e),this.instances=[],this.config={...b()(tb.defaultConfig),type:ef.Us.SingleLabelLines,labels:[],isNeedStore:!1}}},is=class extends tb{isIndependent(){return!0}updateImmediate(){let e=this.getParent(),t=e.getParent(),{mainPane:i,yAxis:r,xAxis:s}=e;if(e&&r){let{data:i,text:r}=this.getConfig(),a=t.getCloseItemByTime(i);if(a){let t=e.getYPos(+a.high)+4,i=s.getCoordOfValue(a.time),o=s.getTimeScaleType();this.tooltipLabel.setAttrs({data:{x:i,y:-t-5+1},text:r||(0,eb.XH)(a.time,o)}),this.arrowIcon.setData([{x:i,y:-t},{x:i+5,y:-t-5},{x:i-5,y:-t-5}])}}this.addWidgetShapes(i,[this.tooltipLabel,this.arrowIcon]),this.setAnnotationToWidgets([i])}getShapes(){return[this.tooltipLabel,this.arrowIcon]}getDescription(){let{type:e,data:t,isNeedStore:i}=this.getConfig();return{id:this.id,type:e,data:t,isNeedStore:i}}setVisibleShapes(){}getEditAttribute(){let{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:s,isLock:a}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:ef.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:s,showLock:!1,showDelete:!1}}getRenderPanes(){let e=this.getParent();if(!e)return[];let{mainPane:t,axisPane:i}=e;return[t,i]}initCustomEvents(){this.watch("data",this.updateImmediate.bind(this)),tH.on(document,`mousedown.${ef.Us.ToolTip}`,()=>{this.remove()})}afterDestroy(){tH.off(document,`mousedown.${ef.Us.ToolTip}`)}isHover(e){let{isTextEdit:t}=this.getConfig();return!t&&this.tooltipLabel.isHover(e)}getVertexs(){return[]}compeleDraw(){this.setAttrs({isTextEdit:!1,isComplete:!0})}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),isTextEdit:!1,type:ef.Us.ToolTip,isNeedStore:!1,text:""},this.tooltipLabel=new tg.__({background:"#5E6673",color:ef.E.White,dir:ef.Nm.Up,fill:!0,borderRadius:4,padding:[12,8],fixHeight:36,fontSize:14}),this.arrowIcon=new tg.y$({fillStyle:"#5E6673",stroke:!1})}};var ia=i(28460),io=i.n(ia),il=i(57443),id=i(23829);let ic=({iconHeight:e,delta:t})=>30+(e+5)*t,ih=class{isHoveringIcons(e){return this.icons.reduce((t,i)=>i.isHover(e)||t,!1)}isHoveringArrowIcon(e){return this.arrowIcon.isHover(e)}isHovering(e){return this.isHoveringIcons(e)||this.isHoveringArrowIcon(e)}containsToggled(){return this.icons.reduce((e,t)=>"toggled"===t.bodyIcon.state||e,!1)}handleHover(e){switch(this.state){case"single":case"multipleExpanded":return this.icons.reduce((t,i)=>{let r=i.hover(e);return r===id.l.None?t:{id:i.id,state:i.bodyIcon.state,target:r}},null);default:return null}}handleMouseDown({mousePoint:e,translatedPoint:t,onExpand:i,onCollapse:r}){if("multipleCollapsed"===this.state&&this.isHoveringIcons(t))this.state="multipleExpanded",this.arrowIcon.setAttr("isVisible",!0),this.icons.forEach(e=>e.bodyIcon.icon.setAttr("isVisible",!0)),i?.();else if("multipleExpanded"===this.state&&this.isHoveringArrowIcon(t))this.state="multipleCollapsed",this.arrowIcon.setAttr("isVisible",!1),this.icons.slice(2).forEach(e=>e.bodyIcon.icon.setAttr("isVisible",!1)),this.icons.forEach(e=>e.idle()),r?.();else if("multipleExpanded"===this.state||"single"===this.state)return this.icons.reduce((i,r,s)=>{let a=r.bodyIcon.icon.getHeight(),o=this.icons.length-+s,l={...e,y:e.y-ic({iconHeight:a,delta:o-1})},n=r.toggle(t);return n===id.l.None?i:{id:r.id,state:r.bodyIcon.state,target:n,point:l,toggled:"toggled"===r.bodyIcon.state}},null);return null}draw({timeX:e,baseY:t}){switch(this.state){case"single":this.icons.forEach(i=>{let r=e-i.bodyIcon.icon.getWidth()/2,s=t-30,a=r+i.bodyIcon.icon.getWidth();i.bodyIcon.icon.setData({x:r,y:s}),i.bodyIcon.redDot.setData({x:a-0,y:s+0}),i.closeIcon.icon.setData({x:a-4,y:s-7})});break;case"multipleCollapsed":{let[i,r]=[this.icons[0].bodyIcon.icon,this.icons[0].bodyIcon.redDot],[s,a]=[this.icons[1].bodyIcon.icon,this.icons[1].bodyIcon.redDot],o=e-i.getWidth()/2,l=t-30;s.setData({x:o,y:l}),r.setData({x:o+i.getWidth()-0,y:l+0}),i.setData({x:o,y:l-5}),a.setData({x:o+s.getWidth()-0,y:l-5+0});break}case"multipleExpanded":{let i=this.icons[0].bodyIcon.icon.getHeight();this.icons.forEach((r,s)=>{let a=e-r.bodyIcon.icon.getWidth()/2,o=t-ic({iconHeight:i,delta:this.icons.length-+s-1});r.bodyIcon.icon.setData({x:a,y:o}),r.bodyIcon.redDot.setData({x:a+r.bodyIcon.icon.getWidth()-0,y:o+0})}),this.arrowIcon.setData({x:e-this.arrowIcon.getWidth()/2,y:t-ic({iconHeight:i,delta:this.icons.length-1})-this.arrowIcon.getWidth()-5})}}}getShapes(){return[...tX()(this.icons,e=>e.getShapes()).reverse(),this.arrowIcon]}updateIcon(e){let t=this.icons.findIndex(t=>t.id===e.id);if(t<0)this.icons.push(new id.Z(e)),this.updateState();else{let i=this.icons[t];i.bodyIcon.setShowRedDot(e.showRedDot),i.setIcons({normalIconUrl:e.normalIconUrl,hoveredIconUrl:e.hoveredIconUrl,toggledIconUrl:e.toggledIconUrl,theme:e.theme})}}removeIcon(e){let t=this.icons.findIndex(t=>t.id===e);t<0||(this.icons.splice(t,1),this.updateState())}isEmpty(){return 0===this.icons.length}updateState(){this.state=this.icons.length<2?"single":"multipleCollapsed",this.arrowIcon.setAttr("isVisible",!1)}constructor({icons:e=[]}){this.arrowIcon=new il.Z({width:16,height:16,fillStyle:"#EAECEF",fill:!0,path:"M7.92598 8.11823L5.33333 5.52558L4.15482 6.70409L7.92606 10.4753L9.10457 9.29682L9.10449 9.29674L11.6973 6.70396L10.5188 5.52545L7.92598 8.11823Z"}),this.icons=e,this.updateState()}},iu=class extends tb{isIndependent(){return!0}updateImmediate(){this.clearShapes();let e=this.getParent();if(!e)return;let{mainPane:t,xAxis:i}=e;this.groupPairs.forEach(([e,t])=>{let r=(i?.getCoordOfValue(e)||0)+12;t.draw({timeX:r,baseY:0})}),this.addWidgetShapes(t,this.getShapes()),this.setAnnotationToWidgets([t])}getShapes(){if(this.lastMousePosition){let e=t1()(this.groupPairs,([,e])=>e.containsToggled()||e.isHovering(this.lastMousePosition));return this.flatGroupPairsToShapes(e,([,e])=>e.getShapes())}return this.flatGroupPairsToShapes(this.groupPairs,([,e])=>e.getShapes())}getDescription(){let{data:e,type:t,isNeedStore:i}=this.getConfig();return{id:this.id,data:e,type:t,isNeedStore:i}}getRenderPanes(){let e=this.getParent();if(!e)return[];let{mainPane:t}=e;return[t]}initCustomEvents(){this.on("mousedown",ef.Us.InformationMines,this._onMousedown.bind(this)),this.on("mousemove",ef.Us.InformationMines,this._onMousemove.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("timetable",({newVal:e})=>{this.clearShapes();let t=Object.keys(e);t.forEach(t=>{let i=+t,r=e[i],s=this.groups[i]||new ih({});r.forEach(e=>s.updateIcon(e));let a=r.map(e=>e.id),o=s.icons.map(e=>e.id);tz()(o,a).forEach(e=>s.removeIcon(e)),this.groups[i]=s,this.groups[i].isEmpty()&&delete this.groups[i]});let i=Object.keys(this.groups);tz()(i,t).forEach(e=>delete this.groups[e]);let r=io()(this.groups).map(([e,t])=>[+e,t]);this.groupPairs=t1()(r),this.forceUpdate()})}isHover(e){return this.groupPairs.some(([,t])=>t.isHovering(e))}setVisibleShapes(){}getVertexs(){return[]}blurInformationMines(){this._onMousedown({point:{x:-999,y:-999},originEvent:{pageY:0}})}_onMousedown(e){let{xAxis:t}=this.getParent()||{},{onToggled:i,onExpand:r,onCollapse:s}=this.getConfig(),a=this.getTranslatedPoint(e.point),o=this.groupPairs.reduce((i,[o,l])=>{let n=(t?.getCoordOfValue(o)||0)+12,d=e.originEvent.pageY+Math.abs(a.y);return l.handleMouseDown({translatedPoint:a,mousePoint:{x:n,y:d},onExpand:r,onCollapse:s})||i},null);o&&i?.(o),this.update()}_onMousemove(e){let{onHovered:t}=this.getConfig(),i=this.getTranslatedPoint(e.point),r=this.groupPairs.reduce((e,[,t])=>t.handleHover(i)||e,null);r&&t?.(r),this.lastMousePosition=i,this.update()}compeleDraw(){this.setAttrs({isComplete:!0})}forceUpdate(){this.setAttr("data",[]),this.update()}getTranslatedPoint(e){let t=this.getParent();if(!t)return{x:0,y:0};let{x:i,y:r}=t.transformPointToView(e);return{x:i,y:-r}}flatGroupPairsToShapes(e,t){return e.map(t).reduce((e,t)=>e.concat(t),[])}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.InformationMines,isNeedStore:!1,timetable:{},onToggled:void 0,onUntoggled:void 0,onExpand:void 0,onCollapse:void 0},this.groups={},this.groupPairs=[]}},ig="M6.20711 1.70711C5.81658 1.31658 5.18342 1.31658 4.79289 1.70711L1.70711 4.79289C1.31658 5.18342 1.31658 5.81658 1.70711 6.20711L4.79289 9.29289C5.18342 9.68342 5.81658 9.68342 6.20711 9.29289L9.29289 6.20711C9.68342 5.81658 9.68342 5.18342 9.29289 4.79289L6.20711 1.70711Z",im="tpsl-drag-event",ip=`mousemove.${im}`,ix=`mouseup.${im}`,ib=({status:e,candlestick:t})=>"loss"===e?t.getI18n("expected-loss","Expected Loss"):t.getI18n("expected-profit","Expected Profit");class iy{draw({panel:e}){let{mainPane:t}=e,i=e.getParent(),r=i.settingStore.getValue("@contextMenu.percentageScale"),s=e.getYPos(+this.price),a=0;if(this.priceLabel.setAttrs({background:this.priceBackgroundColor,color:this.priceColor,borderColor:this.priceBorderColor,data:{x:a,y:-s+.5},text:`${this.positionTypeText}${(0,ey._A)()?(0,ey.dD)(this.pnl):this.pnl}`}),a+=this.priceLabel.getWidth()-.5,this.quantityLabel.setAttrs({background:this.quantityBackgroundColor,color:this.quantityColor,borderColor:this.quantityBorderColor,data:{x:a,y:-s},text:(0,ey._A)()?(0,ey.dD)(this.quantity.toString()):this.quantity.toString(),borderRadius:this.showReverse?0:[0,4,4,0]}),a+=this.quantityLabel.getWidth()-1,this.reverseIcon.setAttrs({fillStyle:this.reverseIconColor,data:{x:a+(this.reverseIconBorder.getWidth()-this.reverseIcon.getWidth())/2,y:-s-this.reverseIcon.getHeight()/2},isVisible:this.showReverse}),this.reverseIconBorder.setAttrs({strokeStyle:this.reverseBorderColor,fillStyle:this.reverseBackgroundColor,data:{x:a,y:-s-this.reverseIconBorder.getHeight()/2},isVisible:this.showReverse,borderRadius:this.showClose?0:[0,4,4,0]}),a+=this.showReverse?this.reverseIconBorder.getWidth()-1:0,this.closeIcon.setAttrs({fillStyle:this.closeIconColor,data:{x:a+(this.closeIconBorder.getWidth()-this.closeIcon.getWidth())/2,y:-s-this.closeIcon.getHeight()/2},isVisible:this.showClose}),this.closeIconBorder.setAttrs({strokeStyle:this.closeIconBorderColor,fillStyle:this.closeIconBackgroundColor,data:{x:a,y:-s-this.closeIconBorder.getHeight()/2},isVisible:this.showClose}),a+=this.showClose?this.closeIconBorder.getWidth():0,this.horizontalLine.setAttrs({strokeStyle:this.lineColor,lineDash:this.lineDash,data:{p1:{x:a,y:-s},p2:{x:t.getBound().width,y:-s}}}),a+=16,this.tpslLabel.setAttrs({background:this.tpslLabelBackgroundColor,color:this.tpslLabelColor,borderColor:this.tpslLabelBorderColor,data:{x:a,y:-s+.5},isVisible:this.showTPSL}),this._isDraggingTPSL&&this.draggableTPSL){let a=t.getBound().width,o=+(this._tpslPrice||this.price),l=e.getYPos(o)||s;this.tpslHorizontalLine.setAttrs({strokeStyle:this.tpslDraggingTextLabelBorderColor,lineDash:this.lineDash,data:{p1:{x:0,y:-l},p2:{x:a,y:-l}},isVisible:!0});let n=this.onComputeTPSLLabel?.({initialPrice:this.price,currentPrice:this._tpslPrice}),d=0;this.tpslDraggingTextLabel.setAttrs({text:ib({status:n?.priceStatus,candlestick:i}),color:this.tpslDraggingTextLabelColor,borderColor:this.tpslDraggingTextLabelBorderColor,background:this.tpslDraggingTextLabelBackgroundColor,data:{x:d,y:-l},isVisible:!0}),d+=this.tpslDraggingTextLabel.getWidth()-1,this.tpslDraggingPriceLabel.setAttrs({text:n?.price,color:this.getPriceTPSLPriceColor(n?.priceStatus),borderColor:this.tpslDraggingPriceLabelBorderColor,background:this.tpslDraggingPriceLabelBackgroundColor,data:{x:d,y:-l},isVisible:!0});let c=a/2;this.tpslDistanceLine.setAttrs({strokeStyle:this.tpslDraggingTextLabelBorderColor,lineDash:this.lineDash,data:{p1:{x:c,y:-s},p2:{x:c,y:-l}},isVisible:!0}),this.diamond1.setAttrs({fillStyle:this.diamond1Color,strokeStyle:this.diamond1Color,data:{x:c-this.diamond1.getWidth()/2,y:-s-this.diamond1.getHeight()/2},isVisible:!0}),this.diamond2.setAttrs({fillStyle:this.diamond2Color,strokeStyle:this.diamond2Color,data:{x:c-this.diamond2.getWidth()/2,y:-l-this.diamond2.getHeight()/2},isVisible:!0}),this.tpslYLabel.setAttrs({background:this.tpslYLabelBackgroundColor,color:this.tpslYLabelColor,borderColor:this.tpslYLabelBorderColor,data:{x:1,y:-l},text:r?i.getFirstVisibleSeriesDataAsRelativePercentage({value:o}):(0,ey._A)()?(0,ey.dD)(e.formatterValue(o)):e.formatterValue(o),isVisible:!0})}else this.tpslHorizontalLine.setAttrs({isVisible:!1}),this.diamond1.setAttrs({isVisible:!1}),this.diamond2.setAttrs({isVisible:!1}),this.tpslDistanceLine.setAttrs({isVisible:!1}),this.tpslDraggingTextLabel.setAttrs({isVisible:!1}),this.tpslDraggingPriceLabel.setAttrs({isVisible:!1}),this.tpslYLabel.setAttrs({isVisible:!1});this.yLabel.setAttrs({background:this.priceLabelBackgroundColor,color:this.priceLabelColor,borderColor:this.priceLabelBorderColor,data:{x:1,y:-s},text:r?i.getFirstVisibleSeriesDataAsRelativePercentage({value:+this.price}):(0,ey._A)()?(0,ey.dD)(e.formatterValue(+this.price)):e.formatterValue(+this.price)});let o=this.reverseIconBorder.getAttr("data");this.reverseTooltip.setAttrs({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.reverseOrderTooltipText,data:{x:o.x+(this.reverseIconBorder.getWidth()-this.reverseTooltip.getWidth())/2,y:o.y-this.reverseIconBorder.getHeight()-0}});let l=this.tpslLabel.getAttr("data");this.tpslTooltip.setAttrs({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:i.getI18n("tpsl-tooltip","Drag to set TP/SL"),data:{x:l.x+(this.tpslLabel.getWidth()-this.tpslTooltip.getWidth())/2,y:l.y-this.tpslLabel.getHeight()-0-10}});let n=this.closeIconBorder.getAttr("data");this.closeTooltip.setAttrs({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.closeTooltipText,data:{x:n.x+(this.closeIconBorder.getWidth()-this.closeTooltip.getWidth())/2,y:n.y-this.closeIconBorder.getHeight()-0}})}getShapes(){return[...this.getMainPaneShapes(),...this.getPriceAxisPaneShapes(),...this.getTooltipShapes()]}getMainPaneShapes(){return[this.priceLabel,this.quantityLabel,this.reverseIconBorder,this.reverseIcon,this.closeIconBorder,this.closeIcon,this.horizontalLine,this.tpslHorizontalLine,this.tpslDistanceLine,this.diamond1,this.diamond2,this.tpslLabel,this.tpslDraggingTextLabel,this.tpslDraggingPriceLabel]}getTooltipShapes(){return[this.reverseTooltip,this.closeTooltip,this.tpslTooltip]}getPriceAxisPaneShapes(){return[this.yLabel,this.tpslYLabel]}isHovered(e){return this.tpslLabel.isHover(e)||this.reverseIconBorder.isHover(e)||this.closeIconBorder.isHover(e)}handleMouseMove({pt:e,isTopmost:t}){this.reverseTooltip.setAttrs({isVisible:this.showReverse&&!!this.reverseTooltip.getAttr("text")&&this.reverseIconBorder.isHover(e)&&t}),this.closeTooltip.setAttrs({isVisible:this.showClose&&!!this.closeTooltip.getAttr("text")&&this.closeIconBorder.isHover(e)&&t}),this.tpslTooltip.setAttrs({isVisible:this.showTPSL&&this.tpslLabel.isHover(e)&&t})}handleMouseDown({pt:e,panel:t,setDealed:i}){if(this.reverseIconBorder.isHover(e))return this.onClickReverse?.();if(this.closeIconBorder.isHover(e))return this.onClickClose?.();if(this.tpslLabel.isHover(e)){if(!this.draggableTPSL)return this.onClickTPSL?.();let e=t.getParent();i();let r=e.getAttr("crossHair");e.setAttr("crossHair",{...r,show:!1}),this._tpslPrice=this.price,t.mainPane.on("mousemove",ip,e=>{let{y:i}=t.transformPointToView(e.point),r=t.formatterValue(t.getPriceOfYPos(i));this._tpslPrice=r,this._isDraggingTPSL=!0}),tH.on(document,ix,()=>{t.mainPane.off("mousemove",ip),tH.off(document,ix),e.setAttr("crossHair",{...r,show:!0});let i=this._tpslPrice!==this.price;if(!this._isDraggingTPSL||!i)return this.onClickTPSL?.();this._isDraggingTPSL=!1,this.onDropTPSL?.({price:this._tpslPrice})})}}update(e){this.id=e.id,this.price=e.price,this.quantity=e.quantity,this.positionTypeText=e.positionTypeText,this.pnl=e.pnl,this.showReverse=e.showReverse,this.showTPSL=e.showTPSL,this.draggableTPSL=e.draggableTPSL,this.showClose=e.showClose,this.priceColor=e.priceColor,this.priceBackgroundColor=e.priceBackgroundColor,this.priceBorderColor=e.priceBorderColor,this.quantityColor=e.quantityColor,this.quantityBackgroundColor=e.quantityBackgroundColor,this.quantityBorderColor=e.quantityBorderColor,this.priceLabelColor=e.priceLabelColor,this.priceLabelBackgroundColor=e.priceLabelBackgroundColor,this.priceLabelBorderColor=e.priceLabelBorderColor,this.tpslYLabelColor=e.tpslYLabelColor,this.tpslYLabelBackgroundColor=e.tpslYLabelBackgroundColor,this.tpslYLabelBorderColor=e.tpslYLabelBorderColor,this.reverseIconColor=e.reverseIconColor,this.reverseBackgroundColor=e.reverseBackgroundColor,this.reverseBorderColor=e.reverseBorderColor,this.tpslLabelColor=e.tpslLabelColor,this.tpslLabelBackgroundColor=e.tpslLabelBackgroundColor,this.tpslLabelBorderColor=e.tpslLabelBorderColor,this.tpslDraggingTextLabelColor=e.tpslDraggingTextLabelColor,this.tpslDraggingTextLabelBorderColor=e.tpslDraggingTextLabelBorderColor,this.tpslDraggingTextLabelBackgroundColor=e.tpslDraggingTextLabelBackgroundColor,this.tpslDraggingPriceLabelProfitColor=e.tpslDraggingPriceLabelProfitColor,this.tpslDraggingPriceLabelLossColor=e.tpslDraggingPriceLabelLossColor,this.tpslDraggingPriceLabelFlatColor=e.tpslDraggingPriceLabelFlatColor,this.tpslDraggingPriceLabelBorderColor=e.tpslDraggingPriceLabelBorderColor,this.tpslDraggingPriceLabelBackgroundColor=e.tpslDraggingPriceLabelBackgroundColor,this.lineColor=e.lineColor,this.lineDash=e.lineDash,this.tooltipBorderColor=e.tooltipBorderColor,this.tooltipBackgroundColor=e.tooltipBackgroundColor,this.tooltipTextColor=e.tooltipTextColor,this.reverseOrderTooltipText=e.reverseOrderTooltipText,this.closeIconBackgroundColor=e.closeIconBackgroundColor,this.closeIconBorderColor=e.closeIconBorderColor,this.closeIconColor=e.closeIconColor,this.diamond1Color=e.diamond1Color,this.diamond2Color=e.diamond2Color,this.onClickTPSL=e.onClickTPSL,this.onClickReverse=e.onClickReverse,this.onClickClose=e.onClickClose,this.onDropTPSL=e.onDropTPSL,this.onComputeTPSLLabel=e.onComputeTPSLLabel}getPriceTPSLPriceColor(e){switch(e){case"profit":return this.tpslDraggingPriceLabelProfitColor;case"loss":return this.tpslDraggingPriceLabelLossColor;default:return this.tpslDraggingPriceLabelFlatColor}}constructor(e){this.draggableTPSL=!1,this._isDraggingTPSL=!1,this.update(e),this.priceLabel=new tg.__({background:this.priceBackgroundColor,color:this.priceColor,borderColor:this.priceBorderColor,dir:ef.Nm.Right,stroke:!0,fill:!0,padding:[12,2],fixHeight:21,lineWidth:1,borderRadius:[4,0,0,4],fontSize:12}),this.quantityLabel=new tg.__({background:this.quantityBackgroundColor,color:this.quantityColor,borderColor:this.quantityBorderColor,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:20,lineWidth:1,fontSize:12}),this.reverseIcon=new tg.jC({fillStyle:this.reverseIconColor,path:tT.Ep,width:10,height:10,fill:!0,stroke:!1}),this.reverseIconBorder=new tg.UL({fill:!0,strokeStyle:this.reverseBorderColor,fillStyle:this.reverseBackgroundColor,lineWidth:1,width:22,height:20}),this.reverseTooltip=new tg.__({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.reverseOrderTooltipText,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fixHeight:34,arrowHeight:4,borderRadius:8,lineWidth:1,isVisible:!1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"}),this.tpslTooltip=new tg.__({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fixHeight:34,arrowHeight:4,borderRadius:8,lineWidth:1,isVisible:!1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"}),this.tpslLabel=new tg.__({text:"TP/SL",background:this.tpslLabelBackgroundColor,color:this.tpslLabelColor,borderColor:this.tpslLabelBorderColor,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[5,2],fixHeight:21,lineWidth:1,borderRadius:4,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"}),this.horizontalLine=new tg.x1({strokeStyle:this.lineColor,lineDash:this.lineDash}),this.tpslHorizontalLine=new tg.x1({strokeStyle:this.lineColor,lineDash:this.lineDash,isVisible:!1}),this.tpslDistanceLine=new tg.x1({strokeStyle:this.lineColor,lineDash:this.lineDash,isVisible:!1}),this.tpslDraggingTextLabel=new tg.__({color:this.tpslDraggingTextLabelColor,borderColor:this.tpslDraggingTextLabelBorderColor,background:this.tpslDraggingTextLabelBackgroundColor,fill:!0,stroke:!0,padding:[6,0],borderRadius:[4,0,0,4],fixHeight:20,lineWidth:1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova",isVisible:!1}),this.tpslDraggingPriceLabel=new tg.__({borderColor:this.tpslDraggingPriceLabelBorderColor,background:this.tpslDraggingPriceLabelBackgroundColor,fill:!0,stroke:!0,padding:[6,0],borderRadius:[0,4,4,0],fixHeight:20,lineWidth:1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova",isVisible:!1}),this.yLabel=new tg.__({background:this.priceLabelBackgroundColor,color:this.priceLabelColor,borderColor:this.priceLabelBorderColor,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[5,0],borderRadius:4,fixHeight:22,lineWidth:1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova"}),this.tpslYLabel=new tg.__({background:this.priceLabelBackgroundColor,color:this.priceLabelColor,borderColor:this.priceLabelBorderColor,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[5,0],borderRadius:4,fixHeight:22,lineWidth:1,fontSize:12,fontStyle:"400",fontFamily:"BinanceNova",isVisible:!1}),this.closeIcon=new tg.jC({path:tT.aE,width:10,height:11,fillStyle:this.closeIconColor,fill:!0,stroke:!1}),this.closeIconBorder=new tg.UL({fill:!0,strokeStyle:this.closeIconBorderColor,fillStyle:this.closeIconBackgroundColor,lineWidth:1,width:22,height:19,borderRadius:[0,4,4,0]}),this.closeTooltip=new tg.__({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.closeTooltipText,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fixHeight:34,arrowHeight:4,borderRadius:8,lineWidth:1,isVisible:!1}),this.diamond1=new tg.jC({width:11,height:11,path:ig,fill:!0,stroke:!0,fillStyle:this.diamond1Color,strokeStyle:this.diamond1Color,isVisible:!1}),this.diamond2=new tg.jC({width:11,height:11,path:ig,fill:!0,stroke:!0,fillStyle:this.diamond2Color,strokeStyle:this.diamond2Color,isVisible:!1})}}let iv=class extends tb{updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i}=e,r=[];this.instances.forEach(s=>{s.draw({panel:e}),this.addWidgetShapes(t,s.getMainPaneShapes()),this.addWidgetShapes(i,s.getPriceAxisPaneShapes()),r.push(...s.getTooltipShapes())}),this.addWidgetShapes(t,r),this.setAnnotationToWidgets([t,i])}getShapes(){return tX()(this.instances,e=>e.getShapes())}isIndependent(){return!0}getDescription(){let{type:e,isNeedStore:t}=this.getConfig();return{id:this.id,type:e,isNeedStore:t}}getEditAttribute(){let{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:s,isLock:a}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:ef.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:s,showLock:!1,showDelete:!1}}getRenderPanes(){let e=this.getParent();if(!e)return[];let{mainPane:t,axisPane:i}=e;return[t,i]}initCustomEvents(){this.on("mousemove",this._onMousemove.bind(this)),this.on("mousedown",this._onMousedown.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("positions",({newVal:e})=>{this.clearShapes();let t=e.map(e=>e.id),i=this.instances.map(e=>e.id),r=tW()(i,t),s=tz()(i,r),a=tz()(r,t);r.forEach(t=>{let i=e.find(e=>e.id===t),r=this.instances.find(e=>e.id===t);i&&r&&r.update(i)}),s.forEach(e=>{let t=this.instances.findIndex(t=>t.id===e);t<0||this.instances.splice(t,1)}),a.forEach(t=>{let i=e.find(e=>e.id===t);i&&this.instances.push(new iy(i))}),this.forceUpdate()})}isHover(e){return this.instances.some(t=>t.isHovered(e))}updateBackground(){}setVisibleShapes(){}getVertexs(){return[]}forceUpdate(){this.setAttr("data",[]),this.update()}_onMousemove(e){let t=this.getParent();if(!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.getTopmostInstance(s);this.instances.forEach(e=>e.handleMouseMove({pt:s,isTopmost:e.id===a?.id})),this.update()}_onMousedown(e){let t=this.getParent();if(e.isDealed||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.getTopmostInstance(s);a?.handleMouseDown({pt:s,panel:t,setDealed:()=>e.isDealed=!0})}getTopmostInstance(e){return this.instances.reduce((t,i)=>i.isHovered(e)?i:t,void 0)}constructor(...e){super(...e),this.config={...b()(tb.defaultConfig),type:ef.Us.Positions,positions:[],isNeedStore:!1},this.instances=[]}};var iC=i(68015),iw=i.n(iC);let iS=class{update({id:e,price:t,text:i,textBackground:r,textColor:s,textBorderColor:a,closeBackground:o,closeColor:l,closeBorderColor:n,closeTooltipText:d,tooltipBackgroundColor:c,tooltipTextColor:h,tooltipBorderColor:u,lineColor:g,lineDash:m,arrowColor:p,showCloseButton:x,onClose:f,isPriceChangeable:b,onPriceChanged:y,onClick:v}){this.id=e,this.initialPrice=t,this.currentPrice=t,this.text=i,this.textBackground=r,this.textColor=s,this.textBorderColor=a,this.closeBackground=o,this.closeColor=l,this.closeBorderColor=n,this.lineColor=g,this.lineDash=m,this.arrowColor=p,this.showCloseButton=x,this.onClose=f,this.isPriceChangeable=b,this.onPriceChanged=y,this.onClick=v,this.closeTooltipText=d,this.tooltipBackgroundColor=c,this.tooltipTextColor=h,this.tooltipBorderColor=u}getMainPaneShapes(){return[this._line,this._label,this._closeButton,this._closeButtonIcon,this._closeTooltip]}getPriceAxisPaneShapes(){return[this._arrow]}getShapes(){return[...this.getMainPaneShapes(),...this.getPriceAxisPaneShapes()]}_getStatusColor(e){return this._isDragging?(0,eb.DZ)(e,.7):e}draw(e){let t=e.getYPos(this.currentPrice),i=-t,{width:r}=e.getMainBound(),s=this._isHovered||this._isDragging;this._line.setAttrs({data:{p1:{x:0,y:i},p2:{x:e.mainPane.getBound().width,y:i}},strokeStyle:this.lineColor,lineDash:this.lineDash});let a=e.getParent().getAttr("isMobile")?0:.25*r;this._label.setAttrs({data:{x:a,y:i},text:this.text,background:this._getStatusColor(this.textBackground),color:this._getStatusColor(this.textColor),borderColor:this._getStatusColor(this.textBorderColor),borderRadius:this.showCloseButton?[4,0,0,4]:[4,4,4,4],isVisible:s}),a+=this.showCloseButton?this._label.getWidth()-1:0,this._closeButton.setAttrs({data:{x:a,y:-t-this._closeButton.getHeight()/2},strokeStyle:this._getStatusColor(this.closeBorderColor),fillStyle:this._getStatusColor(this.closeBackground),isVisible:this.showCloseButton&&s}),this._closeButtonIcon.setAttrs({data:{x:a+(this._closeButton.getWidth()-this._closeButtonIcon.getWidth())/2,y:-t-this._closeButtonIcon.getHeight()/2},fillStyle:this._getStatusColor(this.closeColor),isVisible:this.showCloseButton&&s});let o=this._closeButton.getAttr("data");this._closeTooltip.setAttrs({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.closeTooltipText,data:{x:o.x+(this._closeButton.getWidth()-this._closeTooltip.getWidth())/2,y:o.y-4-this._closeButton.getHeight()}});let l=i-3;this._arrow.setData([{x:0,y:l},{x:5,y:l+3},{x:0,y:l+6}])}isHovered(e){let t=this._line.isHover(e)||this._closeButton.isHover(e);return this._isHovered=t,t}handleMouseMove({pt:e,isTopmost:t}){this._closeTooltip.setAttrs({isVisible:this.showCloseButton&&!!this._closeTooltip.getAttr("text")&&this._closeButton.isHover(e)&&t})}handleMouseDown({pt:e,panel:t,setDealed:i}){(this._closeButton.isHover(e)||this._label.isHover(e)||this._line.isHover(e))&&this.onClick?.(),this.showCloseButton&&this._closeButton.isHover(e)?(i(),this.onClose?.({id:this.id,initialPrice:this.initialPrice,currentPrice:this.currentPrice})):this.isPriceChangeable&&(this._line.isHover(e)||this._label.isHover(e))&&(i(),t.mainPane.on("mousemove",`${ef.Us.Alerts}`,e=>{let{y:i}=t.transformPointToView(e.point),r=t.getPriceOfYPos(i);this.currentPrice=r,this._isDragging=!0}),tH.on(document,`mouseup.${ef.Us.Alerts}`,()=>{if(t.mainPane.off("mousemove",`${ef.Us.Alerts}`),tH.off(document,`mouseup.${ef.Us.Alerts}`),this._isDragging=!1,this.initialPrice===this.currentPrice)return;let e=t.getParent().getAttr("precision"),i=iw()(this.initialPrice,e),r=iw()(this.currentPrice,e);this.onPriceChanged?.({id:this.id,initialPrice:i,currentPrice:r})}))}constructor(e){this.textBackground="#0ECB81",this.textColor=ef.E.White,this.textBorderColor="#474D57",this.closeBackground="#0ECB81",this.closeColor=ef.E.White,this.closeBorderColor="#474D57",this.closeTooltipText="",this.tooltipBackgroundColor="#0ECB81",this.tooltipTextColor="#0ECB81",this.tooltipBorderColor="#474D57",this.lineColor="#0ECB81",this.lineDash=[1,1],this.arrowColor="#0ECB81",this.showCloseButton=!1,this.isPriceChangeable=!1,this._isHovered=!1,this._isDragging=!1,this.update(e),this._label=new tg.__({background:e.textBackground,color:e.textColor,borderColor:e.textBorderColor,dir:ef.Nm.Right,stroke:!0,fill:!0,padding:[5,1],fixHeight:21,lineWidth:1,borderRadius:[4,0,0,4]}),this._line=new tg.x1({strokeStyle:e.lineColor,lineDash:e.lineDash}),this._arrow=new tg.y$({fillStyle:e.arrowColor,stroke:!1}),this._closeButtonIcon=new tg.jC({path:tT.aE,width:12,height:12,fillStyle:e.closeColor,fill:!0}),this._closeButton=new tg.UL({fill:!0,strokeStyle:e.closeBorderColor,fillStyle:e.closeBackground,lineWidth:1,width:20,height:20,borderRadius:[0,4,4,0]}),this._closeTooltip=new tg.__({background:this.tooltipBackgroundColor,color:this.tooltipTextColor,borderColor:this.tooltipBorderColor,text:this.closeTooltipText,dir:ef.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fixHeight:38,arrowHeight:4,borderRadius:8,lineWidth:1,isVisible:!1,fontSize:12,fontStyle:"400",fontFamily:"BinancePlex"})}},iT=class extends tb{isIndependent(){return!0}updateImmediate(){let e=this.getParent();if(!e)return;let{mainPane:t,axisPane:i}=e;this.instances.forEach(r=>{r.draw(e),this.addWidgetShapes(t,r.getMainPaneShapes()),this.addWidgetShapes(i,r.getPriceAxisPaneShapes())}),this.setAnnotationToWidgets([t,i])}getShapes(){return tX()(this.instances,e=>e.getShapes())}getDescription(){let{type:e,isNeedStore:t}=this.getConfig();return{id:this.id,type:e,isNeedStore:t}}getEditAttribute(){let{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:s,isLock:a}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:ef.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:s,showLock:!1,showDelete:!1}}getRenderPanes(){let e=this.getParent();return e?[e.mainPane,e.axisPane]:[]}initCustomEvents(){this.on("mousemove",this.handleMouseMove.bind(this)),this.on("mousedown",this.handleMouseDown.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("alerts",({newVal:e})=>{this.clearShapes();let t=e.map(e=>e.id),i=this.instances.map(e=>e.id),r=tW()(i,t),s=tz()(i,r),a=tz()(r,t);r.forEach(t=>{let i=e.find(e=>e.id===t),r=this.instances.find(e=>e.id===t);i&&r&&r.update(i)}),s.forEach(e=>{let t=this.instances.findIndex(t=>t.id===e);t<0||this.instances.splice(t,1)}),a.forEach(t=>{let i=e.find(e=>e.id===t);i&&this.instances.push(new iS(i))}),this.updateImmediate()})}isHover(e){return this.instances.some(t=>t.isHovered(e))}handleMouseMove(e){let t=this.getParent();if(!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.getTopmostHoveredInstance(s);this.instances.forEach(e=>e.handleMouseMove({pt:s,isTopmost:e.id===a?.id})),this.update()}handleMouseDown(e){let t=this.getParent();if(e.isDealed||!t)return;let{x:i,y:r}=t.transformPointToView(e.point),s={x:i,y:-r},a=this.getTopmostHoveredInstance(s);a?.handleMouseDown({pt:s,panel:t,setDealed:()=>{e.isDealed=!0}})}getTopmostHoveredInstance(e){let t;for(let i=this.instances.length-1;i>-1;i--)if(this.instances[i].isHovered(e)){t=this.instances[i];break}return t}setVisibleShapes(){}getVertexs(){return[]}constructor(...e){super(...e),this.instances=[],this.config={...b()(tb.defaultConfig),type:ef.Us.Alerts,alerts:[],isNeedStore:!1}}},iA={[ef.Us.TrendLine]:ty,[ef.Us.HorizontalExtendedLine]:tv,[ef.Us.ExtendTrendLine]:tw,[ef.Us.RayLine]:tV,[ef.Us.FibonacciLine]:tB,[ef.Us.InfoLine]:tk,[ef.Us.ParallelLine]:tE,[ef.Us.Rectangle]:tP,[ef.Us.Text]:tZ,[ef.Us.PriceLine]:tj,[ef.Us.ArrowLine]:tR,[ef.Us.HorizontalLine]:tI,[ef.Us.VerticalLine]:tI,[ef.Us.CrossLine]:tI,[ef.Us.LeftArrow]:tD,[ef.Us.RightArrow]:tD,[ef.Us.UpArrow]:tD,[ef.Us.DownArrow]:tD,[ef.Us.OpenOrders]:tq,[ef.Us.Positions]:iv,[ef.Us.LabelLines]:it,[ef.Us.SingleLabelLines]:ir,[ef.Us.Alerts]:iT,[ef.Us.ExecutionOrders]:t9,[ef.Us.ToolTip]:is,[ef.Us.InformationMines]:iu},i_=e=>{switch(e){case ef.Us.TrendLine:case ef.Us.HorizontalExtendedLine:case ef.Us.ExtendTrendLine:case ef.Us.RayLine:case ef.Us.FibonacciLine:case ef.Us.InfoLine:case ef.Us.ParallelLine:case ef.Us.Rectangle:case ef.Us.Text:case ef.Us.PriceLine:case ef.Us.ArrowLine:case ef.Us.HorizontalLine:case ef.Us.VerticalLine:case ef.Us.CrossLine:case ef.Us.LeftArrow:case ef.Us.RightArrow:case ef.Us.UpArrow:case ef.Us.DownArrow:return!0;case ef.Us.OpenOrders:case ef.Us.Positions:case ef.Us.LabelLines:case ef.Us.SingleLabelLines:case ef.Us.Alerts:case ef.Us.ExecutionOrders:case ef.Us.ToolTip:case ef.Us.InformationMines:default:return!1}},iL=e=>{switch(e){case ef.Us.TrendLine:case ef.Us.HorizontalExtendedLine:case ef.Us.ExtendTrendLine:case ef.Us.RayLine:case ef.Us.FibonacciLine:case ef.Us.InfoLine:case ef.Us.ParallelLine:case ef.Us.Rectangle:case ef.Us.Text:case ef.Us.PriceLine:case ef.Us.ArrowLine:case ef.Us.HorizontalLine:case ef.Us.VerticalLine:case ef.Us.CrossLine:case ef.Us.LeftArrow:case ef.Us.RightArrow:case ef.Us.UpArrow:case ef.Us.DownArrow:return!0;default:return!1}},ik="DRAW_EVENT",iI=class extends tr.Z{setCompleteDrawCallback(e){this._completeDrawCallback=e}reset(){if(this._isAbort){let e=this.getSelectAnnotation();e&&!e.getAttr("isComplete")&&e.remove(),this._candleInstance.setAnnotationLockStatus(!1)}this.clearEvents()}disAbleDragAnnotations(){this._isAbort=!0,this._candleInstance.setAnnotationLockStatus(!0)}completeCallbackHook(e){if(this._isAbort=!1,this._candleInstance.setAnnotationLockStatus(!1),e&&this._candleInstance.selectAnnotation(e,e.getAttr("type")),this._completeDrawCallback&&this._completeDrawCallback(),this.getAttr("isKeepDrawing")){let e=this.getAttr("nextAction"),t=this.getActionByType(e);t&&t()}else this.setAttr("nextAction",ef.Us.CrossHairCursor),this._completeDrawCallback=null}transformJSONToAnnotation(e,t){let{type:i}=e;if(!i)return;let r=iA[i];if(!r)return;let s=new r,a=i_(i);return s.setParent(t||this._getEditorPanel()).setAttrs({isComplete:!0,...e,isSaveable:a,isEdit:!1}),s}initHotkeys(){(0,th.Z)("backspace, del",()=>{this.deleteCurrentAnnotation()}),(0,th.Z)("esc",()=>{this.clear()})}initEvents(){this.watch("magnetEnabled",({newVal:e})=>{if(e){let e=this._candleInstance.getI18n(eY.Wi.NOTIFICATION_MAGNET_ENABLED,"Magnet mode enabled. Drawings will be anchored to the closest OHLC value");this._candleInstance.addNotification({id:(0,tu.Z)(),text:e,lifetime:3e3,iconType:"warning"})}})}clear(){this.clearEvents(),this.makeAnnotationsDestroy(),this.completeCallbackHook()}clearEvents(){let e=this._getEditorPanel();if(e){let{mainPane:t}=e;t.off("mousedown",ik),t.off("mousemove",ik),t.off("mouseup",ik),t.off("click",ik),t.off("dbclick",ik)}}registerActions(){let e=this._getEditorPanel();if(e){let t={[ef.Us.TrendLine]:this._drawExtendLine.bind(this,e,ty,ef.Us.TrendLine),[ef.Us.HorizontalExtendedLine]:this._drawHorizontalExtendedLine.bind(this,e,tv,ef.Us.HorizontalExtendedLine),[ef.Us.ExtendTrendLine]:this._drawExtendLine.bind(this,e,tw,ef.Us.ExtendTrendLine),[ef.Us.RayLine]:this._drawExtendLine.bind(this,e,tV,ef.Us.RayLine),[ef.Us.InfoLine]:this._drawExtendLine.bind(this,e,tk,ef.Us.InfoLine),[ef.Us.ArrowLine]:this._drawExtendLine.bind(this,e,tR,ef.Us.ArrowLine),[ef.Us.HorizontalLine]:this._drawStraightLine.bind(this,e,ef.Us.HorizontalLine),[ef.Us.VerticalLine]:this._drawStraightLine.bind(this,e,ef.Us.VerticalLine),[ef.Us.CrossLine]:this._drawStraightLine.bind(this,e,ef.Us.CrossLine),[ef.Us.Rectangle]:this._drawRectangle.bind(this,e),[ef.Us.ParallelLine]:this._drawParallelChannel.bind(this,e),[ef.Us.FibonacciLine]:this._drawFibLine.bind(this,e),[ef.Us.LeftArrow]:this._drawArrow.bind(this,e,ef.Us.LeftArrow),[ef.Us.RightArrow]:this._drawArrow.bind(this,e,ef.Us.RightArrow),[ef.Us.UpArrow]:this._drawArrow.bind(this,e,ef.Us.UpArrow),[ef.Us.DownArrow]:this._drawArrow.bind(this,e,ef.Us.DownArrow),[ef.Us.Text]:this._drawText.bind(this,e),[ef.Us.PriceLine]:this._drawPriceLine.bind(this,e)};Object.keys(t).forEach(e=>{this._actionsMapping.set(e,()=>{e!==ef.Us.KeepDrawing&&(this.clearEvents(),this.disAbleDragAnnotations()),t[e]()})})}}getActionByType(e){return this._actionsMapping.get(e)}setNextAction(e){this.setAttr("nextAction",e)}getShapeById(e){return this._getEditorPanel().getAnnotations().find(t=>t.id===e)}manageOrders(e){this._openOrders.setAttrs({orders:e}),this._getEditorPanel().update(ef.mB.Marks)}managePositions(e){this._positions.setAttrs({positions:e}),this._getEditorPanel().update(ef.mB.Marks)}manageExecutionOrders(e){this._executionOrders.setAttr("orders",e),this._getEditorPanel().update(ef.mB.Marks)}manageInformationMines(e){this._informationMines.setAttrs(e),this._getEditorPanel().update(ef.mB.Marks)}manageLabelLines(e){this._labelLines.setAttrs({labels:e}),this._getEditorPanel().update(ef.mB.Marks)}manageSingleLabelLines(e){this._singleLabelLines.setAttrs({labels:e}),this._getEditorPanel().update(ef.mB.Marks)}manageAlerts(e){this._alerts.setAttrs({alerts:e}),this._getEditorPanel().update(ef.mB.Marks)}getSelectAnnotation(){let e=this._getEditorPanel().getAnnotations();for(let t=0,i=e.length;t<i;t++)if(e[t].getAttr("isEdit"))return e[t]}clearSelectAnnotation(){let e=this._getEditorPanel().getAnnotations();for(let t=0,i=e.length;t<i;t++){let{isEdit:i}=e[t].getConfig();i&&e[t].setAttr("isEdit",!1)}}deleteAllAnnotation(){let e=this._getEditorPanel(),t=e.getAnnotations();for(let e=0,i=t.length;e<i;e++)t[e].isIndependent()||t[e].remove(!1);t.length>0&&e.update(ef.mB.Marks)}deleteCurrentAnnotation(){let e=this._getEditorPanel().getAnnotations().find(e=>e.getAttr("isEdit"));e&&e.remove()}makeAnnotationsDestroy(){let e=this._getEditorPanel().getAnnotations();for(let t=0,i=e.length;t<i;t++)e[t].destroy();this._candleInstance.unSelectAnnotation()}keepDraw(){let e=this.getAttr("isKeepDrawing");this.setAttr("isKeepDrawing",!e)}toggleMagnet(){let e=this.getAttr("magnetEnabled");this.setAttr("magnetEnabled",!e)}blurInformationMines(){this._informationMines.blurInformationMines()}shouldMagnet(){let e=this.getAttr("magnetEnabled"),t=this.getSelectAnnotation(),i=!!t?.getAttr("isEdit");return(iL(this.getAttr("nextAction"))||i)&&e}_drawExtendLine(e,t,i){let r=new t().setParent(e),s=null,a=null,{mainPane:o}=e;o.on("mousedown",ik,t=>{t.isDealed=!0,s||(r.setAttrs({color:tb.getCacheStyle(i,"color"),lineWidth:tb.getCacheStyle(i,"lineWidth"),lineStyle:tb.getCacheStyle(i,"lineStyle"),isSaveable:!0}),s=this.getPoint({panel:e,point:t.point})),o.off("mousemove",ik),o.on("mousemove",ik,t=>{t.isDealed=!0,a=this.getPoint({panel:e,point:t.point}),r.setData({p1:s,p2:a}),r.update()}),o.once("mouseup",ik,()=>{s&&a&&(!(0,eb.Fr)(s.time-a.time)||!(0,eb.Fr)(s.value-a.value))&&(o.off(ik),r.compeleDraw(),r.recoverDragVertexts(),this.completeCallbackHook(r))})},!0)}_drawHorizontalExtendedLine(e,t,i){let r=new t().setParent(e),s=null,a=null,{mainPane:o}=e;o.on("mousedown",ik,t=>{t.isDealed=!0,s||(r.setAttrs({color:tb.getCacheStyle(i,"color"),lineWidth:tb.getCacheStyle(i,"lineWidth"),lineStyle:tb.getCacheStyle(i,"lineStyle"),isSaveable:!0}),s=this.getPoint({panel:e,point:t.point})),o.off("mousemove",ik),o.on("mousemove",ik,t=>{t.isDealed=!0,a=e.transformAbsoluteXYToPlotItem(t.point),r.setData({p1:s,p2:{...a,value:s?.value}}),r.update()}),o.once("mouseup",ik,()=>{s&&a&&(!(0,eb.Fr)(s.time-a.time)||!(0,eb.Fr)(s.value-a.value))&&(o.off(ik),r.compeleDraw(),r.recoverDragVertexts(),this.completeCallbackHook(r))})},!0)}_drawStraightLine(e,t){let i=new tI().setParent(e),{mainPane:r}=e;r.once("click",ik,r=>{i.setAttrs({type:t,color:tb.getCacheStyle(t,"color"),lineWidth:tb.getCacheStyle(t,"lineWidth"),lineStyle:tb.getCacheStyle(t,"lineStyle"),isSaveable:!0}),i.setData(this.getPoint({panel:e,point:r.point})),i.compeleDraw(),this.completeCallbackHook(i)})}_drawPriceLine(e){let t=new tj().setParent(e),{mainPane:i}=e;i.once("click",ik,i=>{t.setAttrs({color:tb.getCacheStyle(ef.Us.PriceLine,"color"),lineWidth:tb.getCacheStyle(ef.Us.PriceLine,"lineWidth"),lineStyle:tb.getCacheStyle(ef.Us.PriceLine,"lineStyle"),isSaveable:!0}),t.setData(this.getPoint({panel:e,point:i.point})),t.compeleDraw(),this.completeCallbackHook(t)})}_drawRectangle(e){let t=new tP().setParent(e),i=null,r=null,{mainPane:s}=e;s.on("mousedown",ik,a=>{a.isDealed=!0,i||(t.setAttrs({color:tb.getCacheStyle(ef.Us.Rectangle,"color"),lineWidth:tb.getCacheStyle(ef.Us.Rectangle,"lineWidth"),lineStyle:tb.getCacheStyle(ef.Us.Rectangle,"lineStyle"),background:tb.getCacheStyle(ef.Us.Rectangle,"background"),isSaveable:!0}),i=this.getPoint({panel:e,point:a.point})),r||(r=this.getPoint({panel:e,point:a.point})),s.off("mousemove",ik),s.on("mousemove",ik,s=>{s.isDealed=!0,r=this.getPoint({panel:e,point:s.point}),t.setData({p1:i,p2:r}),t.update()}),s.once("mouseup",ik,()=>{i&&r&&(!(0,eb.Fr)(i.time-r.time)||!(0,eb.Fr)(i.value-r.value))&&(s.off(ik),t.compeleDraw(),t.recoverDragVertexts(),this.completeCallbackHook(t))})},!0)}_drawParallelChannel(e){let t=new tE().setParent(e),i=null,r=null,s=null,{mainPane:a}=e;a.on("mousedown",ik,o=>{o.isDealed=!0;let l=this.getPoint({panel:e,point:o.point});i?r?s||(s=l):r=l:(t.setAttrs({color:tb.getCacheStyle(ef.Us.ParallelLine,"color"),lineWidth:tb.getCacheStyle(ef.Us.ParallelLine,"lineWidth"),lineStyle:tb.getCacheStyle(ef.Us.ParallelLine,"lineStyle"),background:tb.getCacheStyle(ef.Us.ParallelLine,"background"),isSaveable:!0}),i=l),a.off("mousemove",ik),a.on("mousemove",ik,a=>{a.isDealed=!0;let o=this.getPoint({panel:e,point:a.point});r?s||t.setData({p1:i,p2:r,p3:o}):t.setData({p1:i,p2:o,p3:o}),t.update()}),a.once("mouseup",ik,()=>{i&&r&&s&&(a.off(ik),t.compeleDraw(),t.recoverDragVertexts(),this.completeCallbackHook(t))})},!0)}_drawFibLine(e){let t=new tB().setParent(e),i=null,r=null,{mainPane:s}=e;s.on("mousedown",ik,a=>{a.isDealed=!0,i||(t.setAttrs({color:tb.getCacheStyle(ef.Us.FibonacciLine,"color"),lineWidth:tb.getCacheStyle(ef.Us.FibonacciLine,"lineWidth"),lineStyle:tb.getCacheStyle(ef.Us.FibonacciLine,"lineStyle"),background:tb.getCacheStyle(ef.Us.FibonacciLine,"background"),isSaveable:!0}),i=this.getPoint({panel:e,point:a.point})),s.off("mousemove",ik),s.on("mousemove",ik,s=>{s.isDealed=!0,r=this.getPoint({panel:e,point:s.point}),t.setData({p1:i,p2:r}),t.update()}),s.once("mouseup",ik,()=>{i&&r&&(!(0,eb.Fr)(i.time-r.time)||!(0,eb.Fr)(i.value-r.value))&&(s.off(ik),t.compeleDraw(),t.recoverDragVertexts(),this.completeCallbackHook(t))})},!0)}_drawArrow(e,t){let i=new tD().setParent(e),{mainPane:r}=e;r.once("mousedown",ik,r=>{i.setAttrs({type:t,color:tb.getCacheStyle(t,"color"),isSaveable:!0}),i.setData(this.getPoint({panel:e,point:r.point})),i.compeleDraw(),this.completeCallbackHook(i)})}_drawText(e){let t=new tZ().setParent(e);t.createTextAreaElement();let{mainPane:i}=e;i.once("click",ik,i=>{t.setAttrs({textColor:tb.getCacheStyle(ef.Us.Text,"textColor"),textFontSize:tb.getCacheStyle(ef.Us.Text,"textFontSize"),isTextBold:tb.getCacheStyle(ef.Us.Text,"isTextBold"),background:tb.getCacheStyle(ef.Us.Text,"background"),isSaveable:!0}),t.setAttr("isTextEdit",!0).setData(this.getPoint({panel:e,point:i.point})),i.originEvent.stopPropagation(),this.completeCallbackHook(t),i.isDealed=!0})}_getEditorPanel(){return this._candleInstance.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE)}getPoint({point:e,panel:t}){let i=t.transformAbsoluteXYToPlotItem(e),r=t.transformPointToView(e),s=t.magnetizeY({y:r.y});return{...i,value:s.price}}constructor(e){super(),this.config={...b()(tr.Z.defaultConfig),isKeepDrawing:!1,magnetEnabled:!1,nextAction:ef.Us.CrossHairCursor},this._actionsMapping=new Map,this._isAbort=!1,this._candleInstance=e,this.initEvents(),this.initHotkeys(),this.registerActions(),this._informationMines=this.transformJSONToAnnotation({timetable:{},type:ef.Us.InformationMines}),this._openOrders=this.transformJSONToAnnotation({timetable:{},type:ef.Us.OpenOrders}),this._positions=this.transformJSONToAnnotation({timetable:{},type:ef.Us.Positions}),this._executionOrders=this.transformJSONToAnnotation({orders:[],type:ef.Us.ExecutionOrders}),this._labelLines=this.transformJSONToAnnotation({labels:[],type:ef.Us.LabelLines}),this._singleLabelLines=this.transformJSONToAnnotation({labels:[],type:ef.Us.SingleLabelLines}),this._alerts=this.transformJSONToAnnotation({alerts:[],type:ef.Us.Alerts})}},iP=()=>({theme:"",margin:{left:0,right:0,top:0,bottom:8},xAxis:{height:32,scaleRatio:.0025},yAxis:{width:40,isFloat:!1},crossHair:{show:!0,style:eY.Li.CROSSHAIR},grid:{show:!0},candlestick:{barWeight:.8,dataFormatter:ef.aI.Normal},indicators:[]});var iE=i(15093);let iB=class extends to.ZP{draw(e,t){this.drawBorder(e,t)}constructor(...e){super(...e),this.drawBorder=(e,t)=>{let{width:i,height:r}=t;e.beginPath(),eG.Z.drawLine(e,0,-r,i,-r),eG.Z.drawLine(e,i-1,0,i-1,-r),e.stroke()},this.drawTicks=(e,{tickData:t,bound:i,type:r,timezone:s})=>{t.forEach(t=>{let a=(0,eb.sL)(t.v,r,s);if(a){let r=e.measureText(a),s=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent,o=(i.height+s)/2;eG.Z.drawText(e,a,t.p,-o)}})}}},iN=class extends ta.Z{getCtxsByDrawMode(e){let t=this.getRoot(),i=t.getContext(),r=t.getMarkContext();return({[ef.mB.All]:[i,r],[ef.mB.Resize]:[i,r],[ef.mB.Marks]:[r]})[e]||[]}clear(e=[]){let t=this.getClearBound();e.forEach(e=>eG.Z.clearRect(e,t))}render(e){let t=this.getRoot(),i=t.getContext(),r=t.getMarkContext(),s=this.getCtxsByDrawMode(e);if(this.clear(s),this.initialCtxs(s),e===ef.mB.All||e===ef.mB.Resize){this.createClipBound(i);let e=t.getColorFromColorTable("frame.borderLineColor");(0,eb.ui)(i,{strokeStyle:e}),this.renderer.draw(i,this.bound);let r=this.getRoot().getXAxis(),s=this.getTicksData(),a=r.getTickScale(),o=t.getColorFromColorTable("axis.tickLineColor"),l=t.getColorFromColorTable("axis.tickTextColor");(0,eb.ui)(i,{strokeStyle:o,fillStyle:l,textBaseline:ef.Wr.Top,textAlign:ef.PH.Center,font:"400 12px BinanceNova"});let n=t.dataFeed?.timezone;this.renderer.drawTicks(i,{tickData:s,bound:this.bound,type:a.type,showTick:!1,timezone:n})}this.createClipBound(r),t.getAttr("annotationVisible")&&this.plotShapes(r),this.restoreCtxs(s)}setViewBound(){let{xAxis:e,margin:t,width:i,height:r}=this.getRoot().getConfig();this.setBound({x:t.left,y:r-t.bottom,width:i-t.right+1,height:e.height})}getTicksData(){let e=this.getRoot();return e?e.getXAxis().getAxisData():[]}onmouseout(){let e=this.getRoot(),t=e.getHitContext();eG.Z.clearRect(t),this.clearDragEvent(),e.setCursor({key:"gap",isClear:!0,config:{},weight:1e3})}onmousedown(e){let t=this.getRoot(),{x:i}=e.point,r=!1;this.on("mousemove","mousedown",e=>{r=!0;let{x:t}=e.point;this.getRoot().shiftTimeLine(i-t),i=t}),this.on("mouseup","mousedown",()=>{this.clearDragEvent(),r&&t.fireAfterTimeShifted()})}clearDragEvent(){this.off("mousemove","mousedown"),this.off("mouseup","mousedown")}onmousemove(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:eY.Li.EWRESIZE},weight:1e3,isRecord:!1})}constructor(){super(),this.config={...b()(ta.Z.defaultConfig),zIndex:1e3},this.renderer=new iB,this.on("mousemove",this.onmousemove),this.on("mouseout",this.onmouseout),this.on("mousedown",this.onmousedown)}},iM=e=>{let{chartInterval:t,baseInterval:i}=e;return i&&t!==i?(0,eX.k)({startTime:e.startTime,endTime:e.endTime,viewWidth:e.viewWidth,scale:e.scale,interval:t}):(0,eW.i$)({...e,ranges:[]})},iD=e=>{let{chartInterval:t,baseInterval:i}=e;return(0,eW.$F)(e)},iV=e=>{switch(e){case"left":return"left";case"right":return"right";default:return"center"}},ij=()=>({...b()(tr.Z.defaultConfig),...iP(),precision:2,margin:{left:0,top:0,right:0,bottom:0},tick:{width:0,textMargin:8},width:0,height:0,interval:"",indicators:[],askBid:{ask:0,bid:0},annotationVisible:!0,annotationLock:!1,onAddCustomIndicator:()=>!1,onEditCustomIndicator:()=>!1,onRemoveCustomIndicator:()=>!1,needToReloadIndicator:!0,isHiddenLogo:!1,needToHiddenAnnotationTool:!0,enabledFeatures:new Set,isVolumeDisabled:!1,isSaveReady:!1,volumePrecision:NaN,volumeFormatNumber:!0,volumeUseBase:!0}),iR=class extends tc{get symbol(){return this._symbol}get interval(){return this._interval}get intervalInMilliseconds(){return(0,ej.m1)(this._interval)}get currentTimeDomain(){return this._xAxis?.getDomain()||[0,0]}get lastDataTime(){return this._lastDataTime}get dataFeed(){return this._dataFeed}get visibleViewHeight(){let{margin:e,xAxis:t,height:i}=this.getConfig();return i-e.top-e.bottom-t.height}get viewWidth(){let{margin:e,width:t}=this.getConfig();return t-e.left-e.right}get gapWidgetsLength(){return this.filterPanels(e=>e instanceof td).length}get iPanels(){return this.filterPanels(e=>e instanceof ts.Z)}get titleContainer(){return this._titleContainer}get regContetxt(){return this._regContext}determineGetDateType({changeType:e,interval:t,timeAnchorDate:i,symbolInfo:r}){let s=this.settingStore.getValue("@timeTool.timeAnchor"),a=(0,ej.m1)(t),o=s&&i,l=this.settingStore.getValue("@timeTool.acrossTokens"),n=this.getSeriesData(),d=(0,L.ah)(t,r.supportedResolutions),c=d!==t;if(o&&"interval"===e&&this._xAxis){let e=this._xAxis.getScaleCoeff(),{min:s,max:o}=iM({startTime:i,endTime:i,viewWidth:this.viewWidth,scale:e,interval:a,chartInterval:t,baseInterval:d});return{type:"time-anchor",params:{seriesData:n,startTime:s,endTime:o,mode:"time-range",symbolInfo:r,symbol:this._symbol,interval:t}}}if(l&&"symbol"===e&&this._xAxis){let e=this._xAxis.getScaleCoeff(),[i,s]=this._xAxis.getDomain(),{min:o,max:l}=iM({startTime:i,endTime:s,viewWidth:this.viewWidth,scale:e,interval:a,chartInterval:t,baseInterval:d});return{type:"across-token",params:{seriesData:n,startTime:o,endTime:l,mode:"time-range",symbolInfo:r,symbol:this._symbol,interval:t}}}if(c){let e=Date.now(),{min:i}=iM({startTime:e,endTime:e,viewWidth:this.viewWidth,scale:this._xAxis?.getScaleCoeff()||eW.fk,interval:a,chartInterval:t,baseInterval:d});return{type:"default",params:{seriesData:n,startTime:i,endTime:e+1e4,mode:"time-range",symbolInfo:r,symbol:this._symbol,interval:t}}}return{type:"default",params:{seriesData:n,mode:"first-fetch",symbolInfo:r,symbol:this._symbol,interval:t}}}async changeSource({symbol:e,interval:t,dataProvider:i}){let r=this.settingStore.getValue("@timeTool.anchorPoint"),s=this.settingStore.getValue("@timeTool.timeAnchorDate.value"),a=b()(this._xAxis),[o,l]=b()(a?.getRange())||[0,0],n=b()(a?.getDomain()),[d,c]=n||[0,0],h=(0,iE.z)({type:r,minX:o+iE.l,maxX:l-iE.l,defaultX:a?.getCoordOfValue(s)||0}),u=a?.getValueOfCoord(h)||0,{max:g}=a?.getMinMaxDomainByTime({startTime:d,endTime:c})||{},m=this._symbol,p=this._interval,x=!w()(e,m),f=!w()(t,p),y=this._timezone;try{this.dataFeed.unsubscribe({symbol:m,interval:p}),this.dataFeed.setDataProvider(i),this.dataFeed.triggerLoading(!0),this.dataFeed.disableSubscription(),this.dataFeed.setSymbol(e),this.dataFeed.setInterval(t),this._symbol=e,this._interval=t;let s=await this.dataFeed.resolveSymbol(e.toString()),a=s.timeZone;this._timezone=a;let o=null!==y&&void 0!==a&&!w()(a,y);(f||x||o)&&this.dataFeed.reset(),f&&this.fire("intervalChanged",{interval:t}),x&&(this.fire("symbolChanged",{symbol:e}),this.resetChart());let{type:l,params:d}=this.determineGetDateType({isFirstFetch:!m,changeType:x?"symbol":f?"interval":"none",interval:t,timeAnchorDate:u,symbolInfo:s});this.dataFeed.getData(d,i=>{if(this.updateSeriesData({}),"time-anchor"===l){let e=this._xAxis.getTimeLengthByPixelCount({count:iE.l}),t=iV(r);switch(r){case"right":{let r=i[i.length-1];u<=r.time&&this.repositionTimeAxis({time:u+e,forceAutoScale:!0,type:t});break}case"left":{let[r]=i,s=u-e,a=this.getCurrentItemByTime(s),o=Number.isNaN(a?.close)||a?.close===void 0?r?.time:s;this.repositionTimeAxis({time:o,forceAutoScale:!0,type:t});break}default:{let[e]=i,r=this.getCurrentItemByTime(u),s=Number.isNaN(r?.close)||r?.close===void 0?e?.time:u;this.repositionTimeAxis({time:s,forceAutoScale:!0,type:t})}}}else if("across-token"===l&&n&&g){let[e,t]=n;this.handleGoneTimeRange({startTime:e,endTime:t,shiftedMaxTime:g})}this.dataFeed.subscribe({symbol:e,interval:t,callback:e=>{this.setNextData(e)},shouldUpdatePredicate:e=>this.shouldUpdateNext(e)}),this.dataFeed.enableSubscription(),this.dataFeed.triggerLoading(!1),this.fire("doneDataFetching")},!0)}catch(e){console.error("[candlestick] fetch data errors: ",e),this.dataFeed.triggerLoading(!1)}}getEditor(){return this._editor}getCanvasCollection(){return[this._canvas,this._hitCanvas,this._frameCanvas,this._markCanvas,this._infoCanvas]}getCanvas(){return this._canvas}setCanvas(e){return this._canvas=e,this}getHitCanvas(){return this._hitCanvas}setHitCanvas(e){return this._hitCanvas=e,this}getMarkCanvas(){return this._markCanvas}setMarkCanvas(e){return this._markCanvas=e,this}getInfoCanvas(){return this._infoCanvas}setInfoCanvas(e){return this._infoCanvas=e,this}getFrameCanvas(){return this._frameCanvas}setFrameCanvas(e){return this._frameCanvas=e,this}getContext(){return this._ctx||this.setContext(this._canvas.getContext("2d")),this._ctx}setContext(e){return this._ctx=e,this}getHitContext(){return this._hitCtx||this.setHitContext(this._hitCanvas.getContext("2d")),this._hitCtx}setHitContext(e){return this._hitCtx=e,this}getMarkContext(){return this._markCtx||this.setMarkContext(this._markCanvas.getContext("2d")),this._markCtx}setMarkContext(e){return this._markCtx=e,this}getInfoContext(){return this._infoCtx||this.setInfoContext(this._infoCanvas.getContext("2d")),this._infoCtx}setInfoContext(e){return this._infoCtx=e,this}getFrameContext(){return this._frameCtx||this.setFrameContext(this._frameCanvas.getContext("2d")),this._frameCtx}setFrameContext(e){return this._frameCtx=e,this}getXAxis(){return this._xAxis}getTimeAxisWidget(){return this._timeAxisWidget}getMaxTimestamp(){let e=this.getSeriesData();return e[e.length-1]?.time||0}getSeriesData(){return this.dataFeed.getSeriesData()}getVisibleSeriesData(){return this._xAxis?this._xAxis.getVisibleSeriesData(this.getSeriesData()):[]}setCurrentItemByTime(e){let t=this.getCurrentItemByTime(e);t&&this.setAttr("currentItem",t)}getCurrentItemByTime(e,t){if(!this._xAxis||Number.isNaN(e))return;let i=this.getSeriesData(),r=this.getVisibleSeriesData();if(i&&i.length>0){let s=i[0].time,a=r[r.length-1];if(e<s)return{time:e,open:NaN,high:NaN,low:NaN,close:NaN,volume:NaN,change:"NaN",amplitude:"NaN"};if(a&&e>=a.time){let e=i[i.length-1],t=i[i.length-2],r=e&&t?(0,eb.gt)((e.close-t.close)/t.close):"",s=e&&t?(0,eb.gt)((e.high-e.low)/t.close):"";return{...e,change:r,amplitude:s}}if(this._xAxis.getVirtualBarTime){let t=this._xAxis.getCoordOfValue(e),r=Math.max(0,Math.min(this._xAxis.getIndexOfCoord(t),i.length-1)),s=i[r],a=i[r-1];if(s){let e=s&&a?(0,eb.gt)((s.close-a.close)/a.close):"",t=s&&a?(0,eb.gt)((s.high-s.low)/a.close):"";return{...s,change:e,amplitude:t}}}else{let r=t||this._xAxis.getTimeUnitValue()/2,s=(0,eb.ry)(i,t=>Math.abs(e-t.time)<r?0:e-t.time),a=i[s],o=i[s-1],l=a&&o?(0,eb.gt)((a.close-o.close)/o.close):"",n=a&&o?(0,eb.gt)((a.high-a.low)/o.close):"";return{...a,change:l,amplitude:n}}}}getIndicatorHelperByName(e){let t=this.getAttr("indicatorHelper")?.[e];return"function"==typeof t&&(t=t()),t}onResize(){let e=this.getAttr("container");if(!e)return;let{width:t,height:i}=this.getConfig(),r=Math.min(e.clientWidth,15e3),s=Math.min(e.clientHeight,15e3);0!==r&&0!==s&&(this.setAttrs({width:r,height:s}),(t!==r||i!==s||this._oldDevicePixelRatio!==this.devicePixelRatio)&&(this._oldDevicePixelRatio=this.devicePixelRatio,this.resize()),this.fire("resize"))}resize(){this._oldDevicePixelRatio=this.devicePixelRatio,this.updateContainerSize(),this.refreshTimeAxis({data:this.getSeriesData()}),this.resizeAllPanelBound(),this.renderImmediate(ef.mB.Resize)}clearPanel(){let e=this.getContext(),t=this.getMarkContext();eG.Z.clearRect(e),eG.Z.clearRect(t)}setWidgetParent(e){e.setParent(this),e.afterSetParent()}getVisibleTimeExtent(){let e=this.getVisibleSeriesData();return{min:e[0]?.time,max:e[e.length-1]?.time}}getTimeExtent(){let e=this.getSeriesData();return[e[0]?.time,e[e.length-1]?.time]}initializeTimeAxis({scale:e,data:t,domain:[i,r]}){if(!r||!i)return null;let{interval:s}=this,a=r-i,o=this._dataFeed.baseInterval,l=void 0!==o&&s!==o,n=(0,eK.Nw)({start:i,end:r}),d=t.length<=n&&"1M"===s,c=(0,ej.m1)(s),h="1S"===s?1e3:d?a/(n-1):(0,eK.$T)(t);return ez({domain:[i,r],range:[0,this.viewWidth],data:t,scaleCoeff:e,isLessThanMonths:d,timeUnitValue:(l?c:h)||(0,ej.qA)(ej.fb.Day),interval:s,baseInterval:o,timezone:this.dataFeed.timezone})}updateTimeAxisView({isReady:e,maxTime:t,sameUnitTime:i,updateType:r="replace"}){let s=this._xAxis.getDomainInterval();if(e&&t&&i&&"concat"===r){let{time:e}=this._xAxis.getShiftedTime(t,-(.5*s));this.repositionTimeAxis({time:e,forceAutoScale:!1});let i=this.getAttr("currentItem");i&&this.setCurrentItemByTime(i.time)}else{let[,e]=this._xAxis.getDomain(),{time:t}=this._xAxis.getShiftedTime(e,-s*(.95-.5));this.repositionTimeAxis({time:t+5*this._xAxis.getTimeUnitValue(),forceAutoScale:!0}),this.setCurrentItemByTime(this.getMaxTimestamp())}}initContainer(){let e=this.getAttr("container");if(!e)return;let t=e.clientWidth,i=e.clientHeight;this.setAttrs({width:t,height:i});let r={position:"absolute",left:"0",top:"0",width:"100%",height:"100%"};this.setHitCanvas((0,eb.O5)(t,i,{className:"hit",style:{...r,zIndex:"1000"}})),this.setMarkCanvas((0,eb.O5)(t,i,{className:"mark",style:{...r,zIndex:"900"}})),this.setCanvas((0,eb.O5)(t,i,{className:"scene",style:{...r,zIndex:"200"}})),this.setFrameCanvas((0,eb.O5)(t,i,{className:"frame",style:{...r,zIndex:"100"}})),this.setInfoCanvas((0,eb.O5)(t,i,{className:"info",style:{...r,zIndex:"910"}})),this._titleContainer=(0,eb.az)("div",{...r,height:"0",zIndex:"2000"},"kline-title-wrap"),this.addElemens([this.getCanvas(),this.getFrameCanvas(),this.getMarkCanvas(),this.getInfoCanvas(),this.getHitCanvas(),this._titleContainer])}initPanels(){this.initIndicatorViews();let e=new ts.Z(ef.wh.BASE,{id:ef.A.CANDLE,indicatorType:ef.A.CANDLE,isScaleCenter:!0});this._timeAxisWidget=new iN;let t=this.getIndicatorPanels(e);this.addPanels([this._timeAxisWidget,e,...t]),this.initPanelBound()}getChartTitleRowStyle(){return{padding:this.getAttr("isMobile")?"2px 4px":"4px 4px"}}initIndicatorViews(){(this.getAttr("indicators")||[]).forEach(e=>{let t=e.type,i=this.getIndicatorHelperByName(t);if(!i)return;let{defaultProps:r}=i,s=(0,eb.az)("div",{},"chart-title-row");s.addEventListener("mouseenter",()=>{s.classList.add("active")}),s.addEventListener("mouseleave",()=>{s.classList.remove("active")});let a={params:{},styles:{},...e,indicatorType:t,...r,visible:!0,subElement:s};this.setIndicatorView(e.type,a)})}getIndicatorPanels(e){let t=[],i=e;return this.indicatorViews.forEach(e=>{let{isHistBase:r}=e;if(!r){let r=new ts.Z(ef.wh.EXT,e),s=new td(i,r);t.push(s,r),i=r}}),t}updateContainerSize(){let e=this.getCanvasCollection(),{width:t,height:i}=this.getConfig();this.setAttrs({width:t,height:i});let r={width:`${t}px`,height:`${i}px`};e.forEach(e=>{e.width=t*this.devicePixelRatio,e.height=i*this.devicePixelRatio,(0,eb.AS)(e,r)})}shiftTimeLine(e){let t=this.getXAxis();if(0===e||!t)return;let i=e/t.unitWidth*t.getTimeUnitValue();this.shiftTimeLineByTime(i)}shiftTimeLineByTime(e){let t=this.getXAxis(),[i,r]=this.getTimeExtent(),s=t.getDomainInterval(),a=6*t.getTimeUnitValue(),[o]=t.getDomain(),{time:l}=t.getShiftedTime(o,e+s),{time:n}=t.getShiftedTime(o,e);r<n+a&&e>0||i+a>l&&e<0||(t.shiftTime(e),this.updateYAxisWidth({data:this.getSeriesData()}),this.fireAfterTimeShifted(),this.update())}fireAfterTimeShifted(){if(!this._xAxis)return;let[e,t]=this.getTimeExtent(),[i,r]=this._xAxis.getDomain(),s={minTime:e,maxTime:t,shiftedMinTime:Math.floor(i),shiftedMaxTime:Math.floor(r),interval:this._xAxis.getDomainInterval()};this.fire("afterTimeShifted",s)}zoom(e,t){if(Number.isNaN(e)||e<=0||Number.isNaN(t))return;let{scaleRatio:i}=this.getAttr("xAxis");this.zoomByCoeff(2**(t*i),e)}zoomIn(e=300){this.zoomAroundRight(e)}zoomOut(e=-300){this.zoomAroundRight(e)}zoomAroundRight(e){let{scaleRatio:t}=this.getAttr("xAxis");this.zoomByCoeff(2.5**(-e*t)),this.updateFeatures()}zoomByCoeff(e,t){let i=this._xAxis,r=i.getScaleCoeff();void 0!==t?i.scaleAroundTimestamp(t,e):i.scaleAroundRight(e);let s=this.getTimeExtent(),[a,o]=i.getDomain(),l=6*i.getTimeUnitValue(),n=i.getDomainInterval();if(a>s[1]){let{time:e}=i.getShiftedTime(s[1],-(.5*n)),{time:t}=i.getShiftedTime(s[1],.5*n);i.setDomain({min:e,max:t})}if(s[1]<a+l){let{time:e}=i.getShiftedTime(s[1],-l),{time:t}=i.getShiftedTime(s[1],n-l);i.setDomain({min:e,max:t})}if(o<s[0]){let{time:e}=i.getShiftedTime(s[0],-n);i.setDomain({min:e,max:s[0]})}let d=i.getScaleCoeff();(0,eb.Fr)(r-d)||(this.updateTimeAxis(),this.fireAfterTimeShifted(),this.update())}shouldUpdateNext({item:e}){if(!this._xAxis)return!1;let t=this._xAxis.getTimeUnitValue();return!(t!==(0,ej.qA)(ej.fb.Second)&&e.time-this.getMaxTimestamp()>=2*t)}setNextData({item:e,type:t}){let i=this.getSeriesData();if("replace"===t)this.updatePanels(i.length-1),this.updateYAxis();else{this.updateSeriesData({updateType:"concat",forceAutoScale:!1}),this.updatePanels(i.length-1);let e=this._xAxis.getTimeUnitValue();this._xAxis.shiftTime(e),this.updateTimeAxis()}this.update();let r=this.getAttr("currentItem");if(r&&r.time===this.getMaxTimestamp()){let t=i[i.length-2],s=t?(0,eb.gt)((r.close-t.close)/t.close):"",a=t?(0,eb.gt)((e.high-e.low)/t.close):"";this.setAttr("currentItem",{...e,change:s,amplitude:a})}this.updateFeatures(),this.fire("receivedNewCandlestickItem",{data:e})}repositionTimeAxis({time:e,forceAutoScale:t,type:i="center"}){this._xAxis.reposition({time:e,type:i}),this.updateTimeAxis({forceAutoScale:t})}refreshTimeAxis({data:e,forceAutoScale:t=!1}){if(!this._xAxis)return;let i=this._xAxis,r=i.getScaleCoeff(),[,s]=i.getDomain(),a=this.initializeTimeAxis({data:e,domain:(0,eK.Lg)({data:e}),scale:r});if(!a)return;this._xAxis=a;let o=this._xAxis.getDomainInterval(),{time:l}=this._xAxis.getShiftedTime(s,-o);this._xAxis.setDomain({min:l,max:s}),this.updateTimeAxis({forceAutoScale:t})}executeActionByType(e){let t=this._editor.getActionByType(e);if(t){this.clearSelectAnnotation(),this._editor.setNextAction(e),t();return}switch(e){case ef.Us.DefaultCursor:this.setCursor({config:{show:!1,style:eY.Li.DEFAULT},weight:100});break;case ef.Us.CrossHairCursor:this.setCursor({config:{show:!0,style:eY.Li.CROSSHAIR},weight:100});break;case ef.Us.ToggleVisible:this.toggleAnnotationsVisible();break;case ef.Us.Delete:this._editor.deleteAllAnnotation();break;case ef.Us.KeepDrawing:this._editor.keepDraw();break;case ef.Us.Magnet:this._editor.toggleMagnet();break;case ef.Us.LockDraw:this.setAnnotationLockStatus()}}updateTimeAxis(e={forceAutoScale:!1}){this.updateYAxis(e),this.update()}updateYAxis(e={forceAutoScale:!1}){this.eachPanels(t=>{t instanceof ts.Z&&t.updateYExtend(e)})}closeIndicatorByName(e){let t=this.getIndicatorViewByName(e);if(!t)return;let i=this.indicatorViews.find(({isHistBase:e})=>e);if(this.deleteIndicatorViewByName(e),t.subElement?.remove(),t.isHistBase)this._removeIndicatorFromBaseView(t.id,i?.id===t.id);else{let t=this.getPanel(t=>t instanceof ts.Z&&t.getPanelId()===e);t&&(this._removeIndicatorView(t),this.renderImmediate(ef.mB.Resize))}t.subElement?.remove(),this.fire("selectIndicatorsChange",{data:this.getSelectIndicators()})}addIndicatorByName(e,{styles:t={},isTriggeredByClick:i=!1,weight:r=0}={styles:{},isTriggeredByClick:!1,weight:0}){let s=this.getIndicatorHelperByName(e),a=this.indicatorStore.getValues()[e]||{};if(!s||this._indicatorViews.has(e)||!s.getResult)return;let{defaultProps:o}=s,l=(0,eb.az)("div",{},"chart-title-row");l.addEventListener("mouseenter",()=>{l.classList.add("active")}),l.addEventListener("mouseleave",()=>{l.classList.remove("active")});let n={indicatorType:e,id:e,params:a,styles:t,...o,subElement:l,isTriggeredByClick:i,weight:r};this.setIndicatorView(e,n),n.isHistBase?this._addIndicatorFromBaseView(n):this._addIndicatorView(n),this.fire("selectIndicatorsChange",{data:this.getSelectIndicators()})}setIndicatorVisibleByName(e,t){if(!this._indicatorViews.has(e))return;let i=this.getIPanels();for(let r=0;r<i.length;r++){let s=i[r];if(s.hasIndicator(e))return void s.setIndicatorVisible(e,t)}}showIndicatorsDialog(){this.fire("showIndicatorDialog",{id:""})}showTimeTool(){this.fire("showTimeTool")}showSettingDialog(){this.fire("showSettingDialog")}handleClassicFeatureToggle({feature:e,key:t}){let i=!this.settingStore.getValue(t);this.settingStore.setValue(t,i),this.fire("featureToggled",{feature:e,enabled:i})}toggleFeature(e){switch(e){case eY.AN.ChartTrading:this.handleClassicFeatureToggle({feature:e,key:"@contextMenu.chartTrading"});break;case eY.AN.Countdown:this.handleClassicFeatureToggle({feature:e,key:"@contextMenu.countDown"});break;case eY.AN.PriceLine:this.handleClassicFeatureToggle({feature:e,key:"@contextMenu.priceLine"});break;case eY.AN.AskBid:this.handleClassicFeatureToggle({feature:e,key:"@contextMenu.bidAsk"});break;case eY.AN.PercentageScale:{let t="@contextMenu.percentageScale",i=!this.settingStore.getValue(t);this.settingStore.setValue(t,i),this.settingStore.setValue("@contextMenu.logarithmicScale",!1),this.updateBasePanel(),this.fire("featureToggled",{feature:e,enabled:i});break}case eY.AN.LogarithmicScale:{let t="@contextMenu.logarithmicScale",i=!this.settingStore.getValue(t);this.settingStore.setValue(t,i),this.settingStore.setValue("@contextMenu.percentageScale",!1),this.updateBasePanel(),this.fire("featureToggled",{feature:e,enabled:i});break}case eY.AN.InvertedScale:this.handleClassicFeatureToggle({feature:e,key:"@contextMenu.invertedScale"}),this.updateBasePanel();break;case eY.AN.InformationMines:this.handleClassicFeatureToggle({feature:e,key:"@contextMenu.informationMines"}),this.updateBasePanel()}this.update()}enableFeature(e){let t=this.getAttr("enabledFeatures");t.add(e),this.fire("enabledFeatureChanged",{features:t})}disableFeature(e){let t=this.getAttr("enabledFeatures");t.delete(e),this.fire("enabledFeatureChanged",{features:t})}getFeatureToggleState(e){let{settingStore:t}=this;switch(e){case eY.AN.QuickOrderFloatingWindow:return t.getValue("@contextMenu.quickOrderFloatingWindow");case eY.AN.ChartTrading:return t.getValue("@contextMenu.chartTrading");case eY.AN.AskBid:return t.getValue("@contextMenu.bidAsk");case eY.AN.PriceLine:return t.getValue("@contextMenu.priceLine");case eY.AN.Countdown:return t.getValue("@contextMenu.countDown");case eY.AN.PercentageScale:return t.getValue("@contextMenu.percentageScale");case eY.AN.LogarithmicScale:return t.getValue("@contextMenu.logarithmicScale");case eY.AN.InvertedScale:return t.getValue("@contextMenu.invertedScale");case eY.AN.InformationMines:return t.getValue("@contextMenu.informationMines");default:return console.warn(`[candlestick] unknown feature ${e}`),!1}}resetChart(){this.clearPanel(),this.getEditor().clear(),this.setIsLoaded(!1),this.fire("chartReset")}setSymbolInfo(e,t){(0,ev.Kn)(e)?this._regContext={...this._regContext,...e}:t&&(this._regContext[e]=t)}appendVolIndicators(e){let t=this.getAttr("indicatorHelper"),i=eU(this);eH.forEach(r=>{t[r]||(t[r]=i[r],e.forEach(({indicators:e=[],weight:t})=>{e.forEach(({id:e,styles:i,isTriggeredByClick:s})=>{e===r&&this.addIndicatorByName(e,{styles:i,isTriggeredByClick:s,weight:t})})}))}),this.fire("allIndicatorsChange",{data:this.getAllIndicators()})}removeVolIndicators(){let e=this.getAttr("indicatorHelper");eH.forEach(t=>{delete e[t],this.closeIndicatorByName(t)}),this.fire("allIndicatorsChange",{data:this.getAllIndicators()})}getAllIndicators(){let e=Object.keys(this.getAttr("indicatorHelper")||{}),t=[],i={};for(let r=0,s=e.length;r<s;r++){let s=this.getIndicatorHelperByName(e[r]);if(s){let{defaultProps:e}=s,{id:r="",title:a,isHistBase:o,isCustom:l,isBacktest:n,categories:d=[]}=e;i[r]||(t.push({id:r,name:a,isMain:o,isCustom:!!l,isBacktest:!!n,categories:d}),i[r]=1)}}return t}getSelectIndicators(){return this.indicatorViews.map(({id:e,indicatorType:t,isHistBase:i,isCustom:r,categories:s})=>({id:e,name:t,categories:s,isMain:!!i,isCustom:!!r}))}hasIndicatorByName(e){return this._indicatorViews.has(e)}updateIndicatorParams(e){let t=this.getIndicatorViewByName(e);if(t){let i={...t};i.params=this.getIndicatorParams(e),this.setIndicatorView(e,i);let{isHistBase:r}=t,s=this.getPanel(t=>t instanceof ts.Z&&(r?t.panelType===ef.wh.BASE:t.getPanelId()===e));s.updateParams(e,i.params,()=>{s.save({type:"indicator"}),s.update()})}}registerCustomIndicator(e,t={}){let i=this.getAttr("indicatorHelper");t.defaultProps.isDiffSource&&(t=eO(t)),i[e]=t,this.fire("allIndicatorsChange",{data:this.getAllIndicators()})}removeCustomIndicatorByName(e){let t=this.getAttr("indicatorHelper");this.hasIndicatorByName(e)&&this.closeIndicatorByName(e),delete t[e],this.fire("allIndicatorsChange",{data:this.getAllIndicators()})}registerCustomIndicatorCallback({onAdd:e,onEdit:t,onRemove:i}){e&&this.setAttr("onAddCustomIndicator",e),t&&this.setAttr("onEditCustomIndicator",t),i&&this.setAttr("onRemoveCustomIndicator",i)}getColorFromColorTable(e,t){let i=this.settingStore.getValue(e),r=this.indicatorStore.getValue(e);return i||r||this.getColorTable()[e]||t||e}selectAnnotation(e,t){this.fire("selectAnnotation",{data:e,action:t})}getSave(){let e=this.indicatorStore.getValues(),t=this.settingStore.getValues(),i=[];return this.eachPanels(e=>{e instanceof ts.Z&&(e.updateStorageData(),i.push({type:e.getAttr("indicatorType"),...e.getSavedData()}))}),{storeData:i,indicatorSetting:e,setting:t}}fireSave(e){if(this.getAttr("isSaveReady"))try{let{storeData:t}=this.getSave();this.fire("saveChartNeeded",{data:t,action:e.type})}catch(e){console.warn(`[candlestick] save annotations occurred error: ${e.message}`)}}async loadChart({data:e,reload:t=!1}){this._editor.deleteAllAnnotation();let i=t||this.getAttr("needToReloadIndicator");try{if(i){this.removeAllIndicators();for(let t=0;t<e.length;t++){let{indicators:i=[],weight:r}=e[t];for(let e=0;e<i.length;e++){await (0,T.y)();let{id:t,styles:s,isTriggeredByClick:a}=i[e];t&&this.addIndicatorByName(t,{styles:s,isTriggeredByClick:a,weight:r})}}}let t=this.filterPanels(e=>e instanceof ts.Z);for(let i=0;i<t.length;i++){let r=t[i];if(e[i]&&r){let{annotations:t=[]}=e[i];for(let e=0,i=t.length;e<i;e++)this.getEditor().transformJSONToAnnotation(t[e],r)}}return await (0,T.y)(),this.fire("chartLoaded"),Promise.resolve({})}catch(e){return console.error("[candlestick] basicKline loadChart occurred error:",e),Promise.reject({error:e.message})}}setAnnotationLockStatus(e){if(void 0===e){let e=this.getAttr("annotationLock");this.setAttr("annotationLock",!e)}else this.setAttr("annotationLock",e)}toggleAnnotationsVisible(){let e=this.getAttr("annotationVisible");this.setAttr("annotationVisible",!e),e&&this.getEditor().clearEvents(),this.update()}clearSelectAnnotation(){this.eachPanels(e=>{let t=e.getAnnotations();for(let e=0,i=t.length;e<i;e++)t[e].setAttr("isEdit",!1)})}manageInformationMines(e){this._editor.manageInformationMines({...e,onToggled:t=>{this.fire("informationMineIconToggled",t),e.onToggled?.(t)}})}manageOrderLines(e){this._editor.manageOrders(e)}managePositionLines(e){this._editor.managePositions(e)}manageExecutionOrders(e){this._editor.manageExecutionOrders(e)}manageLabelLines(e){this._editor.manageLabelLines(e)}manageSingleLabelLines(e){this._editor.manageSingleLabelLines(e)}manageAlerts(e){this._editor.manageAlerts(e)}getShapeById(e){return this._editor.getShapeById(e)}updateFeatures(){let e=this.getPanel(e=>e instanceof ts.Z&&e.mainPane.getAttr("isMouseover"));e&&e.mainPane.drawFeatures()}updateTitle(e){if(e){let t=this.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE),i=this.getPanel(t=>t instanceof ts.Z&&t.getPanelId()===e)||t;i?.updateTitleLabel()}else this.getIPanels().forEach(e=>{e.updateTitleLabel()})}goForward(){let{unitWidth:e}=this._xAxis;this.shiftTimeLine(-e);let t=this.getAttr("currentItem");if(t){let e=this._xAxis.getTimeUnitValue();this.setCurrentItemByTime(t.time-e),this.updateFeatures()}}goNext(){let{unitWidth:e}=this._xAxis;this.shiftTimeLine(e);let t=this.getAttr("currentItem");if(t){let e=this._xAxis.getTimeUnitValue();this.setCurrentItemByTime(t.time+e),this.updateFeatures()}}getCloseItemByTime(e,t=!0){let i=this.getSeriesData();if(0!==i.length)return t&&this.dataFeed.baseInterval&&this.dataFeed.baseInterval!==this._interval?i.find(t=>t.time===1e3*(0,k.q8)(e,this._interval,this.dataFeed.timezone)):(0,I.Ww)({time:e,tolerance:this._xAxis.getTimeUnitValue()/2,seriesData:this.getSeriesData()})}getPositionOfCandlestickItem(e){let t=this.getBasePanel();return{x:t.xAxis.getCoordOfValue(e.time),y:t.transformXYToAbsoluteXY({x:0,y:t.getYPos(+e.high)}).y}}isWithinSeriesData({startTime:e,endTime:t}){let[i,r]=this.getTimeExtent();return t<=r+this._xAxis.getTimeUnitValue()&&e>=i}getDateText(e){let t=this.getBasePanel();return(0,eb.XH)(e,t.xAxis.getTimeScaleType())}refreshChart({cb:e}){let t=Date.now(),{min:i,max:r}=this._xAxis.getMinMaxDomainByTime({startTime:t,endTime:t}),{dataFeed:s}=this;s.triggerLoading(!0),s.disableSubscription(),this.updateSeriesData({}),this.update(),s.reset();let a=this._interval!==this._dataFeed.baseInterval;s.getData({startTime:a?i:void 0,endTime:a?r:void 0,mode:a?"time-range":"first-fetch",seriesData:this.getSeriesData(),symbol:this._symbol,interval:this._interval},()=>{this.updateSeriesData({scale:eW.fk}),s.triggerLoading(!1),s.enableSubscription(),e?.({shiftedMaxTime:r,isLast:!1})},!0)}goToTheLatestDate({time:e,cb:t}){this.isWithinSeriesData({startTime:e,endTime:e})?this.animateGoToDate({time:e,cb:t}):this.refreshChart({cb:t})}goDate({time:e}){let{min:t,max:i}=this._xAxis.getMinMaxDomainByTime({startTime:e,endTime:e});if(this.isWithinSeriesData({startTime:e,endTime:e})){let t=this.getCloseItemByTime(e);if(!t)return;this.repositionTimeAxis({time:t.time,forceAutoScale:!0}),this.fire("onDateTooltip",{item:t,shiftedMaxTime:i,isLast:!1})}else{let{dataFeed:r}=this;r.triggerLoading(!0),r.disableSubscription(),this.updateSeriesData({}),this.update(),r.reset();let s=this._interval!==this._dataFeed.baseInterval;r.getData({startTime:t,endTime:s?i:void 0,mode:s?"time-range":"go-to-date",seriesData:this.getSeriesData(),symbol:this._symbol,interval:this._interval},()=>{this.updateSeriesData({});let t=this.getCloseItemByTime(e);if(t){this.repositionTimeAxis({time:t.time,forceAutoScale:!0});let[e]=this.getTimeExtent();this.fire("onDateTooltip",{item:t,shiftedMaxTime:i,isLast:t.time<=e})}r.triggerLoading(!1),r.enableSubscription(),this.fire("doneGoDate")},!0)}}animateGoToDate({time:e,rightShift:t=5,cb:i}){let r,s,{max:a}=this._xAxis.getMinMaxDomainByTime({startTime:e,endTime:e}),o=this._xAxis.getTimeShiftedBy({time:e,right:t}),{max:l}=this.getVisibleTimeExtent();if(!l)return;let n=this.getXAxis(),d=e=>{n.shiftTime(e),this.updateTimeAxis(),this.fireAfterTimeShifted(),this.update()},c=o-l,h=c/500,u=eQ({duration:500}),g=0,m=e=>{s=s||e;let t=Math.min(e-s,500),l=void 0===r?0:r-s,n=u(t),p=n*h*t-u(l)*h*l;g+=p,d(p);let x=g>=c;r=e,x?i?.({item:this.getCloseItemByTime(o),shiftedMaxTime:a,isLast:!1}):window.requestAnimationFrame(m)};window.requestAnimationFrame(m)}goRangeHelper(e){this._xAxis.goToRange(e),this.updateTimeAxis({forceAutoScale:!0})}handleGoneTimeRange({startTime:e,endTime:t,shiftedMaxTime:i}){let r=this.isWithinSeriesData({startTime:e,endTime:e}),s=this.isWithinSeriesData({startTime:t,endTime:t});if(r||s)this.goRangeHelper({startTime:e,endTime:t});else{let t=this.getCloseItemByTime(e,!1);t&&(this.repositionTimeAxis({time:t.time,forceAutoScale:!0}),this.fire("onDateTooltip",{item:t,shiftedMaxTime:i,isLast:!0}))}}goTimeRange({startTime:e,endTime:t}){if(this.isWithinSeriesData({startTime:e,endTime:t}))this.goRangeHelper({startTime:e,endTime:t});else{let{shiftedTime:i,viewportTime:r,scale:s}=iD({startTime:e,endTime:t,viewWidth:this.viewWidth,interval:this._xAxis.getTimeUnitValue(),chartInterval:this._interval,baseInterval:this._dataFeed.baseInterval}),{dataFeed:a}=this;a.triggerLoading(!0),a.disableSubscription(),this.updateSeriesData({}),this.update(),a.reset(),a.getData({startTime:i.min,endTime:i.max,mode:"time-range",seriesData:this.getSeriesData(),symbol:this._symbol,interval:this._interval},()=>{this.updateSeriesData({scale:s}),this.handleGoneTimeRange({startTime:r.min,endTime:r.max,shiftedMaxTime:i.max}),a.triggerLoading(!1),a.enableSubscription(),this.fire("doneGoTimeRange")},!0)}}getFirstSeriesData(){return this.getSeriesData()[0]||{}}getLastSeriesData(){let e=this.getSeriesData();return e[e.length-1]||{}}getLastSeriesDataClosePrice(){return this.getLastSeriesData().close}getFirstVisibleSeriesData(){return this.getVisibleSeriesData()[0]||{}}getFirstVisibleSeriesDataClosePrice(){return this.getFirstVisibleSeriesData()?.close}getFirstVisibleSeriesDataAsRelativePercentage({value:e,formatter:t=e=>e.toFixed(2)}){let i=this.getFirstVisibleSeriesDataClosePrice();return`${(0,ey._A)()?(0,ey.dD)(t((e-i)/i*100)):t((e-i)/i*100)}%`}getPercentageTextRelativeToLastPrice({price:e}){let t=this.getAttr("precision"),i=this.getLastSeriesDataClosePrice(),r=(+this.getBasePanel().formatterValue(e)-i)/i*100;return`${r>0?"+":""}${(0,ey._A)()?(0,ey.dD)(r,x()(t,2,4)):r.toFixed(x()(t,2,4))}%`}updateBasePanel(){let e=this.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE);e&&(e.setYAxis(),e.mainPane.drawFeatures())}clickPlaceOrder({price:e,formattedPrice:t,mousePosition:i}){this.fire("clickPlaceOrder",{price:e,formattedPrice:t,mousePosition:i})}drawHorizontalLine(e){this.getEditor().transformJSONToAnnotation({type:ef.Us.HorizontalLine,color:tb.getCacheStyle(ef.Us.HorizontalLine,"color"),lineWidth:tb.getCacheStyle(ef.Us.HorizontalLine,"lineWidth"),lineStyle:tb.getCacheStyle(ef.Us.HorizontalLine,"lineStyle"),data:{time:0,value:e}}),this.fireSave({type:"annotation"})}isPlaceOrderHovered(e){let t=this.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE);return t?.mainPane.isPlaceOrderHovered(e)}blurInformationMines(){this.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE).getAnnotations().find(e=>e.getAttr("type")===ef.Us.InformationMines).blurInformationMines()}isInformationMinesHovered(e){let t=this.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE),i=t.getAnnotations().find(e=>e.getAttr("type")===ef.Us.InformationMines),r=t.transformPointToView(e),s={...r,y:-r.y};return i.isHover(s)}updatePricePrecision(){let e=this.getSeriesData(),{tickSize:t,getPricePrecision:i}=this.getAttr("candlestick"),r=i?.(e)??t??(0,I.I7)(e);this.setAttr("precision",r)}getTolerance(){switch(this._xAxis?.getTimeScaleType()){case ef.QX.Hour:case ef.QX.Minute:case ef.QX.Second:return this._xAxis?.getTimeUnitValue();default:return}}setChartType(e){this.settingStore.setChartType(e),this.updateBasePanel(),this.update()}getCalculatedChartType(){return this.settingStore.getCalculatedChartType()}formatValue(e){return this.getBasePanel().formatterValue(e)}setAutoScaleForAllPanels({value:e}){this.getIPanels().forEach(t=>t.setAttr("autoScale",e))}setAutoScaleForPanel({panelId:e,value:t}){let i=this.getIPanels().find(t=>t.getPanelId()===e);i?.setAttr("autoScale",t)}toggleAutoScaleForPanel({panelId:e}){let t=this.getIPanels().find(t=>t.getPanelId()===e);if(!t)return;let i=t.getAttr("autoScale");t.setAttr("autoScale",!i)}removeAllIndicators(){this._indicatorViews.forEach((e,t)=>{this.closeIndicatorByName(t)})}isVolumeDisabled(e){return this.getAttr("isVolumeDisabled")&&eH.includes(e)}addNotification(e){this._notifications.push(e),this.fire("notificationAdded",e),e.lifetime&&setTimeout(()=>this.removeNotification(e.id),e.lifetime)}removeNotification(e){let t=this._notifications.find(t=>t.id===e);t&&(this._notifications=this._notifications.filter(t=>t.id!==e),this.fire("notificationRemoved",t))}getNotifications(){return[...this._notifications]}isStoreLoaded(){return this.settingStore.isLoaded()&&this.indicatorStore.isLoaded()}_addIndicatorFromBaseView(e){let t=this.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE);t&&this.isLoaded()&&(t.updateChartData(0,()=>{t.setYAxis(),t.updateTitleLabel(),t.update(ef.mB.Resize)}),(0,ev.hj)(e.weight)&&e.weight>0&&t.weight!==e.weight&&(t.updateWeight(e.weight),this.updatePanelBound()),t.save({type:"indicator"}))}_addIndicatorView(e){let t;for(let e=this.panels.length-1;e>=0;e--){let i=this.panels[e];if(i instanceof ts.Z){t=i;break}}let i=new ts.Z(ef.wh.EXT,e),r=new td(t,i);this.addPanels([r,i]),i.save({type:"indicator"}),this.isLoaded()&&(this.updatePanelBound(),i.updateChartData(0,()=>{i.setYAxis(),i.updateTitleLabel(),this.renderImmediate(ef.mB.Resize)}))}_removeIndicatorFromBaseView(e,t){let i=this.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE),r=this.indicatorViews.find(({isHistBase:e})=>e),s=r?.subElement;i&&(i.setYAxis(),t&&s&&i.addFoldIcon(s,"main-indicators-fold"),i.removeIndicator(e),i.save({type:"indicator"}),i.update())}_removeIndicatorView(e){let t,i,r=new Set([e]),s=this.filterPanels(e=>e instanceof td);for(let r=0;r<s.length;r++){let a=s[r];a.nextPanel===e&&(t=a),a.frontPanel===e&&(i=a)}i?(r.add(i),t.nextPanel=i.nextPanel):r.add(t),e.save({type:"indicator"}),this.removePanels(r),this.updatePanelBound()}updatePanels(e){this.eachPanels(t=>{t instanceof ts.Z&&!t.isDiffPanel&&t.updateChartData(e,()=>{t.setYAxis(),t.updateTitleLabel(),t.update()})})}getYAxisWidth(){let{right:e=0}=this.getAttr("margin");return e}updateSeriesData({updateType:e,scale:t,forceAutoScale:i}){let r=this.getSeriesData(),s=(0,eK.Lg)({data:r}),a=this._xAxis?.getScaleCoeff()||void 0;this.initializeData({data:r,domain:s,updateType:e,scale:void 0===t?a:t,forceAutoScale:i})}initializeData({data:e,domain:t,updateType:i,scale:r,forceAutoScale:s=!0}){if(e.length<=0)return;let a=this.isLoaded(),o=this._xAxis,l=o?.getTimeUnitValue(),[,n]=o?.getDomain()||[];this.updatePricePrecision();let d=this.initializeTimeAxis({data:e,domain:t,scale:r});if(!d)return;this._xAxis=d;let c=this._xAxis.getTimeUnitValue();this.updateTimeAxisView({isReady:a,sameUnitTime:l===c,updateType:i,maxTime:n}),this.updatePanels(),this.initPanelYAxis(),this.updateYAxisWidth({data:e,forceAutoScale:s}),this.renderImmediate(),this.setIsLoaded(!0),a||this.fire("chartReady"),this._lastDataTime=e[e.length-1].time}updateYAxisWidth({data:e,forceAutoScale:t}){let i=this.getLongestYAxisWidth(),r=this.getAttr("margin");this.setAttr("margin",{...r,right:i+8}),this.initPanelBound(ef.Vt.All),this.refreshTimeAxis({data:e,forceAutoScale:t})}initEvents(){this.watch("askBid",()=>{this.update()}),this.watch("margin",({newVal:e})=>{this.fire("marginChanged",{margin:e})}),this.watch("currentItem",(0,eb.P2)(()=>{this.updateTitle()},0)),this.on("autoScaleChanged",()=>{this.updateYAxisWidth({data:this.getSeriesData()})});let e=v()(e=>(0,I.Ic)(e,{abortPredicate:()=>{let{dataFeed:e}=this;return e.isFetchingData},onAbort:e.cb,handleLoadLeft:t=>{let{dataFeed:i}=this,r=this._interval!==this._dataFeed.baseInterval,{min:s}=this._xAxis.getMinMaxDomainByTime({startTime:t.minTime,endTime:t.minTime});i.getData({startTime:r?s:void 0,endTime:t.minTime,mode:r?"time-range":"load-past",seriesData:this.getSeriesData(),symbol:this._symbol,interval:this.interval},t=>{t.length>0&&this.updateSeriesData({updateType:"concat",forceAutoScale:!1}),e.cb?.()})},handleLoadRight:t=>{let{dataFeed:i}=this,r=this._interval!==this._dataFeed.baseInterval,{max:s}=this._xAxis.getMinMaxDomainByTime({startTime:t.maxTime,endTime:t.maxTime});i.getData({endTime:r?s:void 0,startTime:t.maxTime,mode:r?"time-range":"load-future",seriesData:this.getSeriesData(),symbol:this._symbol,interval:this.interval},t=>{t.length>0&&this.updateSeriesData({updateType:"concat",forceAutoScale:!1}),e.cb?.()})}}),500);this.on("afterTimeShifted",e);let t=this.getHitCanvas();t&&eY.X8.forEach(e=>{tH.on(t,e,this.eventHandler.bind(this,e),!0)});let i=this.getAttr("container");i&&(tH.on(i,"mouseout",e=>{let{originEvent:t}=e,r=t.target;i.contains(r)||this.setCurrentItemByTime(this.getMaxTimestamp())}),new S.Z(()=>this.onResize()).observe(i))}getMainPanelBound(){return this.getBasePanel().bound}eventHandler(e,t){if(!this._xAxis)return;let i={click:this.onclick,dblclick:this.ondblclick,mousedown:this.onmousedown,mousemove:this.onmousemove,wheel:this.onmousewheel,mouseup:this.onmouseup,mouseout:this.onmouseout,gesturestart:this.ongesturestart,gesturechange:this.ongesturechange,gestureend:this.ongestureend,contextmenu:this.oncontextmenu},{originEvent:r}=t;void 0!==t.clientX&&void 0!==t.clientY&&(t.point=(0,eb.CN)({...t,target:r.target})),i[e]&&(t.isDealed=!1,i[e].call(this,t))}onclick(e){let t=i=>{i.contain(e.point)&&(i instanceof ts.Z&&i.eachWidgets(t),i instanceof ta.Z&&i.eachAnnotations(t),i.fire("click",e))};this.eachPanels(t),this.fire("click",e)}ondblclick(e){let t=i=>{i.contain(e.point)&&(i instanceof ts.Z&&i.eachWidgets(t),i instanceof ta.Z&&i.eachAnnotations(t),i.fire("dblclick",e))};this.eachPanels(t)}onmousedown(e){let t=i=>{let r=i.contain(e.point);r&&(i instanceof ts.Z&&i.eachWidgets(t),i instanceof ta.Z&&i.eachAnnotations(t),i.fire("mousedown",e)),i.setAttr("isMousedown",r)};this.eachPanels(t),this.fire("mousedown",e)}onmousemove(e){let t=!1,i=r=>{r instanceof ts.Z&&r.eachWidgets(i),r instanceof ta.Z&&r.eachAnnotations(i);let s=r.getAttr("isMouseover"),a=r.contain(e.point);a&&r.fire("mousemove",e),!t&&a?(t=r instanceof ta.Z||r instanceof ts.Z,s||r.fire("mouseover",e),r.setAttr("isMouseover",!0)):s&&(r.fire("mouseout",e),r.setAttr("isMouseover",!1))};this.eachPanels(i,!0),this.fire("mousemove",e)}onmouseup(e){let t=i=>{i.contain(e.point)&&(i instanceof ts.Z&&i.eachWidgets(t),i instanceof ta.Z&&i.eachAnnotations(t),i.fire("mouseup",e))};this.eachPanels(t),this.fire("mouseup",e)}onmouseout(){let e=t=>{t instanceof ts.Z&&t.eachWidgets(e),t.getAttr("isMouseover")&&(t.fire("mouseout"),t.setAttr("isMouseover",!1))};this.eachPanels(e),this.setCurrentItemByTime(this.getMaxTimestamp())}onmousewheel(e){let t=i=>{i.contain(e.point)&&(i instanceof ts.Z&&i.eachWidgets(t),i.fire("mousewheel",e))};this.eachPanels(t),this.fire("mousewheel",e)}ongesturestart(e){let t=i=>{i.contain(e.point)&&(i instanceof ts.Z&&i.eachWidgets(t),i.fire("gesturestart",e))};this.eachPanels(t),this.fire("gesturestart",e)}ongesturechange(e){let t=i=>{i.contain(e.point)&&(i instanceof ts.Z&&i.eachWidgets(t),i.fire("gesturechange",e))};this.eachPanels(t),this.fire("gesturechange",e)}ongestureend(e){let t=i=>{i.contain(e.point)&&(i instanceof ts.Z&&i.eachWidgets(t),i.fire("gestureend",e))};this.eachPanels(t),this.fire("gestureend",e)}oncontextmenu(e){if(this.getAttr("isMobile"))return;let t=i=>{i.contain(e.point)&&(i instanceof ts.Z&&i.eachWidgets(t),i instanceof ta.Z&&i.eachAnnotations(t),i.fire("contextmenu",e))};this.eachPanels(t);let i=this.panels.find(t=>t.contain(e.point)),r=i instanceof ts.Z?i.getPriceOfYPos(i.getBound().y-e.point.y):void 0,s=i instanceof ts.Z&&r?i.formatterValue(r):void 0;this.fire("contextmenu",{event:e,panel:i,price:r,formattedPrice:s}),e.originEvent.preventDefault()}getBasePanel(){return this.getPanel(e=>e instanceof ts.Z&&e.panelType===ef.wh.BASE)}constructor(e){super(),this._timezone=null,this._oldDevicePixelRatio=this.devicePixelRatio,this._regContext={baseAsset:"",quoteAsset:""},this._notifications=[],this.setCursor=(0,eb.R4)((e,t)=>e.isClear&&e.key===t?.key?{config:{},weight:0}:t&&t.weight>e.weight?t:e,e=>{let{config:t,isRecord:i=!0}=e,r=this.getAttr("container"),s=this.getAttr("crossHair"),a=t.style||s.style;r&&(0,eb.AS)(r,{cursor:a}),i&&a!==s.style&&(a===eY.Li.DEFAULT&&eG.Z.clearRect(this.getHitContext()),this.setAttr("crossHair",{...s,...t}))}),this.unSelectAnnotation=(0,eb.Ds)(()=>{let e=this.getIPanels();for(let t=0;t<e.length;t++){let i=e[t].getAnnotations();for(let e=0,t=i.length;e<t;e++)if(i[e].getAttr("isEdit"))return}this.fire("unSelectAnnotation")},100),this.config={...ij(),...e,indicatorHelper:eZ(this)},this._dataFeed=new E,this.initContainer(),this.initPanels(),this.initEvents(),this.initializeData({data:[],domain:[void 0,void 0]}),this._editor=new iI(this)}};var iO=i(98064),iF=i(36831),iH=i(94642),iZ=i(31563);let iU="p-2 cursor-pointer rounded-md hover:bg-CardBg",iW=(0,u.memo)(({visible:e,isLock:t=!1,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),a=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_LOCK,{defaultValue:"Lock"}),[s]),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_UNLOCK,{defaultValue:"Unlock"}),[s]),l=(0,u.useMemo)(()=>t?o:a,[t,o,a]),n=(0,u.useMemo)(()=>t?iF.Z:iH.Z,[t]),d=(0,u.useCallback)(()=>{r.fire("clickAnnotationEditTool",{data:eY.pT.Lock}),i({isLock:!t})},[r,i,t]);return e?(0,h.jsx)(iZ.Z,{tooltips:l,placement:"top",arrow:!0,enablePortal:!0,useReactPopper:!0,children:(0,h.jsx)("div",{className:iU,children:(0,h.jsx)(n,{className:`h-5 w-5 ${t?"text-PrimaryYellow":""}`,onClick:d})})}):null});var i$=i(58792);let iz=(0,u.memo)(({visible:e,candlestick:t})=>{let{getI18n:i}=(0,iO.K_)(),r=(0,u.useMemo)(()=>i(eY.Wi.ANNOTATION_DELETE,{defaultValue:"Delete"}),[i]),s=(0,u.useCallback)(()=>{t.fire("clickAnnotationEditTool",{data:eY.pT.Delete}),t.getEditor().getSelectAnnotation()?.remove()},[t]);return e?(0,h.jsx)(iZ.Z,{tooltips:r,placement:"top",arrow:!0,enablePortal:!0,useReactPopper:!0,children:(0,h.jsx)("div",{className:iU,children:(0,h.jsx)(i$.Z,{className:"h-5 w-5",onClick:s})})}):null});var iK=i(96191),iX=i(26178);let iY=(0,u.memo)(({visible:e,isTextEdit:t,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),{isMobile:a}=(0,iK.F)(),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_EDIT_TEXT,{defaultValue:"Edit Text"}),[s]),l=(0,u.useCallback)(()=>{r.fire("clickAnnotationEditTool",{data:eY.pT.TextEdit}),i({isTextEdit:!t})},[r,i,t]);return e&&!a?(0,h.jsx)(iZ.Z,{tooltips:o,placement:"top",arrow:!0,enablePortal:!0,useReactPopper:!0,children:(0,h.jsx)("div",{className:iU,children:(0,h.jsx)(iX.Z,{className:`h-5 w-5 ${t?"text-PrimaryYellow":""}`,onClick:l})})}):null});var iG=i(16003);let iq=(0,u.memo)(({visible:e,isTextBold:t,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),{isMobile:a}=(0,iK.F)(),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_FONT_BOLD,{defaultValue:"Bold"}),[s]),l=(0,u.useCallback)(()=>{r.fire("clickAnnotationEditTool",{data:eY.pT.TextBold}),i({isTextBold:!t})},[r,i,t]);return e&&!a?(0,h.jsx)(iZ.Z,{tooltips:o,placement:"top",arrow:!0,enablePortal:!0,useReactPopper:!0,children:(0,h.jsx)("div",{className:iU,children:(0,h.jsx)(iG.Z,{className:`h-5 w-5 ${t?"text-PrimaryYellow":""}`,onClick:l})})}):null});var iQ=i(38081),iJ=i(87585);let i0=({tip:e="",children:t=[],overlay:i=[],once:r})=>(0,h.jsx)(iJ.Z,{trigger:"click",className:"h-full",placement:"bottom",overlay:i,enablePortal:!0,useReactPopper:!0,enableClickBubble:!0,once:r,children:(0,h.jsx)(iZ.Z,{className:iU,tooltips:e,placement:"top",arrow:!0,enablePortal:!0,useReactPopper:!0,children:t})}),i1=e=>(0,h.jsx)("div",{className:"flex flex-col py-2.5 bg-CardBg rounded-xl",...e});var i2=i(16709),i5=i.n(i2);let i3=({onClick:e,isActive:t,children:i})=>(0,h.jsx)("div",{className:i5()("py-1 px-2.5 h-6 cursor-pointer flex items-center hover:bg-Input",{"bg-Input":t}),onClick:e,children:i}),i6=[10,11,12,14,16,18,20,24,28,36],i4=(0,u.memo)(({visible:e,textFontSize:t,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),{isMobile:a}=(0,iK.F)(),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_FONT_SIZE,{defaultValue:"Font Size"}),[s]),l=(0,u.useCallback)(e=>i({textFontSize:e}),[i]),n=(0,u.useCallback)(()=>r.fire("clickAnnotationEditTool",{data:eY.pT.TextFontSize}),[r]),d=(0,u.useMemo)(()=>(0,h.jsx)(i1,{onClick:n,children:i6.map(e=>(0,h.jsx)(i3,{isActive:t===e,onClick:()=>l(e),children:(0,h.jsx)("div",{className:"w-8 text-center",children:e})},e))}),[n,t,l]);return e&&!a?(0,h.jsx)(i0,{tip:o,overlay:d,once:!0,children:(0,h.jsxs)("div",{className:"flex justify-center items-center",children:[(0,h.jsx)("div",{className:"icon t-subtitle2",children:t}),(0,h.jsx)(iQ.Z,{className:"w-4 h-4 text-IconNormal"})]})}):null});var i8=i(80939),i7=i(9869);let i9=e=>{let{r:t,g:i,b:r}=(0,eb.P7)(e);return`rgb(${t}, ${i}, ${r})`},re=(0,u.memo)(({visible:e,color:t,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),{isMobile:a}=(0,iK.F)(),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_BACKGROUND,{defaultValue:"Background Color"}),[s]),l=(0,u.useCallback)(()=>r.fire("clickAnnotationEditTool",{data:eY.pT.Background}),[r]),n=(0,u.useCallback)(e=>i({background:e}),[i]);return e&&!a?(0,h.jsx)(i0,{tip:o,overlay:(0,h.jsx)(i7.Z,{color:t,onChange:n,candlestickInstance:r}),children:(0,h.jsxs)("div",{className:"flex flex-col",onClick:l,children:[(0,h.jsx)(i8.Z,{className:"h-5 w-5"}),(0,h.jsx)("div",{className:"flex h-[3px] w-full",style:{background:i9(t)}})]})}):null});var rt=i(4605);let ri=e=>(0,h.jsx)(rt.Z,{width:"64",height:"2",viewBox:"0 0 18 2",fill:"none",...e,children:(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M64 1.5H0V0.5H64V1.5Z",fill:"currentColor"})}),rr=e=>(0,h.jsxs)(rt.Z,{width:"64",height:"2",viewBox:"0 0 18 2",fill:"none",...e,children:[(0,h.jsx)("g",{clipPath:"url(#clip0_7101_186)",children:(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 1.5H0V0.5H0.5V1.5ZM2.5 1.5H1.5V0.5H2.5V1.5ZM4.5 1.5H3.5V0.5H4.5V1.5ZM6.5 1.5H5.5V0.5H6.5V1.5ZM8.5 1.5H7.5V0.5H8.5V1.5ZM10.5 1.5H9.5V0.5H10.5V1.5ZM12.5 1.5H11.5V0.5H12.5V1.5ZM14.5 1.5H13.5V0.5H14.5V1.5ZM16.5 1.5H15.5V0.5H16.5V1.5ZM18.5 1.5H17.5V0.5H18.5V1.5ZM20.5 1.5H19.5V0.5H20.5V1.5ZM22.5 1.5H21.5V0.5H22.5V1.5ZM24.5 1.5H23.5V0.5H24.5V1.5ZM26.5 1.5H25.5V0.5H26.5V1.5ZM28.5 1.5H27.5V0.5H28.5V1.5ZM30.5 1.5H29.5V0.5H30.5V1.5ZM32.5 1.5H31.5V0.5H32.5V1.5ZM34.5 1.5H33.5V0.5H34.5V1.5ZM36.5 1.5H35.5V0.5H36.5V1.5ZM38.5 1.5H37.5V0.5H38.5V1.5ZM40.5 1.5H39.5V0.5H40.5V1.5ZM42.5 1.5H41.5V0.5H42.5V1.5ZM44.5 1.5H43.5V0.5H44.5V1.5ZM46.5 1.5H45.5V0.5H46.5V1.5ZM48.5 1.5H47.5V0.5H48.5V1.5ZM50.5 1.5H49.5V0.5H50.5V1.5ZM52.5 1.5H51.5V0.5H52.5V1.5ZM54.5 1.5H53.5V0.5H54.5V1.5ZM56.5 1.5H55.5V0.5H56.5V1.5ZM58.5 1.5H57.5V0.5H58.5V1.5ZM60.5 1.5H59.5V0.5H60.5V1.5ZM62.5 1.5H61.5V0.5H62.5V1.5ZM64 1.5H63.5V0.5H64V1.5Z",fill:"currentColor"})}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip0_7101_186",children:(0,h.jsx)("rect",{width:"64",height:"1",fill:"white",transform:"translate(0 0.5)"})})})]}),rs=e=>(0,h.jsxs)(rt.Z,{width:"64",height:"2",viewBox:"0 0 18 2",fill:"none",...e,children:[(0,h.jsx)("g",{clipPath:"url(#clip0_7101_141)",children:(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.5 1.5H0V0.5H1.5V1.5ZM5.5 1.5H2.5V0.5H5.5V1.5ZM9.5 1.5H6.5V0.5H9.5V1.5ZM13.5 1.5H10.5V0.5H13.5V1.5ZM17.5 1.5H14.5V0.5H17.5V1.5ZM21.5 1.5H18.5V0.5H21.5V1.5ZM25.5 1.5H22.5V0.5H25.5V1.5ZM29.5 1.5H26.5V0.5H29.5V1.5ZM33.5 1.5H30.5V0.5H33.5V1.5ZM37.5 1.5H34.5V0.5H37.5V1.5ZM41.5 1.5H38.5V0.5H41.5V1.5ZM45.5 1.5H42.5V0.5H45.5V1.5ZM49.5 1.5H46.5V0.5H49.5V1.5ZM53.5 1.5H50.5V0.5H53.5V1.5ZM57.5 1.5H54.5V0.5H57.5V1.5ZM61.5 1.5H58.5V0.5H61.5V1.5ZM64 1.5H62.5V0.5H64V1.5Z",fill:"currentColor"})}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip0_7101_141",children:(0,h.jsx)("rect",{width:"64",height:"1",fill:"white",transform:"translate(0 0.5)"})})})]}),ra=e=>(0,h.jsxs)(rt.Z,{width:"64",height:"2",viewBox:"0 0 18 2",fill:"none",...e,children:[(0,h.jsx)("g",{clipPath:"url(#clip0_7101_174)",children:(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.45455 1.5H0V0.5H1.45455V1.5ZM7.27273 1.5H4.36364V0.5H7.27273V1.5ZM13.0909 1.5H10.1818V0.5H13.0909V1.5ZM18.9091 1.5H16V0.5H18.9091V1.5ZM24.7273 1.5H21.8182V0.5H24.7273V1.5ZM30.5455 1.5H27.6364V0.5H30.5455V1.5ZM36.3636 1.5H33.4546V0.5H36.3636V1.5ZM42.1818 1.5H39.2727V0.5H42.1818V1.5ZM48 1.5H45.0909V0.5H48V1.5ZM53.8182 1.5H50.9091V0.5H53.8182V1.5ZM59.6364 1.5H56.7273V0.5H59.6364V1.5ZM64 1.5H62.5455V0.5H64V1.5Z",fill:"currentColor"})}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip0_7101_174",children:(0,h.jsx)("rect",{width:"64",height:"1",fill:"white",transform:"translate(0 0.5)"})})})]}),ro=e=>{switch(e){case ef.TD.DOTTED:return rr;case ef.TD.DASHED:return ra;case ef.TD.DASHED_2:return rs;case ef.TD.SOLID:default:return ri}},rl=({isActive:e,onClick:t,type:i})=>{let r=(0,u.useMemo)(()=>ro(i),[i]);return(0,h.jsx)(i3,{isActive:e,onClick:t,children:(0,h.jsx)(r,{width:"44px",height:"2px",viewBox:"0 0 64 2"})})},rn=({value:e,options:t})=>{let i=(0,u.useMemo)(()=>t.map(({value:t,onClick:i})=>(0,h.jsx)(rl,{onClick:i,isActive:t===e,type:t},t)),[e,t]);return(0,h.jsx)(i1,{children:i})},rd=[ef.TD.SOLID,ef.TD.DOTTED,ef.TD.DASHED_2,ef.TD.DASHED],rc=(0,u.memo)(({visible:e,value:t,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),{isMobile:a}=(0,iK.F)(),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_LINE_STYLE,{defaultValue:"Style"}),[s]),l=(0,u.useCallback)(e=>i({lineStyle:e}),[i]),n=(0,u.useMemo)(()=>rd.map(e=>({value:e,onClick:()=>l(e)})),[l]),d=(0,u.useMemo)(()=>(0,h.jsx)(rn,{value:t,options:n}),[t,n]),c=(0,u.useMemo)(()=>ro(t),[t]),g=(0,u.useCallback)(()=>r.fire("clickAnnotationEditTool",{data:eY.pT.LineStyle}),[r]);return e&&!a?(0,h.jsx)(i0,{tip:o,overlay:d,once:!0,children:(0,h.jsx)("div",{className:"h-5 flex items-center",onClick:g,children:(0,h.jsx)(c,{width:"20px",height:"2px",className:"icon"})})}):null}),rh=({onClick:e,isActive:t,thickness:i})=>(0,h.jsx)(i3,{isActive:t,onClick:e,children:(0,h.jsx)("div",{className:"bg-SecondaryText w-11",style:{height:`${i}px`}})}),ru=({value:e,options:t})=>{let i=(0,u.useMemo)(()=>t.map(({value:t,onClick:i})=>(0,h.jsx)(rh,{onClick:i,isActive:t===e,thickness:t},t)),[t,e]);return(0,h.jsx)(i1,{children:i})},rg=[1,2,3,4],rm=(0,u.memo)(({visible:e,value:t,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),{isMobile:a}=(0,iK.F)(),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_LINE_WIDTH,{defaultValue:"Width"}),[s]),l=(0,u.useCallback)(e=>i({lineWidth:e}),[i]),n=(0,u.useMemo)(()=>rg.map(e=>({value:e,onClick:()=>l(e)})),[l]),d=(0,u.useMemo)(()=>(0,h.jsx)(ru,{value:t,options:n}),[t,n]),c=(0,u.useCallback)(()=>r.fire("clickAnnotationEditTool",{data:eY.pT.LineWidth}),[r]);return e&&!a?(0,h.jsx)(i0,{tip:o,overlay:d,once:!0,children:(0,h.jsxs)("div",{className:"h-full flex justify-center items-center",onClick:c,children:[(0,h.jsx)("div",{className:"mr-1 w-5 bg-PrimaryText",style:{height:`${t}px`}}),(0,h.jsxs)("div",{className:"t-body3",children:[t,"px"]})]})}):null}),rp=(0,u.memo)(({visible:e,color:t,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),{isMobile:a}=(0,iK.F)(),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_COLOR,{defaultValue:"Color"}),[s]),l=(0,u.useCallback)(()=>r.fire("clickAnnotationEditTool",{data:eY.pT.Color}),[r]),n=(0,u.useCallback)(e=>i({color:e}),[i]);return e&&!a?(0,h.jsx)(i0,{tip:o,overlay:(0,h.jsx)(i7.Z,{color:t,onChange:n,candlestickInstance:r}),children:(0,h.jsxs)("div",{className:"flex flex-col",onClick:l,children:[(0,h.jsx)(iX.Z,{className:"h-5 w-5"}),(0,h.jsx)("div",{className:"flex h-[3px] w-full",style:{background:i9(t)}})]})}):null});var rx=i(3615);let rf=(0,u.memo)(({visible:e,color:t,setAttribute:i,candlestick:r})=>{let{getI18n:s}=(0,iO.K_)(),{isMobile:a}=(0,iK.F)(),o=(0,u.useMemo)(()=>s(eY.Wi.ANNOTATION_COLOR,{defaultValue:"Color"}),[s]),l=(0,u.useCallback)(()=>r.fire("clickAnnotationEditTool",{data:eY.pT.TextColor}),[r]),n=(0,u.useCallback)(e=>i({textColor:e}),[i]);return e&&!a?(0,h.jsx)(i0,{tip:o,overlay:(0,h.jsx)(i7.Z,{color:t,onChange:n,candlestickInstance:r}),children:(0,h.jsxs)("div",{className:"flex flex-col",onClick:l,children:[(0,h.jsx)(rx.Z,{className:"h-5 w-5"}),(0,h.jsx)("div",{className:"flex h-[3px] w-full",style:{background:i9(t)}})]})}):null});var rb=i(45913);let ry=(0,u.memo)(({updateValue:e,candlestick:t})=>{let{getI18n:i}=(0,iO.K_)(),{isMobile:r}=(0,iK.F)(),s=(0,u.useMemo)(()=>i(eY.Wi.ANNOTATION_DEFAULT,{defaultValue:"Back to Default"}),[i]),a=(0,u.useCallback)(()=>{let i=t.getEditor().getSelectAnnotation();if(!i)return;t.fire("clickAnnotationEditTool",{data:eY.pT.BackToDefault});let r=i.getDefaultStyle();i.applyAttributes(r),e(i.getEditAttribute());let s=i.getCacheStyleKey();tb.updateCacheStyle(s,r)},[t,e]);return r?null:(0,h.jsx)("div",{className:"relative",children:(0,h.jsx)(iZ.Z,{tooltips:s,placement:"top",arrow:!0,enablePortal:!0,useReactPopper:!0,children:(0,h.jsx)("div",{className:iU,children:(0,h.jsx)(rb.Z,{className:"h-5 w-5",onClick:a})})})})});var rv=i(27027),rC=i(70268),rw=i(36405);let rS=(0,u.memo)(({initialPosition:e,onSavePosition:t=()=>null,wrapperElement:i,getToolbarElement:r})=>{let s=(0,u.useRef)(e),a=(0,u.useRef)(!0),o=(0,u.useMemo)(()=>v()(t,1e3),[t]),l=(0,u.useCallback)(e=>{let t=r();if(!t)return;let a=i.getBoundingClientRect(),l=t.getBoundingClientRect(),[n,d]=[a.width-l.width,a.height-l.height],[c,h]=[x()(e.x,0,n),x()(e.y,0,d)];s.current={x:c,y:h},(0,eb.AS)(t,{transform:`translate(${s.current.x}px, ${s.current.y}px)`}),o(s.current)},[o,r,i]),n=(0,u.useCallback)(e=>{let t=e=>{let[t,i]=[s.current.x+e.movementX,s.current.y+e.movementY];l({x:t,y:i})},i=e=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),e.stopPropagation()};return document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),e.stopPropagation(),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i)}},[l]);return(0,rv.Z)(()=>{a.current=!1}),(0,rC.Z)(()=>{let e=new S.Z(()=>{a.current&&l(s.current)});return e.observe(i),()=>e.unobserve(i)}),(0,h.jsx)("div",{className:`${iU} !px-1`,onMouseDown:n,children:(0,h.jsx)(rw.Z,{className:"h-5 w-5"})})}),rT=({candlestick:e,wrapperElement:t,initialPosition:i,onSavePosition:r})=>{let[{showColor:s,color:a,showWidth:o,lineWidth:l,showStyle:n,lineStyle:d,showBg:c,background:g,showTextColor:m,textColor:p,showFontSize:x,textFontSize:f,showTextBold:b,isTextBold:y,showTextEdit:v,isTextEdit:C,isLock:w,showLock:S,showDelete:T},A]=(0,u.useState)({showColor:!0,color:"",showWidth:!0,lineWidth:1,showStyle:!0,lineStyle:ef.TD.SOLID,showBg:!1,background:"",showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:10,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,isLock:!1,showLock:!1,showDelete:!1}),_=(0,u.useCallback)((e={})=>A(t=>({...t,...e})),[A]),L=(0,u.useRef)(null),[k,I]=(0,u.useState)(!1),P=(0,u.useCallback)(t=>{_(t);let i=e.getEditor().getSelectAnnotation();if(!i)return;i.applyAttributes(t);let r=i?.getCacheStyleKey();tb.updateCacheStyle(r,t)},[_,e]);(0,u.useEffect)(()=>{let t=({data:e})=>{let t=e?.getEditAttribute();_(t),I(!!t)},i=()=>I(!1),r=e.getEditor().getSelectAnnotation();return r&&t({data:r}),e.on("selectAnnotation",t),e.on("unSelectAnnotation",i),()=>{e.getEditor().clearSelectAnnotation(),e.off("selectAnnotation",t),e.off("unSelectAnnotation",i)}},[e,_]);let E=(0,u.useCallback)(()=>L.current,[L]);return k?(0,h.jsxs)("div",{ref:L,className:"absolute flex bg-Line rounded-md h-10 top-0 left-0 z-[100] select-none p-0.5",children:[(0,h.jsx)(rS,{wrapperElement:t,getToolbarElement:E,initialPosition:i,onSavePosition:r}),(0,h.jsx)(ry,{updateValue:_,candlestick:e}),(0,h.jsx)(rf,{visible:m,color:p,setAttribute:P,candlestick:e}),(0,h.jsx)(rp,{visible:s,color:a,setAttribute:P,candlestick:e}),(0,h.jsx)(re,{visible:c,color:g,setAttribute:P,candlestick:e}),(0,h.jsx)(rm,{visible:o,value:l,setAttribute:P,candlestick:e}),(0,h.jsx)(rc,{visible:n,value:d,setAttribute:P,candlestick:e}),(0,h.jsx)(i4,{visible:x,textFontSize:f,setAttribute:P,candlestick:e}),(0,h.jsx)(iq,{visible:b,isTextBold:y,setAttribute:P,candlestick:e}),(0,h.jsx)(iY,{visible:v,isTextEdit:C,setAttribute:P,candlestick:e}),(0,h.jsx)(iW,{visible:S,isLock:w,setAttribute:P,candlestick:e}),(0,h.jsx)(iz,{visible:T,candlestick:e})]}):null},rA=(0,u.memo)(({wrapperElement:e,candlestick:t})=>{let[i,r]=(0,u.useState)(),s=(0,u.useCallback)(e=>{r({x:e.x,y:e.y}),t.settingStore.setValue("@annotationTool.position.x",e.x),t.settingStore.setValue("@annotationTool.position.y",e.y)},[t]);return(0,u.useEffect)(()=>{let e=t.settingStore,i=({type:t})=>{"load"===t&&r(e.getValue("@annotationTool.position")||{x:0,y:0})};return e.subscribeValueChanged(i),()=>e.unsubscribeValueChanged(i)},[t]),i?(0,h.jsx)(rT,{wrapperElement:e,candlestick:t,initialPosition:i,onSavePosition:s}):null}),r_=({enabled:e,candlestick:t,wrapperElement:i})=>i&&t&&e?(0,h.jsx)(u.Suspense,{fallback:null,children:(0,h.jsx)(rA,{wrapperElement:i,candlestick:t})}):null;var rL=i(51597);let rk=(0,u.lazy)(()=>i.e("9995").then(i.bind(i,9077))),rI={rightClickPlaceOrder:{visible:!1},timeTool:{visible:!0},createAlert:{visible:!1},moreSettings:{quickOrder:{floatingWindow:{visible:!1},plusButton:{visible:!1}},scale:{percentageScale:{visible:!1},logarithmicScale:{visible:!1},invertedScale:{visible:!1}},priceLine:{marketPriceLine:{visible:!1},countdown:{visible:!1},askBid:{visible:!1}},averagePrice:{buy:{visible:!1},sell:{visible:!1}},liquidationPrice:{visible:!1},openOrders:{visible:!1},positions:{visible:!1},orderHistory:{visible:!1},priceAlert:{visible:!1},costPrice:{visible:!1},breakevenPrice:{visible:!1},botPreview:{visible:!1},spotlight:{visible:!1}}},rP=(0,u.memo)(({enabled:e,candlestick:t,drawingDeleteConfirmationDialogValue:i,menuSettings:r,placeOrder:s})=>(0,u.useMemo)(()=>e&&t?(0,h.jsx)(u.Suspense,{fallback:null,children:(0,h.jsx)(rL.Z.Provider,{value:i,children:(0,h.jsx)(rk,{candlestick:t,placeOrder:s,menuSettings:r})})}):null,[e,t,i,s,r])),rE=(0,u.lazy)(()=>i.e("7489").then(i.bind(i,45458))),rB=({candlestick:e,value:t})=>(0,u.useMemo)(()=>e?(0,h.jsx)(u.Suspense,{fallback:null,children:(0,h.jsx)(rL.Z.Provider,{value:t,children:(0,h.jsx)(rE,{candlestick:e})})}):null,[e,t]);var rN=i(14285);let rM=(0,u.lazy)(()=>i.e("2815").then(i.bind(i,3888))),rD=({candlestickInstance:e,onClose:t,customizedEnabled:i,backTestEnabled:r,subTradingDataEnabled:s})=>{let a=(0,rN.b)({candlestickInstance:e,onClose:t});return a.modalVisible?(0,h.jsx)(u.Suspense,{fallback:null,children:(0,h.jsx)(rN.Z.Provider,{value:a,children:(0,h.jsx)(rM,{customizedEnabled:i,backTestEnabled:r,subTradingDataEnabled:s})})}):null},rV=(0,u.memo)(({candlestickInstance:e,onClose:t,backTestEnabled:i,customizedEnabled:r,subTradingDataEnabled:s})=>e?(0,h.jsx)(rD,{candlestickInstance:e,onClose:t,customizedEnabled:r,backTestEnabled:i,subTradingDataEnabled:s}):null);rV.displayName="IndicatorSettings";var rj=i(97362),rR=i(37476);let rO=(0,u.memo)(({candlestick:e})=>{let[t,i]=(0,u.useState)(0),[r,s]=(0,u.useState)(0),[a,o]=(0,u.useState)(!1),l=(0,u.useCallback)(()=>{if(!e)return;let[,t]=e.currentTimeDomain;o(t<Date.now())},[e]),n=(0,u.useCallback)(()=>{e?.interval&&e?.goToTheLatestDate({time:Date.now(),cb:l})},[e,l]),d=(0,u.useCallback)(()=>{if(!e)return;let t=e.getYAxisWidth(),{height:r}=e.getAttr("xAxis");i(e=>t||e),s(r)},[e]);return(0,u.useEffect)(()=>(e?.on("marginChanged",d),e?.on("chartLoaded",d),e?.on("afterTimeShifted",l),e?.on("doneDataFetching",l),e?.on("doneGoDate",l),e?.on("doneGoTimeRange",l),()=>{e?.off("marginChanged",d),e?.off("chartLoaded",d),e?.off("afterTimeShifted",l),e?.off("doneDataFetching",l),e?.off("doneGoDate",l),e?.off("doneGoTimeRange",l)}),[e,d,l]),(0,h.jsx)(rj.Z,{className:"flex justify-center items-center absolute bg-[--color-CardBg] border border-solid border-[--color-InputLine] rounded-[--radii-s] cursor-pointer opacity-80",style:{right:`${t+10}px`,bottom:`${5+r}px`,width:"22px",height:"22px",display:a?"flex":"none"},onClick:n,children:(0,h.jsx)(rR.Z,{className:"min-h-[16px] min-w-[16px] text-[--color-IconNormal]"})})});rO.displayName="candlestickLatestPriceButton";var rF=i(14460);let rH=(0,u.lazy)(()=>i.e("6470").then(i.bind(i,29676))),rZ=({wrapRef:e,theme:t,chartType:i,informationMines:r,candlestick:s})=>{let a=(0,rF.H)();return s&&r?(0,h.jsx)(u.Suspense,{fallback:null,children:(0,h.jsx)(rF.Z.Provider,{value:a,children:(0,h.jsx)(rH,{wrapRef:e,chartType:i,candlestickInstance:s,informationMines:r,theme:t})})}):null};var rU=i(25888);let rW=(0,u.lazy)(()=>i.e("4025").then(i.bind(i,41187))),r$=({candlestick:e,placeOrder:t,wrapRef:i})=>{let r=(0,rU.H)();return(0,u.useEffect)(()=>{e&&e.on("clickPlaceOrder",({price:e,formattedPrice:t,mousePosition:i})=>{r.setVisible(!0),r.setPrice(e),r.setFormattedPrice(t),r.setMousePosition(i)})},[e,r.setFormattedPrice,r.setMousePosition,r.setPrice,r.setVisible]),(0,u.useMemo)(()=>e&&t&&r.visible?(0,h.jsx)(u.Suspense,{fallback:null,children:(0,h.jsx)(rU.Z.Provider,{value:r,children:(0,h.jsx)(rW,{candlestickInstance:e,wrapRef:i,placeOrder:t})})}):null,[t,r,i,e])};var rz=i(54867),rK=i.n(rz),rX=i(85642),rY=i.n(rX),rG=i(84636),rq=i.n(rG),rQ=i(27722),rJ=i(64084),r0=i(59618);let r1=(0,u.memo)(e=>(0,h.jsx)(rJ.Z,{...e,className:"items-center justify-center cursor-pointer text-IconNormal hover:text-PrimaryText",children:(0,h.jsx)(r0.Z,{className:"h-[16px] w-[16px]",size:12})}));r1.displayName="ScaleSettingButton";var r2=i(12103);let r5={boxShadow:"var(--shadow-shadow2)"},r3=({options:e,onMouseOver:t,onMouseLeave:i,onClickSwitch:r})=>{let{getI18n:s}=(0,iO.K_)(),a=(0,u.useMemo)(()=>s("auto-scale",{defaultValue:"Auto Scale"})||"",[s]),o=(0,u.useMemo)(()=>s("auto-scale-description",{defaultValue:"Automatically adjust the price scale to fit the data within the viewable space, or manually adjust the scale for optimal viewing by scrolling on the y-axis. Double-click on the price scale to reset to auto scale."})||"",[s]),l=(0,u.useMemo)(()=>e.map((e,t)=>(0,h.jsxs)(rQ.ZP,{className:"grid grid-cols-2 items-center py-[8px]",children:[(0,h.jsx)(rQ.ZP,{className:"typography-body3 text-PrimaryText",children:e.label}),(0,h.jsx)(rQ.ZP,{className:"flex justify-end",children:(0,h.jsx)(r2.Z,{checked:e.value,size:"small",onChange:t=>r(t,e)})})]},t)),[r,e]);return(0,h.jsxs)(rJ.Z,{style:r5,className:"bg-CardBg rounded-[4px] p-[10px] min-w-[180px] flex-col",onMouseLeave:i,onMouseOver:t,children:[(0,h.jsx)(iZ.Z,{useReactPopper:!0,enablePortal:!0,arrow:!0,tooltips:o,placement:"top",children:(0,h.jsx)(rQ.ZP,{className:"cursor-pointer typography-caption1 border-t-[0px] border-x-[0px] text-SecondaryText decoration-dashed mb-[4px] border-b-[1px] border-dotted border-SecondaryText",children:a})}),(0,h.jsx)(rJ.Z,{className:"flex-col",children:l})]})};var r6=i(39750),r4=i(43396),r8=i(89814);let r7="min-w-[20px] min-h-[20px]",r9=e=>"warning"===e?(0,h.jsx)(r6.Z,{className:`${r7} text-PrimaryText`}):(0,h.jsx)(r4.Z,{className:`${r7} text-Success`}),se=({iconType:e,children:t,onClose:i})=>{let r=(0,u.useMemo)(()=>r9(e),[e]);return console.log("meow"),(0,h.jsxs)("div",{className:"flex max-w-[345px] w-max rounded-[12px] p-[12px] bg-Input shadow gap-[4px] items-center",children:[r,(0,h.jsx)("div",{className:"typography-body5 text-PrimaryText",children:t}),(0,h.jsx)(r8.Z,{className:"min-w-[16px] min-h-[16px] text-IconNormal cursor-pointer",onClick:i})]})},st={showMenu:!1,setShowMenu:()=>null,options:[],setOptions:()=>null},si=()=>{let[e,t]=(0,u.useState)(st.showMenu),[i,r]=(0,u.useState)(st.options);return(0,u.useMemo)(()=>({showMenu:e,setShowMenu:t,options:i,setOptions:r}),[e,t,i,r])},sr=(0,u.createContext)(st),ss=({candlestick:e})=>{let{getI18n:t}=(0,iO.K_)(),i=(0,u.useMemo)(()=>t("chart-text",{defaultValue:"Chart"})||"",[t]);return(0,u.useCallback)(t=>{let{title:r=""}=e?.getIndicatorViewByName(t)||{};return""===r?i:r},[e,i])},sa=({candlestick:e})=>{let{getI18n:t}=(0,iO.K_)(),i=(0,u.useMemo)(()=>t("manual-scale-text",{defaultValue:"set to manual scale"}),[t]),r=(0,u.useMemo)(()=>t("auto-scale-text",{defaultValue:"set to auto scale"}),[t]);return(0,u.useCallback)(({name:t,isAutoScale:s})=>{let a=(0,tu.Z)(),o=s?r:i;e?.addNotification({id:a,text:`${t} ${o}`,lifetime:3e3})},[r,e,i])},so=(0,u.memo)(({toasts:e,onClickSwitch:t,showMenu:i,hideMenu:r,onRemoveToast:s})=>{let{showMenu:a,options:o}=(0,u.useContext)(sr);return(0,h.jsx)(rQ.ZP,{className:"absolute top-[-5px] translate-y-[-100%] right-[4px] z-[9999]",children:(0,h.jsxs)(rJ.Z,{className:"flex-col items-end gap-[4px]",children:[e.map(({id:e,text:t,iconType:i},r)=>(0,h.jsx)(se,{onClose:()=>s(e),iconType:i,children:t},r)),a?(0,h.jsx)(r3,{options:o,onMouseOver:i,onMouseLeave:r,onClickSwitch:t}):null]})})});so.displayName="ScaleSetting";let sl=({candlestick:e})=>{let[t,i]=(0,u.useState)([]),{isMobile:r}=(0,iK.F)(),[s,a]=(0,u.useState)(0),[o,l]=(0,u.useState)(0),n=si(),{setShowMenu:d,setOptions:c}=n,g=ss({candlestick:e}),m=sa({candlestick:e}),p=(0,u.useMemo)(()=>({id:ef.A.CANDLE,label:g(""),value:!0}),[g]);(0,u.useEffect)(()=>{let t=()=>i(e?.getNotifications()||[]);return e?.on("notificationAdded",t),e?.on("notificationRemoved",t),()=>{e?.off("notificationAdded",t),e?.off("notificationRemoved",t)}},[e]),(0,u.useEffect)(()=>{c(e=>rq()([p,...e],"id"))},[p,c]);let x=(0,u.useMemo)(()=>v()(d,1e3,{leading:!0}),[d]),f=(0,u.useCallback)(()=>x(!0),[x]),b=(0,u.useCallback)(()=>x(!1),[x]),y=(0,u.useCallback)(t=>e?.removeNotification(t),[e]),C=(0,u.useCallback)(({margin:{right:t}})=>{if(a(t),!e)return;let{xAxis:i}=e?.getConfig();l(i.height)},[e]),w=(0,u.useCallback)(({panel:e})=>{let t=e.getPanelId(),i=e.getAttr("autoScale");m({name:g(t),isAutoScale:i}),c(e=>e.map(e=>e.id===t?{...e,value:!e.value}:e))},[g,m,c]),S=(0,u.useCallback)(({data:e})=>{c(t=>{let i=e.filter(({isMain:e})=>!e).map(({id:e})=>({id:e,label:g(e),value:!0})),r=t.find(e=>e.id===ef.A.CANDLE)||p,s=rK()(t,i,"id"),a=rY()(s,i,"id");return[r,...s,...a]})},[p,g,c]),T=(0,u.useCallback)((t,{id:i,value:r})=>{e?.setAutoScaleForPanel({panelId:i,value:!r})},[e]),A=(0,u.useCallback)(()=>{e?.toggleAutoScaleForPanel({panelId:ef.A.CANDLE})},[e]);return(0,u.useEffect)(()=>(e?.on("marginChanged",C),e?.on("autoScaleChanged",w),e?.on("selectIndicatorsChange",S),()=>{e?.off("marginChanged",C),e?.off("autoScaleChanged",w),e?.off("selectIndicatorsChange",S)}),[e,w,S,C]),{button:(0,u.useMemo)(()=>r?null:(0,h.jsx)(sr.Provider,{value:n,children:(0,h.jsxs)(rJ.Z,{className:"absolute right-0 bottom-0",children:[(0,h.jsx)(so,{toasts:t,onRemoveToast:y,onClickSwitch:T,showMenu:f,hideMenu:b}),(0,h.jsx)(r1,{style:{width:`${s}px`,height:`${o}px`},onMouseOver:f,onMouseLeave:b,onClick:A})]})}),[o,s,n,b,r,A,T,y,f,t]),contextValue:n}};var sn=i(99507),sd=i(85476);let sc=({isDark:e,colors:t})=>{let{BasicBg:i,PrimaryText:r,PrimaryYellow:s,RedGreenBgText:a,SecondaryText:o,TertiaryText:l,InputLine:n,Line:d,Buy:c,Sell:h}=t,u=sn.Z.valid(d)?(0,sn.Z)(d).alpha(.4).css("rgba"):d;return{...e?eY.nJ:eY.kn,background:i,"icon.plus":r,"area.stroke":s,"area.fill1":s,"candle.upBarColor":c,"candle.downBarColor":h,"volume.upBarColor":c,"volume.downBarColor":h,"volume.upTextColor":r,"volume.downTextColor":r,"cross.upLabelBgColor":c,"cross.upLabelBorderColor":c,"cross.downLabelBgColor":h,"cross.downLabelBorderColor":h,"cross.labelTextColor":a,"cross.defaultLabelTextColor":r,"cross.defaultLabelBgColor":n,"cross.defaultLabelBorderColor":n,"cross.borderLineColor":o,"frame.borderLineColor":d,"axis.tickLineColor":o,"axis.tickTextColor":o,"vertGridLine.color":u,"horzGridLine.color":u,"countdown.upTextColor":a,"countdown.upBgColor":c,"countdown.upBorderColor":c,"countdown.downTextColor":a,"countdown.downBgColor":h,"countdown.downBorderColor":h,"LSratio.outline":c,"LSratio.area":c,"oi.bar":c,"BS.buy":c,"BS.sell":h,"text.minMaxPrice":r,"text.unavailable":l,"indicator.1":s,"indicator.2":"#EB40B5","indicator.3":e?"#B385F8":"#71269C","indicator.4":"#D63864","indicator.5":"#50AE55","indicator.6":"#F37F20","indicator.7":"#AF6CC3","indicator.8":"#5FC3D7","indicator.9":e?"#2961FF":"#3860F6","indicator.10":"#43DB5D"}},sh=e=>{let t=document.getElementsByClassName("chart-title-row"),i=(0,sn.Z)(e).alpha(.5).css("rgba");for(let e=0;e<t.length;e++)t[e].style.background=i},su=({candlestick:e})=>{let{getI18n:t}=(0,iO.K_)(),i=(0,u.useCallback)((e,i="")=>t(e,{defaultValue:i||e})||i,[t]);(0,u.useEffect)(()=>{e&&e.registerI18n(i)},[e,i])},sg=({candlestick:e})=>{let{colors:t,mode:i}=(0,sd.T)();return(0,u.useEffect)(()=>{if(!e)return;let r=sc({isDark:"dark"===i,colors:t});e.indicatorStore.changeColorTable(r),e.settingStore.changeColorTable(r),e.setColorTable(r),e.setAttr("theme",i),e.updateBasePanel(),e.update();let s=r.background,a=r["text.defaultColor"];tb.dragVertex.setAttr("fillStyle",s),tb.dragRect.setAttr("fillStyle",s),tb.text.setAttr("fillStyle",a)},[t,e,i]),{theme:i}},sm=({candlestick:e})=>{let[t,i]=(0,u.useState)("");return(0,u.useEffect)(()=>{if(!e)return;let t=e.settingStore,r=()=>{let e=t.getValue("@background.color.value");i(e),sh(e)},s=({key:e,type:t})=>{if("load"===t)return void r();switch(e){case"@background":case"@background.color":case"":r()}};return t.subscribeValueChanged(s),()=>t.unsubscribeValueChanged(s)},[e,i]),t},sp=({candlestick:e,menuSettings:t})=>{(0,u.useEffect)(()=>{e&&(t.rightClickPlaceOrder.visible&&e.enableFeature(eY.AN.RightClickPlaceOrder),t.moreSettings.spotlight.visible&&e.enableFeature(eY.AN.InformationMines),t.moreSettings.quickOrder.plusButton.visible&&e.enableFeature(eY.AN.ChartTrading),t.moreSettings.scale.invertedScale.visible&&e.enableFeature(eY.AN.InvertedScale),t.moreSettings.scale.logarithmicScale.visible&&e.enableFeature(eY.AN.LogarithmicScale),t.moreSettings.scale.percentageScale.visible&&e.enableFeature(eY.AN.PercentageScale),t.moreSettings.priceLine.askBid.visible&&e.enableFeature(eY.AN.AskBid),t.moreSettings.priceLine.countdown.visible&&e.enableFeature(eY.AN.Countdown),t.moreSettings.priceLine.marketPriceLine.visible&&e.enableFeature(eY.AN.PriceLine))},[e,t.moreSettings.priceLine.askBid.visible,t.moreSettings.priceLine.countdown.visible,t.moreSettings.priceLine.marketPriceLine.visible,t.moreSettings.quickOrder.plusButton.visible,t.moreSettings.scale.invertedScale.visible,t.moreSettings.scale.logarithmicScale.visible,t.moreSettings.scale.percentageScale.visible,t.moreSettings.spotlight.visible,t.rightClickPlaceOrder.visible])};var sx=i(65929);let sf=(0,u.lazy)(()=>i.e("9102").then(i.bind(i,2090))),sb=({wrapRef:e,candlestick:t})=>{let{getI18n:i}=(0,sx.K)(),r=(0,u.useMemo)(()=>i("last-available-bar",{defaultValue:"Earliest Data"}),[i]),[s,a]=(0,u.useState)(!1),[o,l]=(0,u.useState)(""),[n,d]=(0,u.useState)({x:0,y:0}),c=(0,u.useCallback)(()=>a(!1),[]);return(0,u.useEffect)(()=>{if(!t)return;let e=({item:e,isLast:i})=>{if(!t||!e)return;let s=i?r:t.getDateText(e.time),o=t.getPositionOfCandlestickItem(e);l(s),d(o),a(!0)};return t.on("onDateTooltip",e),()=>t.off("onDateTooltip",e)},[t,r]),(0,h.jsx)(u.Suspense,{fallback:null,children:e&&t&&s?(0,h.jsx)(sf,{wrapRef:e,text:o,visible:s,position:n,onClickAway:c}):null})},sy=(0,u.lazy)(()=>Promise.resolve().then(i.bind(i,78779))),sv=({candlestick:e,enabled:t})=>{let{isMobile:i}=(0,iK.F)();return e&&t&&!i?(0,h.jsx)(u.Suspense,{fallback:null,children:(0,h.jsx)(sy,{candlestickInstance:e})}):null},sC=(0,u.lazy)(()=>i.e("9212").then(i.bind(i,89884))),sw=({candlestick:e,onClick:t,isExpanded:i})=>{let{isMobile:r}=(0,iK.F)();return(0,h.jsx)(u.Suspense,{fallback:null,children:e&&t&&r?(0,h.jsx)(sC,{candlestick:e,onClick:t,isExpanded:i}):null})},sS=(0,u.lazy)(()=>i.e("4329").then(i.bind(i,19474))),sT=({candlestick:e})=>{let[t,i]=(0,u.useState)(!1),r=(0,u.useCallback)(()=>i(!1),[]);return(0,u.useEffect)(()=>{if(!e)return()=>null;let t=()=>i(!0);return e.on("showTimeTool",t),()=>e.off("showTimeTool",t)},[e]),(0,h.jsx)(u.Suspense,{fallback:null,children:e&&t?(0,h.jsx)(sS,{candlestick:e,visible:t,onClose:r}):null})},sA=(0,u.lazy)(()=>i.e("5152").then(i.bind(i,88254))),s_=["candlestick","grid","theme","isHiddenLogo","isVolumeDisabled"],sL=(e,t)=>{let i=e.getConfig(),r={},s={},a=!1;Object.keys(t||{}).forEach(e=>{s_.includes(e)&&!m()(t[e],i[e])&&((0,ev.Kn)(t[e])&&(0,ev.Kn)(i[e])&&(0,eb.r3)(i[e],t[e])||(a=!0,r[e]=t[e],s[e]=i[e]))}),a&&(e.setAttrs((0,eb.PM)({},s,r)),e.update())},sk=(0,u.forwardRef)((e,t)=>{let{candlestick:i,grid:r,isShowDrawPanel:s=!1,isShowAnnotationPanel:a=!0,isShowCustomIndicator:o=!1,isShowBacktest:l=!1,isShowSubTradingData:n=!1,isHiddenLogo:d=!1,isVolumeDisabled:c=!1,sensorsManager:g,forceUpdate:m=()=>null,onModalClose:p,onSettingChanged:x=()=>null,onSettingReset:f=()=>null,enableContextMenu:b=!0,placeOrder:y,informationMines:v,contextMenu:C=rI,onClickExpand:w,isExpanded:S}=e,[T,A]=(0,u.useState)(!1),[_,L]=(0,u.useState)(),k=(0,rL.H)(),I=(0,u.useRef)(null),P=(0,u.useRef)(),E=(0,u.useRef)(g);E.current=g;let B=sl({candlestick:P.current}),{theme:N}=sg({candlestick:P.current}),M=sm({candlestick:P.current});(0,u.useImperativeHandle)(t,()=>({getCandlestick:()=>P.current}));let D=(0,u.useMemo)(()=>({candlestick:i,grid:r,theme:N.toLowerCase(),isHiddenLogo:d,isVolumeDisabled:c}),[i,N,r,d,c]),V=(0,u.useMemo)(()=>{let e={};return s_.forEach(t=>{void 0!==D[t]&&(e[t]=D[t])}),e},[D]);(0,iO.VC)(()=>{if(P.current)return;P.current=new iR({container:I.current,...V});let e=P.current;e.on("showSettingDialog",()=>{A(!0)}),e.on("dispatchErrorData",({data:e})=>{E.current?.logOnErrorData?.(e)})},[V]),(0,u.useEffect)(()=>{P.current&&sL(P.current,V)},[V]),sp({candlestick:P.current,menuSettings:C}),su({candlestick:P.current});let j=(0,u.useMemo)(()=>P.current&&T?(0,h.jsx)(u.Suspense,{fallback:null,children:(0,h.jsx)(sA,{visible:T,onClose:()=>A(!1),candlestickInstance:P.current,forceUpdate:m,onSettingChanged:x,onSettingReset:f,colorTable:P.current?.getColorTable()})}):null,[m,x,f,T,P.current]),R=(0,u.useMemo)(()=>M===(0,eb.SX)("--color-BasicBg")?"bg-BasicBg":"",[M]),O=(0,u.useMemo)(()=>`flex kline-wrap ${N} ${R}`,[N,R]),F=(0,u.useMemo)(()=>({...e.style,...""===R?{background:M}:{}}),[R,M,e.style]);return(0,h.jsxs)("div",{ref:L,className:O,style:F,dir:"ltr",children:[(0,h.jsx)("div",{ref:I,className:"kline-container"}),j,B.button,(0,h.jsx)(sT,{candlestick:P.current}),(0,h.jsx)(sb,{candlestick:P.current,wrapRef:_}),(0,h.jsx)(sv,{enabled:s,candlestick:P.current}),(0,h.jsx)(rZ,{candlestick:P.current,chartType:i?.type,informationMines:v,wrapRef:_,theme:N}),(0,h.jsx)(rV,{candlestickInstance:P.current,onClose:p,customizedEnabled:o,backTestEnabled:l,subTradingDataEnabled:n}),(0,h.jsx)(r_,{wrapperElement:_,candlestick:P.current,enabled:a}),(0,h.jsx)(r$,{candlestick:P.current,placeOrder:y,wrapRef:_}),(0,h.jsx)(rO,{candlestick:P.current}),(0,h.jsx)(rP,{enabled:b,candlestick:P.current,drawingDeleteConfirmationDialogValue:k,placeOrder:y,menuSettings:C}),(0,h.jsx)(rB,{candlestick:P.current,value:k}),(0,h.jsx)(sw,{candlestick:P.current,onClick:w,isExpanded:S})]})});sk.displayName="candlestickCandlestick";var sI=i(67616),sP=i(34291),sE=i.n(sP),sB=i(75486),sN=i.n(sB),sM=i(87622),sD=i.n(sM);let sV=[{type:ef.A.CANDLE,indicators:[{type:"MA",id:"@MA",categories:["main"]}]},{type:ef.A.VOL,indicators:[{type:"VOL",id:"@VOL",categories:["sub"]}]}],sj=()=>"candlestick-indicator-setting",sR=()=>"candlestick-setting",sO=()=>"BASIC_KLINE_INDICATOR",sF=e=>"string"==typeof e?`BASIC_KLINE_${e}`:`BASIC_KLINE_${(0,eb.T)(e)}`,sH=({type:e,lineType:t,dir:i})=>{switch(e){case ef.Us.LegacyArrow:return i||ef.Us.LeftArrow;case ef.Us.LegacyStraightLine:return t||ef.Us.HorizontalLine;default:return e}},sZ=e=>{let t=b()(e),i=t?.find(e=>e.type===ef.A.CANDLE);if(i){let e=i.annotations.map(({type:e=ef.Us.Empty,lineType:t,dir:i,...r})=>({type:sH({type:e,lineType:t,dir:i}),...r}));i.annotations=e}return t},sU=({type:e,namespace:t,symbol:i,saveIndicators:r,saveAnnotations:s,saveSettings:a,load:o,clear:l})=>{let n={type:e,symbol:i};if(!t)return{info:n,saveAnnotations:()=>Promise.resolve(),saveIndicators:()=>Promise.resolve(),saveSettings:()=>Promise.resolve(),load:()=>Promise.resolve({storeData:[],indicatorSetting:null,setting:null}),clear:sE()};let d=sO(),c=sF(i),h=sj(),u=sR(),g=sN().createInstance({name:t}),m=e=>({indicators:e.storeData.map(({type:e,indicators:t,weight:i})=>({type:e,indicators:t,weight:i})),annotations:e.storeData.map(({type:e,annotations:t=[]})=>({type:e,annotations:t}))});return{info:n,saveAnnotations:async e=>{let t=m(e);await s({payload:{...e,...t},indicatorStoreKey:d,annotationsStoreKey:c,indicatorSettingStoreKey:h,settingStoreKey:u,storage:g})},saveIndicators:async e=>{let t=m(e);await r({payload:{...e,...t},indicatorStoreKey:d,annotationsStoreKey:c,indicatorSettingStoreKey:h,settingStoreKey:u,storage:g})},saveSettings:async e=>{let t=m(e);await a({payload:{...e,...t},indicatorStoreKey:d,annotationsStoreKey:c,indicatorSettingStoreKey:h,settingStoreKey:u,storage:g})},load:async()=>{try{let{indicators:e,annotations:t,indicatorSetting:i,setting:r}=await o({indicatorStoreKey:d,annotationsStoreKey:c,indicatorSettingStoreKey:h,settingStoreKey:u,storage:g}),s=sD()(e||sV,"type"),a=sD()(t||[],"type"),l=e1()({},s,a);return{storeData:Object.values(l).map(e=>e),indicatorSetting:i,setting:r}}catch(e){return console.warn("[candlestick] load saving error: ",e),{storeData:[],indicatorSetting:null,setting:null}}},clear:()=>l({storage:g})}},sW=({namespace:e,symbol:t})=>sU({type:"local",namespace:e,symbol:t,saveAnnotations:async({payload:{annotations:e},annotationsStoreKey:t,storage:i})=>{await i.setItem(t,e)},saveIndicators:async({payload:{indicators:e,indicatorSetting:t},indicatorStoreKey:i,indicatorSettingStoreKey:r,storage:s})=>{await Promise.all([s.setItem(i,e),s.setItem(r,t)])},saveSettings:async({payload:{setting:e},settingStoreKey:t,storage:i})=>{await i.setItem(t,e)},load:async({storage:e,indicatorStoreKey:t,annotationsStoreKey:i,indicatorSettingStoreKey:r,settingStoreKey:s})=>{let[a,o,l,n]=await Promise.all([e.getItem(t),e.getItem(i),e.getItem(r),e.getItem(s)]);return{indicators:a,annotations:sZ(o||[]),indicatorSetting:l,setting:n}},clear:({storage:e})=>e.clear()});var s$=i(93659);let sz=({needStore:e,storage:t,candlestick:i,sensors:r,beforeChartReady:s})=>{let a=(0,u.useRef)(),o=(0,u.useCallback)(async()=>{if((a.current&&clearTimeout(a.current),i?.setAttr("isSaveReady",!1),e&&i)&&i.isLoaded()){r?.logOnKlineReady?.();try{let{storeData:e,indicatorSetting:a,setting:o}=await t.load();i.indicatorStore.load({data:a}),i.settingStore.load({data:o}),await s?.({storedData:e});let l=await i.loadChart({data:e||[],reload:!0});r?.logOnCatchChart?.(l),i?.setAttr("needToReloadIndicator",!1)}catch(e){console.error("[candlestick] preparing chartReady errors: ",e),t.clear()}finally{a.current=setTimeout(()=>{i.setAttr("isSaveReady",!0)},2e3),i.dataFeed.triggerLoading(!1)}}},[s,i,e,t]);(0,u.useEffect)(()=>i?(i.on("chartReady",o),i.on("reloadStorage",o),()=>{i.off("chartReady",o),i.off("reloadStorage",o)}):()=>null,[i,o]),(0,s$.Z)(()=>{i&&i.fire("reloadStorage")},[i,t])},sK=({candlestick:e,storage:t})=>{let i=(0,u.useMemo)(()=>v()(()=>{e&&t.saveAnnotations(e.getSave())},2e3),[e,t]),r=(0,u.useMemo)(()=>v()(()=>{e&&t.saveIndicators(e.getSave())},2e3),[e,t]),s=(0,u.useMemo)(()=>v()(()=>{e&&t.saveSettings(e.getSave())},2e3),[e,t]);(0,u.useEffect)(()=>{if(!e)return;let t=({action:t})=>{if(e.getAttr("isSaveReady"))switch(t){case"annotation":i();break;case"indicator":r();break;default:console.warn("[candlestick][onSaveNeeded] unrecognized type ",t)}},a=({type:e})=>{"update"===e&&r()},o=({type:e})=>{"update"===e&&s()};return e.on("saveChartNeeded",t),e.indicatorStore.subscribeValueChanged(a),e.settingStore.subscribeValueChanged(o),()=>{i.cancel(),r.cancel(),s.cancel(),e.off("saveChartNeeded",t),e.indicatorStore.unsubscribeValueChanged(a),e.settingStore.unsubscribeValueChanged(o)}},[e,i,r,s])},sX=(0,u.forwardRef)((e,t)=>{let{dataProvider:i,interval:r,symbol:s,setLoading:a=sE(),baseAsset:o="",quoteAsset:l="",namespace:n,isStock:d=!1,sensorsManager:c,storeSymbol:g="",needStore:m=!0,beforeChartReady:p=()=>Promise.resolve(),storage:x,...f}=e,[,{inc:b}]=(0,sI.Z)(0),y=(0,u.useRef)(null),v=(0,u.useRef)(c),C=(0,u.useRef)(),w=(0,u.useRef)(!1),[S,T]=(0,u.useState)(!1),[A,_]=(0,u.useState)(!1);w.current=y.current?.getCandlestick()?.isLoaded()||!1,v.current=c;let L=(0,u.useCallback)(()=>b(),[b]),k=(0,u.useMemo)(()=>e.candlestick?.type?.toUpperCase(),[e.candlestick]),I=(0,u.useMemo)(()=>sW({namespace:n,symbol:s}),[n,s]),P=(0,u.useMemo)(()=>x||I,[x,I,g]);return(0,u.useLayoutEffect)(()=>{let e=y.current?.getCandlestick();C.current!==n&&(e?.setAttr("needToReloadIndicator",!0),C.current=n)},[n]),(0,u.useEffect)(()=>{let e=y.current?.getCandlestick();if(!e)return()=>null;let t=({type:t})=>{"load"===t&&(T(!0),_(e.settingStore.getValue("@contextMenu.bidAsk")||!1))};return e.settingStore.subscribeValueChanged(t),()=>e.settingStore.unsubscribeValueChanged(t)},[y.current]),(0,u.useEffect)(()=>{let e=y.current?.getCandlestick();if(!e)return()=>null;let t=({key:e,value:t})=>{"@contextMenu.bidAsk"===e&&_(t)};return e.settingStore.subscribeValueChanged(t),()=>e.settingStore.unsubscribeValueChanged(t)},[y.current]),(0,u.useImperativeHandle)(t,()=>({getCandlestick:()=>y.current?.getCandlestick()})),(0,u.useEffect)(()=>{let e=y.current?.getCandlestick()?.dataFeed;e?.setLoadCallback(a)},[a]),(0,u.useEffect)(()=>{let e=v.current,t=y?.current?.getCandlestick();if(!t)return()=>null;let i=()=>e?.logOnFetchStart?.(),r=()=>e?.logOnFetchEnd?.();return t.on("beforeDataFetching",i),t.on("doneDataFetching",r),()=>{t.off("beforeDataFetching",i),t.off("doneDataFetching",r)}},[]),(0,u.useEffect)(()=>{let e=y?.current?.getCandlestick();e&&e.changeSource({symbol:s,interval:r,dataProvider:i})},[r,s,i.getData,i.subscribe,i.unsubscribe]),(0,u.useEffect)(()=>{let e=!1,t=y?.current?.getCandlestick();if(!t)return()=>null;let{dataFeed:i}=t;return i.getPositions(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.managePositionLines(t)}),i.subscribePositions(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.managePositionLines(t)}),()=>{e=!0,i.unsubscribePositions()}},[s,r,i.getPositions,i.subscribePositions,i.unsubscribePositions]),(0,u.useEffect)(()=>{let e=!1,t=y?.current?.getCandlestick();if(!t)return()=>null;let{dataFeed:i}=t;return i.getOrders(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageOrderLines(t)}),i.subscribeOrders(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageOrderLines(t)}),()=>{e=!0,i.unsubscribeOrders()}},[s,r,i.getOrders,i.subscribeOrders,i.unsubscribeOrders]),(0,u.useEffect)(()=>{let e=!1,t=y?.current?.getCandlestick();if(!t)return()=>null;let{dataFeed:i}=t;return i.getExecutionOrders(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageExecutionOrders(t.orders)}),i.subscribeExecutionOrders(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageExecutionOrders(t.orders)}),()=>{e=!0,i.unsubscribeExecutionOrders()}},[s,r,i.getExecutionOrders,i.subscribeExecutionOrders,i.unsubscribeExecutionOrders]),(0,u.useEffect)(()=>{let e=!1,t=y?.current?.getCandlestick();if(!t)return()=>null;let{dataFeed:i}=t;return i.getLabelLines(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageLabelLines(t)}),i.subscribeLabelLines(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageLabelLines(t)}),()=>{e=!0,i.unsubscribeLabelLines()}},[s,r,i.getLabelLines,i.subscribeLabelLines,i.unsubscribeLabelLines]),(0,u.useEffect)(()=>{let e=!1,t=y?.current?.getCandlestick();if(!t)return()=>null;let{dataFeed:i}=t;return i.getSingleLabelLines(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageSingleLabelLines(t)}),i.subscribeSingleLabelLines(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageSingleLabelLines(t)}),()=>{e=!0,i.unsubscribeSingleLabelLines()}},[s,r,i.getSingleLabelLines,i.subscribeSingleLabelLines,i.unsubscribeSingleLabelLines]),(0,u.useEffect)(()=>{let e=!1,t=y?.current?.getCandlestick();if(!t)return()=>null;let{dataFeed:i}=t;return i.getAlerts(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageAlerts(t)}),i.subscribeAlerts(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.manageAlerts(t)}),()=>{e=!0,i.unsubscribeAlerts()}},[s,r,i.getAlerts,i.subscribeAlerts,i.unsubscribeAlerts]),(0,u.useEffect)(()=>{let e=!1,t=y.current?.getCandlestick();if(!t)return()=>null;let{dataFeed:i}=t;return S&&A&&i.subscribeAskBid(t=>{if(e)return;let i=y?.current?.getCandlestick();i?.setAttr("askBid",t)}),()=>{e=!0,i.unsubscribeAskBid()}},[r,s,i,S,A]),sK({candlestick:y.current?.getCandlestick(),storage:P}),sz({needStore:m,storage:P,candlestick:y.current?.getCandlestick(),sensors:v.current,beforeChartReady:p}),(0,u.useEffect)(()=>{let e=!1;return(async()=>{if(!k||!w)return;let t=y.current?.getCandlestick(),{storeData:i}=await P.load();e||(k.toUpperCase()===ef.oX.Line?i[0]?.indicators.forEach(e=>{let{type:i,isTriggeredByClick:r,params:s}=e,a=!!s?.showSeries;t?.setIndicatorVisibleByName(i,!!(r&&a))}):i[0]?.indicators.forEach(e=>{let{type:i,isTriggeredByClick:r,params:s}=e,a=!!s?.showSeries;t?.setIndicatorVisibleByName(i,!r||!!a)}))})(),()=>{e=!0}},[k,P,w]),(0,u.useEffect)(()=>{let e=y.current?.getCandlestick();e?.setSymbolInfo({baseAsset:o,quoteAsset:l})},[o,l]),(0,h.jsx)(sk,{...f,ref:y,sensorsManager:c,forceUpdate:L,isVolumeDisabled:d})});sX.displayName="candlestickBasicKline";let sY=sX;var sG=i(66557),sq=i(78779);i(63226)},68867:function(e,t,i){i.d(t,{Z:()=>a});var r=i(36506),s=i(91417);let a=class{static isZero(e,t=1e-5){return Math.abs(e)<=Math.abs(t)}static isSamePoint(e,t){let i=Array.isArray(e)?e:[e.x,e.y],r=Array.isArray(t)?t:[t.x,t.y];return this.isZero(i[0]-r[0])&&this.isZero(i[1]-r[1])}static getSquareDistance(e,t){return(e.x-t.x)**2+(e.y-t.y)**2}static getDotMultiply(e,t){return e.x*t.x+e.y*t.y}static getCrossMultiply(e,t){return e.x*t.y-e.y*t.x}static degreeToRadius(e){return Math.PI*e/180}static transformPointToArray(e){return[e.x,e.y]}static transformPointToXY(e){return Array.isArray(e)?{x:e[0],y:e[1]}:e}static transformPointsToArray(e){return e.map(e=>this.transformPointToArray(e))}static transformPointsToXY(e){return e.map(e=>this.transformPointToXY(e))}static getBoundOfPoints(e){let t=e.map(e=>e[0]),i=e.map(e=>e[1]),r=Math.min(...t),a=Math.max(...t),o=Math.min(...i),l=Math.max(...i);return new s.Z(r,o,Math.abs(a-r),Math.abs(l-o))}static getDirectionVec(e,t){return new r.Z(t[0]-e[0],t[1]-e[1])}static isLeftOfLine(e,t,i){let[s,a]=[new r.Z(t[0],t[1]),new r.Z(i[0],i[1])];s.y>a.y&&([s,a]=[a,s]);let o=new r.Z(a.x-s.x,a.y-s.y),l=new r.Z(e[0]-s.x,e[1]-s.y);return this.getCrossMultiply(o,l)>0}static isBothSide(e,t,i,r=0){return this.getCrossMultiply(e,t)*this.getCrossMultiply(e,i)<=r}}},91417:function(e,t,i){i.d(t,{Z:()=>s});var r=i(68867);let s=class e{static isOverlaped(e,t){return e.isOverlaped(t)}clone(){return new e(this.x,this.y,this.width,this.height)}getBound(){return{x:this.x,y:this.y,width:this.width,height:this.height}}getCenter(){return[this.x+this.width/2,this.y+this.height/2]}getNorthEast(){return[this.x+this.width,this.y+this.height]}getSouthWest(){return[this.x,this.y]}getVetexs(){return[[this.x,this.y],[this.x,this.y+this.height],[this.x+this.width,this.y+this.height],[this.x+this.width,this.y]]}isOverlaped(e){let t=this.getCenter(),i=e.getCenter();return Math.abs(i[0]-t[0])<=(this.width+e.width)/2&&Math.abs(i[1]-t[1])<=(this.height+e.height)/2}contain(t){if(t instanceof e){let e=t.getVetexs();for(let t=0;t<e.length;t++)if(!this.contain(e[t]))return!1;return!0}let i=this.x+this.width,r=this.y+this.height;return(t[0]-this.x)*(t[0]-i)<=0&&(t[1]-this.y)*(t[1]-r)<=0}union(e){let t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.y=i,this.width=r-t,this.height=s-i,this}expand(e,t){return this.width+=2*e,this.x-=e,void 0!==t?(this.y-=t,this.height+=2*t):(this.y-=e,this.height+=2*e),this}isIntersectOfSegment(e,t){if(!r.Z.getBoundOfPoints([e,t]).isOverlaped(this))return!1;if(this.contain(e)||this.contain(t))return!0;let i=r.Z.getDirectionVec(e,t),s=this.getVetexs();for(let t=1;t<s.length;t++){let a=r.Z.getDirectionVec(e,s[t-1]),o=r.Z.getDirectionVec(e,s[t]);if(r.Z.isBothSide(i,a,o))return!0}return!1}constructor(e,t,i=0,r=0){this.x=e,this.y=t,this.width=i,this.height=r}}},66934:function(e,t,i){i.d(t,{Z:()=>d});var r=i(36506),s=i(91417),a=i(68867);let o=class{static getPedalPointOfLine(e,t,i){let s=new r.Z(e.x-t.x,e.y-t.y),o=new r.Z(i.x-t.x,i.y-t.y),l=a.Z.getDotMultiply(s,o)/o.getModelLength();return new r.Z(t.x,t.y).add(o.normalize().scale(l))}static getNearestPointToSegment(e,t,i){let r=this.getPedalPointOfLine(e,t,i);return this.isPointAtSegment(r,t,i)?r.toXY():a.Z.getSquareDistance(e,t)<a.Z.getSquareDistance(e,i)?t:i}static getDistanceToLine(e,t,i){let s=new r.Z(e.x-t.x,e.y-t.y),o=new r.Z(i.x-t.x,i.y-t.y);return Math.abs(a.Z.getCrossMultiply(s,o)/o.getModelLength())}static getIntersectWidthBound(e,t,i){let r=i.getVetexs(),s=null,o=null;for(let i=0,o=r.length;i<o;i++){let l={x:r[i][0],y:r[i][1]},n={x:r[(i+1)%o][0],y:r[(i+1)%o][1]},d=this.getIntersectOfSegmentPt(e,t,l,n);if(d&&(s||(s=d),s&&!a.Z.isSamePoint(s,d)))return[s,d]}return[]}static isPointAtLine(e,t,i,s){let o=new r.Z(i.x-t.x,i.y-t.y),l=new r.Z(e.x-t.x,e.y-t.y),n=a.Z.getCrossMultiply(o,l)/o.getModelLength();return a.Z.isZero(n,s)}static isPointAtSegment(e,t,i,r){return!!this.isPointAtLine(e,t,i,r)&&(this.isHorizontalLine(t,i)?(e.x-t.x)*(e.x-i.x)<=0:this.isVerticalLine(t,i)?(e.y-t.y)*(e.y-i.y)<=0:(e.x-t.x)*(e.x-i.x)<=0&&(e.y-t.y)*(e.y-i.y)<=0)}static isHorizontalLine(e,t){return a.Z.isZero(e.y-t.y)}static isVerticalLine(e,t){return a.Z.isZero(e.x-t.x)}static isParalled(e,t,i,s,o){let l=new r.Z(t.x-e.x,t.y-e.y),n=new r.Z(s.x-i.x,s.y-i.y),d=a.Z.getCrossMultiply(l,n);return a.Z.isZero(d,o)}static isCollinear(e,t,i,s,o){let l=new r.Z(t.x-e.x,t.y-e.y),n=new r.Z(s.x-i.x,s.y-i.y),d=new r.Z(e.x-i.x,e.y-i.y),c=a.Z.getCrossMultiply(l,n),h=a.Z.getCrossMultiply(l,d);return a.Z.isZero(c,o)&&a.Z.isZero(h,o)}static isIntersect(e,t,i,r,s){return!this.isParalled(e,t,i,r,s)}static getIntersectPt(e,t,i,s){if(this.isParalled(e,t,i,s))return;let o=new r.Z(t.x-e.x,t.y-e.y),l=new r.Z(s.x-i.x,s.y-i.y),n=new r.Z(i.x-e.x,i.y-e.y),d=new r.Z(s.x-e.x,s.y-e.y),c=Math.abs(a.Z.getCrossMultiply(o,n)),h=Math.abs(a.Z.getCrossMultiply(o,d)),u=0;return u=a.Z.isBothSide(o,n,d)?c/(c+h):c/(c-h),new r.Z(i.x,i.y).clone().add(l.clone().scale(u)).toXY()}static getIntersectOfSegmentPt(e,t,i,r){let s=this.getIntersectPt(e,t,i,r);if(s&&this.isPointAtSegment(s,i,r))return s}static isIntersectOfSegment(e,t,i,s,o){let l=new r.Z(t.x-e.x,t.y-e.y),n=new r.Z(s.x-i.x,s.y-i.y),d=new r.Z(i.x-e.x,i.y-e.y),c=new r.Z(s.x-e.x,s.y-e.y),h=new r.Z(e.x-i.x,e.y-i.y),u=new r.Z(t.x-i.x,t.y-i.y);return a.Z.isBothSide(l,d,c,o)&&a.Z.isBothSide(n,h,u,o)}getDirVector(){let e=this.v1.x-this.v0.x,t=this.v1.y-this.v0.y;return new r.Z(e,t)}getDirection(){return this.getDirVector().normalize()}getLineLength(){return this.getDirVector().getModelLength()}getBound(){let e=Math.min(this.v0.x,this.v1.x),t=Math.min(this.v0.y,this.v1.y),i=Math.abs(this.v1.x-this.v0.x),r=Math.abs(this.v1.y-this.v0.y);return new s.Z(e,t,i,r)}isPointAtLine(e,t){let i=this.getDirVector(),s=new r.Z(e.x-this.v0.x,e.y-this.v1.y),o=a.Z.getCrossMultiply(i,s);return a.Z.isZero(o,t)}isParalled(e,t){let i=this.getDirection(),r=e.getDirection(),s=a.Z.getCrossMultiply(i,r);return a.Z.isZero(s,t)}isCollinear(e,t){let i=e.getDirection(),s=new r.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),o=a.Z.getCrossMultiply(i,s);return this.isParalled(e,t)&&a.Z.isZero(o,t)}isIntersect(e,t){return!this.isParalled(e,t)}getIntersectPt(e){if(this.isParalled(e))return this.isCollinear(e)?void console.warn("These lines is collinear"):void console.warn("These lines is paralled");let t=this.getDirVector(),i=e.getDirVector(),s=new r.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),o=new r.Z(e.v1.x-this.v0.x,e.v1.y-this.v0.y),l=Math.abs(a.Z.getCrossMultiply(t,s)),n=Math.abs(a.Z.getCrossMultiply(t,o)),d=0;return d=a.Z.isBothSide(t,s,o)?l/(l+n):l/(l-n),e.v0.clone().add(i.clone().scale(d))}isIntersectOfSegment(e){let t=this.getDirVector(),i=e.getDirVector(),s=new r.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),o=new r.Z(e.v1.x-this.v0.x,e.v1.y-this.v0.y),l=new r.Z(this.v0.x-e.v0.x,this.v0.y-e.v0.y),n=new r.Z(this.v1.x-e.v0.x,this.v1.y-e.v0.y);return a.Z.isBothSide(t,s,o)&&a.Z.isBothSide(i,l,n)}isIntersectOfBound(e){return e.isIntersectOfSegment(a.Z.transformPointToArray(this.v0),a.Z.transformPointToArray(this.v1))}constructor(e,t){this.v0=new r.Z(e.x,e.y),this.v1=new r.Z(t.x,t.y)}};var l=i(55480);let n=class{getBound(){let e=Number.MAX_VALUE,t=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=-Number.MAX_VALUE,a=this.coordinates.slice(0);for(;a.length>0;){let s=a.pop();if(void 0===s)break;Array.isArray(s)?a=a.concat(s):(e=Math.min(s.x,e),i=Math.max(s.x,i),t=Math.min(s.y,t),r=Math.max(s.y,r))}return new s.Z(e,t,i-e,r-t)}getNearestPoint(e){let t=e,i=Number.MAX_SAFE_INTEGER,r=this.coordinates.slice(0);for(;r.length>0;){let s=r.pop();if(Array.isArray(s))if((0,l.Kn)(s[0]))for(let r=0,a=s.length;r<a-1;r++){let{pos:a,dis:o}=this.getDisAndPointAtLine(e,s[r],s[r+1]);i>o&&(i=o,t=a)}else r=r.concat(s);else if((0,l.Kn)(s)&&r[r.length-1]){let{pos:a,dis:o}=this.getDisAndPointAtLine(e,s,r[r.length-1]);i>o&&(i=o,t=a)}}return{point:t,dis:i}}getDisAndPointAtLine(e,t,i){let r=o.getNearestPointToSegment(e,t,i),s=a.Z.getSquareDistance(e,r);return{pos:r,dis:s}}constructor(e){this.coordinates=e,this.coordinates=e}},d={Vector2:r.Z,Line:o,Bound:s.Z,Polyline:n,Algorith:a.Z}},36506:function(e,t,i){i.d(t,{Z:()=>a});var r=i(55480),s=i(68867);let a=class e{static lerp(t,i,r){let s=new e(i.x-t.x,i.y-t.y);return t.add(s.scale(r))}add(e){return this.x+=Number(e.x),this.y+=Number(e.y),this}substract(e){return this.x-=Number(e.x),this.y-=Number(e.y),this}normalize(){let t=this.getModelLength();return 0===t?new e(0,0):new e(this.x/t,this.y/t)}clone(){return new e(this.x,this.y)}rotate(e){let t=s.Z.degreeToRadius(e),i=this.x*Math.cos(t)-this.y*Math.sin(t),r=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=i,this.y=r,this}scale(e,t){return this.x*=e,this.y*=t||e,this}getSquareLength(){return this.x**2+this.y**2}getModelLength(){return Math.sqrt(this.x**2+this.y**2)}toArray(){return[this.x,this.y]}toXY(){return{x:this.x,y:this.y}}constructor(e,t){this.x=0,this.y=0,"number"==typeof e&&"number"==typeof t?(this.x=e,this.y=t):Array.isArray(e)?[this.x,this.y]=e:(0,r.Kn)(e)&&(this.x=e.x,this.y=e.y)}}},73749:function(e,t,i){i.d(t,{Z:()=>a});var r=i(55480),s=i(44277);let a=class{isInvalid(){return!(0,r.hj)(this._min)||!(0,r.hj)(this._max)}getMinValue(){return this._min}setMinValue(e){return this._min=e,this}getMaxValue(){return this._max}setMaxValue(e){return this._max=e,this}getInterval(){return this._max-this._min}getExtent(){return[this._min,this._max]}getDifference(){return Math.max(this._max,this._min)-Math.min(this._max,this._min)}scaleAroundCenter(e){if(!(0,r.hj)(e))return;let t=(this._min+this._max)*.5,i=(this._max-this._min)*.5*e;this._min=t-i,this._max=t+i}scaleAroundPoint(e,t){if(!(0,r.hj)(e)||!(0,r.hj)(t))return;let i=e-this.getMinValue(),s=this.getMaxValue()-e;this._min=e-i*t,this._max=e+s*t}scaleAboveBottom(e){if(!(0,r.hj)(e))return;let t=this.getInterval();this._max=this._min+t*e}shift(e){return(0,r.hj)(e)&&(this._min+=e,this._max+=e),this}contain(e,t=!1){return t?e>this.getMinValue()&&e<this.getMaxValue():e>=this.getMinValue()&&e<=this.getMaxValue()}sliceArray(e,t){if(0===e.length)return e;let i=(0,s.ry)(e,e=>{let i=t(e);return this._min<=i?-1:1}),r=(0,s.ry)(e,e=>{let i=t(e);return this._max<i?-1:1});return e.slice(i,r)}getSliceArrayIndexs(e,t){return 0===e.length?[0,0]:[(0,s.ry)(e,e=>{let i=t(e);return this._min<=i?-1:1}),(0,s.ry)(e,e=>{let i=t(e);return this._max<i?-1:1})]}constructor(e,t){this._min=0,this._max=0,this._min=e,this._max=t}}},78409:function(e,t,i){i.d(t,{$F:()=>y,HU:()=>h,LA:()=>c,ZP:()=>C,fk:()=>u,g1:()=>x,i$:()=>b,mc:()=>p,p1:()=>d});var r=i(76635),s=i(43061),a=i(98140),o=i(2839),l=i(73749),n=i(10649);let d=10,c=.2,h=5,u=1.5,g=(0,a.qA)(a.fb.Day),m=(0,a.qA)(a.fb.Hour),p=e=>d/e,x=({viewWidth:e,scale:t})=>e/p(t),f=({viewWidth:e,scale:t,interval:i})=>x({viewWidth:e,scale:t})*i,b=({startTime:e,endTime:t,viewWidth:i,scale:r,interval:s,ranges:a,isFixed:o=!1})=>{let l=f({viewWidth:i,scale:r,interval:s});return{min:Math.floor((0,n.Sg)({ranges:a,startTime:e,offsetTime:-l,isFixed:o}).time),max:Math.floor((0,n.Sg)({ranges:a,startTime:t,offsetTime:l,isFixed:o}).time)}},y=({startTime:e,endTime:t,viewWidth:i,interval:s})=>{let a=Math.max(t-i/2*s,e),o=i/Math.floor((t-a)/s),l=(0,r.clamp)(d/o,c,h);return{shiftedTime:b({startTime:a,endTime:t,viewWidth:i,scale:l,interval:s,ranges:[]}),viewportTime:{min:a,max:t},scale:l}},v=e=>{let t=new Date(e);return{[o.QX.Year]:t.getUTCFullYear(),[o.QX.Month]:t.getUTCMonth(),[o.QX.Week]:t.getUTCDay(),[o.QX.Day]:t.getUTCDate(),[o.QX.Hour]:t.getUTCHours(),[o.QX.Minute]:t.getUTCMinutes(),[o.QX.Second]:t.getUTCSeconds()}},C=class{goToRange({startTime:e,endTime:t}){let i=Math.floor(Math.abs(t-e)/this.getTimeUnitValue()),r=this.coord.getInterval();this.setScaleCoeff(d/(r/i));let s=this.getDomainInterval(),{time:a}=this.getShiftedTime(t,-s);this.setDomain({min:a,max:t})}getTimeLengthByPixelCount({count:e}){let[t,i]=this.domain.getExtent();return(i-t)/this.coord.getInterval()*e}setScaleCoeff(e){this._scaleCoeff=(0,r.clamp)(e,c,h)}getScaleCoeff(){return this._scaleCoeff}getCoordOfValue(e){let t=this.coord.getMinValue(),i=this.domain.getMinValue(),{sliceTimeLength:r}=this.getShiftedTime(i,e-i,!0);return t+(e-i-r)/this.getTimeUnitValue()*this.unitWidth}getValueOfCoord(e){let t=this.getTimeUnitValue(),i=this.domain.getMinValue(),r=(this._maxTimeValue-i)%this._timeUnitValue,s=r/t*this.unitWidth,a=r+Math.round((e-this.coord.getMinValue()-s)/this.unitWidth)*t,{time:l}=this.getShiftedTime(i,a);if(this.getTimeScaleType()===o.QX.Month){let e=new Date(l),t=new Date(l+g);if(e.getUTCMonth()!==t.getUTCMonth())return l+g}return l}get unitWidth(){return p(this.getScaleCoeff())}isWithinDomain(e){return(0,r.inRange)(e,this.domain.getMinValue(),this.domain.getMaxValue())}get sliceRanges(){return(0,r.cloneDeep)(this._sliceRanges)}getTimeUnitValue(){return this._timeUnitValue}getTickScale(){return(0,r.findLast)(s.L7,({type:e,number:t})=>{let i=this.getTimeInterval(e);return Math.floor(i*t/this._timeUnitValue)*this.unitWidth>=50&&i>=this._timeUnitValue})||{type:o.QX.Month,number:12}}setDomain({min:e,max:t}){this.domain.setMinValue(e).setMaxValue(t)}getDomain(){return this.domain.getExtent()}getRange(){return this.coord.getExtent()}domainContains(e){return this.domain.contain(e)}getTimeScaleType(){if(this._isSeriesDataLengthLessThanMonths)return o.QX.Month;let e=s.L7.find(({type:e})=>this._timeUnitValue%(0,a.qA)((0,a.IA)(e))==0);return e?.type||o.QX.Day}getAxisData(){let[e]=this.domain.getExtent(),t=e,i=this.coord.getMinValue(),r=x({viewWidth:this.coord.getInterval(),scale:this.getScaleCoeff()}),s=this.getTimeUnitValue(),a=[],l={lastTime:0,pos:Number.MIN_SAFE_INTEGER};for(let e=0;e<=r;e++){if(0===e){let e=(this._maxTimeValue-t)%this._timeUnitValue;i+=e/s*this.unitWidth,t+=e}let{time:r}=this.getShiftedTime(t,e*s);if(this.getTimeScaleType()===o.QX.Month){let e=new Date(r),t=new Date(r+g);e.getUTCMonth()!==t.getUTCMonth()&&(r+=g)}this.isShowTicks(r,l)&&a.push({p:i+e*this.unitWidth,v:r})}return a}scaleAroundTimestamp(e,t){this._scaleCoeff*t>h||this._scaleCoeff*t<c||(this.setScaleCoeff(this.getScaleCoeff()*t),this._scaleAroundPoint(e,t))}scaleAroundRight(e){this.setScaleCoeff(this.getScaleCoeff()*e);let[,t]=this.getDomain(),i=this.getDomainInterval(),{time:r}=this.getShiftedTime(t,-i);this.setDomain({min:r,max:t})}updateSliceTimeInterval(e){let t=2*this._timeUnitValue;for(let i=1;i<e.length;i++){let r=e[i-1].time,s=e[i].time;s-r>=t&&this._sliceRanges.push([r+this._timeUnitValue,s])}}shiftTime(e){if(!(this._sliceRanges.length>0))return void this.domain.shift(e);let t=this.getDomainInterval(),i=this.domain.getMinValue(),{time:r}=this.getShiftedTime(i,e),{time:s}=this.getShiftedTime(r,t);this.domain.setMinValue(r).setMaxValue(s)}reposition({time:e,type:t}){let i=this.getDomainInterval()/2;switch(t){case"left":{let{time:t}=this.getShiftedTime(e,2*i);this.domain.setMinValue(e).setMaxValue(t);break}case"right":{let{time:t}=this.getShiftedTime(e,-(2*i));this.domain.setMinValue(t).setMaxValue(e);break}default:{let{time:t}=this.getShiftedTime(e,-i),{time:r}=this.getShiftedTime(e,i);this.domain.setMinValue(t).setMaxValue(r)}}}getTimeShiftedBy({time:e,left:t=0,right:i=0}){let r=this.getTimeUnitValue();return e+i*r-t*r}getShiftedTime(e,t,i=!1){return(0,n.Sg)({ranges:this._sliceRanges,startTime:e,offsetTime:t,isFixed:i})}getDomainInterval(){return f({viewWidth:this.coord.getInterval(),scale:this.getScaleCoeff(),interval:this.getTimeUnitValue()})}getMinMaxDomainByTime({startTime:e,endTime:t}){return b({startTime:e,endTime:t,viewWidth:this.coord.getInterval(),scale:this.getScaleCoeff(),interval:this._timeUnitValue,ranges:this.sliceRanges})}getVisibleSeriesData(e){return this.domain.sliceArray(e,e=>e.time)||[]}isShowTicks(e,t){let i=v(e),r=this.getCoordOfValue(e),{type:s,number:a}=this.getTickScale(),l=this.getTimeInterval(s)*a,d=r-t.pos,c=!1;if(s===o.QX.Month){let r=(0,n.Nw)({start:t.lastTime,end:e})-1;c=d>=50&&this.isShowMonthOrYear(i,r,a)}else e-t.lastTime>=l&&d+.01>=50&&(c=s===o.QX.Hour?this.isShowHour(i):s===o.QX.Day?this.isShowDay(i):i[s]%a==0);return c&&(t.lastTime=e,t.pos=r),c}isShowMonthOrYear(e,t,i){let r=Math.floor(i/12);return(!(i>12)||e[o.QX.Year]%r==0)&&e[o.QX.Day]<=this._timeUnitValue/g+1&&t>=i&&e[o.QX.Month]%i==0}isShowHour(e){let t=!1,{number:i}=this.getTickScale();if(0!==e[o.QX.Minute])return!1;if(this._timeUnitValue>=m){let r=e[o.QX.Hour]%(this._timeUnitValue/m);0!==r&&r*m<=this._timeUnitValue&&(t=(e[o.QX.Hour]-r)%i==0)}return e[o.QX.Hour]%i==0&&(t=!0),t}isShowDay(e){let{type:t,number:i}=this.getTickScale(),r=e[o.QX.Hour]*m;return i%7==0?r<=this._timeUnitValue&&0===e[o.QX.Week]:r<this._timeUnitValue&&e[t]%i==0}getTimeInterval(e){return e===o.QX.Month&&this._isSeriesDataLengthLessThanMonths?this._timeUnitValue:(0,a.qA)((0,a.IA)(e))}resetTimeDomainRange(){let e=this.domain.getMaxValue(),t=this.getDomainInterval(),{time:i}=this.getShiftedTime(e,-t);this.domain.setMinValue(i)}_scaleAroundPoint(e,t){let i=this.coord.getInterval(),[r,s]=this.coord.getExtent(),a=this.getCoordOfValue(e);if(a<r||a>s)return;let o=this.getDomainInterval(),l=(a-r)/i*o,{time:n}=this.getShiftedTime(e,-l*t),{time:d}=this.getShiftedTime(e,(o-l)*t);this.domain.setMinValue(n).setMaxValue(d)}constructor({domain:e,range:t,data:i,scaleCoeff:r=u,isLessThanMonths:s,timeUnitValue:a}){this._scaleCoeff=u,this._timeUnitValue=g,this._sliceRanges=[];let[o,n]=e;this._isSeriesDataLengthLessThanMonths=s,this.domain=new l.Z(o,n),this.coord=new l.Z(t[0],t[1]),this._timeUnitValue=a,this.setScaleCoeff(r),this.resetTimeDomainRange(),this._maxTimeValue=this.domain.getMaxValue(),this.updateSliceTimeInterval(i)}}},10649:function(e,t,i){i.d(t,{$T:()=>o,Lg:()=>n,Nw:()=>l,Sg:()=>a});var r=i(76635),s=i(98140);let a=({ranges:e,startTime:t,offsetTime:i,isFixed:r=!1})=>{let s=t+i,a=0;if(i<0)for(let i=e.length-1;i>=0;i--){let o=e[i];if(s<=o[1]&&t>=o[1]&&(r||(s-=o[1]-o[0]),a+=o[1]-o[0]),s>o[1])break}if(i>0)for(let i=0;i<e.length;i++){let o=e[i];if(s>=o[0]&&t<=o[0]&&(r||(s+=o[1]-o[0]),a+=o[1]-o[0]),s<o[0])break}return{time:s,sliceTimeLength:a}},o=e=>{let t=e.reduce((t,i,r)=>{let s=e[r+1];return s&&t.push(s.time-i.time),t},[]),i=(0,r.countBy)(t),[s]=(0,r.maxBy)(Object.entries(i),([e,t])=>t)||[],a=+s;if(a)return+a;let[o,l]=e;return o?.time&&l?.time?Math.abs(l.time-o.time):null},l=({start:e,end:t})=>{if(t-e<=(0,s.qA)(s.fb.Week))return 0;let i=new Date(e),[r,a]=[i.getUTCFullYear(),i.getUTCMonth()],o=new Date(t),[l,n]=[o.getUTCFullYear(),o.getUTCMonth()];return(l-r)*12+n-a+1},n=({data:e})=>[e[0]?.time,e[e.length-1]?.time]},37799:function(e,t,i){i.d(t,{k:()=>n,w:()=>a});var r=i(98140),s=i(78409);let a=e=>{let t=(0,r.AS)(e);return t.unit===r.fb.Hour?24/Math.ceil(24/t.value)*(0,r.qA)(r.fb.Hour):t.unit===r.fb.Month?12/Math.ceil(12/t.value)*(0,r.qA)(r.fb.Month):(0,r.m1)(e)||(0,r.qA)(r.fb.Day)},o=({viewWidth:e,scale:t})=>e/(s.p1/t),l=({viewWidth:e,scale:t,interval:i})=>o({viewWidth:e,scale:t})*a(i),n=({startTime:e,endTime:t,viewWidth:i,scale:r,interval:s})=>{let a=l({viewWidth:i,scale:r,interval:s}),o=Math.floor(e-a);return{min:Math.max(o,1),max:Math.floor(t+a)}}},53806:function(e,t,i){i.d(t,{Z:()=>p});var r=i(76635),s=i(43061),a=i(98140),o=i(2839),l=i(78848),n=i(73749),d=i(78409),c=i(10649),h=i(37799);let u=e=>{let t=new Date(e);return{[o.QX.Year]:t.getUTCFullYear(),[o.QX.Month]:t.getUTCMonth(),[o.QX.Week]:t.getUTCDay(),[o.QX.Day]:t.getUTCDate(),[o.QX.Hour]:t.getUTCHours(),[o.QX.Minute]:t.getUTCMinutes(),[o.QX.Second]:t.getUTCSeconds()}},g=(0,a.qA)(a.fb.Day),m=(0,a.qA)(a.fb.Hour),p=class{getCoordOfValue(e){if(0===this.getSeriesData().length){let t=this.coord.getMinValue(),i=this.domain.getMinValue();return t+(e-i)/this.domain.getInterval()*this.coord.getInterval()}let t=this.findVirtualBarIndex(e);return this.getCoordOfIndex(t)}getDomainInterval(){return(0,d.g1)({viewWidth:this.coord.getInterval(),scale:this.getScaleCoeff()})*this.getTimeUnitValue()}setDomain(e){this.domain.setMinValue(e.min).setMaxValue(e.max)}getDomain(){return this.domain.getExtent()}getAxisData(){let e=this.getSeriesData(),t=[],i={lastTime:0,pos:Number.MIN_SAFE_INTEGER};if(0===e.length)return this._generateEmptyStateTicks();let r=this.coord.getMinValue(),s=this.coord.getMaxValue(),a=this.getCoordOfIndex(0),o=this.getCoordOfIndex(e.length-1);return r<a&&this._generatePastRegionTicks(r,a,t,i),s>=a&&r<=o&&this._generateDataRegionTicks(Math.max(r,a),Math.min(s,o),e,t,i),s>o&&this._generateFutureRegionTicks(o,s,t,i),t}scaleAroundTimestamp(e,t){let i=this._scaleCoeff,s=(0,r.clamp)(i*t,d.LA,d.HU);s!==i&&(this._scaleCoeff=s,this._scaleAroundPoint(e,t))}scaleAroundRight(e){let t=this._scaleCoeff,i=(0,r.clamp)(t*e,d.LA,d.HU);if(i===t)return;this._scaleCoeff=i;let[,s]=this.getDomain(),a=this.getDomainInterval(),{time:o}=this.getShiftedTime(s,-a);this.setDomain({min:o,max:s})}shiftTime(e){let{minTime:t,maxTime:i}=this._calculatePanBounds(e);this.domain.setMinValue(t).setMaxValue(i)}reposition(e){let{time:t,type:i}=e,r=this.getDomainInterval()/2;switch(i){case"left":{let{time:e}=this.getShiftedTime(t,2*r);this.domain.setMinValue(t).setMaxValue(e);break}case"right":{let{time:e}=this.getShiftedTime(t,-(2*r));this.domain.setMinValue(e).setMaxValue(t);break}default:{let{time:e}=this.getShiftedTime(t,-r),{time:i}=this.getShiftedTime(t,r);this.domain.setMinValue(e).setMaxValue(i)}}}getScaleCoeff(){return this._scaleCoeff}getTimeUnitValue(){return(0,h.w)(this._interval)}getRange(){return this.coord.getExtent()}get unitWidth(){return(0,d.mc)(this.getScaleCoeff())}updateSeriesData(e){this._seriesData=e,this._initializeVirtualBarSystem()}getVisibleSeriesData(e){let t=this.getSeriesData();if(0===t.length)return this.domain.sliceArray(e,e=>e.time)||[];let[i,r]=this.domain.getExtent(),s=t[0].time,a=t[t.length-1].time;if(i<=a&&r>=s){let e=this.coord.getMinValue(),i=this.coord.getMaxValue(),r=this.getCoordOfIndex(0),s=this.getCoordOfIndex(t.length-1),a=Math.max(e,r),o=Math.min(i,s);if(a<=o){let e=this.getIndexOfCoord(a),i=this.getIndexOfCoord(o),r=Math.max(0,Math.min(e,t.length-1)),s=Math.max(0,Math.min(i+1,t.length));return t.slice(r,s)}}let o=e.filter(e=>{let t=e.time;return t<s||t>a});return this.domain.sliceArray(o,e=>e.time)||[]}getSeriesData(){return this._seriesData}getShiftedTime(e,t){return{time:Math.round(e+t)}}getMinMaxDomainByTime(e){let t=this.getDomainInterval();return{min:Math.max(Math.round(e.startTime-t),1),max:Math.round(Math.round(e.endTime+t))}}getTimeShiftedBy(e){let{time:t,left:i=0,right:r=0}=e,s=this.getTimeUnitValue();return Math.round(t+r*s-i*s)}getTimeLengthByPixelCount(e){let{count:t}=e,[i,r]=this.domain.getExtent();return(r-i)/this.coord.getInterval()*t}goToRange(e){let{startTime:t,endTime:i}=e,s=Math.floor(Math.abs(i-t)/this.getTimeUnitValue()),a=this.coord.getInterval(),o=d.p1/(a/s);this._scaleCoeff=(0,r.clamp)(o,d.LA,d.HU);let l=this.getDomainInterval(),n=this.findVirtualBarIndex(i),c=Math.ceil(l/this.getTimeUnitValue()),h=this.coord.getMaxValue()-this.coord.getMinValue(),u=this.unitWidth*(n-c+1),g=this.getSeriesData()[0].time+l/h*u;this.setDomain({min:g,max:g+l})}domainContains(e){return this.domain.contain(e)}isWithinDomain(e){let[t,i]=this.domain.getExtent();return e>=t&&e<=i}getTimeScaleType(){if(this._isSeriesDataLengthLessThanMonths)return o.QX.Month;let e=s.L7.find(({type:e})=>this._timeUnitValue%(0,a.qA)((0,a.IA)(e))==0);return e?.type||o.QX.Day}getTickScale(){return((e,t)=>{for(let i=e.length-1;i>=0;i--)if(t(e[i]))return e[i]})([...s.L7],({type:e,number:t})=>{let i=this._getTimeInterval(e);return Math.floor(i*t/this._timeUnitValue)*this.unitWidth>=50&&i>=this._timeUnitValue})||{type:o.QX.Month,number:12}}_initializeVirtualBarSystem(){let e=this.getSeriesData();if(0===e.length){this._virtualBarCache=null;return}let t=new Map,i=new Map;for(let r=0;r<e.length;r++)t.set(r,e[r].time),i.set(e[r].time,r);this._virtualBarCache={interval:this._interval,baseInterval:this._baseInterval,cachedBars:t,cachedTimes:i}}findVirtualBarIndex(e){let t=this.getSeriesData();if(0===t.length)return 0;let i=e;i<=0&&(i=0);let r=1e3*(0,l.q8)(i,this._interval,this._timezone),s=t[0].time,a=t[t.length-1].time;if(this._virtualBarCache){let e=this._virtualBarCache.cachedTimes.get(r);if(void 0!==e)return e}return r>=s&&r<=a?this._findDataBarIndex(r):r<s?this._calculatePastBarIndex(r,s):this._calculateFutureBarIndex(r,a,t.length-1)}getVirtualBarTime(e){let t,i;if(!this._virtualBarCache)return e*this.getTimeUnitValue();let r=this._virtualBarCache.cachedBars.get(e);if(void 0!==r)return r;let s=this._virtualBarCache.cachedTimes.get(0);if(void 0!==s&&e<=s)return 0;let a=this.getSeriesData();if(0===a.length)return e*this.getTimeUnitValue();if(e>=0&&e<a.length)return a[e].time;if(e<0){t=a[0].time,i=0;for(let r=i;r>e;r--){let e=this._findPreviousPeriodStart(t);if(this._virtualBarCache.cachedBars.set(r-1,e),this._virtualBarCache.cachedTimes.set(e,r-1),(t=e)<=0){t=0,this._virtualBarCache.cachedBars.set(r-1,t),this._virtualBarCache.cachedTimes.set(t,r-1);break}}}else{t=a[a.length-1].time,i=a.length-1;for(let r=i;r<e;r++){let e=this._findNextPeriodStart(t);this._virtualBarCache.cachedBars.set(r+1,e),this._virtualBarCache.cachedTimes.set(e,r+1),t=e}}return t}getCoordOfIndex(e){let t=this.getSeriesData();if(0===t.length)return this.coord.getMinValue()+e*this.unitWidth;let i=t[0].time;return this.getTimeBasedCoord(i)+e*this.unitWidth}getIndexOfCoord(e){let t=this.getSeriesData();if(0===t.length)return Math.round((e-this.coord.getMinValue())/this.unitWidth);let i=t[0].time;return Math.round((e-this.getTimeBasedCoord(i))/this.unitWidth)}getValueOfCoord(e){if(0===this.getSeriesData().length){let t=this.coord.getInterval(),i=this.domain.getInterval();return this.domain.getMinValue()+(e-this.coord.getMinValue())/t*i}let t=this.getIndexOfCoord(e);return this.getVirtualBarTime(t)}_findNextPeriodStart(e){let t=(0,a.AS)(this._interval);if(t.unit===a.fb.Month){let i,r,s;this._timezone?r=(i=new Date(e+60*parseInt(this._timezone)*6e4)).getUTCFullYear():r=(i=new Date(e)).getUTCFullYear();let a=Math.floor((s=i.getUTCMonth())/t.value)*t.value+t.value;return a>=12?Date.UTC(r+1,0,1):Date.UTC(r,a,1)}{let i=t.value*(0,a.qA)(t.unit);return 1e3*(0,l.q8)(e+i,this._interval,this._timezone)}}_findPreviousPeriodStart(e){let t=(0,a.AS)(this._interval),i=t.value*(0,a.qA)(t.unit);return 1e3*(0,l.q8)(e-i,this._interval,this._timezone)}_findDataBarIndex(e){let t=this.getSeriesData(),i=0,r=t.length-1;for(;i<=r;){let s=Math.floor((i+r)/2),a=t[s].time;if(a===e)return s;a<e?i=s+1:r=s-1}return Math.min(i,t.length-1)}_calculatePastBarIndex(e,t){let i=this._calculateSimplePastBarIndex(e,t);if(null!==i)return i;let r=t,s=0;for(;r>e;)r=this._findPreviousPeriodStart(r),s--,this._virtualBarCache&&(this._virtualBarCache.cachedBars.set(s,r),this._virtualBarCache.cachedTimes.set(r,s));return s}_calculateFutureBarIndex(e,t,i){let r=this._calculateSimpleFutureBarIndex(e,t,i);if(null!==r)return r;let s=t,a=i;for(;s<e;)s=this._findNextPeriodStart(s),a++,this._virtualBarCache&&(this._virtualBarCache.cachedBars.set(a,s),this._virtualBarCache.cachedTimes.set(s,a));return a}_isRegularInterval(){let e=(0,a.AS)(this._interval);return e.unit===a.fb.Minute?60%e.value==0:e.unit===a.fb.Hour&&24%e.value==0}_calculateSimplePastBarIndex(e,t){if(!this._isRegularInterval())return null;let i=(0,a.AS)(this._interval),r=Math.floor((t-e)/(i.value*(0,a.qA)(i.unit)));if(this._virtualBarCache){let t=-r;this._virtualBarCache.cachedBars.set(t,e),this._virtualBarCache.cachedTimes.set(e,t)}return-r}_calculateSimpleFutureBarIndex(e,t,i){if(!this._isRegularInterval())return null;let r=(0,a.AS)(this._interval),s=Math.floor((e-t)/(r.value*(0,a.qA)(r.unit)));if(this._virtualBarCache){let t=i+s;this._virtualBarCache.cachedBars.set(t,e),this._virtualBarCache.cachedTimes.set(e,t)}return i+s}getTimeBasedCoord(e){let t=this.coord.getMinValue(),i=this.domain.getMinValue(),r=this.domain.getMaxValue()-i,s=this.coord.getMaxValue()-t;return t+(e-i)/r*s}timeToPixels(e){return e/this.getTimeUnitValue()*this.unitWidth}pixelsToTime(e){return e/this.unitWidth*this.getTimeUnitValue()}_resetTimeDomainRange(){let e=this.domain.getMaxValue(),t=this.getDomainInterval(),{time:i}=this.getShiftedTime(e,-t);this.domain.setMinValue(i)}_scaleAroundPoint(e,t){let i=this.coord.getInterval(),[r,s]=this.coord.getExtent(),a=this.getCoordOfValue(e);if(a<r||a>s)return;let o=this.getDomainInterval(),l=(a-r)/i*o,{time:n}=this.getShiftedTime(e,-l*t),{time:d}=this.getShiftedTime(e,(o-l)*t);this.domain.setMinValue(n).setMaxValue(d)}_calculatePanBounds(e){let t=this.getSeriesData(),i=this.domain.getMinValue(),r=this.domain.getMaxValue();if(0===t.length)return{minTime:Math.round(i+e),maxTime:Math.round(r+e)};let s=i+e,a=r+e,o=t[0].time,l=t[t.length-1].time,n=6*this.unitWidth/this.unitWidth*this.getTimeUnitValue();if(e>0){let e=l-n;s>e&&(a=(s=e)+(r-i))}if(e<0){let e=o+n;a<e&&(s=(a=e)-(r-i))}return{minTime:Math.round(s),maxTime:Math.round(a)}}_getTimeInterval(e){return e===o.QX.Month&&this._isSeriesDataLengthLessThanMonths?this._timeUnitValue:(0,a.qA)((0,a.IA)(e))}_generateEmptyStateTicks(){let[e]=this.domain.getExtent(),t=e,i=this.coord.getMinValue(),r=(0,d.g1)({viewWidth:this.coord.getInterval(),scale:this.getScaleCoeff()}),s=this.getTimeUnitValue(),a=[],l={lastTime:0,pos:Number.MIN_SAFE_INTEGER};for(let e=0;e<=r;e++){if(0===e){let e=(this._maxTimeValue-t)%this._timeUnitValue;i+=e/s*this.unitWidth,t+=e}let{time:r}=this.getShiftedTime(t,e*s);if(this.getTimeScaleType()===o.QX.Month){let e,t;if(this._timezone){let i=60*parseInt(this._timezone)*6e4,s=r+i,a=r+g+i;e=new Date(s),t=new Date(a)}else e=new Date(r),t=new Date(r+g);e.getUTCMonth()!==t.getUTCMonth()&&(r+=g)}this._isShowTicks(r,l)&&a.push({p:i+e*this.unitWidth,v:r})}return a}_generatePastRegionTicks(e,t,i,r){let s=this.unitWidth,a=Math.ceil((t-e)/s);for(let o=0;o<a;o++){let a=e+o*s;if(a>=t)break;let l=this.getValueOfCoord(a);this._isShowTicks(l,r)&&i.push({p:a,v:l})}}_generateDataRegionTicks(e,t,i,r,s){let a=Math.max(0,this.getIndexOfCoord(e)),o=Math.min(i.length-1,this.getIndexOfCoord(t));for(let l=a;l<=o;l++){let a=this.getCoordOfIndex(l);if(a>=e&&a<=t){let e=i[l].time;this._isShowTicks(e,s)&&r.push({p:a,v:e})}}}_generateFutureRegionTicks(e,t,i,r){let s=this.unitWidth,a=Math.ceil((t-e)/s);for(let o=1;o<=a;o++){let a=e+o*s;if(a>t)break;let l=this.getValueOfCoord(a);this._isShowTicks(l,r)&&i.push({p:a,v:l})}}_isShowTicks(e,t){let i=u(e),r=this.getCoordOfValue(e),{type:s,number:a}=this.getTickScale(),l=this._getTimeInterval(s)*a,n=r-t.pos,d=!1;if(s===o.QX.Month){let r=(0,c.Nw)({start:t.lastTime,end:e})-1;d=n>=50&&this._isShowMonthOrYear(i,r,a)}else e-t.lastTime>=l&&n+.01>=50&&(d=s===o.QX.Hour?this._isShowHour(i):s===o.QX.Day?this._isShowDay(i):i[s]%a==0);return d&&(t.lastTime=e,t.pos=r),d}_isShowMonthOrYear(e,t,i){let r=Math.floor(i/12);return(!(i>12)||e[o.QX.Year]%r==0)&&e[o.QX.Day]<=this._timeUnitValue/g+1&&t>=i&&e[o.QX.Month]%i==0}_isShowHour(e){let t=!1,{number:i}=this.getTickScale();if(0!==e[o.QX.Minute])return!1;if(this._timeUnitValue>=m){let r=e[o.QX.Hour]%(this._timeUnitValue/m);0!==r&&r*m<=this._timeUnitValue&&(t=(e[o.QX.Hour]-r)%i==0)}return e[o.QX.Hour]%i==0&&(t=!0),t}_isShowDay(e){let{type:t,number:i}=this.getTickScale(),r=e[o.QX.Hour]*m;return i%7==0?r<=this._timeUnitValue&&0===e[o.QX.Week]:r<this._timeUnitValue&&e[t]%i==0}constructor(e){this._seriesData=[],this._virtualBarCache=null;let{domain:t,range:i,data:r,scaleCoeff:s=d.fk,isLessThanMonths:a,timeUnitValue:o,interval:l,baseInterval:c,timezone:h}=e;this.domain=new n.Z(t[0],t[1]),this.coord=new n.Z(i[0],i[1]),this._scaleCoeff=s,this._timeUnitValue=o,this._isSeriesDataLengthLessThanMonths=a,this._interval=l,this._baseInterval=c,this._timezone=h,this._seriesData=r,this._maxTimeValue=t[1],this._initializeVirtualBarSystem(),this._resetTimeDomainRange()}}},43061:function(e,t,i){i.d(t,{AN:()=>m,AX:()=>y,HD:()=>d,L7:()=>b,Li:()=>h,Wi:()=>c,X8:()=>f,_Y:()=>x,iu:()=>g,kn:()=>v,nJ:()=>C,pT:()=>u});var r,s,a,o,l,n,d,c,h,u,g,m,p=i(2839);let x=1e-5,f=["click","dblclick","mousedown","mousemove","mouseup","mouseout","wheel","gesturestart","gesturechange","gestureend","contextmenu"],b=[{type:p.QX.Month,number:36},{type:p.QX.Month,number:24},{type:p.QX.Month,number:12},{type:p.QX.Month,number:6},{type:p.QX.Month,number:3},{type:p.QX.Month,number:1},{type:p.QX.Day,number:7},{type:p.QX.Day,number:3},{type:p.QX.Day,number:1},{type:p.QX.Hour,number:12},{type:p.QX.Hour,number:6},{type:p.QX.Hour,number:4},{type:p.QX.Hour,number:2},{type:p.QX.Hour,number:1},{type:p.QX.Minute,number:30},{type:p.QX.Minute,number:15},{type:p.QX.Minute,number:5},{type:p.QX.Minute,number:3},{type:p.QX.Minute,number:1},{type:p.QX.Second,number:30}],y=new Set(["strokeStyle","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","font","textAlign","textBaseline","direction","lineDashOffset"]),v={...{background:"","candle.upBarColor":"","candle.downBarColor":"","candle.lineColor":"","frame.borderLineColor":"","text.defaultColor":"","text.unavailable":p.E.Gray10,"text.minMaxPrice":p.E.Gray10,"icon.plus":"","axis.tickLineColor":"","axis.tickTextColor":"","area.stroke":"","area.fill1":"","volume.upBarColor":"","volume.downBarColor":"","volume.maLineColor":"","volume.upTextColor":"","volume.downTextColor":"",defaultColor:p.E.CandleBlue,"cross.labelTextColor":"","cross.borderLineColor":"","cross.upLabelBorderColor":p.E.Green500,"cross.upLabelBgColor":p.E.Green600,"cross.downLabelBgColor":p.E.Red600,"cross.downLabelBorderColor":p.E.Red500,"cross.defaultLabelTextColor":"","cross.defaultLabelBgColor":"","cross.defaultLabelBorderColor":"","boll.fillColor":"","grid.borderLineColor":"","countdown.upTextColor":p.E.Gray600,"countdown.upBgColor":p.E.CandleGreen,"countdown.upBorderColor":p.E.CandleGreen,"countdown.downTextColor":p.E.Gray600,"countdown.downBgColor":p.E.CandleRed,"countdown.downBorderColor":p.E.CandleRed,"vertGridLine.color":p.E.Gray10,"horzGridLine.color":p.E.Gray10,"LSratio.outline":"","LSratio.area":"","oi.bar":"","BS.buy":"","BS.sell":"","indicator.1":"","indicator.2":"","indicator.3":"","indicator.4":"","indicator.5":"","indicator.6":"","indicator.7":"","indicator.8":"","indicator.9":"","indicator.10":""},background:p.E.White,"candle.upBarColor":p.E.CandleGreen,"candle.downBarColor":p.E.CandleRed,"candle.lineColor":"#5a9ad8","frame.borderLineColor":p.E.Gray50,"text.defaultColor":p.E.Gray600,"axis.tickLineColor":p.E.Gray300,"axis.tickTextColor":p.E.Gray300,"cross.labelTextColor":p.E.White,"cross.borderLineColor":p.E.Gray600,"grid.borderLineColor":p.E.Gray10,"volume.upBarColor":p.E.CandleGreen,"volume.downBarColor":p.E.CandleRed,"volume.maLineColor":p.E.LineColor1,"volume.upTextColor":p.E.Green500,"volume.downTextColor":p.E.Red500,"boll.fillColor":p.E.AreaFillColor1,"cross.defaultLabelTextColor":p.E.Gray600,"cross.defaultLabelBgColor":p.E.Gray10,"cross.defaultLabelBorderColor":p.E.Gray50,"horzGridLine.color":p.E.Gray10,"vertGridLine.color":p.E.Gray10,"text.minMaxPrice":p.E.Gray10,"text.unavailable":p.E.Gray10},C={...v,background:p.E.Gray900,"candle.lineColor":p.E.White,"text.defaultColor":p.E.Gray200,"frame.borderLineColor":p.E.Gray700,"axis.tickLineColor":p.E.Gray500,"axis.tickTextColor":p.E.Gray500,"cross.borderLineColor":p.E.Gray200,"grid.borderLineColor":p.E.Gray800,"volume.upBarColor":p.E.Green700,"volume.downBarColor":p.E.Red700,"boll.fillColor":p.E.AreaFillColor2,"cross.defaultLabelTextColor":p.E.Gray0,"cross.defaultLabelBgColor":p.E.Gray700,"cross.defaultLabelBorderColor":p.E.Gray600,"horzGridLine.color":p.E.Gray800,"vertGridLine.color":p.E.Gray800};(r=d||(d={})).MOUSE="MOUSE",r.MOUSE_DOWN="MOUSE_DOWN",r.MOUSE_DOWN_MOVE="MOUSE_DOWN_MOVE",r.MOUSE_DOWN_UP="MOUSE_DOWN_UP",r.MOUSE_MOVE="MOUSE_MOVE",r.MOUSE_CLICK="MOUSE_CLICK",(s=c||(c={})).DRAW_TREND_LINE="draw-trendline",s.DRAW_HORIZONTAL_EXTENDED_LINE="draw-horizontal-extended-line",s.DRAW_EX_TREND_LINE="draw-exTrendLine",s.DRAW_FIB_LINE="draw-fibLine",s.DRAW_INFO_LINE="draw-infoLine",s.DRAW_HORIZONTAL_LINE="draw-horizontalLine",s.DRAW_VERTICAL_LINE="draw-verticalLine",s.DRAW_PARRLLEL_LINE="draw-parallelLine",s.DRAW_RAY_LINE="draw-rayLine",s.DRAW_PRICE_LINE="draw-priceLine",s.DRAW_ARROW_LINE="draw-arrowLine",s.DRAW_UP_ARROW="draw-upArrow",s.DRAW_DOWN_ARROW="draw-downArrow",s.DRAW_LEFT_ARROW="draw-leftArrow",s.DRAW_RIGHT_ARROW="draw-rightArrow",s.DRAW_CROSS_LINE="draw-crossLine",s.DRAW_TEXT="draw-text",s.DRAW_RECTANGLE="draw-rectangle",s.DRAW_DELETE_ALL="draw-deleteAll",s.DRAW_MAGNET="draw-magnet",s.DRAW_BAR="draw-bar",s.DRAW_DAY="draw-day",s.DRAW_HOUR="draw-hour",s.DRAW_MINUTE="draw-minute",s.DRAW_DEFAULT_CURSOR="draw-defaultCursor",s.DRAW_CROSS_CURSOR="draw-crossCursor",s.DRAW_CONTINUE="draw-continue",s.DRAW_LOCK="draw-lock",s.DRAW_TOGGLE="draw-toggle-visible",s.NOTIFICATION_MAGNET_ENABLED="magnet-enabled-prompt",s.ANNOTATION_DEFAULT="annotation-back-default",s.ANNOTATION_COLOR="annotation-color",s.ANNOTATION_BACKGROUND="annotation-background",s.ANNOTATION_LINE_WIDTH="annotation-line-width",s.ANNOTATION_LINE_STYLE="annotation-line-style",s.ANNOTATION_LOCK="annotation-lock",s.ANNOTATION_UNLOCK="annotation-unLock",s.ANNOTATION_DELETE="annotation-delete",s.ANNOTATION_FONT_SIZE="annotation-font-size",s.ANNOTATION_FONT_BOLD="annotation-font-bold",s.ANNOTATION_EDIT_TEXT="annotation-edit-text",s.ICON_FOLD="icon-fold",s.ICON_UNFOLD="icon-unfold",(a=h||(h={})).DEFAULT="default",a.CROSSHAIR="crosshair",a.NSRESIZE="ns-resize",a.EWRESIZE="ew-resize",a.POINTER="pointer",a.GRAB="grab",a.GRABBING="grabbing",(o=u||(u={})).BackToDefault="BackToDefault",o.Color="Color",o.LineWidth="LineWidth",o.LineStyle="LineStyle",o.Background="Background",o.Lock="Lock",o.TextFontSize="TextFontSize",o.TextColor="TextColor",o.TextBold="TextBold",o.TextEdit="TextEdit",o.Delete="Delete",(l=g||(g={})).Hide="Hide",l.Setting="Setting",l.Delete="Delete",(n=m||(m={})).QuickOrderFloatingWindow="QuickOrderFloatingWindow",n.ChartTrading="ChartTrading",n.AskBid="AskBid",n.PriceLine="PriceLine",n.Countdown="Countdown",n.PercentageScale="PercentageScale",n.LogarithmicScale="LogarithmicScale",n.InvertedScale="InvertedScale",n.BuyAveragePrice="BuyAveragePrice",n.SellAveragePrice="SellAveragePrice",n.InformationMines="InformationMines",n.GoDate="goDate",n.Setting="setting",n.RightClickPlaceOrder="RightClickPlaceOrder"},98140:function(e,t,i){i.d(t,{AS:()=>n,IA:()=>p,b5:()=>h,dd:()=>u,ec:()=>d,fb:()=>s,m1:()=>m,qA:()=>g});var r,s,a=i(76635),o=i(2839);let l=/^(\d+)([SDWM])?$/;(r=s||(s={}))[r.Second=0]="Second",r[r.Minute=1]="Minute",r[r.Hour=2]="Hour",r[r.Day=3]="Day",r[r.Week=4]="Week",r[r.Month=5]="Month";let n=e=>{let[,t,i]=l.exec(e)||[],r=+t;if(Number.isNaN(r))throw Error(`${e} cannot be analyzed. (${t} ${i})`);switch(i){case"S":return{value:r,unit:0};case"D":return{value:r,unit:3};case"W":return{value:r,unit:4};case"M":return{value:r,unit:5};default:{let e=r<60;return{value:e?r:Math.floor(r/60),unit:e?1:2}}}},d=({value:e,unit:t})=>{switch(t){case 0:return`${e}S`;case 1:return`${e}`;case 2:return`${60*e}`;case 3:return`${e}D`;case 4:return`${e}W`;case 5:return`${e}M`;default:return""}},c=(e,t)=>e-t,h=(e,t)=>{let i=c(e.unit,t.unit);return 0===i?e.value-t.value:i},u=({value:e,candidates:t})=>{let i=n(e),r=t.map(n).sort(h),s=r[0];return d(r.reduce((e,t)=>i.value%t.value!=0?e:t.unit<=i.unit?t:e,s))},g=(0,a.memoize)(e=>{switch(e){case 1:return 60*g(0);case 2:return 60*g(1);case 3:return 24*g(2);case 4:return 7*g(3);case 5:return 30*g(3);default:return 1e3}}),m=e=>{try{let{value:t,unit:i}=n(e);return t*g(i)}catch(e){return console.warn(e),0}},p=e=>{switch(e){case o.QX.Second:return 0;case o.QX.Minute:return 1;case o.QX.Hour:return 2;case o.QX.Day:return 3;case o.QX.Week:return 4;case o.QX.Month:return 5;default:throw Error(`Unsupported time scale type: ${e}`)}}},2839:function(e,t,i){var r,s,a,o,l,n,d,c,h,u,g,m,p,x,f,b,y,v,C,w,S,T,A,_,L,k,I,P,E,B,N,M;i.d(t,{A:()=>n,Bf:()=>b,E:()=>d,HS:()=>f,Nm:()=>u,PH:()=>o,QX:()=>s,TD:()=>x,Us:()=>p,Vt:()=>m,Wr:()=>a,aI:()=>h,mB:()=>l,oX:()=>g,wh:()=>c}),(y=r||(r={})).Up="up",y.Down="down",(v=s||(s={})).Year="Year",v.Month="Month",v.Week="Week",v.Day="Day",v.Hour="Hour",v.Minute="Minute",v.Second="Second",(C=a||(a={})).Alphabetic="alphabetic",C.Top="top",C.Hanging="hanging",C.Middle="middle",C.Ideographic="ideographic",C.Bottom="bottom",(w=o||(o={})).Start="start",w.End="end",w.Center="center",w.Left="left",w.Right="right",(S=l||(l={})).All="All",S.Marks="Marks",S.Resize="Resize",(T=n||(n={})).DEFAULT="",T.CANDLE="CANDLE",T.MACD="MACD",T.EMA="EMA",T.MA="MA",T.SMA="SMA",T.MOMENTUM="MOMENTUM",T.ATR="ATR",T.BOLL="BOLL",T.VOL="VOL",(A=d||(d={})).White="#ffffff",A.Black="#000000",A.Gray="#2d2d2d",A.CandleRed="#E0294A",A.CandleGreen="#2EBD85",A.CandleBlue="#0303F7",A.LightGray="#9a9b9a",A.GrayD="#D8D8D8",A.GrayF="#F2F2F2",A.Gray8="#848E9C",A.GrayE="#EAECEF",A.GrayC="#C1C6CD",A.YellowF="#F0B90B",A.Dark4="#48515D",A.Dark2="#212833",A.Dark2A="#2A2F37",A.Dark1F="#1F2124",A.Blue3="#328DFD",A.Gray0="#FFFFFF",A.Gray5="#FAFAFA",A.Gray10="#F5F5F5",A.Gray50="#E6E8EA",A.Gray100="#CACED3",A.Gray200="#AEB4BC",A.Gray300="#929AA5",A.Gray400="#76808F",A.Gray500="#5E6673",A.Gray600="#474D57",A.Gray700="#2B2F36",A.Gray800="#1E2026",A.Gray900="#14151A",A.Gray1000="#0B0E11",A.Red5="#FEF6F7",A.Red10="#FEF1F2",A.Red50="#FDDDDE",A.Red100="#FDBAB9",A.Red200="#FC9897",A.Red300="#FC6E75",A.Red400="#F84960",A.Red500="#D9304E",A.Red600="#982A42",A.Red700="#5C1929",A.Red800="#35141D",A.Red900="#221113",A.Green5="#F0FFFA",A.Green10="#E2FDF4",A.Green50="#CBF6E8",A.Green100="#9BE8CD",A.Green200="#54E8B4",A.Green300="#2ED191",A.Green400="#02C076",A.Green500="#0F8F62",A.Green600="#1E644E",A.Green700="#143D31",A.Green800="#102821",A.Green900="#0B1915",A.LineColor1="#ff00ff",A.LineColor2="#cc0066",A.LineColor3="#00cccc",A.LineColor4="#2ED191",A.LineColor5="#bd930b",A.LineColor6="#c305c6",A.AreaFillColor1="#e5e5f2",A.AreaFillColor2="#161833",(_=c||(c={})).BASE="BASE",_.EXT="EXT",(L=h||(h={})).Normal="NORMAL",L.Percentage="PERCENTAGE",(k=u||(u={})).Up="UP",k.Down="DOWN",k.Right="RIGHT",k.Left="LEFT",(I=g||(g={})).Line="LINE",I.Bar="BAR",I.BarCandle="BAR_CANDLE",I.CandleBar="CANDLEBAR",I.Area="AREA",I.GradientArea="GRADIENTAREA",I.TimeGradientArea="TIMEGRADIENTAREA",I.Point="POINT",I.CrossLine="CROSSLINE",I.Transcation="TRANSCATION",I.HollowCandleBar="HOLLOW_CANDLEBAR",I.HollowBar="HOLLOW_BAR",(P=m||(m={})).Width="WIDTH",P.Height="HIGHT",P.All="ALL",(E=p||(p={})).DefaultCursor="DEFAULTCURSOR",E.CrossHairCursor="CROSSHAIRCURSOR",E.TrendLine="TRENDLINE",E.HorizontalExtendedLine="HROZONTAL_EXTENDED_LINE",E.ExtendTrendLine="EXTRENDLINE",E.FibonacciLine="FIBONACCILINE",E.InfoLine="INFOLINE",E.HorizontalLine="HORIZONTALLINE",E.VerticalLine="VERTICALLINE",E.CrossLine="CROSSLINE",E.ParallelLine="PARALLELLINE",E.UpArrow="UPARROW",E.DownArrow="DOWNARROW",E.LeftArrow="LEFTARROW",E.RightArrow="RIGHTARROW",E.Text="TEXT",E.Rectangle="RECTANGLE",E.RayLine="RAYLINE",E.PriceLine="PRICELINE",E.ArrowLine="ARROWLINE",E.OpenOrders="OPEN_ORDERS",E.LabelLines="LABELLINES",E.SingleLabelLines="SINGLE_LABEL_LINES",E.Alerts="ALERTS",E.Positions="POSITIONS",E.InformationMines="INFORMATION_MINES",E.ExecutionOrders="EXECUTION_ORDERS",E.ToolTip="TOOLTIP",E.Delete="DELETE",E.KeepDrawing="KeepDrawing",E.LockDraw="LOCKDRAW",E.ToggleVisible="TOGGLEVISIBLE",E.Empty="Empty",E.Magnet="Magnet",E.LegacyArrow="ARROW",E.LegacyStraightLine="STRAIGHTLINE",(B=x||(x={})).SOLID="solid",B.DASHED="dashed",B.DOTTED="dotted",B.DASHED_2="dashed_2",(N=f||(f={})).BOLD="bold",N.NORMAL="NORMAL",(M=b||(b={})).EDIT="EDIT",M.ADD="ADD",M.REMOVE="REMOVE"},78848:function(e,t,i){i.d(t,{EB:()=>l,FG:()=>o,HF:()=>a,MJ:()=>n,lu:()=>s,q8:()=>d});var r=i(98140);let s=(e,t,i,r)=>{if(0===e.length)return{aggregatedBars:[],groupedRawData:[]};if(t===i)return{aggregatedBars:e,groupedRawData:[e]};let s=[],a=-1;for(let i=0;i<e.length;i++){let s=e[i];if(Math.floor(s.time/1e3)===d(s.time,t,r)){a=i;break}}if(-1===a)return{aggregatedBars:[],groupedRawData:[]};let o=null,l=null,n=[],c=[];for(let i=a;i<e.length;i++){let a=e[i],n=d(a.time,t,r);if(o!==n){l&&(s.push(l),c=[]);let e=1e3*n;o=n,l={time:e,open:a.open,high:a.high,low:a.low,close:a.close,volume:a.volume,quantity:a.quantity,baseVolume:a.baseVolume,quoteQuantity:a.quoteQuantity,symbol:a.symbol},c.push(a)}else l&&(l.high=Math.max(l.high,a.high),l.low=Math.min(l.low,a.low),l.close=a.close,l.volume+=a.volume,l.quantity+=a.quantity,l.baseVolume&&a.baseVolume&&(l.baseVolume+=a.baseVolume),l.quoteQuantity&&a.quoteQuantity&&(l.quoteQuantity+=a.quoteQuantity),c.push(a))}return c.length>0&&n.push(c),l&&s.push(l),{aggregatedBars:s,groupedRawData:n}},a=e=>{let t=e[e.length-1];return t[t.length-1]},o=(e,t,i,r)=>{let s=e.length,a=d(t.time,i,r);for(let t=s-1;t>=0;t--){let o=e[t];if(d(o[o.length-1].time,i,r)===a)return s-1-t}return -1},l=(e,t,i,r)=>{if(d(a(e).time,i,r)<d(t.time,i,r))e.push([t]);else{let s=o(e,t,i,r);if(-1===s)return;let a=e[e.length-1-s],l=!1;for(let e=0;e<a.length;e++)if(a[e].time===t.time){a[e]=t,l=!0;break}l||a.push(t)}},n=(e,t,i)=>{let r=1e3*d(e[0].time,t,i);return e.reduce((e,t)=>e?{time:r,open:e.open,high:Math.max(e.high,t.high),low:Math.min(e.low,t.low),close:t.close,volume:e.volume+t.volume,quantity:e.quantity+t.quantity,baseVolume:e.baseVolume&&t.baseVolume?e.baseVolume+t.baseVolume:e.baseVolume,quoteQuantity:e.quoteQuantity&&t.quoteQuantity?e.quoteQuantity+t.quoteQuantity:e.quoteQuantity}:t,null)},d=(e,t,i)=>{let s=e;e<=0&&(s=0);let a=(0,r.AS)(t),o=Math.floor(s/1e3),l=new Date(s),n=28800*("8"===i),d=()=>{if(!(n>0))return{year:l.getUTCFullYear(),month:l.getUTCMonth(),date:l.getUTCDate(),day:l.getUTCDay()};{let e=new Date(s+1e3*n);return{year:e.getUTCFullYear(),month:e.getUTCMonth(),date:e.getUTCDate(),day:e.getUTCDay()}}};switch(a.unit){case r.fb.Second:case r.fb.Minute:case r.fb.Hour:{let{year:e,month:t,date:i}=d(),r=Math.floor((Date.UTC(e,t,i)-1e3*n)/1e3),s=a.value*c(a.unit),l=Math.floor((o-r)/s);return r+l*s}case r.fb.Day:{let{year:e}=d(),t=Math.floor((Date.UTC(e,0,1)-1e3*n)/1e3),i=Math.floor((o-t)/(86400*a.value));return t+86400*i*a.value}case r.fb.Week:{let e=604800*a.value,{year:t}=d(),i=Date.UTC(t,0,1)-1e3*n,r=new Date(i+1e3*n).getUTCDay(),s=Math.floor((i+(1-r+7)%7*864e5)/1e3),l=Math.floor((o-s)/e);return s+l*e}case r.fb.Month:{let{year:e,month:t}=d();return Math.floor((Date.UTC(e,Math.floor(t/a.value)*a.value,1)-1e3*n)/1e3)}default:return o}},c=e=>{switch(e){case r.fb.Second:return 1;case r.fb.Minute:return 60;case r.fb.Hour:return 3600;case r.fb.Day:return 86400;case r.fb.Week:return 604800;case r.fb.Month:return 2592e3;default:return 1}}},34300:function(e,t,i){i.d(t,{I7:()=>d,Ic:()=>c,T$:()=>u,T0:()=>h,Ww:()=>m,oV:()=>p});var r=i(27875),s=i.n(r),a=i(2839),o=i(44277);let l=e=>{let[,t=""]=e.split(".");return t.length},n=({open:e,close:t,high:i,low:r})=>[e,t,i,r].map(e=>e.toString()).reduce((e,t)=>Math.max(e,l(t)),0),d=e=>e.reduce((e,t)=>Math.max(e,n(t)),0),c=(e,{abortPredicate:t,onAbort:i,handleLoadLeft:r,handleLoadRight:s})=>{let a=e.shiftedMaxTime-e.shiftedMinTime,o=(e.minTime-e.shiftedMinTime)/a,l=(e.shiftedMaxTime-e.maxTime)/a;if(t())return i?.();o>=.3?r(e):l>=.3&&s(e)},h=({chartType:e,candlestickItem:{high:t,low:i,close:r}})=>{switch(e){case a.oX.CandleBar:case a.oX.HollowCandleBar:case a.oX.BarCandle:return{h:t,l:i};default:return{h:r,l:r}}},u=({previousItem:e,currentItem:t})=>t&&e?(0,o.gt)((t.close-e.close)/e.close):"",g=({time:e,tolerance:t=0})=>i=>Math.abs(e-i.time)<t?0:e-i.time,m=({time:e,tolerance:t,seriesData:i})=>{if(i.length<0)return;let r=g({time:e,tolerance:t}),a=(0,o.ry)(i,r),l=s()(a,0,i.length-1);return i[l]},p=({time:e,tolerance:t,seriesData:i})=>i.length<0?-1:(0,o.ry)(i,g({time:e,tolerance:t}))},27868:function(e,t,i){i.d(t,{Z:()=>a});var r=i(44277);let s="GLOBAL_CANVS",a=class e{static getBufferCanvas(t){return e._globalCache.get(t)}static setBufferCanvas(t,i){e._globalCache.set(t,i)}static drawLine(e,t,i,r,s){e.moveTo(t,i),e.lineTo(r,s)}static drawLines(e,t){for(let i=0;i<t.length;i++){let{x:r,y:s}=t[i];0===i?e.moveTo(r,s):e.lineTo(r,s)}}static drawPoints(e,t,i){if(i){let{width:r,height:s}=i,a=.5*r,o=.5*s;t.forEach(({x:t,y:l})=>{e.drawImage(i,t-a,l-o,r,s)})}else t.forEach(t=>{e.strokeRect(t.x-1,t.y-1,2,2)})}static drawCrossLines(e,t){t.forEach(({x:t,y:i})=>{this.drawLine(e,t-2,i,t+2,i),this.drawLine(e,t,i-2,t,i+2)})}static drawBackground(e,t="#FFFFFF",i){i||(i={x:0,y:0,width:e.canvas.width,height:e.canvas.height}),e.fillStyle=t,e.fillRect(i.x,i.y,i.width,i.height)}static clearRect(e,t){e&&(t||(t={x:0,y:0,width:e.canvas.width,height:e.canvas.height}),e?.clearRect?.(t.x,t.y,t.width,t.height))}static drawText(e,t,i,r,s){e.fillText(t,i,r,s)}static strokeRect(e,t,i,r,s){e.strokeRect(t,i,r,s)}static fillRect(e,t,i,r,s){e.fillRect(t,i,r,s)}static roundRect(e,{x:t,y:i,width:r,height:s},a){if(e.roundRect)return void e.roundRect(t,i,r,s,a);let[o,l,n,d]="number"==typeof a?[a,a,a,a]:a;e.beginPath(),e.moveTo(t,i+o),e.arc(t+o,i+o,o,Math.PI,1.5*Math.PI),e.lineTo(t+r-l,i),e.arc(t+r-l,i+l,l,1.5*Math.PI,2*Math.PI),e.lineTo(t+r,i+s-n),e.arc(t+r-n,i+s-n,n,0,.5*Math.PI),e.lineTo(t+d,i+s),e.arc(t+d,i+s-d,d,.5*Math.PI,Math.PI),e.closePath()}static drawCircle(e,t,i,r){e.arc(t,i,r,0,2*Math.PI)}static fillPath2D(e,t){e.fill(t)}static strokePath2D(e,t){e.stroke(t)}static drawImage(e,t,i,r,s,a){t?.width<1||t?.height<1||(s&&a?e.drawImage(t,i,r,s,a):e.drawImage(t,i,r))}static getCanvas(){let e=this.getBufferCanvas(s);return e||(e=(0,r.az)("canvas",{}),this.setBufferCanvas(s,e)),e}static getContext(){let e=this.getCanvas();return this._context||(this._context=e.getContext("2d")),this._context}static measureTextWidth(e,t){let i=this.getContext();if(!i)return 0;i.save(),t?.font&&(i.font=t?.font);let r=i.measureText(e);return i.restore(),5*Math.floor(r.width/5)+r.width%5}};a._globalCache=new Map},62086:function(e,t,i){i.d(t,{IV:()=>o,QV:()=>d,UV:()=>l,ZA:()=>c,cn:()=>a,o8:()=>u,pk:()=>h});var r=i(44277);let s=new Map;function a(e,t){e.classList.contains(t)||e.classList.add(t)}function o(e,t){e.classList&&e.classList.remove(t)}function l(e,t){e.innerHTML=t}let n=(()=>{let e,t,i,s=["Up","Down","Left","Right"],l=e=>{i&&clearTimeout(i),i=e};return(n,d)=>{if(!e){e=(0,r.az)("div",{display:"none"},"tooltip-wrap"),t=(0,r.az)("div",{},"tooltip-text");let i=(0,r.az)("div",{},"tooltip-arrow");e.append(t,i)}return d&&(s.forEach(t=>t!==d&&o(e,t.toLowerCase())),a(e,d.toLowerCase())),n&&(t.innerText=n),{tooltip:e,timer:i,setTimer:l}}})();function d(e,t="Up"){e.addEventListener("mouseenter",()=>{let{tooltip:i,timer:s}=n(e.getAttribute("tooltip")||"",t);s&&clearTimeout(s),i.parentNode!==e&&e.append(i),(0,r.AS)(i,{display:"block"})}),e.addEventListener("mouseleave",()=>{let{tooltip:e,setTimer:i}=n("",t);i(setTimeout(()=>{(0,r.AS)(e,{display:"none"})},100))})}function c(e,t=!0){if(t&&s.has(e)){let t=s.get(e);if(!t)return new Promise((e,t)=>t(Error("cache not found")));let i=t.image;return new Promise(e=>{i.complete?e(i):i.onload=()=>{e(i)}})}return new Promise(t=>{"undefined"==typeof window&&t(null);let i=new Image,r=URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}));i.src=r,i.onload=()=>{t(i)},s.set(e,{url:r,image:i})})}let h=({url:e,width:t,height:i})=>new Promise((r,s)=>{window||s();let a=new Image(t,i);a.src=e,a.onload=()=>{r(a)}}),u=({svg:e,id:t,className:i="icon-box",style:s={}})=>{let a=(0,r.az)("div",s,i);return t&&a.setAttribute("id",t),a.innerHTML=e,a}},44277:function(e,t,i){let r;i.d(t,{AS:()=>y,CN:()=>C,DZ:()=>W,Ds:()=>B,FH:()=>S,Fk:()=>_,Fr:()=>v,Lo:()=>k,M8:()=>D,O5:()=>x,P2:()=>N,P7:()=>V,PM:()=>function e(t,...i){if(!i.length)return t;let r=i.shift();return void 0===r?t:((0,p.Kn)(t)&&(0,p.Kn)(r)&&Object.keys(r).forEach(i=>{(0,p.Kn)(r[i])?(t[i]||(t[i]={}),e(t[i],r[i])):t[i]=r[i]}),e(t,...i))},R4:()=>R,SX:()=>$,T:()=>O,XH:()=>A,az:()=>f,gH:()=>L,gt:()=>I,kC:()=>H,ln:()=>j,mr:()=>w,r3:()=>F,ry:()=>M,sL:()=>T,tq:()=>E,uf:()=>Z,ui:()=>b,x_:()=>P});var s=i(34244),a=i.n(s),o=i(28879),l=i.n(o),n=i(13185),d=i.n(n),c=i(13888),h=i.n(c),u=i(43061),g=i(2839),m=i(36685),p=i(55480);function x(e,t,i={style:{position:"reletive",width:"100%",height:"100%"}}){let r=document.createElement("canvas");r.width=e*P(),r.height=t*P(),i.className&&(r.className=i.className);let{style:s}=i;return s&&y(r,s),r}function f(e,t,i){let r=document.createElement(e);return y(r,t),i&&r.classList.add(i),r}function b(e,t){Object.keys(t||{}).forEach(i=>{let r=t[i];void 0!==r&&u.AX.has(i)&&e&&(e[i]=r)})}function y(e,t={}){e&&e.style&&Object.keys(t).forEach(i=>{e.style[i]=t[i]})}function v(e,t=u._Y){return Math.abs(e)<t}function C(e){let{offsetX:t,offsetY:i}=e.originEvent;if((void 0===t||void 0===i)&&e.target){let{left:t=0,top:i=0}=e.target.getBoundingClientRect(),{clientX:r,clientY:s}=e;return{x:r-t,y:s-i}}return{x:t,y:i}}function w(e,t="YYYY-MM-DD hh:mm:ss"){let i=(0,p.hj)(e)?e:e instanceof Date?e.getTime():(0,p.HD)(e)?e.replace(/\//g,"-"):NaN;return isNaN(i)?t:l()(i).format(t)}function S(e,t){let i=parseFloat(`${e}`);return isNaN(i)||isNaN(t)?"NaN":t<=0?i.toFixed(0):e===1/0||e===-1/0?e.toLocaleString():a()(+e).toFixed(t).toString()}function T(e,t,i){let r,s,a;if(i){let t=new Date(e+60*parseInt(i)*6e4);r=t,s=t.getUTCHours(),a=t.getUTCMonth()}else s=(r=new Date(e)).getUTCHours(),a=r.getUTCMonth();return t===g.QX.Month?w(e,0===a?"YYYY":"MM/DD"):0===s?w(e,{[g.QX.Month]:"MM/DD",[g.QX.Day]:"MM/DD",[g.QX.Hour]:"MM/DD",[g.QX.Minute]:"HH:mm",[g.QX.Second]:"HH:mm:ss"}[t]):w(e,{[g.QX.Day]:"MM/DD",[g.QX.Hour]:"HH:00",[g.QX.Minute]:"HH:mm",[g.QX.Second]:"HH:mm:ss"}[t])}function A(e,t){let i="YYYY/MM/DD HH:mm:ss";return t===g.QX.Month||t===g.QX.Day?i="YYYY/MM/DD HH:00":(t===g.QX.Minute||t===g.QX.Hour)&&(i="YYYY/MM/DD HH:mm"),w(e,i)}function _(e,t=2){let i,r=(0,m._A)();if(1e-9>Math.abs(e)&&Math.abs(e)>0)return`${e.toExponential(2)}`;if(1e3>Math.abs(e))return r?`${(0,m.dD)(e,t)}`:L(e,t);let s=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],a=/\.0+$|(\.[0-9]*[1-9])0+$/;for(i=s.length-1;i>0&&!(Math.abs(e)>=s[i].value);i--);return`${r?(0,m.dD)(e/s[i].value,t).replace(a,"$1"):(e/s[i].value).toFixed(t).replace(a,"$1")}${s[i].symbol}`}function L(e,t,i=!1){if(isNaN(e))return"NaN";if(t<=0)return`${Math.floor(e)}`;if(i){let[i,r=""]=e.toLocaleString("en-US",{maximumFractionDigits:t+2,minimumFractionDigits:t+2,useGrouping:!1}).split(".");return`${i}.${r.slice(0,t).padEnd(t,"0")}`}return e===1/0?e.toLocaleString():new(a())(+e).toFixed(t)}function k(e,t=0){if(isNaN(e))return"NaN";if(e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)return e.toLocaleString();let[i,r]=(100*e).toLocaleString("en-US",{maximumFractionDigits:t+1,minimumFractionDigits:t+1,useGrouping:!1}).split(".");if(t>0){let e=r.slice(0,t);return`${i}.${e}%`}return`${i}%`}function I(e,t=2){let i=(0,m._A)();return(0,p.hj)(e)?i?`${(0,m.dD)(100*e,t)}%`:`${(100*e).toFixed(t)}%`:i?`${(0,m.dD)(0,2)}%`:"0.00%"}function P(){return void 0!==r?r:"undefined"!=typeof window&&window.devicePixelRatio||1}function E(){if("undefined"!=typeof navigator){let e=navigator.userAgent;return/Android|webOS|iPhone|iPod|BlackBerry/i.test(e)}return!1}function B(e,t=0,i=!1){let r=null;return(...s)=>{r&&clearTimeout(r),i&&null===r?e.apply(null,[...s]):r=setTimeout(()=>{e.apply(null,[...s])},t)}}function N(e,t){let i;return(...r)=>{let s=+new Date;(!i||s-i>t)&&(e.call(null,...r),i=s)}}function M(e,t){let i,r=0,s=e.length;for(;r<s;){let a=t(e[i=Math.floor((s+r)/2)]);if(!(0,p.hj)(a))throw Error(`binarySearch result is not number: ${a}`);if(a<0&&(s=i),0===a)return i;a>0&&(r=i+1)}return Math.floor((s+r)/2)}function D(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function V(e){if(e.startsWith("#"))return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1};let t=e.match(/\(([^)]*)\)/);if(t){let[e,i,r,s]=t[1].split(",");return{r:parseInt(e,10),g:parseInt(i,10),b:parseInt(r,10),a:void 0===s?1:parseFloat(s)}}return{r:255,g:255,b:255,a:0}}function j(e,t){let i=[],r=[];for(let s=0,a=e.length;s<a;s++)t(e[s])?i.push(e[s]):r.push(e[s]);return[i,r]}function R(e,t){let i,r;return s=>{i&&clearTimeout(i),r=e(s,r),i=setTimeout(()=>{t.call(null,r),r=void 0},16)}}function O(e){return JSON.stringify(Object.keys(e||{}).sort().reduce((t,i)=>(t[i]=e[i],t),{}))}function F(e,t){let i=Object.keys(t||{}),r=h()(e,i);return d()(r,t)}function H(e){return e.replace(/^\S/,e=>e.toUpperCase())}let Z=({number:e,digits:t})=>e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1}),U=(e,t)=>{let i=e.replace("#",""),r=parseInt(i.substring(0,2),16),s=parseInt(i.substring(2,4),16),a=parseInt(i.substring(4,6),16);return`rgba(${r},${s},${a},${t})`},W=(e,t)=>{let[i]=/(#\w+)/g.exec(e)||[];return i?U(i,t):e},$=e=>getComputedStyle(document.body).getPropertyValue(e)},36685:function(e,t,i){i.d(t,{_A:()=>l,dD:()=>o});let r=(e,t)=>{if(!e)return 0;let[,i=""]=(function(e,t){if(0===e||!Number.isFinite(Number(e)))return"0";let i=String(e);if(!i.includes("e"))return i;let[r,s]=i.toLowerCase().split("e"),a=parseInt(s);if(a>=0)return Math.trunc(parseFloat(r)*10**a).toString();{let e=r.split("."),t=e[0],i=e[1]||"",s="0".repeat(Math.abs(a)-1),o=`0.${s}${t+i}`;return o}})(e).split(".");return i?i.length:t||0};var s=i(31332),a=i(61223);let o=(e,t,i)=>{if(Number.isNaN(Number(e)))return`${e}`;let o=i?.lang||a.G(),l=void 0!==t?t:r(e,i?.zeroPaddingPrecision);return(0,s.d)(e,l,o,i)},l=()=>!1},55480:function(e,t,i){function r(e){return"[object String]"===Object.prototype.toString.call(e)}function s(e){return"number"==typeof e&&isFinite(e)}function a(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}i.d(t,{HD:()=>r,Kn:()=>a,hj:()=>s})},82946:function(e,t,i){i.d(t,{G:()=>r});let r=(0,i(92467).Z)(e=>({autoHideDuration:void 0,anchorOrigin:void 0,setNotificationConfig:t=>e(t)}))},31332:function(e,t,i){i.d(t,{d:()=>o});var r=i(9462),s=i(48373);let a={en:{thousandSeparator:",",decimalSeparator:"."},"en-US":{thousandSeparator:",",decimalSeparator:"."},zh:{thousandSeparator:",",decimalSeparator:"."},"zh-CN":{thousandSeparator:",",decimalSeparator:"."},"zh-TC":{thousandSeparator:",",decimalSeparator:"."},"zh-TW":{thousandSeparator:",",decimalSeparator:"."},fr:{thousandSeparator:" ",decimalSeparator:","},de:{thousandSeparator:".",decimalSeparator:","},es:{thousandSeparator:" ",decimalSeparator:","},"es-LA":{thousandSeparator:",",decimalSeparator:"."},ar:{thousandSeparator:",",decimalSeparator:"."},id:{thousandSeparator:".",decimalSeparator:","},it:{thousandSeparator:".",decimalSeparator:","},ja:{thousandSeparator:",",decimalSeparator:"."},pl:{thousandSeparator:" ",decimalSeparator:","},"pt-BR":{thousandSeparator:".",decimalSeparator:","},"pt-PT":{thousandSeparator:" ",decimalSeparator:","},ru:{thousandSeparator:" ",decimalSeparator:","},"uk-UA":{thousandSeparator:" ",decimalSeparator:","},vi:{thousandSeparator:".",decimalSeparator:","},ro:{thousandSeparator:".",decimalSeparator:","},cs:{thousandSeparator:" ",decimalSeparator:","},bg:{thousandSeparator:" ",decimalSeparator:","},sv:{thousandSeparator:" ",decimalSeparator:","},sk:{thousandSeparator:" ",decimalSeparator:","},sl:{thousandSeparator:".",decimalSeparator:","},el:{thousandSeparator:".",decimalSeparator:","},"da-DK":{thousandSeparator:".",decimalSeparator:","},et:{thousandSeparator:" ",decimalSeparator:","},lt:{thousandSeparator:" ",decimalSeparator:","},lv:{thousandSeparator:" ",decimalSeparator:","},hr:{thousandSeparator:".",decimalSeparator:","},kk:{thousandSeparator:" ",decimalSeparator:","},hu:{thousandSeparator:" ",decimalSeparator:","},"my-MM":{thousandSeparator:",",decimalSeparator:"."},"lo-LA":{thousandSeparator:",",decimalSeparator:"."},"si-LK":{thousandSeparator:",",decimalSeparator:"."},az:{thousandSeparator:" ",decimalSeparator:","},km:{thousandSeparator:",",decimalSeparator:"."},ka:{thousandSeparator:" ",decimalSeparator:","},"am-ET":{thousandSeparator:",",decimalSeparator:"."},bn:{thousandSeparator:",",decimalSeparator:"."},"uz-UZ":{thousandSeparator:" ",decimalSeparator:","}},o=(e,t,i="en-US",{roundingMode:o="floor",fixedDecimalScale:l=!0}={})=>{let n,d=Number(e);Number.isNaN(d)&&(d=0);let c=a[i]||a[i.split("-")[0]]||a["en-US"];switch(Math.abs(d)<10**-t&&(d=0),o){case"ceil":n=2;break;case"round":n=4;break;default:n=1}let h=(0,s.yd)(d,parseInt((t||0).toString()),n),u=h;return l||(u=h.replace(/(\.[0-9]*?)0+$/,"$1").replace(/\.$/,"")),(0,r.OV)(u,{thousandSeparator:c.thousandSeparator,decimalSeparator:c.decimalSeparator,decimalScale:t,fixedDecimalScale:l})}},62871:function(e,t,i){i.d(t,{B8:()=>a});var r=i(34406);let s=null;function a(){if("undefined"==typeof window)return r.env;if(null===s){var e;s=(e=function(){if("undefined"==typeof window)return{};let e=document.getElementById("__NEXT_DATA__");if(e)try{let t=JSON.parse(e.textContent||"{}");return t.props?.runtimeConfig||{}}catch(e){console.error("Failed to parse runtime config:",e)}return{}}())&&"object"==typeof e?e:{}}return s||{}}i(87363),i(34406)},31197:function(e,t,i){i.d(t,{G:()=>s,_:()=>a});var r=i(87363);let s=(0,r.createContext)(null),a=()=>(0,r.useContext)(s)},42014:function(e,t,i){i.d(t,{g:()=>o});var r=i(52322);i(87363);var s=i(7627),a=i(12288);let o=()=>(0,r.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"mask"},children:(0,r.jsx)(a.Z,{sx:{zIndex:100}})})},80662:function(e,t,i){i.d(t,{r:()=>r,y:()=>s});let r=e=>({...e}),s=({customSettings:e,widget:t})=>{e&&void 0!==e.activeChartIndex&&t.setActiveChart(e.activeChartIndex)}},71305:function(e,t,i){i.d(t,{a9:()=>r,fr:()=>a,lR:()=>s});let r=["dont_show_boolean_study_arguments","hide_last_na_study_output","snapshot_trading_drawings"],s=["drawing_templates","display_market_status","border_around_the_chart","remove_library_container_border","volume_force_overlay","legend_context_menu","right_toolbar","trading_account_manager","order_panel","header_widget","header_symbol_search","header_fullscreen_button","header_layouttoggle","header_undo_redo","symbol_search_hot_key","symbol_info","show_interval_dialog_on_key_press","legend_inplace_edit"],a=({tradingViewSave:e},{symbol:t,interval:i,theme:a="dark",library_path:o,custom_css_url:l="./themed.css",locale:n="en",overrides:d,debug:c=!1,time_frames:h=[],autosize:u=!0,toolbar_bg:g="transparent",studies_overrides:m,loading_screen:p,enabled_features:x=r,disabled_features:f=s,...b})=>{let y="Asia/Shanghai";try{y=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}let v=d?.["paneProperties.background"];return{...b,...p||(v?{backgroundColor:v}:{})?{loading_screen:p}:{},symbol:t,interval:i,timezone:y,theme:a,library_path:o,custom_css_url:l,locale:n,overrides:d,debug:c,time_frames:h,autosize:u,toolbar_bg:g,studies_overrides:m,enabled_features:x,disabled_features:f,saved_data:e||void 0}}},81158:function(e,t,i){i.d(t,{D:()=>o});var r=i(43675);let s=({chart:e,overrides:t})=>{let i=e.getAllStudies().find(e=>e?.name?.toLowerCase()==="volume");i&&e.getStudyById(i.id).applyOverrides({"volume.color.0":(0,r.D)(t["mainSeriesProperties.candleStyle.downColor"],.5),"volume.color.1":(0,r.D)(t["mainSeriesProperties.candleStyle.upColor"],.5)})},a=({widget:e,overrides:t})=>{try{let i=e.chartsCount();for(let r=0;r<i;r++){let i=e.chart(r);s({chart:i,overrides:t})}}catch(e){}},o=async({widget:e,theme:t,overrides:i,onSave:r=()=>null,onSetThemeDone:s})=>{await e.changeTheme(t),e.applyOverrides(i),a({widget:e,overrides:i}),e.save(r),s?.()}},28544:function(e,t,i){i.d(t,{j:()=>r});let r=e=>{let t={buy:e.Buy,sell:e.Sell,line:e.Line,basicBg:e.BasicBg,tertiaryText:e.TertiaryText,secondaryText:e.SecondaryText};return{volumePaneSize:"medium","symbolWatermarkProperties.transparency":85,"symbolWatermarkProperties.color":"rgba(0, 0, 0, 0)","scalesProperties.textColor":t.tertiaryText,"scalesProperties.lineColor":t.line,"scalesProperties.backgroundColor":t.basicBg,"paneProperties.background":t.basicBg,"paneProperties.backgroundType":"solid","paneProperties.horzGridProperties.color":t.line,"paneProperties.vertGridProperties.color":t.line,"paneProperties.crossHairProperties.color":t.secondaryText,"mainSeriesProperties.candleStyle.upColor":t.buy,"mainSeriesProperties.candleStyle.downColor":t.sell,"mainSeriesProperties.candleStyle.drawWick":!0,"mainSeriesProperties.candleStyle.drawBorder":!0,"mainSeriesProperties.candleStyle.borderColor":"transparent","mainSeriesProperties.candleStyle.borderUpColor":t.buy,"mainSeriesProperties.candleStyle.borderDownColor":t.sell,"mainSeriesProperties.candleStyle.wickUpColor":t.buy,"mainSeriesProperties.candleStyle.wickDownColor":t.sell,"mainSeriesProperties.hollowCandleStyle.upColor":t.buy,"mainSeriesProperties.hollowCandleStyle.downColor":t.sell,"mainSeriesProperties.hollowCandleStyle.drawWick":!0,"mainSeriesProperties.hollowCandleStyle.drawBorder":!0,"mainSeriesProperties.hollowCandleStyle.borderColor":"transparent","mainSeriesProperties.hollowCandleStyle.borderUpColor":t.buy,"mainSeriesProperties.hollowCandleStyle.borderDownColor":t.sell,"mainSeriesProperties.hollowCandleStyle.wickUpColor":t.buy,"mainSeriesProperties.hollowCandleStyle.wickDownColor":t.sell,"mainSeriesProperties.hollowCandleStyle.drawBody":!0,"mainSeriesProperties.haStyle.upColor":t.buy,"mainSeriesProperties.haStyle.downColor":t.sell,"mainSeriesProperties.haStyle.drawWick":!0,"mainSeriesProperties.haStyle.drawBorder":!0,"mainSeriesProperties.haStyle.borderColor":"transparent","mainSeriesProperties.haStyle.borderUpColor":t.buy,"mainSeriesProperties.haStyle.borderDownColor":t.sell,"mainSeriesProperties.haStyle.wickUpColor":t.buy,"mainSeriesProperties.haStyle.wickDownColor":t.sell,"mainSeriesProperties.haStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.haStyle.drawBody":!0,"mainSeriesProperties.barStyle.upColor":t.buy,"mainSeriesProperties.barStyle.downColor":t.sell,"mainSeriesProperties.barStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.barStyle.dontDrawOpen":!1,"mainSeriesProperties.barStyle.thinBars":!0,"mainSeriesProperties.columnStyle.upColor":t.buy,"mainSeriesProperties.columnStyle.downColor":t.sell,"mainSeriesProperties.columnStyle.barColorsOnPrevClose":!0,"mainSeriesProperties.columnStyle.priceSource":"close","mainSeriesProperties.lineStyle.color":t.buy,"mainSeriesProperties.lineStyle.linewidth":2,"mainSeriesProperties.lineStyle.priceSource":"close","mainSeriesProperties.areaStyle.color1":t.buy,"mainSeriesProperties.areaStyle.color2":t.sell,"mainSeriesProperties.areaStyle.linecolor":t.sell,"mainSeriesProperties.areaStyle.linewidth":2,"mainSeriesProperties.areaStyle.priceSource":"close","mainSeriesProperties.areaStyle.transparency":50,"mainSeriesProperties.baselineStyle.baselineColor":t.buy,"mainSeriesProperties.baselineStyle.topFillColor1":t.buy,"mainSeriesProperties.baselineStyle.topFillColor2":t.sell,"mainSeriesProperties.baselineStyle.bottomFillColor1":t.buy,"mainSeriesProperties.baselineStyle.bottomFillColor2":t.sell,"mainSeriesProperties.baselineStyle.topLineColor":t.buy,"mainSeriesProperties.baselineStyle.bottomLineColor":t.sell,"mainSeriesProperties.baselineStyle.topLineWidth":2,"mainSeriesProperties.baselineStyle.bottomLineWidth":2,"mainSeriesProperties.baselineStyle.priceSource":"close","mainSeriesProperties.baselineStyle.transparency":50,"mainSeriesProperties.baselineStyle.baseLevelPercentage":50,"mainSeriesProperties.hiloStyle.color":t.buy,"mainSeriesProperties.hiloStyle.showBorders":!0,"mainSeriesProperties.hiloStyle.borderColor":t.buy,"mainSeriesProperties.hiloStyle.showLabels":!0,"mainSeriesProperties.hiloStyle.labelColor":t.buy,"mainSeriesProperties.pbStyle.upColor":t.buy,"mainSeriesProperties.pbStyle.downColor":t.sell,"mainSeriesProperties.pbStyle.borderUpColor":t.buy,"mainSeriesProperties.pbStyle.borderDownColor":t.sell,"mainSeriesProperties.pbStyle.upColorProjection":t.buy,"mainSeriesProperties.pbStyle.downColorProjection":t.sell,"mainSeriesProperties.pbStyle.borderUpColorProjection":t.buy,"mainSeriesProperties.pbStyle.borderDownColorProjection":t.sell,"mainSeriesProperties.renkoStyle.upColor":t.buy,"mainSeriesProperties.renkoStyle.downColor":t.sell,"mainSeriesProperties.renkoStyle.borderUpColor":t.buy,"mainSeriesProperties.renkoStyle.borderDownColor":t.sell,"mainSeriesProperties.renkoStyle.upColorProjection":t.buy,"mainSeriesProperties.renkoStyle.downColorProjection":t.sell,"mainSeriesProperties.renkoStyle.borderUpColorProjection":t.buy,"mainSeriesProperties.renkoStyle.borderDownColorProjection":t.sell,"mainSeriesProperties.renkoStyle.wickUpColor":t.buy,"mainSeriesProperties.renkoStyle.wickDownColor":t.sell,"mainSeriesProperties.kagiStyle.upColor":t.buy,"mainSeriesProperties.kagiStyle.downColor":t.sell,"mainSeriesProperties.kagiStyle.upColorProjection":t.buy,"mainSeriesProperties.kagiStyle.downColorProjection":t.sell,"mainSeriesProperties.pnfStyle.upColor":t.buy,"mainSeriesProperties.pnfStyle.downColor":t.sell,"mainSeriesProperties.pnfStyle.upColorProjection":t.buy,"mainSeriesProperties.pnfStyle.downColorProjection":t.sell,"mainSeriesProperties.rangeStyle.upColor":t.buy,"mainSeriesProperties.rangeStyle.downColor":t.sell,"mainSeriesProperties.rangeStyle.thinBars":"true","mainSeriesProperties.rangeStyle.upColorProjection":t.buy,"mainSeriesProperties.rangeStyle.downColorProjection":t.sell}}},31480:function(e,t,i){i.d(t,{Z:()=>r,k:()=>s});let r={EOPTIONS:"chart_eoptions"},s="myTradingView"},40926:function(e,t,i){i.d(t,{Z:()=>h});var r=i(52322),s=i(87363),a=i.n(s),o=i(71926),l=i(83289);let n=a().lazy(()=>i.e("3116").then(i.bind(i,64349))),d=({isReady:e,children:t,...i})=>e?t:i.openTime?(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"hidden"}),children:(0,r.jsx)(n,{...i})}):null,c=({hostAddress:e})=>{let t=(0,s.useMemo)(()=>"/static/images/kline/stopwatch.gif",[]);return`${e}${t}`},h=({symbol:e,symbolDisplay:t,hostAddress:i,willOpenInText:a,checkTradeStatus:n,children:h})=>{let{getI18n:u}=(0,l.Z)("trd-chart","trade-ui"),[g,m]=(0,s.useState)(!0),[p,x]=(0,s.useState)(Date.now()),[f,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{(async()=>{let{isReadyToTrade:t,openTime:i}=await n(e);m(t),x(i)})()},[n,e]),(0,o.Z)(()=>{let e=p-Date.now();b(Math.max(0,e)),m(e<=0)},p-Date.now()>0?500:null);let y=c({hostAddress:i}),v=(0,s.useMemo)(()=>u("will-be-open",{defaultValue:"will be open for trading in"})||"",[u]);return(0,r.jsx)(d,{backgroundImagePath:y,willOpenInText:a||v,timeLeft:f,isReady:g,openTime:p,symbol:t,children:h})}},24130:function(e,t,i){i.d(t,{Z:()=>m});var r=i(52322),s=i(87363),a=i(16709),o=i.n(a),l=i(96191),n=i(14077),d=i(40010),c=i(64084),h=i(27722);let u=(0,s.forwardRef)(({headerClassName:e,headerSlot:t,children:i},s)=>(0,r.jsxs)(c.Z,{className:"h-full flex-col",ref:s,children:[(0,r.jsx)(h.ZP,{className:o()("border-b-[1px] border-x-0 border-t-0 border-solid border-Line",e),children:t}),(0,r.jsx)(h.ZP,{className:"draggableCancel h-full relative",children:i})]}));var g=i(45168);let m=({namespace:e,useMiniHeader:t,headerSlot:i,children:a})=>{let[,c]=(0,g.M)(e)(g.p),{isMobile:h}=(0,l.F)(),[m,{width:p}]=(0,n.Z)(),x=(0,d.Z)(p,100);(0,s.useEffect)(()=>c(x),[x,c]);let f=h||t;return(0,r.jsx)(u,{ref:m,headerClassName:o()({"pl-[0px]":f,"pl-[16px]":!f,"pr-[0px]":h,"pr-[16px]":!h},"min-h-[40px]"),headerSlot:i,children:a})}},61277:function(e,t,i){i.r(t),i.d(t,{default:()=>S,ChartModeDropdown:()=>w});var r=i(52322),s=i(87363),a=i(83289),o=i(3528),l=i(93205),n=i(87585),d=i(31563),c=i(72580);let h=e=>(0,r.jsx)(c.Z,{viewBox:"0 0 14 14",fill:"none",...e,children:(0,r.jsx)("path",{d:"M0.333496 0.333496H13.6668V13.6668H0.333496V0.333496Z",fill:"currentColor"})}),u=e=>(0,r.jsx)(c.Z,{viewBox:"0 0 14 14",fill:"none",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.6665 0.333496H7.83317V13.6668H13.6665V0.333496ZM6.16634 0.333659H0.333008V13.667H6.16634V0.333659Z",fill:"currentColor"})}),g=e=>(0,r.jsx)(c.Z,{viewBox:"0 0 14 14",fill:"none",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.333008 0.333497L0.333008 6.16683L13.6663 6.16683L13.6663 0.333496L0.333008 0.333497ZM0.333008 7.8335L0.333008 13.6668L13.6663 13.6668L13.6663 7.8335L0.333008 7.8335Z",fill:"currentColor"})}),m=e=>(0,r.jsx)(c.Z,{viewBox:"0 0 14 14",fill:"none",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3332 0.333496H13.6665V13.6668H10.3332V0.333496ZM0.333008 0.333659H3.66634V13.667H0.333008V0.333659ZM8.6665 0.333496H5.33317V13.6668H8.6665V0.333496Z",fill:"currentColor"})}),p=e=>(0,r.jsx)(c.Z,{viewBox:"0 0 14 14",fill:"none",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.333008 3.66683L0.333008 0.333497L13.6663 0.333496V3.66683L0.333008 3.66683ZM0.333008 13.6668L0.333008 10.3335L13.6663 10.3335V13.6668L0.333008 13.6668ZM0.333008 5.3335L0.333008 8.66683L13.6663 8.66683V5.3335L0.333008 5.3335Z",fill:"currentColor"})}),x=e=>(0,r.jsx)(c.Z,{viewBox:"0 0 14 14",fill:"none",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.83317 0.333496H13.6665V6.16683H7.83317V0.333496ZM6.16634 0.333659H0.333008V6.16699H6.16634V0.333659ZM6.1665 7.8335H0.333171V13.6668H6.1665V7.8335ZM13.6665 7.8335H7.83317V13.6668H13.6665V7.8335Z",fill:"currentColor"})}),f=e=>{switch(e){case o.ChartMode.Single:return h;case o.ChartMode.VerticalTwo:return u;case o.ChartMode.HorizontalTwo:return g;case o.ChartMode.VerticalThree:return m;case o.ChartMode.HorizontalThree:return p;case o.ChartMode.Four:return x;default:return null}},b=({options:e,value:t,title:i,tooltip:s,onClick:a})=>(0,r.jsxs)("div",{className:"flex flex-col p-[10px] gap-[4px] bg-CardBg shadow-shadow1 rounded-[12px] text-IconNormal p-[10px] pt-[10px]",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(d.Z,{arrow:!0,trigger:"hover",placement:"bottom-start",tooltips:s,children:(0,r.jsx)("div",{className:"cursor-pointer underline underline-offset-4 decoration-dotted text-IconNormal typography-caption1",children:i})})}),(0,r.jsx)("div",{className:"flex flex-col gap-[4px]",children:e.map((e,i)=>(0,r.jsxs)("div",{className:"flex gap-[16px] items-center h-[32px]",children:[(0,r.jsx)("div",{className:"text-IconNormal typography-caption1",children:i+1}),e.map((e,i)=>{let s=f(e);return s?(0,r.jsx)(s,{className:"size-[16px] hover:text-PrimaryText cursor-pointer",style:{color:t===e?"var(--color-PrimaryText)":"var(--color-IconNormal)"},onClick:()=>a(e)},i.toString()):null})]},i.toString()))})]}),y=e=>{let t=(0,s.useCallback)(t=>{e.onClickItem(t)},[e]),i=(0,s.useMemo)(()=>(0,r.jsx)(b,{...e,onClick:t}),[e,t]);return(0,r.jsx)(n.Z,{once:!0,enablePortal:!0,useReactPopper:!0,placement:"bottom-end",overlay:i,children:(0,r.jsx)(l.Z,{className:"size-[20px] text-IconNormal hover:text-SecondaryText cursor-pointer"})})},v=[[o.ChartMode.Single],[o.ChartMode.VerticalTwo,o.ChartMode.HorizontalTwo],[o.ChartMode.VerticalThree,o.ChartMode.HorizontalThree],[o.ChartMode.Four]],C=[[o.ChartMode.Single],[o.ChartMode.Four]],w=({namespace:e,onClick:t,options:i={original:v,tradingView:C}})=>{let l=(0,o.createStore)(e),[n]=l(o.getActiveTab),[d,c]=l(o.getChartMode),{getI18n:h}=(0,a.Z)("trd-chart","trade-ui"),u=(0,s.useMemo)(()=>h("multi-chart",{defaultValue:"Multi Chart"})||"",[h]),g=(0,s.useMemo)(()=>h("miniMultiChartTooltip",{defaultValue:"Price charts may experience latency issues when displayed in multi-charts mode"})||"",[h]),m=(0,s.useCallback)(e=>{c(e),t?.(e)},[t,c]),p=(0,s.useMemo)(()=>{switch(n){case o.Tabs.TradingView:return i?.tradingView||C;case o.Tabs.Origin:default:return i?.original||v}},[n,i?.original,i?.tradingView]);return(0,r.jsx)(y,{options:p,value:d,title:u,tooltip:g,onClickItem:m})},S=w},23493:function(e,t,i){i.r(t),i.d(t,{Fullscreen:()=>o,default:()=>l});var r=i(52322);i(87363);var s=i(19188),a=i(78144);let o=({expanded:e,onClick:t})=>{let i=e?s.Z:a.Z;return(0,r.jsx)(i,{className:" chart-fullscreen-icon min-w-[16px] min-h-[16px] cursor-pointer text-[--color-IconNormal] hover:text-SecondaryText ",onClick:t})},l=o},49666:function(e,t,i){i.d(t,{S:()=>c,l:()=>s});var r,s,a=i(87363),o=i.n(a);let l=o().lazy(()=>Promise.all([i.e("1024"),i.e("8411")]).then(i.bind(i,63550))),n=o().lazy(()=>i.e("3419").then(i.bind(i,30970))),d=o().lazy(()=>Promise.all([i.e("1024"),i.e("782")]).then(i.bind(i,61268)));(r=s||(s={}))[r.Small=0]="Small",r[r.Mini=1]="Mini",r[r.Medium=2]="Medium";let c=e=>(0,a.useMemo)(()=>{switch(e){case 0:return l;case 1:return n;default:return d}},[e])},90128:function(e,t,i){i.d(t,{kL:()=>tK});var r,s,a={};i.r(a),i.d(a,{createStore:()=>eZ,getDepthScale:()=>eU});var o={};i.r(o),i.d(o,{createStore:()=>tV,getCandlestickHistory:()=>tj});var l={};i.r(l),i.d(l,{createStore:()=>tH,getOrderHistory:()=>tZ});var n={};i.r(n),i.d(n,{TradingView:()=>tU,binanceIntervalToResolutionString:()=>e9.P0,findLCMInterval:()=>t$,findMaximumInterval:()=>tz,intervalToMillseconds:()=>tW,resolutionStringToBinanceInterval:()=>e9.ps,transformBinanceIntervalsToTradingViewMultipliers:()=>e9.Le,useCreateIntervalText:()=>e9.dj});var d=i(52322),c=i(87363),h=i.n(c),u=i(70268),g=i(21091),m=i(32730),p=i(7627),x=i(69674),f=i(27723),b=i(42540);let y=({children:e})=>(0,d.jsx)(g.Z,{sx:{ml:"8px",color:"var(--color-DisabledText)"},children:e}),v=({children:e})=>(0,d.jsx)(g.Z,{sx:{mr:"8px",color:"var(--color-DisabledText)"},children:e});var C=i(71305),w=i(31480),S=i(25291),T=i.n(S),A=i(96191),_=i(98824),L=i(42014),k=i(30733),I=i.n(k),P=i(91823);let E=I()((e="unspecific-chart-namespace")=>(0,P.Z)(e=>({loading:!1,setLoading:t=>e({loading:t})}))),B=e=>[e.loading,e.setLoading];var N=i(71427),M=i(3528),D=i(9850),V=i.n(D);let j={line:"LINE",histogram:"BAR",area:"AREA",point:"POINT",cross:"CROSSLINE"},R={int:"INT",float:"FLOAT",source:"SOURCE"},O=(e,t)=>{let i,r=0,s=e.length;for(;r<s;){let a=t(e[i=Math.floor((s+r)/2)]);if(a<0&&(s=i),0===a)return i;a>0&&(r=i+1)}return Math.floor((s+r)/2)},F=(e,t)=>t.map(t=>{let i=e.length-t.length;return t.map((t,r)=>({time:e[r+i].time,value:t}))}),H=(e,t)=>{let i=O(e,e=>{let{time:i}=e;return t-i});return e[i]&&e[i].time===t?e[i]:void 0},Z=e=>({defaultProps:{id:"",title:"",isCustom:!0,isHistBase:!1,isScaleCenter:!1},paramMetas:[],getResult(t,i,r){let s=-1;this.paramMetas=[],e.ChartInterface.Chart.input=e=>(-1===s&&(this.paramMetas=[]),s++,this.paramMetas.push({key:`params${s}`,label:e.title,type:R[e.type],defaultValue:e.defval}),i[`params${s}`]||e.defval);try{e.runSync(t)}catch(e){console.warn(e.message)}let a=[],o=V()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{},l=V()(e.ChartInterface.Chart&&e.ChartInterface.Chart.fills)||[];Object.keys(o).forEach(e=>{let i=o[e],[r]=F(t,[i.series||[]]),s=j[i.style];switch(s){case"POINT":case"AREA":case"BAR":case"LINE":Object.keys(l).forEach(e=>{let t=l[e];-1!==t.data.indexOf(i.id)&&(t.source||(t.source=[]),t.source.push(r))});case"CROSSLINE":a.push({data:r,colors:i.color,transp:i.transp||0,chartType:s,lineWidth:i.linewidth,histBase:i.histbase,zIndex:1})}}),Object.keys(l).forEach(e=>{let t=l[e];a.push({data:t.source[0],borderData:t.source[1],colors:t.color,transp:t.transp||0,type:"nolabel",chartType:"AREA",zIndex:1})}),r(a)},updateResult(t,i,r,s){if(!s)return;try{e.update(s)}catch(e){console.warn(e)}let a=V()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{};try{Object.keys(a).forEach((e,r)=>{let o=a[e];i[r].data[t]=i[r].data[t]||{},i[r].data[t].time=s.time,i[r].data[t].value=o.series[t],i[r].colors=o.color})}catch(e){console.warn(e)}},getLabel({time:e,results:t,params:i}){let r=[];return 0===this.paramMetas.length?r.push({label:`${this.defaultProps.title||""}()`,key:"title",styles:{paddingRight:"0px"}}):r.push({label:`${this.defaultProps.title||""}(`,key:"title",styles:{paddingRight:"0px"}}),this.paramMetas.forEach((e,t)=>{let s=this.paramMetas.find(e=>e.key===`params${t}`)?.defaultValue;r.push({label:t===this.paramMetas.length-1?`${i[`params${t}`]||s})`:`${i[`params${t}`]||s}`,key:`${t}`})}),t.forEach(({data:t,colors:s,type:a},o)=>{if(!e)return;let l=t.findIndex(t=>t.time===e),n=H(t,e);if(n&&"nolabel"!==a){var d,c;let e=`${(d=n.value,void 0!==(c=i.precision)?Number(isNaN(d)?NaN:d?.toFixed(c)):d)}`;r.push({label:e,key:`CUSTOM${o}`,styles:{color:s?.[l]}})}}),r}});var U=i(34406);let W=({url:e,width:t,height:i})=>{let r=window?.screenLeft||window.screenX,s=window?.screenTop||window.screenY,a=window?.innerWidth||document.documentElement?.clientWidth||screen.width,o=window?.innerHeight||document.documentElement?.clientHeight||screen.height,l=a/window.screen.availWidth,n=window.open(e,"_blank",`
    popup=true,
    width=${t},
    height=${i},
    top=${(o-i)/2/l+s},
    left=${(a-t)/2/l+r}`);n?.focus()},$=({bizType:e,symbolDisplay:t,isBacktest:i=!1})=>{let r=`${i?"backtest":"customindicator"}/${e}/workspace/${t}`;U.electron&&!i?window.open(`binance://${r}`):W({url:`/${r}`,width:1e3,height:600})},z=(e,t)=>{try{return JSON.parse(e)}catch{return t||e}},K=({isBacktest:e}={})=>e?"backtestFiles":"customIndicatorFiles",X=({isBacktest:e}={})=>e?"backtestCurFileName":"customIndicatorCurFileName",Y=()=>{let e=null;return async()=>{if(e)return e;let{Compiler:t}=await Promise.all([i.e("7797"),i.e("7656")]).then(i.bind(i,2225));return e=new t}},G=async({symbolDisplayRef:e,candlestick:t,bizType:i,setMessageInfo:r,storedData:s,onGetStorageItem:a,onSetStorageItem:o})=>{let l,n=Y(),d=async()=>{let e=await n();e.Errors?.length<=0||r({message:"Failed to compile custom indicator, please check your code!",variant:"error",autoHideDuration:3500})},c=async(t={})=>{let r=Object.keys(z(await a(K(t)),{})),s=X(t);if(r.find(e=>e.startsWith("untitled-"))){let e=Math.max.apply(null,r.filter(e=>e.startsWith("untitled-")).map(e=>+e.split("-")[1]));await o(s,`untitled-${e+1}`)}else r.find(e=>e.startsWith("untitled"))?await o(s,"untitled-1"):await o(s,"untitled");$({symbolDisplay:e.current,bizType:i,isBacktest:t.isBacktest})},h=async({name:t},r={})=>{let s=X(r);await o(s,t),$({symbolDisplay:e.current,bizType:i,isBacktest:r.isBacktest})},u=async e=>{let i=K({isBacktest:e}),r=z(await a(i),{});return r&&Object.entries(r).forEach(([i,r])=>{let s=r.id||`@${i}_v1`;t.registerCustomIndicator(s,{defaultProps:{isCustom:!0,isBacktest:e,id:s,title:i}})}),r},g=await u(!1),m=await u(!0),p=function(e){let t=e.length;return function i(r){if(r>=t)return null;let{indicators:s}=e[r];return s?.find(e=>e.isCustom)||i(r+1)}(0)}(s||[]);if(p){let{id:e,name:i,type:r}=p,s=g[r]||g[i],a=m[r]||m[i],o=s||a,c=!!(m?.[i]||m?.[e]);if(o){let{code:r}=o;try{let s=await n();s.compile(r),await d(),s.runOnce();let o=Z(s),h=s.ChartInterface?.Chart;if(h.study&&!c)o.defaultProps={...o.defaultProps,isHistBase:h.study.overlay||!1,title:i||h.study.title||"",isScaleCenter:!0,isCustom:!0,isBacktest:!!a,id:e};else if(c){let{overlay:t}=s.scriptParams||{};o.defaultProps={...o.defaultProps,title:i||"",isHistBase:t||!1,isScaleCenter:!0,isCustom:!0,isBacktest:!0,id:e}}t.registerCustomIndicator(e,o),t.addIndicatorByName(e),l=e}catch(e){console.error(e)}}}t.registerCustomIndicatorCallback({onAdd:c,onEdit:h,async onRemove(e,i){t.removeCustomIndicatorByName(e);let r=Object.fromEntries(Object.entries(z(await a(K(i)),{})).filter(([t,i])=>(i.id||`@${t}_v1`)!==e));await o(K(i),JSON.stringify(r))}}),t.on("customIndicatorClick",async({data:{name:e,id:i}})=>{t.closeIndicatorByName(l);let{code:r=""}=g?.[e]||g?.[i]||m?.[e]||m?.[i]||{code:""},s=!!(m?.[e]||m?.[i]);try{let a=await n();a.compile(r),await d(),a.runOnce();let o=Z(a),c=a.ChartInterface.Chart;if(c.study&&!s)o.defaultProps={...o.defaultProps,isHistBase:c.study.overlay||!1,title:e||c.study.title||"",isScaleCenter:!0,isCustom:!0,id:i};else if(s){let{overlay:t}=a.scriptParams||{};o.defaultProps={...o.defaultProps,title:e||"",isHistBase:t||!1,isScaleCenter:!0,isCustom:!0,isBacktest:!0,id:i}}t.registerCustomIndicator(i,o),t.addIndicatorByName(i),l=i}catch(e){console.error(e)}})},q=({customIndicators:e,candleRef:t})=>{e.forEach(({name:e,indicator:i})=>{t.current?.getCandlestick?.()?.registerCustomIndicator(e,i)})},Q=_.m_;var J=i(85476);let ee=({namespace:e})=>{let[t,i]=(0,c.useState)(!1),[r]=(0,N.createStore)(e)(N.getCandlestickReference);return(0,c.useEffect)(()=>{if(!r)return()=>null;let e=()=>i(!0),t=()=>i(!1);return r.on("chartReady",e),r.on("chartReset",t),()=>{r.off("chartReady",e),r.off("chartReset",t)}},[r]),t},et=({theme:e})=>({textBackground:e.colors.InputLine,textBorderColor:e.colors.InputLine,textColor:e.colors.PrimaryText,closeBackground:e.colors.BasicBg,closeColor:e.colors.IconNormal,closeBorderColor:e.colors.InputLine,lineColor:e.colors.TertiaryText,lineDash:[2,2],arrowColor:e.colors.TertiaryText,tooltipBackgroundColor:e.colors.PrimaryText,tooltipTextColor:e.colors.SecondaryBg,tooltipBorderColor:e.colors.PrimaryText}),ei=({namespace:e,alerts:t=[]})=>{let i=(0,J.T)(),r=(0,M.createStore)(e),s=(0,N.createStore)(e),[a]=r(M.getShowPriceAlert),[o]=s(N.getCandlestickReference),l=ee({namespace:e||""}),n=(0,c.useMemo)(()=>t.map(e=>({...e,...et({theme:i})})),[t,i]);(0,c.useEffect)(()=>{let t=l&&e&&a?n:[];o?.manageAlerts(t)},[o,e,n,a,l])};var er=i(43675);let es=({isBuy:e,theme:t})=>{let i=e?t?.colors.Buy:t?.colors.Sell,r=(0,er.D)(t?.colors.PrimaryText,.95);return{textColor:t.colors?.RedGreenBgText,borderColor:i,backgroundColor:i,tooltipBorderColor:r,tooltipBackgroundColor:r,tooltipTextColor:t.colors.SecondaryBg}},ea=({namespace:e,executionOrders:t})=>{let i=(0,J.T)(),r=(0,M.createStore)(e),s=(0,N.createStore)(e),[a]=r(M.getShowExecutionOrder),[o]=s(N.getCandlestickReference),l=ee({namespace:e}),n=(0,c.useMemo)(()=>(t||[]).map(e=>({...e,...es({isBuy:e.isBuy,theme:i})})),[t,i]);(0,c.useEffect)(()=>{if(void 0===t)return;let i=l&&e&&a?n:[];o?.manageExecutionOrders(i)},[o,e,n,a,t,l])},eo=({theme:e,params:t})=>{switch(t.type){case M.LabelLineType.AverageBuyPrice:case M.LabelLineType.AverageSellPrice:case M.LabelLineType.BreakEvenPrice:{let i=t.isBuy?e?.colors?.Buy:e?.colors?.Sell;return{textBackground:i,textBorderColor:i,textColor:e?.colors.textWhite,priceBackground:e?.colors.CardBg,priceBorderColor:i,priceColor:i,lineColor:i,lineDash:[2,2]}}case M.LabelLineType.CostPrice:case M.LabelLineType.PriceAlert:default:return{textBackground:e?.colors.TertiaryText,textBorderColor:e?.colors.TertiaryText,textColor:e?.colors.TextOnGray,priceBackground:e?.colors.CardBg,priceBorderColor:e?.colors.TertiaryText,priceColor:e?.colors.PrimaryText,lineColor:e?.colors.TertiaryText,lineDash:[2,2]}}},el=({namespace:e,labelLines:t})=>{let i=(0,J.T)(),r=(0,M.createStore)(e),s=(0,N.createStore)(e),[a]=r(M.getShowAverageBuyPrice),[o]=r(M.getShowAverageSellPrice),[l]=r(M.getShowBreakEvenPrice),[n]=r(M.getShowCostPrice),[d]=r(M.getShowPriceAlert),[h]=s(N.getCandlestickReference),u=(t||[]).filter(e=>e.type===M.LabelLineType.AverageBuyPrice).map(e=>({...e,...eo({theme:i,params:{type:M.LabelLineType.AverageBuyPrice,isBuy:!0}}),group:"average-cost"})),g=(t||[]).filter(e=>e.type===M.LabelLineType.AverageSellPrice).map(e=>({...e,...eo({theme:i,params:{type:M.LabelLineType.AverageSellPrice,isBuy:!1}}),group:"average-cost"})),m=(t||[]).filter(e=>e.type===M.LabelLineType.BreakEvenPrice).map(e=>({...e,...eo({theme:i,params:{type:M.LabelLineType.BreakEvenPrice,isBuy:!0}})})),p=(t||[]).filter(e=>e.type===M.LabelLineType.CostPrice).map(e=>({...e,...eo({theme:i,params:{type:M.LabelLineType.CostPrice}})})),x=(t||[]).filter(e=>e.type===M.LabelLineType.PriceAlert).map(e=>({...e,...eo({theme:i,params:{type:M.LabelLineType.PriceAlert}})})),f=h?.isLoaded()||!1,b=ee({namespace:e});(0,c.useEffect)(()=>{if(void 0===t)return;let i=[...a?u:[],...o?g:[],...l?m:[],...n?p:[],...d?x:[]],r=b&&e?i:[];h?.manageLabelLines(r)},[h,e,a,f,u,l,m,t,o,g,b,n,p,x,d])};var en=i(83289);let ed=({isBuy:e,theme:t})=>{let i=e?t?.colors?.Buy:t?.colors?.Sell;return{dragSquareIconColor:i,dragSquareBackgroundColor:t?.colors?.CardBg,dragSquareDraggingBackgroundColor:t?.colors?.line,closeIconColor:i,priceBackground:i,priceColor:t?.colors?.RedGreenBgText,priceBorderColor:i,quantityBackground:t?.colors?.CardBg,quantityColor:i,quantityBorderColor:i,borderColor:i,priceLabelBackground:t?.colors?.CardBg,priceLabelBorderColor:i,priceLabelColor:i,lineColor:i,lineDash:[2,2],draggingLineDash:[0,0],tooltipTextColor:t?.colors?.SecondaryBg,tooltipBorderColor:t?.colors?.PrimaryText,tooltipBackgroundColor:t?.colors?.PrimaryText}},ec=({namespace:e,orders:t})=>{let i=(0,J.T)(),r=(0,M.createStore)(e),s=(0,N.createStore)(e),[a]=r(M.getShowLimitOrder),[o]=r(M.getShowBotPreviewOrder),[l]=s(N.getCandlestickReference),n=ee({namespace:e}),{getI18n:d}=(0,en.Z)("","kline-ui"),h=(0,c.useMemo)(()=>d("order-drag-tooltip",{defaultValue:"Drag for price modify"}),[d]),u=(0,c.useMemo)(()=>d("order-modify-tooltip",{defaultValue:"Click for modify"}),[d]),g=(0,c.useMemo)(()=>d("order-cancel-tooltip",{defaultValue:"Click for cancel"}),[d]),m=(0,c.useMemo)(()=>(t||[]).filter(({limitOrderType:e})=>(void 0===e||e===M.LimitOrderType.LimitOrder)&&a),[t,a]),p=(0,c.useMemo)(()=>(t||[]).filter(({limitOrderType:e})=>e===M.LimitOrderType.BotPreview&&o),[t,o]),x=(0,c.useMemo)(()=>[...m,...p],[m,p]),f=(0,c.useMemo)(()=>x.map(e=>({...e,...ed({isBuy:e.isBuy,theme:i}),priceTooltipText:e.priceTooltipText??h,quantityTooltipText:e.quantityTooltipText??u,closeTooltipText:e.closeTooltipText??g})),[g,x,h,u,i]),b=(0,c.useMemo)(()=>n&&e?f:[],[e,f,n]);(0,c.useEffect)(()=>{void 0!==t&&l?.manageOrderLines(b)},[l,b,t])},eh=({isBuy:e,pnl:t,theme:i})=>{let r=e?i?.colors?.Buy:i?.colors?.Sell,s=t>0?i?.colors?.Buy:t<0?i?.colors?.Sell:r;return{priceColor:i?.colors?.RedGreenBgText,priceBorderColor:s,priceBackgroundColor:s,quantityColor:r,quantityBorderColor:r,quantityBackgroundColor:i?.colors?.CardBg,priceLabelColor:r,priceLabelBorderColor:r,priceLabelBackgroundColor:i?.colors?.CardBg,tpslYLabelColor:i.colors?.PrimaryText,tpslYLabelBackgroundColor:i.colors?.InputLine,tpslYLabelBorderColor:i.colors?.InputLine,tpslLabelColor:r,tpslLabelBorderColor:r,tpslLabelBackgroundColor:i?.colors?.CardBg,tpslDraggingTextLabelColor:i?.colors?.PrimaryText,tpslDraggingTextLabelBorderColor:i?.colors?.InputLine,tpslDraggingTextLabelBackgroundColor:i?.colors?.InputLine,tpslDraggingPriceLabelProfitColor:i.colors?.TextBuy,tpslDraggingPriceLabelLossColor:i.colors?.TextSell,tpslDraggingPriceLabelFlatColor:i.colors?.PrimaryText,tpslDraggingPriceLabelBorderColor:i.colors?.InputLine,tpslDraggingPriceLabelBackgroundColor:i.colors?.BasicBg,lineColor:r,lineDash:[2,2],reverseIconColor:r,reverseBorderColor:r,reverseBackgroundColor:i?.colors?.CardBg,tooltipTextColor:i?.colors?.SecondaryBg,tooltipBorderColor:i?.colors?.PrimaryText,tooltipBackgroundColor:i?.colors?.PrimaryText,closeIconColor:r,closeIconBorderColor:r,closeIconBackgroundColor:i?.colors?.CardBg,diamond1Color:i.colors?.DisabledText,diamond2Color:i.colors?.PrimaryText}},eu=({namespace:e,positions:t})=>{let i=(0,J.T)(),r=(0,M.createStore)(e),s=(0,N.createStore)(e),[a]=r(M.getShowPositionOrder),[o]=s(N.getCandlestickReference),l=ee({namespace:e}),{getI18n:n}=(0,en.Z)("","kline-ui"),d=(0,c.useMemo)(()=>n("position-reverse",{defaultValue:"Reverse Position"}),[n]),h=(0,c.useMemo)(()=>(t||[]).map(e=>({...e,...eh({isBuy:e.isBuy,pnl:+(e?.pnl||0),theme:i}),reverseOrderTooltipText:e.reverseOrderTooltipText??d})),[t,d,i]);(0,c.useEffect)(()=>{if(void 0===t)return;let i=l&&e&&a?h:[];o?.managePositionLines(i)},[o,e,a,h,t,l])},eg=({namespace:e,singleLabelLines:t=[]})=>{let i=(0,J.T)(),r=(0,M.createStore)(e),s=(0,N.createStore)(e),[a]=r(M.getShowLiquidationPrice),[o]=s(N.getCandlestickReference),l=ee({namespace:e}),n=o?.isLoaded(),d=(0,c.useMemo)(()=>{let e=i?.colors.EmphasizeText,r=i?.colors.RedGreenBgText;return t.map(t=>({...t,textBackground:e,textBorderColor:e,textColor:r,lineColor:e}))},[t,i]);(0,c.useEffect)(()=>{if(void 0===t||!n)return;let i=l&&e&&a?d:[];o?.manageSingleLabelLines(i)},[o,t,d,e,a,n,l])};var em=i(34406);let ep=(0,c.memo)(({klineOptions:e,customIndicators:t=[],setMessageInfo:i=()=>null,symbolDisplay:r="",bizType:s="",orders:a,positions:o,executionOrders:l,labelLines:n,singleLabelLines:h,alerts:u,enableCustomIndicator:g=!!em.electron,enableBacktest:m=!!em.electron,enableSubTradingData:p=!!em.electron,electron:x={},customCandleRef:f,onLoadingChange:b})=>{let y=(0,M.createStore)(e.namespace),v=(0,N.createStore)(e.namespace),C=E(e.namespace),[w]=y(M.getInterval),S=y(M.getResolutionString),[k]=y(M.getPriceType),[I]=y(M.getActiveTab),[P,D]=C(B),{isMobile:V,isIPad:j}=(0,A.F)(),[R,O]=v(N.getCandlestickReference),F=(0,c.useMemo)(()=>g&&!V&&!j,[g,j,V]),H=(0,c.useMemo)(()=>m&&!V&&!j,[m,j,V]),Z=(0,c.useMemo)(()=>p&&!V&&!j,[p,j,V]),[U]=(0,c.useState)(1),W=(0,c.useCallback)(e=>("function"==typeof b&&b(e),D(e)),[D,b]),$=(0,c.useRef)(null),z=f||$,K=(0,c.useRef)(w),X=(0,c.useRef)(r);(0,c.useEffect)(()=>{X.current=r},[r]),(0,c.useEffect)(()=>{K.current=w},[w]);let Y=z.current?.getCandlestick?.();(0,c.useEffect)(()=>{O(Y)},[O,e.symbol,Y]);let J=(0,c.useCallback)(()=>{R&&"time"===K.current&&R.setChartType(_.oX.TimeGradientArea)},[R]),ee=(0,c.useCallback)(()=>{R&&"time"===K.current&&R.setChartType(_.oX.TimeGradientArea)},[R]),et=(0,c.useRef)(!0);(0,c.useEffect)(()=>{et.current=!0},[e.symbol]);let er=(0,c.useCallback)(({displayInterval:e})=>{if(!R||!R.isStoreLoaded())return;if(et.current){et.current=!1;return}let{typeFromSetting:t}=R.getCalculatedChartType()||{};if(!t)return;let i="time"===e?_.oX.TimeGradientArea:t;R.setChartType(i)},[R]);(0,c.useEffect)(()=>{if(!R)return()=>null;let e=()=>er({displayInterval:K.current});return R.on("doneDataFetching",e),R.on("chartLoaded",e),()=>{R.off("doneDataFetching",e),R.off("chartLoaded",e)}},[R,er]),(0,c.useEffect)(()=>{er({displayInterval:w})},[er,w]);let es=(0,c.useCallback)(()=>q({candleRef:z,customIndicators:t}),[z,t]),eo=(0,c.useCallback)(async e=>em.electron?x?.storage.getItem(e):window.localStorage.getItem(e)||"",[x?.storage]),en=(0,c.useCallback)(async(e,t)=>{em.electron?x?.storage.setItem(e,t):window.localStorage.setItem(e,t)},[x?.storage]),ed=(0,c.useCallback)(async t=>{if(await e.beforeChartReady?.(t),es(),F&&z.current){let e=z.current.getCandlestick();e&&await G({setMessageInfo:i,bizType:s,symbolDisplayRef:X,storedData:t.storedData,candlestick:e,onGetStorageItem:eo,onSetStorageItem:en})}},[s,F,es,e,eo,en,i,z]),eh=(0,c.useMemo)(()=>T()(ed),[ed]);ec({namespace:e.namespace,orders:a}),eu({namespace:e.namespace,positions:o}),ea({namespace:e.namespace,executionOrders:l}),el({namespace:e.namespace,labelLines:n}),eg({namespace:e.namespace,singleLabelLines:h}),ei({namespace:e.namespace,alerts:u});let ep=(0,c.useMemo)(()=>({isFloor:!0,...e.candlestick}),[e.candlestick]),ex=(0,c.useMemo)(()=>`focus-area h-full flex-1 ${I!==M.Tabs.Origin?"hidden":"block"}`,[I]);return(0,d.jsxs)("div",{className:ex,"data-testid":"kline",children:[(0,d.jsx)(Q,{...e,beforeChartReady:eh,ref:z,interval:S,candlestick:ep,isStock:k!==M.PriceType.Last,setLoading:W,isShowCustomIndicator:F,isShowBacktest:H,isShowSubTradingData:Z,onSettingChanged:J,onSettingReset:ee}),P&&(0,d.jsx)(L.g,{})]},U)}),ex=(0,c.memo)(ep);var ef=i(65330),eb=i(24130),ey=i(40926),ev=i(34406);let eC=({basicKline:e,tradingView:t,depth:i,symbol:r,namespace:s,unmountTime:a=6e5,electron:o})=>{let l=(0,M.createStore)(s),n=(0,N.createStore)(s),[h,u]=(0,c.useState)(!0),[g,m]=(0,c.useState)(!0),[p,x]=(0,c.useState)(!1),f=(0,c.useRef)(),b=(0,c.useRef)(!0),[y]=l(M.getActiveTab),[v]=l(M.getInterval),[C]=l(M.getPriceType),[w,S]=n(N.getTvKey),[T,A]=n(N.getCandlestickKey);(0,c.useEffect)(()=>{let e=()=>{S(),A()};return window.addEventListener("online",e),()=>window.removeEventListener("online",e)},[A,S]);let _=(0,c.useCallback)(({key:e,newValue:t,oldValue:i})=>{("customIndicatorPassFilesTime"===e||"customIndicatorPassFiles"===e||"backtestFiles"===e)&&t!==i&&A()},[A]);return(0,c.useEffect)(()=>(ev.electron?o?.storage.onStorageEvent(_):window.addEventListener("storage",_),()=>window.removeEventListener("storage",_)),[o?.storage,_]),(0,c.useEffect)(()=>{if(y===M.Tabs.TradingView&&b.current&&(b.current=!1),y===M.Tabs.TradingView){if(setTimeout(()=>{m(!1)},0),clearTimeout(f.current),f.current=window.setTimeout(u,a,!0),!p)return;A(),x(!1)}else if(y===M.Tabs.Origin){if(setTimeout(()=>{u(!1)},0),clearTimeout(f.current),f.current=window.setTimeout(m,a,!0),!p)return;A(),x(!1)}else y===M.Tabs.Depth&&(clearTimeout(f.current),f.current=window.setTimeout(()=>{u(!0),m(!0),x(!0)},a));return()=>clearTimeout(f.current)},[y]),(0,c.useEffect)(()=>{switch(y){case M.Tabs.TradingView:u(!0);break;case M.Tabs.Origin:m(!0)}},[r,v,C]),(0,d.jsxs)(d.Fragment,{children:[h&&g&&y!==M.Tabs.Depth&&(0,d.jsx)("div",{className:"h-full relative",children:(0,d.jsx)(L.g,{})}),h?null:(0,d.jsx)(c.Fragment,{children:e({symbol:r,namespace:s})},`bk-${T}`),g||b.current&&y!==M.Tabs.TradingView?null:(0,d.jsx)(c.Fragment,{children:t({symbol:r,namespace:s})},`tv-${w}`),y===M.Tabs.Depth?i({symbol:r,namespace:s}):null]})},ew=({namespace:e,beforeMiniChartSymbolChange:t})=>{let i=(0,M.createStore)(e),[,r]=i(M.getLastSelectedMiniMultiChartWindow),[s]=i(M.getMiniMultiChartWindows);return(0,c.useCallback)(e=>{t({symbol:s[e]}),r(e)},[s,t,r])};var eS=i(24142);i(98923);let eT=e=>(eS.Y.on("triggerShortCuts",e),()=>{eS.Y.off("triggerShortCuts",e)}),eA={KLINE_ZOOMIN:"KLINE_ZOOMIN",KLINE_ZOOMOUT:"KLINE_ZOOMOUT",KLINE_MOVEL:"KLINE_MOVEL",KLINE_MOVER:"KLINE_MOVER",KLINE_SWITCH:"KLINE_SWITCH",KLINE_INTERVAL_0:"KLINE_INTERVAL_0",KLINE_INTERVAL_1:"KLINE_INTERVAL_1",KLINE_INTERVAL_2:"KLINE_INTERVAL_2",KLINE_INTERVAL_3:"KLINE_INTERVAL_3",KLINE_INTERVAL_4:"KLINE_INTERVAL_4",KLINE_INTERVAL_5:"KLINE_INTERVAL_5",KLINE_INTERVAL_6:"KLINE_INTERVAL_6",KLINE_INTERVAL_7:"KLINE_INTERVAL_7",KLINE_INTERVAL_8:"KLINE_INTERVAL_8",KLINE_INTERVAL_9:"KLINE_INTERVAL_9"},e_=({namespace:e})=>{let t=(0,M.createStore)(e),i=(0,N.createStore)(e),[r]=t(M.getActiveTab),[s]=i(N.getCandlestickReference),[a]=i(N.getIsChartFocused),[o,l]=t(M.getInterval),[n]=t(M.getSelectedIntervals),[d]=i(N.getDefaultIntervals),[h]=t(M.getChartMode),u=(0,c.useCallback)(e=>{if(!a||h!==M.ChartMode.Single)return;let t=n[0===e?9:e-1];t&&l(t)},[h,a,n,l]),g=(0,c.useCallback)(()=>{let e=d.indexOf(o)+1;l(d[e%d.length])},[o,d,l]),m=(0,c.useCallback)(()=>{r===M.Tabs.Origin&&s?.zoomIn()},[s,r]),p=(0,c.useCallback)(()=>{r===M.Tabs.Origin&&s?.zoomOut()},[s,r]);return{selectSelectedIntervalByNumber:u,selectNextInterval:g,onChartZoomIn:m,onChartZoomOut:p,onChartForward:(0,c.useCallback)(()=>{r===M.Tabs.Origin&&s?.goForward()},[s,r]),onChartBackward:(0,c.useCallback)(()=>{r===M.Tabs.Origin&&s?.goNext()},[s,r])}};var eL=i(34406);let ek=({namespace:e,shortcutEnabled:t=!1,electron:i})=>{let{selectSelectedIntervalByNumber:r,selectNextInterval:s,onChartZoomIn:a,onChartZoomOut:o,onChartForward:l,onChartBackward:n}=e_({namespace:e});(0,c.useEffect)(()=>i&&eL.electron&&t?i.registerActionHandle(({name:e})=>{switch(e){case i.constants.ACTION_K_LINE_SWITCH_PERIOD:return s();case i.constants.ACTION_K_LINE_ZOOM_IN:return a();case i.constants.ACTION_K_LINE_ZOOM_OUT:return o();case i.constants.ACTION_K_LINE_MOVE_LEFT:return n();case i.constants.ACTION_K_LINE_MOVE_RIGHT:return l();case i.constants.ACTION_K_LINE_INTERVAL_0:return r(0);case i.constants.ACTION_K_LINE_INTERVAL_1:return r(1);case i.constants.ACTION_K_LINE_INTERVAL_2:return r(2);case i.constants.ACTION_K_LINE_INTERVAL_3:return r(3);case i.constants.ACTION_K_LINE_INTERVAL_4:return r(4);case i.constants.ACTION_K_LINE_INTERVAL_5:return r(5);case i.constants.ACTION_K_LINE_INTERVAL_6:return r(6);case i.constants.ACTION_K_LINE_INTERVAL_7:return r(7);case i.constants.ACTION_K_LINE_INTERVAL_8:return r(8);case i.constants.ACTION_K_LINE_INTERVAL_9:return r(9)}}):()=>null,[s,a,o,n,l,t,i,r]),(0,c.useEffect)(()=>eL.electron||!t?()=>null:eT(e=>{switch(e){case eA.KLINE_MOVEL:return n();case eA.KLINE_MOVER:return l();case eA.KLINE_ZOOMIN:return a();case eA.KLINE_ZOOMOUT:return o();case eA.KLINE_SWITCH:return s();case eA.KLINE_INTERVAL_0:return r(0);case eA.KLINE_INTERVAL_1:return r(1);case eA.KLINE_INTERVAL_2:return r(2);case eA.KLINE_INTERVAL_3:return r(3);case eA.KLINE_INTERVAL_4:return r(4);case eA.KLINE_INTERVAL_5:return r(5);case eA.KLINE_INTERVAL_6:return r(6);case eA.KLINE_INTERVAL_7:return r(7);case eA.KLINE_INTERVAL_8:return r(8);case eA.KLINE_INTERVAL_9:return r(9);default:return()=>null}}),[n,l,a,o,s,r,t])};var eI=i(45168),eP=i(49666);let eE=e=>{let[t]=(0,eI.M)(e)(eI.p),{isMobile:i}=(0,A.F)();return(0,c.useMemo)(()=>i||t<580&&t>0?eP.l.Small:eP.l.Medium,[i,t])},eB=h().lazy(()=>i.e("7227").then(i.bind(i,85141))),eN=h().lazy(()=>Promise.all([i.e("6405"),i.e("6948")]).then(i.bind(i,291))),eM=e=>(0,ef.U)()?(0,d.jsx)(c.Suspense,{fallback:(0,d.jsx)("div",{className:"hidden"}),children:(0,d.jsx)(eB,{...e})}):(0,d.jsx)(d.Fragment,{}),eD=e=>(0,ef.U)()?(0,d.jsx)(c.Suspense,{fallback:(0,d.jsx)("div",{className:"hidden"}),children:(0,d.jsx)(eN,{...e})}):(0,d.jsx)(d.Fragment,{});var eV=i(56599),ej=i(61277),eR=i(23493),eO=i(29400),eF=i(31332);let eH=e=>({depthScale:0,setDepthScale:t=>e({depthScale:t})}),eZ=I()((e="unspecific-chart-namespace")=>(0,P.Z)((...e)=>({...eH(...e)}))),eU=e=>[e.depthScale,e.setDepthScale],eW=(e,t)=>({tag:t,background:e?.colors?.PrimaryText,d1:{lineColor:e?.colors?.Sell,fillColor:(0,er.D)(e?.colors?.Sell,.1)},d2:{lineColor:e?.colors?.Buy,fillColor:(0,er.D)(e?.colors?.Buy,.1)},hoverBgColor:(0,er.D)(e?.colors?.Input,.5),textColor:e?.colors?.SecondaryText,tagColor:e?.colors?.SecondaryBg});var e$=i(25823);(r=s||(s={}))[r.Horizontal=0]="Horizontal",r[r.Vertical=1]="Vertical";let ez=(0,c.lazy)(()=>Promise.all([i.e("6514"),i.e("7526")]).then(i.bind(i,96611))),eK=(0,c.lazy)(()=>Promise.all([i.e("6514"),i.e("2519")]).then(i.bind(i,69900)));var eX=i(75486),eY=i.n(eX),eG=i(55281),eq=i.n(eG),eQ=i(93659),eJ=i(81158);let e0=({storage:e,storageName:t})=>{let{getI18n:i}=(0,en.Z)("","trade-ui"),r=(0,c.useMemo)(()=>i("trd-chart-tv-load-timeout",{defaultValue:"Failed to load TradingView due to network issues."})||"",[i]),s=(0,c.useMemo)(()=>i("trd-chart-tv-initialization-error",{defaultValue:"Something went wrong while initializing TradingView."})||"",[i]),a=(0,c.useMemo)(()=>i("trd-chart-crash-reload",{defaultValue:"Refresh"})||"",[i]),o=(0,c.useMemo)(()=>i("trd-chart-init-error",{defaultValue:"Failed to initialize TradingView due to malformed config, please try to refresh"})||"",[i]),l=(0,c.useCallback)(()=>window.location.reload(),[]),n=(0,c.useCallback)(async()=>{await e.removeItem(t),l()},[l,e,t]),[d,h]=(0,c.useState)(!1),[u,g]=(0,c.useState)(""),[m,p]=(0,c.useState)(""),[x,f]=(0,c.useState)(async()=>void 0),b=(0,c.useCallback)(()=>{h(!0),g(r),p(a),f(l)},[r,a,l]);return{showError:d,mainText:u,buttonText:m,buttonCallback:x,onScriptLoadingError:b,onTradingViewInitError:(0,c.useCallback)(()=>{h(!0),g(o),p(a),f(n)},[n,a,o]),onChartReadyError:(0,c.useCallback)(()=>{h(!0),g(s),p(a),f(l)},[s,a,l])}};var e1=i(76940),e2=i(75926),e5=i(34406);let e3=({namespace:e,electron:t={}})=>{let{getThemeCounter:i,shouldResetTradingViewKey:r}=(0,e2.Fg)(),[s,a]=(0,e1.Z)(`${e}_tvThemeCounter`,0),[o,l]=(0,c.useState)(-1),n=(0,c.useCallback)(()=>{e5.electron||l(i())},[i]);(0,u.Z)(()=>n()),(0,eQ.Z)(()=>n()),(0,c.useEffect)(()=>{if(!e5.electron)return;let{onUserSettingsChange:e}=t;e(({themeCounter:e})=>{l(e)})},[t,r]);let d=(0,c.useCallback)(()=>a(i()),[i,a]),h=(0,c.useMemo)(()=>-1!==o,[o]);return{syncThemeCounterWithGlobalCounter:d,overwritingThemeOnLoaded:(0,c.useMemo)(()=>h&&o!==s,[h,o,s])}};var e6=i(28544),e4=i(76635),e8=i(10017),e7=i.n(e8),e9=i(52165);let te=(0,e4.range)(1,1380),tt=(0,e4.range)(1,365).map(e=>`${e}D`),ti=["1S",...te,...tt,...(0,e4.range)(1,52).map(e=>`${e}W`),...(0,e4.range)(1,12).map(e=>`${e}M`)],tr=({symbol:e,params:t})=>{let i=new URLSearchParams(t);return`${e}@${i.toString()}`},ts=e=>{let[t,i]=e.split("@"),r=new URLSearchParams(i).entries();return{symbol:t,params:e7()(Array.from(r))}},ta=e=>{switch(e){case"zh-CN":case"cn":return"zh";case"zh-HK":case"zh-TW":case"zh-TC":case"tw":return"zh_TW";case"ja":return"ja";case"ko":return"ko";case"th":return"th";case"he":return"he_IL";case"ru":return"ru";case"cs":return"cs";case"sv":return"sv";case"vi":case"vn":return"vi";case"tr":return"tr";case"ro":return"ro";case"pt-PT":case"pt-BR":case"pt":return"pt";case"pl":return"pl";case"nl":return"nl_NL";case"it":return"it";case"fr":return"fr";case"es":case"es-LA":return"es";case"de":return"de";case"id":return"id_ID";default:return"en"}},to=({namespace:e,orders:t})=>{let[i]=(0,M.createStore)(e)(M.getShowExecutionOrder);return i?t:[]},tl=({namespace:e,labelLines:t})=>{let i=(0,M.createStore)(e),[r]=i(M.getShowAverageBuyPrice),[s]=i(M.getShowAverageSellPrice),[a]=i(M.getShowBreakEvenPrice),[o]=i(M.getShowLiquidationPrice),[l]=i(M.getShowPriceAlert),n=(0,c.useMemo)(()=>r?t.filter(e=>e.type===M.LabelLineType.AverageBuyPrice):[],[t,r]),d=(0,c.useMemo)(()=>s?t.filter(e=>e.type===M.LabelLineType.AverageSellPrice):[],[t,s]),h=(0,c.useMemo)(()=>a?t.filter(e=>e.type===M.LabelLineType.BreakEvenPrice):[],[t,a]);return[...n,...d,...h,...(0,c.useMemo)(()=>o?t.filter(e=>e.type===M.LabelLineType.LiquidationPrice):[],[t,o]),...(0,c.useMemo)(()=>l?t.filter(e=>e.type===M.LabelLineType.PriceAlert):[],[t,l])]},tn=({namespace:e,orders:t})=>{let i=(0,M.createStore)(e),[r]=i(M.getShowLimitOrder),[s]=i(M.getShowBotPreviewOrder),{getI18n:a}=(0,en.Z)("","kline-ui"),o=(0,c.useMemo)(()=>a("order-drag-tooltip",{defaultValue:"Drag for price modify"})||"",[a]),l=(0,c.useMemo)(()=>a("order-modify-tooltip",{defaultValue:"Click for modify"})||"",[a]),n=(0,c.useMemo)(()=>a("order-cancel-tooltip",{defaultValue:"Click for cancel"})||"",[a]),d=(0,c.useMemo)(()=>t.filter(({limitOrderType:e})=>(void 0===e||e===M.LimitOrderType.LimitOrder)&&r),[t,r]),h=(0,c.useMemo)(()=>t.filter(({limitOrderType:e})=>e===M.LimitOrderType.BotPreview&&s),[t,s]),u=(0,c.useMemo)(()=>[...d,...h],[d,h]);return(0,c.useMemo)(()=>u.map(e=>({...e,tooltip:e.tooltip??o,modifyTooltip:e.modifyTooltip??l,cancelTooltip:e.cancelTooltip??n})),[n,o,l,u])},td=({namespace:e,orders:t})=>{let[i]=(0,M.createStore)(e)(M.getShowPositionOrder);return i?t:[]};var tc=i(35676),th=i.n(tc),tu=i(3440),tg=i.n(tu),tm=i(87622),tp=i.n(tm),tx=i(84636),tf=i.n(tx),tb=i(96795),ty=i.n(tb),tv=i(75652),tC=i.n(tv),tw=i(80662);let tS=e=>/^(LineTool)/g.test(e),tT=e=>`${e}.customSettings`,tA=e=>`${e}.layout`,t_=e=>e.chartId,tL=({save:e})=>{let t={},i=[],r=e.charts.reduce((e,r)=>{let s=r.panes.reduce((e,r)=>{let s=r.sources.find(e=>"MainSeries"===e.type);s?.state.symbol&&(t[s?.state.symbol.toUpperCase()]=[]);let[a,o]=ty()(r.sources,e=>tS(e.type));return i.push(...a),[...e,{...r,sources:o}]},[]);return[...e,{...r,panes:s}]},[]),s=tf()(i,e=>e.id),a=tg()(s,e=>e.state.symbol);return{charts:r,drawings:{...t,...a}}},tk=async({storage:e,key:t,charts:i})=>{let r=tA(t),s=await e.getItem(r)||[],a=tp()(s,t_),o=tp()(i,t_),l=s.map(t_),n=i.map(t_),d=tC()([...l,...n]).map(e=>o[e]||a[e]).sort((e,t)=>+e.chartId-+t.chartId);return await e.setItem(r,d),d},tI=async({storage:e,save:t,key:i,widget:r})=>{if(!r)return{chartSave:t,drawingsSave:{}};let{drawings:s,charts:a}=tL({save:t}),o={...t,charts:a};return await e.setItem(i,o),await tk({storage:e,key:i,charts:a}),await Promise.all(Object.keys(s).map(t=>e.setItem(`#TV_SYMBOL-${t}`,s[t]))),{chartSave:o,drawingsSave:s}},tP=async({storage:e,key:t,widget:i})=>{if(!i)return(0,tw.r)({activeChartIndex:0});let r=tT(t),s=i.activeChartIndex(),a=(0,tw.r)({activeChartIndex:s});return await e.setItem(r,a),a},tE=async({storage:e,key:t})=>{let i=(await e.keys()).filter(e=>/^(#TV_SYMBOL-)/g.test(e)).map(async t=>e.getItem(t)),r=await Promise.all(i),s=th()(r).filter(e=>!!e),a=tg()(s,e=>e.ownerSource),o=tA(t),l=tT(t),n=await e.getItem(t),d=await e.getItem(l);if(!n)return{chartSave:n,customSettings:d};let c=(await e.getItem(o)||n.charts).reduce((e,t)=>{let i=t.panes.reduce((e,t)=>{let i=V()(t.sources),r=a[t.mainSourceId]||[];return i.push(...r),[...e,{...t,sources:i}]},[]);return[...e,{...t,panes:i}]},[]);return{chartSave:{...n,charts:c},customSettings:d}},tB=(0,c.lazy)(()=>i.e("4645").then(i.bind(i,62867))),tN=e=>(0,c.useMemo)(()=>eY().createInstance({name:e}),[e]),tM=e=>{switch(e){case M.ChartMode.HorizontalTwo:return"2v";case M.ChartMode.VerticalTwo:return"2h";case M.ChartMode.HorizontalThree:return"3v";case M.ChartMode.VerticalThree:return"3h";case M.ChartMode.Four:return"4";case M.ChartMode.Single:default:return"s"}},tD=e=>({candlestickHistory:[],setCandlestickHistory:t=>e({candlestickHistory:t})}),tV=I()((e="unspecific-chart-namespace")=>(console.warn("[trade-widget] candlestickHistoryStore has been deprecated."),(0,P.Z)((...e)=>({...tD(...e)})))),tj=e=>[e.candlestickHistory,e.setCandlestickHistory];var tR=i(15316),tO=i.n(tR);let tF=e=>({orderHistory:[],setOrderHistory:t=>e({orderHistory:t}),appendOrderHistory:t=>e(e=>({orderHistory:tO()(t,e.orderHistory,"id")})),clearOrderHistory:()=>e({orderHistory:[]})}),tH=I()((e="unspecific-chart-namespace")=>(0,P.Z)((...e)=>({...tF(...e)}))),tZ=e=>[e.orderHistory,e.setOrderHistory,e.appendOrderHistory,e.clearOrderHistory],tU={createDatafeedTP27:()=>{let e=new Map,t={},i=[],r={onReady:()=>null,resolveSymbol:()=>null,searchSymbols:()=>null,getBars:()=>null,subscribeBars:()=>null,unsubscribeBars:()=>null};return({config:r,onSymbolResolving:s,onSymbolResolved:a,onFetchSymbolsInfo:o,onFetchBars:l,onSubscribeBars:n,onUnsubscribeBars:d,onFetchServerTimeApi:c,onTransformSymbolInfo:h=({template:e})=>e})=>({datafeed:{onReady:e=>{setTimeout(async()=>{let s=(await o()).map(e=>({...e,ticker:tr({symbol:e.symbol,params:e.params||{}})}));i=s.map(({ticker:e,symbol:t,fullName:i,description:r="",exchange:s="",type:a=""})=>({symbol:t,ticker:e,full_name:i,description:r,exchange:s,type:a})),t=(0,e4.keyBy)(s,"ticker"),e({exchanges:[],symbols_types:[],supported_resolutions:ti,supports_marks:!1,supports_timescale_marks:!1,supports_time:!0,...r})})},resolveSymbol:async(e,i,r)=>{let o=t[e];if(!o)return void r(`cannot resolve symbol - ${e}`);let l=h({info:o,template:{description:o.description||"",fractional:!1,has_seconds:!0,seconds_multipliers:["1"],has_intraday:!0,intraday_multipliers:["1","3","5","15","30","60","120","240","360","480","720"],has_daily:!0,daily_multipliers:["1"],has_weekly_and_monthly:!0,weekly_multipliers:["1"],monthly_multipliers:["1"],minmov:1,minmove2:0,name:o.symbol,full_name:o.fullName,ticker:o.ticker,timezone:"Etc/UTC",pricescale:o.tickSize,session:"24x7",type:o.type||"",exchange:o.exchange||"",listed_exchange:o.exchange||"",format:"price",supported_resolutions:ti,visible_plots_set:"ohlcv",volume_precision:3}});if(s&&!await s({symbol:e,info:l}))return void r(`symbol resolving error - ${e}`);setTimeout(()=>{i(l),a?.(l)})},searchSymbols:(e,t,r,s)=>{let a=RegExp(e,"i"),o=RegExp(t,"i"),l=RegExp(r,"i");s(i.filter(({symbol:e,ticker:t,full_name:i,description:r="",exchange:s="",type:n=""})=>[e,t,i,r].some(e=>a.test(e||""))&&o.test(s)&&l.test(n)))},getBars:async(e,t,i,r,s)=>{let{from:a,to:o}=i,n=(0,e9.ps)(t),d=[];try{if(o>=0){let i=ts(e.ticker||"");d=await l({symbolInfo:e,resolution:t,rangeStartDate:a,rangeEndDate:o,tickerInfo:i,binanceInterval:n})}r(d,{noData:0===d.length})}catch(e){s(e.toString())}},subscribeBars:(t,i,r,s,a)=>{let o=ts(t.ticker||""),l=(0,e9.ps)(i),d=n({symbolInfo:t,resolution:i,callback:r,onResetCacheNeededCallback:a,tickerInfo:o,binanceInterval:l});e.set(s,d)},unsubscribeBars:t=>{e?.get(t)?.(),e?.delete(t),d?.(t)},getServerTime:async e=>{try{let t=await c();e(t)}catch(t){console.warn(t),e(Date.now()/1e3)}}},observers:e,symbolsInfo:t})}},tW=e9.DP,t$=(e,t)=>{let i=tW(t),r=e.map(e=>[tW(e),e]).slice().sort(([e],[t])=>e-t);for(let e=0;e<r.length;e++){let[t,s]=r[e];if(t%i==0)return s}return null},tz=e=>{let[t]=e.reduce((e,t)=>{let i=tW(t),[,r]=e;return i>r?[t,i]:e},["",Number.MIN_SAFE_INTEGER]);return t},tK={Containers:{Chart:({namespace:e,miniChartNamespace:t,hostAddress:i,themeName:r,getSymbolDisplayName:s,checkMiniSymbolAvaliablility:a,beforeMiniChartSymbolChange:o,hasDoneFetchingSymbols:l,generateToolbar:n,generateMiniToolbar:h,basicKline:u,tradingView:g,depth:m,symbol:p,checkTradeStatus:x,isHiddenLogo:f,electron:b,shortcutEnabled:y,intervalOptions:v,willOpenInText:C})=>{let w=(0,M.createStore)(e),S=(0,N.createStore)(e),[T]=w(M.getChartMode),[A]=w(M.getActiveTab),[,_]=S(N.getDefaultIntervals),[,L]=S(N.getIsChartFocused),k=eE(e),I=ew({namespace:e,beforeMiniChartSymbolChange:o});(0,c.useEffect)(()=>{_(v)},[v,_]);let P=(0,c.useMemo)(()=>(0,d.jsx)(eM,{namespace:e,miniChartNamespace:t,symbol:p,hostAddress:i,themeName:r,checkMiniSymbolAvaliablility:a,checkTradeStatus:x,onSymbolChange:I,getSymbolDisplayName:s,basicKline:u,generateToolbar:h,isHiddenLogo:f,hasDoneFetchingSymbols:l}),[u,a,x,h,s,l,i,f,t,e,I,p,r]),E=(0,c.useMemo)(()=>(0,d.jsx)(eC,{basicKline:u,tradingView:g,depth:m,symbol:p,namespace:e,electron:b}),[u,m,b,e,p,g]);ek({namespace:e,shortcutEnabled:y,electron:b});let B=(0,c.useMemo)(()=>T===M.ChartMode.Single,[T]),D=(0,c.useMemo)(()=>A===M.Tabs.TradingView,[A]),V=(0,c.useMemo)(()=>{switch(A){case M.Tabs.Origin:return B?E:P;case M.Tabs.TradingView:default:return E}},[A,B,P,E]),j=(0,c.useMemo)(()=>s(p),[s,p]),R=(0,c.useMemo)(()=>n({onSymbolChange:I}),[n,I]),O=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e=O.current;if(!e)return()=>null;let t=()=>L(!0),i=()=>L(!1);return e.addEventListener("focus",t),e.addEventListener("blur",i),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",i)}},[L]);let F=(0,c.useMemo)(()=>(0,d.jsx)(eb.Z,{useMiniHeader:A===M.Tabs.Origin&&!B,namespace:e,headerSlot:(0,d.jsx)(eD,{symbol:p,getSymbolDisplayName:s,namespace:e,miniChartNamespace:t,generateToolbar:R,intervalFilterType:k}),children:V}),[A,V,s,k,B,t,e,p,R]);return(0,d.jsx)("div",{className:"h-full w-full",ref:O,tabIndex:-1,children:B||D?(0,d.jsx)(ey.Z,{symbol:p,symbolDisplay:j,hostAddress:i,themeName:r,willOpenInText:C,checkTradeStatus:x,children:F}):F})},BasicKline:ex,TradingViewTP27:({tradingViewProps:e,namespace:t,storageName:i=w.k,containerId:r="tradingview",symbolsInfo:s={},electron:a={}})=>{let o=(0,M.createStore)(t),l=(0,N.createStore)(t),n=E(t),[h,u]=o(M.getInterval),g=o(M.getResolutionString),[m]=o(M.getActiveTab),[p,x]=o(M.getPriceType),[f,b]=o(M.getTvChartStyle),[y]=o(M.getChartMode),[,v]=n(B),[,C]=l(N.getTradingViewReference),[S,T]=(0,c.useState)(!1),A=tN(t),_=(0,eO.tZ)(),L=(0,c.useMemo)(()=>ta(_),[_]),k=(0,J.T)(),I=(0,c.useMemo)(()=>`${t}-${r}`,[r,t]),P=(0,c.useRef)(),D=(0,c.useRef)(h),V=(0,c.useRef)(f),j=(0,c.useRef)(s),R=(0,c.useRef)(y),O=(0,c.useRef)(A),F=(0,c.useRef)(i),H=(0,c.useRef)(!1),Z=(0,c.useRef)(e.theme),U=(0,c.useRef)(S),W=(0,c.useRef)(k);(0,c.useEffect)(()=>{D.current=h},[h]),(0,c.useEffect)(()=>{V.current=f},[f]),(0,c.useEffect)(()=>{j.current=s},[s]),(0,c.useEffect)(()=>{R.current=y},[y]),(0,c.useEffect)(()=>{O.current=A},[A]),(0,c.useEffect)(()=>{F.current=i},[i]),(0,c.useEffect)(()=>{Z.current=e.theme},[e.theme]),(0,c.useEffect)(()=>{W.current=k},[k]),(0,c.useEffect)(()=>{U.current=S},[S]);let $=tn({namespace:t,orders:e.limitOrders}),z=td({namespace:t,orders:e.positionOrders}),K=to({namespace:t,orders:e.executionOrders}),X=tl({namespace:t,labelLines:e.labelLines}),{syncThemeCounterWithGlobalCounter:Y,overwritingThemeOnLoaded:G}=e3({namespace:t,electron:a});(0,c.useEffect)(()=>{G&&(H.current=!0)},[G]);let q=(0,c.useMemo)(()=>tr({symbol:e.symbol,params:{priceType:p}}),[p,e.symbol]),Q=(0,c.useCallback)(({resolution:e,chartType:t})=>{let i=(0,e9.ps)(e);u(3===t?"time":i)},[u]),ee=(0,c.useCallback)(async()=>{P.current&&await tP({storage:O.current,key:F.current,widget:P.current})},[]),et=(0,c.useCallback)(async e=>tE({storage:O.current,key:F.current}),[]),ei=(0,c.useCallback)(e=>eq()(j.current,t=>t.fullName===e?.full_name||t.symbol===e?.full_name),[]),er=(0,c.useCallback)(async t=>{let{chartSave:i}=await tI({storage:O.current,save:t,key:F.current,widget:P.current});await e.initialConfig.onSave?.(i)},[e.initialConfig]),es=(0,c.useCallback)(async()=>{let t=await et(R.current);return e.initialConfig.onLoadConfig?.(),t},[et,e.initialConfig]),ea=(0,c.useCallback)(t=>{v(t),e.initialConfig.onLoading?.(t)},[v,e.initialConfig]),eo=(0,c.useCallback)((e,t=!0)=>{t?e.setChartType("time"===D.current?2:V.current):"time"===D.current&&e.setChartType(2)},[]),el=(0,c.useCallback)(e=>{P.current=e,C(e)},[C]),en=(0,c.useCallback)(()=>{setTimeout(()=>{if(P.current)try{let e=P.current?.activeChart();eo(e)}catch(e){}},0),T(!0),e.initialConfig.onChartReadyDone?.()},[eo,e.initialConfig]),ed=(0,c.useCallback)(()=>{Y(),e.initialConfig.onSetThemeDone?.()},[Y,e.initialConfig]),ec=(0,c.useCallback)(()=>{Y(),e.initialConfig.onFirstTimeSetThemeDone?.()},[Y,e.initialConfig]),eh=(0,c.useCallback)(t=>{e.initialConfig.onIntervalChanged?.(t)},[e.initialConfig]),eu=(0,c.useCallback)(async t=>{let{chart:i}=t,r=i.symbolExt();if(!r)return;let s=i.chartType();b(s),Q({resolution:i.resolution(),chartType:s});let{params:{priceType:a=""}={}}=ei(r)||{};a&&x(a),await ee(),e.initialConfig.onActiveChartChanged?.(t)},[ei,ee,Q,x,b,e.initialConfig]),eg=(0,c.useCallback)(e=>{window.open(`https://www.tradingview.com/x/${e}`,"_blank")},[]),em=(0,c.useCallback)(t=>{e.initialConfig.onAddStudy?.(t)},[e.initialConfig]),ep=(0,c.useCallback)(t=>{e.initialConfig.onSymbolChanged?.(t)},[e.initialConfig]),ex=(0,c.useCallback)(t=>{e.initialConfig.onFirstTimeDataLoadedDone?.(t)},[e.initialConfig]),ef=(0,c.useCallback)(t=>{e.initialConfig.onDataLoadedDone?.(t)},[e.initialConfig]),eb=(0,c.useCallback)(({chart:e,tradingViewSave:t})=>{t||[{length:7,color:"rgba(241, 156, 56, 0.7)"},{length:25,color:"rgba(234, 61, 247, 0.7)"},{length:99,color:"rgba(116, 252, 253, 0.7)"}].forEach(({length:t,color:i})=>{e.createStudy("Moving Average",!1,!1,{length:t},{"plot.linewidth":1,"plot.color":i,showLabelsOnPriceScale:!1})})},[]),ey=(0,c.useMemo)(()=>e.initialConfig.onInitChart||eb,[eb,e.initialConfig.onInitChart]),ev=(0,c.useCallback)(()=>{if(H.current&&P.current){H.current=!1;let e=(0,e6.j)(W.current.colors);(0,eJ.D)({widget:P.current,theme:Z.current,overrides:e,onSave:er,onSetThemeDone:ed})}setTimeout(()=>{if(P.current)try{let e=P.current.activeChartIndex(),t=P.current.activeChart(),i=t.chartType();eu({chart:t,index:e}),b(i),P.current.save(e=>{er(e)})}catch(e){}},100)},[]);(0,c.useEffect)(()=>{if(S&&P.current)try{P.current.activeChart().setChartType(f)}catch(e){}},[f,S]),(0,c.useEffect)(()=>{if(S&&P.current)try{eo(P.current.activeChart())}catch(e){}},[S,h,eo]),(0,eQ.Z)(()=>{if(U.current&&P.current)try{P.current?.setLayout(tM(y))}catch(e){}},[y]),(0,c.useEffect)(function(){if(S&&P.current)try{let e=P.current.activeChart();e.onChartTypeChanged().subscribe({},()=>{eo(e,!1)})}catch{}},[eo,S]);let{onScriptLoadingError:eC,onTradingViewInitError:ew,onChartReadyError:eS}=e0({storage:A,storageName:i}),eT=(0,c.useMemo)(()=>({...e.initialConfig,tvConfig:{...e.initialConfig.tvConfig,symbol:q,container:I,interval:g,locale:L},onSave:er,onLoadConfig:es,onLoading:ea,onChartReadyDone:en,onChartReadyError:eS,onScriptLoadingError:eC,onTradingViewInitError:ew,onIntervalChanged:eh,onFirstTimeSetThemeDone:ec,onSetThemeDone:ed,onFirstTimeDataLoadedDone:ex,onDataLoadedDone:ef,onInitChart:ey,onActiveChartChanged:eu,onSymbolChanged:ep,onAddStudy:em,onScreenshotReady:eg,onLayoutChanged:ev}),[I,q,g,L,eu,em,en,eS,ef,ex,ec,ey,eh,ev,es,ea,er,eg,eC,ed,ep,ew,e.initialConfig]);return(0,d.jsx)("div",{className:"h-full",style:{display:m!==M.Tabs.TradingView?"none":"block"},children:(0,d.jsx)(c.Suspense,{fallback:null,children:(0,d.jsx)(tB,{...e,symbol:q,interval:g,limitOrders:$,positionOrders:z,executionOrders:K,labelLines:X,overwritingThemeOnLoaded:G,themeConfig:k,initialConfig:eT,onInitialized:el})})})},DepthChart:({namespace:e,symbol:t,theme:i,asks:r,bids:a,width:o,height:l,mode:n,pricePrecision:h,filterPricePrecision:u})=>{let[g,m]=eZ(e)(eU),p=(0,c.useMemo)(()=>eW(i,{width:124,height:62}),[i]),{format:x}=function(){let e=(0,eO.tZ)();return{format:(0,c.useCallback)((t,i)=>Number.isNaN(Number(t))?`${t}`:(0,eF.d)(t,"number"==typeof i?.precision?i.precision:function(e){let t=/\d*\.(\d*)/.exec(String(e));return t?t[1]?.length:0}(t),e,i),[e])}}(),f=(0,c.useCallback)(e=>(0,_._A)()?x(e,{precision:h}):(0,e$.oB)(e,h),[h,x]),b=(0,c.useCallback)(e=>(0,e$.pF)(e,2,(0,_._A)()),[]),y=(0,c.useCallback)(e=>(0,_._A)()?x(e,{precision:u}):(0,e$.oB)(e,u),[u,x]),v=(0,c.useCallback)(e=>(0,e$.pF)(e,2,(0,_._A)()),[]),C=(0,c.useCallback)((e,t)=>`+${(0,_._A)()?`${x((e-t)/t*100,{precision:1})}%`:(0,e$.gt)((e-t)/t,1)}`,[x]),w=(0,c.useCallback)((e,t)=>`${(0,_._A)()?`${x((e-t)/t*100,{precision:1})}%`:(0,e$.gt)((e-t)/t,1)}`,[x]);return n===s.Horizontal?(0,d.jsx)(c.Suspense,{fallback:null,children:(0,d.jsx)(ez,{symbol:t,d1Group:r,d2Group:a,canvas:{width:o,height:l},styles:p,scale:g,setScale:m,xTicksFormatter:f,yTicksFormatter:b,d1XValueFormatter:y,d2XValueFormatter:y,d1YValueFormatter:v,d2YValueFormatter:v,d1DeltaXValueFormatter:C,d2DeltaXValueFormatter:w})}):(0,d.jsx)(c.Suspense,{fallback:null,children:(0,d.jsx)(eK,{symbol:t,d1Group:r,d2Group:a,canvas:{width:o,height:l},styles:p,scale:g,setScale:m,yTicksFormatter:e=>(0,e$.uf)(e,h),d1XValueFormatter:y,d2XValueFormatter:y,d1YValueFormatter:v,d2YValueFormatter:v})})},ChartModeDropdown:ej.default,Fullscreen:eR.default,Alert:({onClick:e})=>(0,d.jsx)(eV.Z,{className:" chart-fullscreen-icon min-w-[16px] min-h-[16px] cursor-pointer text-IconNormal hover:text-SecondaryText ",onClick:e})},Store:M,SessionStore:N,CandlestickHistoryStore:o,OrderHistoryStore:l,DepthStore:a,DepthChartMode:s,DefaultResolutions:ti,DefaultTVEnabledFeatures:C.a9,DefaultTVDisabledFeatures:C.lR,DefaultTVStorageName:w.k,utils:n,OrderModificationModal:({visible:e,priceField:t,amountField:i,submitText:r,cancelText:s,onSubmit:a,onCancel:o})=>((0,u.Z)(()=>{console.warn("[trade-widget] the component has been deprecated.")}),(0,d.jsx)(f.ZP.Modal,{visible:e,sx:{minWidth:"288px",height:"176px",p:0,bg:"modalBg"},onMaskClick:o,children:(0,d.jsxs)(m.Z,{sx:{p:"16px",flexDirection:"column","& > *:not(:last-child)":{marginBottom:"16px"}},children:[(0,d.jsx)(p.Z,{children:(0,d.jsx)(b.Z,{variant:"filled",textAlign:"right",prefix:(0,d.jsx)(y,{children:t.placeholder}),suffix:(0,d.jsx)(v,{children:t.suffixText}),boxProps:{sx:{width:"100%",height:"40px",bg:"bg3"}},...t})}),(0,d.jsx)(p.Z,{children:(0,d.jsx)(b.Z,{variant:"filled",textAlign:"right",prefix:(0,d.jsx)(y,{children:i.placeholder}),suffix:(0,d.jsx)(v,{children:i.suffixText}),boxProps:{sx:{width:"100%",height:"40px"}},...i})}),(0,d.jsxs)(m.Z,{sx:{"& > *":{width:"100%",height:"32px"},"& > *:not(:last-child)":{marginRight:"8px"}},children:[(0,d.jsx)(x.Z,{onClick:o,sx:{bg:"line",backgroundImage:"none",color:"var(--color-PrimaryText)","&:hover:not(:disabled):not(:active):not(.inactive)":{bg:"bg3",backgroundImage:"none"}},children:s}),(0,d.jsx)(x.Z,{onClick:a,sx:{bg:"primary",backgroundImage:"none",color:"bg5","&:hover:not(:disabled):not(:active):not(.inactive)":{backgroundImage:"none"}},children:r})]})]})}))}},45168:function(e,t,i){i.d(t,{M:()=>o,p:()=>l});var r=i(30733),s=i.n(r),a=i(91823);let o=s()((e="unspecific-chart-namespace")=>(0,a.Z)(e=>({layoutWidth:0,setLayoutWidth:t=>e({layoutWidth:t})}))),l=e=>[e.layoutWidth,e.setLayoutWidth]},71427:function(e,t,i){i.r(t),i.d(t,{createStore:()=>l,getCandlestickKey:()=>p,getCandlestickReference:()=>u,getCustomIntervalModalVisibility:()=>f,getDefaultIntervals:()=>d,getEditingInterval:()=>h,getIntervalConfigOpen:()=>c,getIsChartFocused:()=>n,getShowMoreSettingTooltip:()=>x,getTradingViewReference:()=>g,getTvKey:()=>m});var r=i(30733),s=i.n(r),a=i(91823);let o=["time","1m","3m","5m","15m","30m","1h","2h","4h","6h","8h","12h","1d","3d","1w","1M"],l=s()((e="unspecific-chart-namespace")=>(0,a.Z)(e=>({isChartFocused:!1,setIsChartFocused:t=>e({isChartFocused:t}),defaultIntervals:o,setDefaultIntervals:t=>e({defaultIntervals:t}),intervalConfigOpen:!1,setIntervalConfigOpen:t=>e({intervalConfigOpen:t}),editingInterval:!1,setEditingInterval:t=>e({editingInterval:t}),candlestickReference:void 0,setCandlestickReference:t=>e({candlestickReference:t}),tradingViewReference:void 0,setTradingViewReference:t=>e({tradingViewReference:t}),tvKey:1,reloadTv:()=>e(e=>({tvKey:-1*e.tvKey})),candlestickKey:1,reloadCandlestick:()=>e(e=>({candlestickKey:-1*e.candlestickKey})),showMoreSettingTooltip:!1,setShowMoreSettingTooltip:t=>e(()=>({showMoreSettingTooltip:t})),customIntervalModalVisibility:!1,setCustomIntervalModalVisibility:t=>e(()=>({customIntervalModalVisibility:t}))}))),n=e=>[e.isChartFocused,e.setIsChartFocused],d=e=>[e.defaultIntervals,e.setDefaultIntervals],c=e=>[e.intervalConfigOpen,e.setIntervalConfigOpen],h=e=>[e.editingInterval,e.setEditingInterval],u=e=>[e.candlestickReference,e.setCandlestickReference],g=e=>[e.tradingViewReference,e.setTradingViewReference],m=e=>[e.tvKey,e.reloadTv],p=e=>[e.candlestickKey,e.reloadCandlestick],x=e=>[e.showMoreSettingTooltip,e.setShowMoreSettingTooltip],f=e=>[e.customIntervalModalVisibility,e.setCustomIntervalModalVisibility]},3528:function(e,t,i){i.r(t),i.d(t,{ChartMode:()=>c,LabelLineType:()=>u,LimitOrderType:()=>h,OrderMarkOption:()=>g,OriginalChartStyle:()=>w.oX,PriceType:()=>m,SeriesStyle:()=>x,Tabs:()=>p,createStore:()=>L,getActiveTab:()=>V,getAverageCostPeriod:()=>K,getChartMode:()=>B,getChartModeNumber:()=>T,getCustomIntervals:()=>Q,getInterval:()=>N,getIsFirstTimeChangeChartMode:()=>Y,getLastSelectedMiniMultiChartWindow:()=>k,getMiniMultiChartWindows:()=>E,getOrderMarkOptions:()=>J,getOriginalAnnotationToolPosition:()=>G,getOriginalChartStyle:()=>P,getPriceType:()=>D,getResolutionString:()=>ee,getSameSymbolMiniMultiChartBrowseMode:()=>X,getSelectedIntervals:()=>M,getShowAverageBuyPrice:()=>H,getShowAverageSellPrice:()=>Z,getShowBotPreviewOrder:()=>U,getShowBreakEvenPrice:()=>W,getShowCostPrice:()=>F,getShowExecutionOrder:()=>O,getShowLimitOrder:()=>j,getShowLiquidationPrice:()=>$,getShowMoreSettingTooltipCounter:()=>q,getShowPositionOrder:()=>R,getShowPriceAlert:()=>z,getTvChartStyle:()=>I,migrateChartMode:()=>A});var r,s,a,o,l,n,d,c,h,u,g,m,p,x,f=i(30733),b=i.n(f),y=i(91823),v=i(66402),C=i(6283),w=i(98824),S=i(52165);(r=c||(c={})).Single="1",r.HorizontalTwo="h-2",r.VerticalTwo="v-2",r.HorizontalThree="h-3",r.VerticalThree="v-3",r.Four="4";let T=e=>{switch(e){case"1":return 1;case"h-2":case"v-2":return 2;case"h-3":case"v-3":return 3;default:return 4}},A=e=>"string"==typeof e?e:4===e?"4":"1";(s=h||(h={}))[s.LimitOrder=0]="LimitOrder",s[s.BotPreview=1]="BotPreview",(a=u||(u={}))[a.AverageBuyPrice=0]="AverageBuyPrice",a[a.AverageSellPrice=1]="AverageSellPrice",a[a.BreakEvenPrice=2]="BreakEvenPrice",a[a.LiquidationPrice=3]="LiquidationPrice",a[a.CostPrice=4]="CostPrice",a[a.PriceAlert=5]="PriceAlert",(o=g||(g={})).Unknown="Unknown",o.Open="Open",o.Position="Position",o.Execution="Execution",o.AverageBuyPrice="AverageBuyPrice",o.AverageSellPrice="AverageSellPrice",o.BotPreview="BotPreview",o.CostPrice="CostPrice",o.BreakEvenPrice="BreakEvenPrice",o.LiquidationPrice="LiquidationPrice",o.PriceAlert="PriceAlert",(l=m||(m={})).Last="last",l.Mark="mark",l.Index="index",l.MarkIV="markIV",(n=p||(p={})).Origin="origin",n.TradingView="tradingView",n.Depth="depth",(d=x||(x={}))[d.Bars=0]="Bars",d[d.Candles=1]="Candles",d[d.Line=2]="Line",d[d.Area=3]="Area",d[d.Renko=4]="Renko",d[d.Kagi=5]="Kagi",d[d.PnF=6]="PnF",d[d.LineBreak=7]="LineBreak",d[d.HeikinAshi=8]="HeikinAshi",d[d.HollowCandles=9]="HollowCandles",d[d.Baseline=10]="Baseline",d[d.HiLo=12]="HiLo";let _=(e="unspecific-chart-storage-name")=>(0,y.Z)((0,v.XR)((0,v.tJ)((e,t)=>{let i=(...t)=>{try{e(...t)}catch(e){console.error("Error while setting state: ",e)}};return{lastSelectedMiniMultiChartWindow:0,setLastSelectedMiniMultiChartWindow:e=>i({lastSelectedMiniMultiChartWindow:e}),tvChartStyle:1,setTvChartStyle:e=>i({tvChartStyle:e}),originalChartStyle:w.oX.CandleBar,setOriginalChartStyle:e=>i({originalChartStyle:e}),chartMode:"1",setChartMode:e=>i({chartMode:e}),miniMultiChartWindows:["","","",""],setMiniMultiChartWindows:e=>i({miniMultiChartWindows:e}),emptyMiniMultiChartWindowByIndex:e=>i(t=>({miniMultiChartWindows:t.miniMultiChartWindows.map((t,i)=>e===i?"":t)})),setMiniMultiChartWindowsWithState:i,interval:"1d",setInterval:e=>i({interval:e}),selectedIntervals:["time","1s","15m","1h","4h","1d","1w"],setSelectedIntervals:e=>i({selectedIntervals:e}),customIntervals:[],setCustomIntervals:e=>i({customIntervals:e}),addCustomInterval:e=>{let{customIntervals:r}=t();i({customIntervals:[...r,e]})},removeCustomInterval:e=>{let{customIntervals:r}=t();i({customIntervals:r.filter(t=>t!==e)})},priceType:"last",setPriceType:e=>i({priceType:e}),activeTab:"origin",setActiveTab:e=>i({activeTab:e}),showLimitOrder:!1,setShowLimitOrder:e=>i({showLimitOrder:e}),toggleShowLimitOrder:()=>i(e=>({showLimitOrder:!e.showLimitOrder})),showPositionOrder:!1,setShowPositionOrder:e=>i({showPositionOrder:e}),toggleShowPositionOrder:()=>i(e=>({showPositionOrder:!e.showPositionOrder})),showExecutionOrder:!1,setShowExecutionOrder:e=>i({showExecutionOrder:e}),toggleShowExecutionOrder:()=>i(e=>({showExecutionOrder:!e.showExecutionOrder})),showAverageBuyPrice:!1,setShowAverageBuyPrice:e=>i({showAverageBuyPrice:e}),toggleShowAverageBuyPrice:()=>i(e=>({showAverageBuyPrice:!e.showAverageBuyPrice})),showAverageSellPrice:!1,setShowAverageSellPrice:e=>i({showAverageSellPrice:e}),toggleShowAverageSellPrice:()=>i(e=>({showAverageSellPrice:!e.showAverageSellPrice})),showBotPreviewOrder:!0,setShowBotPreviewOrder:e=>i({showBotPreviewOrder:e}),toggleShowBotPreviewOrder:()=>i(e=>({showBotPreviewOrder:!e.showBotPreviewOrder})),showCostPrice:!0,setShowCostPrice:e=>i({showCostPrice:e}),toggleShowCostPrice:()=>i(e=>({showCostPrice:!e.showCostPrice})),showBreakEvenPrice:!1,setShowBreakEvenPrice:e=>i({showBreakEvenPrice:e}),toggleShowBreakEvenPrice:()=>i(e=>({showBreakEvenPrice:!e.showBreakEvenPrice})),showLiquidationPrice:!1,setShowLiquidationPrice:e=>i({showLiquidationPrice:e}),toggleShowLiquidationPrice:()=>i(e=>({showLiquidationPrice:!e.showLiquidationPrice})),averageCostPeriod:void 0,setAverageCostPeriod:e=>i({averageCostPeriod:e}),showPriceAlert:!1,setShowPriceAlert:e=>i({showPriceAlert:e}),toggleShowPriceAlert:()=>i(e=>({showPriceAlert:!e.showPriceAlert})),sameSymbolMiniMultiChartBrowseMode:!1,setSameSymbolMiniMultiChartBrowseMode:e=>i({sameSymbolMiniMultiChartBrowseMode:e}),isFirstTimeChangeChartMode:!0,setIsFirstTimeChangeChartMode:e=>i({isFirstTimeChangeChartMode:e}),originalAnnotationToolPosition:{x:0,y:0},setOriginalAnnotationToolPosition:e=>i({originalAnnotationToolPosition:e}),showMoreSettingTooltipCounter:0,incShowMoreSettingTooltipCounter:()=>i(e=>({showMoreSettingTooltipCounter:e.showMoreSettingTooltipCounter+1}))}},{name:e,version:0x134ffec,migrate:(e,t)=>0x134b426===t?{...e,interval:"Time"===e.interval?"time":e.interval,selectedIntervals:e.selectedIntervals.map(e=>"Time"===e?e.toLowerCase():e)}:0===t?{...e,selectedIntervals:[...e.selectedIntervals,"1s"],chartMode:A(e.chartMode)}:e}))),L=b()((e="unspecific-chart-storage-name")=>{let t=_(e),i=e=>t(e,C.Z);return Object.assign(i,t),i}),k=e=>[e.lastSelectedMiniMultiChartWindow,e.setLastSelectedMiniMultiChartWindow],I=e=>[e.tvChartStyle,e.setTvChartStyle],P=e=>[e.originalChartStyle,e.setOriginalChartStyle],E=e=>[e.miniMultiChartWindows,e.setMiniMultiChartWindows,e.emptyMiniMultiChartWindowByIndex,e.setMiniMultiChartWindowsWithState],B=e=>[e.chartMode,e.setChartMode],N=e=>[e.interval,e.setInterval],M=e=>[e.selectedIntervals,e.setSelectedIntervals],D=e=>[e.priceType,e.setPriceType],V=e=>[e.activeTab,e.setActiveTab],j=e=>[e.showLimitOrder,e.setShowLimitOrder,e.toggleShowLimitOrder],R=e=>[e.showPositionOrder,e.setShowPositionOrder,e.toggleShowPositionOrder],O=e=>[e.showExecutionOrder,e.setShowExecutionOrder,e.toggleShowExecutionOrder],F=e=>[e.showCostPrice,e.setShowCostPrice,e.toggleShowCostPrice],H=e=>[e.showAverageBuyPrice,e.setShowAverageBuyPrice,e.toggleShowAverageBuyPrice],Z=e=>[e.showAverageSellPrice,e.setShowAverageSellPrice,e.toggleShowAverageSellPrice],U=e=>[e.showBotPreviewOrder,e.setShowBotPreviewOrder,e.toggleShowBotPreviewOrder],W=e=>[e.showBreakEvenPrice,e.setShowBreakEvenPrice,e.toggleShowBreakEvenPrice],$=e=>[e.showLiquidationPrice,e.setShowLiquidationPrice,e.toggleShowLiquidationPrice],z=e=>[e.showPriceAlert,e.setShowPriceAlert,e.toggleShowPriceAlert],K=e=>[e.averageCostPeriod,e.setAverageCostPeriod],X=e=>[e.sameSymbolMiniMultiChartBrowseMode,e.setSameSymbolMiniMultiChartBrowseMode],Y=e=>[e.isFirstTimeChangeChartMode,e.setIsFirstTimeChangeChartMode],G=e=>[e.originalAnnotationToolPosition,e.setOriginalAnnotationToolPosition],q=e=>[e.showMoreSettingTooltipCounter,e.incShowMoreSettingTooltipCounter],Q=e=>[e.customIntervals,e.setCustomIntervals,e.addCustomInterval,e.removeCustomInterval],J=e=>[e.showLimitOrder?"Open":"Unknown",e.showPositionOrder?"Position":"Unknown",e.showExecutionOrder?"Execution":"Unknown",e.showAverageBuyPrice?"AverageBuyPrice":"Unknown",e.showAverageSellPrice?"AverageSellPrice":"Unknown",e.showBotPreviewOrder?"BotPreview":"Unknown",e.showCostPrice?"CostPrice":"Unknown",e.showBreakEvenPrice?"BreakEvenPrice":"Unknown",e.showLiquidationPrice?"LiquidationPrice":"Unknown",e.showPriceAlert?"PriceAlert":"Unknown"].filter(e=>"Unknown"!==e),ee=e=>{let[t]=N(e);return(0,S.P0)(t)}},52165:function(e,t,i){i.d(t,{DP:()=>f,DY:()=>g,F$:()=>x,Le:()=>y,P0:()=>h,ZO:()=>m,dj:()=>b,ps:()=>c});var r=i(87363),s=i(76635),a=i(83289),o=i(98824);let l=/(^(\d+)([smhdwM])$)|(^time$)/,n=e=>{let[,,t,i,r]=l.exec(e)||[];if(r)return{value:1,unit:-1};let s=+t;if(Number.isNaN(s))throw Error(`${e} cannot be analyzed. (${t} ${i})`);switch(i){case"s":return{value:s,unit:o.un.Second};case"m":return{value:s,unit:o.un.Minute};case"h":return{value:s,unit:o.un.Hour};case"d":return{value:s,unit:o.un.Day};case"w":return{value:s,unit:o.un.Week};case"M":return{value:s,unit:o.un.Month};default:throw Error(`${e} cannot be analyzed. (${t} ${i})`)}},d=({value:e,unit:t})=>{switch(t){case -1:return"time";case o.un.Second:return`${e}s`;case o.un.Minute:return`${e}m`;case o.un.Hour:return`${e}h`;case o.un.Day:return`${e}d`;case o.un.Week:return`${e}w`;case o.un.Month:return`${e}M`;default:return""}},c=e=>d((0,o.AS)(e)),h=e=>{let t=n(e),i=-1===t.unit?{...t,unit:o.un.Minute}:t;return(0,o.ec)(i)},u=(e,t)=>{let i=n(e),r=n(t);return(0,o.b5)(i,r)},g=e=>{let t=[...e];return t.sort((e,t)=>u(e.value,t.value)),t},m=e=>{let t=e.find(e=>"time"===e.value),i=[...e.filter(e=>"time"!==e.value)];return i.sort((e,t)=>{let i=h(e.value),r=h(t.value);return(0,o.m1)(i)-(0,o.m1)(r)}),t?[t,...i]:i},p=({value:e,unit:t})=>{switch(t){case -1:return!0;case o.un.Second:case o.un.Minute:return(0,s.inRange)(e,1,60);case o.un.Hour:return(0,s.inRange)(e,1,24);case o.un.Day:return(0,s.inRange)(e,1,366);case o.un.Week:return(0,s.inRange)(e,1,53);case o.un.Month:return(0,s.inRange)(e,1,13);default:return!1}},x=e=>{try{let t=n(e);return p(t)}catch(e){return console.warn(e),!1}},f=e=>{let{value:t,unit:i}=n(e);return -1===i?6e4:t*(0,o.qA)(i)},b=()=>{let{getI18n:e}=(0,a.Z)("trd-chart","trade-ui"),t=(0,r.useMemo)(()=>({time:e("line",{defaultValue:"Time"}),second:e("second",{defaultValue:"s"}),minute:e("minute",{defaultValue:"m"}),hour:e("hour",{defaultValue:"H"}),day:e("day",{defaultValue:"D"}),week:e("week",{defaultValue:"W"}),month:e("month",{defaultValue:"M"})}),[e]);return(0,r.useCallback)(e=>{try{let{value:i,unit:r}=n(e);switch(r){case -1:return t.time;case o.un.Second:return`${i}${t.second}`;case o.un.Minute:return`${i}${t.minute}`;case o.un.Hour:return`${i}${t.hour}`;case o.un.Day:return`${i}${t.day}`;case o.un.Week:return`${i}${t.week}`;case o.un.Month:return`${i}${t.month}`;default:return`${i}`}}catch(e){return console.error(e),null}},[t.day,t.hour,t.minute,t.month,t.second,t.time,t.week])},y=e=>{let t=[],i=[],r=[],s=[],a=[];return e.forEach(e=>{if("time"!==e)try{let{value:l,unit:d}=n(e);switch(d){case o.un.Second:t.push(l.toString());break;case o.un.Minute:i.push(l.toString());break;case o.un.Hour:i.push((60*l).toString());break;case o.un.Day:3!==l&&r.push(l.toString());break;case o.un.Week:s.push(l.toString());break;case o.un.Month:a.push(l.toString())}}catch(t){console.warn(`Failed to parse interval: ${e}`,t)}}),{seconds_multipliers:t.length>0?t:void 0,intraday_multipliers:i.length>0?i:void 0,daily_multipliers:r.length>0?r:void 0,weekly_multipliers:s.length>0?s:void 0,monthly_multipliers:a.length>0?a:void 0,has_seconds:t.length>0,has_intraday:i.length>0,has_daily:r.length>0,has_weekly_and_monthly:s.length>0||a.length>0}}},43675:function(e,t,i){i.d(t,{D:()=>s});let r=(e,t)=>{let i=e.replace("#",""),r=parseInt(i.substring(0,2),16),s=parseInt(i.substring(2,4),16),a=parseInt(i.substring(4,6),16);return`rgba(${r},${s},${a},${t})`},s=(e,t)=>{let[i]=/(#\w+)/g.exec(e)||[];return i?r(i,t):e}},25823:function(e,t,i){i.d(t,{N3:()=>o,gt:()=>d,oB:()=>n,pF:()=>l,uf:()=>c});var r=i(2446),s=i(31332);let a=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,o=e=>{let t=`${e}`.match(a);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},l=(e,t=2,i=!1)=>{if(1e-9>Math.abs(e)&&Math.abs(e)>0)return`${i?(0,s.d)(e.toExponential(2),2,u()):e.toExponential(2)}`;if(1e3>Math.abs(e))return`${i?(0,s.d)(e,0,u()):e.toFixed(0)}`;let r=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],a=0;for(a=r.length-1;a>0&&!(Math.abs(e)>=r[a].value);a--);let o=(e/r[a].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1");return(i?(0,s.d)(o,t,u()):o)+r[a].symbol},n=(e,t=-1)=>{let i=e&&t>=0?Number(e).toFixed(t):`${e}`,r=i,s="",a=i.indexOf(".");return a>-1&&(r=i.slice(0,a),s=i.slice(a)),r.replace(/\d{1,3}(?=(\d{3})+$)/g,e=>`${e},`)+s},d=(e,t=2)=>isNaN(e)?"0.00%":`${(100*e).toFixed(t)}%`,c=(e,t=8,i)=>(0,s.d)(e,t,u(),i),h={es:"fr","es-LA":"zh-CN",sl:"de","en-IN":"en",pt:"de"},u=()=>{let{language:e}=r.Z;return h[e]||e}},81619:function(e,t,i){i.d(t,{Z:()=>r});let r={getUserInfo:async()=>({}),getUserSettings:async()=>({}),getSessionInfo:async()=>({}),updateUserInfo:async()=>({}),onUserInfoChange:async()=>({}),updateUserSettings(){},onUserSettingsChange(){},onLogin(){},onLogout(){},login(){},register(){},onRefresh(){},registerActionHandle:()=>()=>{},constants:{},onAppEvent(){},storage:{setItem:()=>Promise.resolve(),getItem:()=>Promise.resolve(),removeItem:()=>Promise.resolve(),onStorageEvent(){}},tradeService:{getLayout:async()=>({}),onAddCustomLayout:void 0,onLayoutChange:void 0,onToggleWidgetPanel:void 0,useNotifyLayoutHasUpdate(){},notifyProLayoutUpdate(){},notifyCustomLayoutUpdate(){},notifyLayoutChanged(){}}}},42759:function(e,t,i){i.d(t,{g:()=>l});var r=i(87363),s=i(3528),a=i(31197),o=i(38449);let l=e=>{let{namespace:t}=e,{t:i}=(0,o.cK)(),l=s.createStore(t),[n,d]=l(s.getShowExecutionOrder),[c,h]=l(s.getShowCostPrice),u=(0,a._)();return{quickOrder:{floatingWindow:{visible:!1},plusButton:{visible:!1}},openOrders:{visible:!1},orderHistory:{visible:u,toggled:n,onToggled:e=>{let{toggled:t}=e;return d(!t)},tooltip:(0,r.useMemo)(()=>i("order-history-tooltip",{defaultValue:"Display Alpha order history for the past 6 months"}),[i])},averagePrice:{buy:{visible:!1},sell:{visible:!1}},priceAlert:{visible:!1},spotlight:{visible:!1},scale:{percentageScale:{visible:!1},logarithmicScale:{visible:!1},invertedScale:{visible:!1}},priceLine:{marketPriceLine:{visible:!0},countdown:{visible:!0},askBid:{visible:!1}},costPrice:{visible:u,toggled:c,onToggled:e=>{let{toggled:t}=e;return h(!t)}},breakevenPrice:{visible:!1},liquidationPrice:{visible:!1},positions:{visible:!1},botPreview:{visible:!1}}}},48363:function(e,t,i){i.d(t,{_:()=>n});var r=i(52322),s=i(27722),a=i(16709),o=i.n(a),l=i(11457);let n=e=>{let{alphaTokenId:t,size:i="m",className:a}=e,{data:n}=(0,l.u)({alphaTokenId:t});return(0,r.jsxs)(s.ZP,{className:o()("relative",{"w-[24px] h-[24px]":"s"===i,"w-[40px] h-[40px]":"m"===i,"w-[16px] h-[16px]":"xs"===i,"w-[20px] h-[20px]":"20"===i},a),children:[(0,r.jsx)("img",{className:"overflow-hidden rounded-full w-full h-full",src:null==n?void 0:n.iconUrl}),(0,r.jsx)("img",{src:null==n?void 0:n.chainIconUrl,className:o()("absolute border-[2px] bottom-[-2px] right-[-2px] border-solid border-BasicBg box-content",{"w-[10px] h-[10px] rounded-[5px] border-[2px] bottom-[-2px] right-[-2px]":"s"===i||"20"===i,"w-[16px] h-[16px] rounded-[8px] border-[3px] bottom-[-3px] right-[-3px]":"m"===i,"w-[7px] h-[7px] rounded-[3px]":"xs"===i})})]})}},1886:function(e,t,i){i.d(t,{p:()=>n});var r=i(52322);i(87363);var s=i(53202),a=i(64084),o=i(27722),l=i(38449);let n=e=>{let{children:t,i18nKey:i="nodata",i18nDefault:n="No Data",className:d,...c}=e,{t:h}=(0,l.cK)();return(0,r.jsxs)(a.Z,{className:"flex-col justify-center items-center h-full w-full text-DisableText text-[12px]",children:[(0,r.jsx)(s.Z,{style:{width:"64px",height:"64px",marginTop:"108px"},className:`trd-no-data ${d}`}),(0,r.jsx)(o.ZP,{className:"text-TertiaryText text-[14px] font-[500] mt-[10px]",...c,children:t||h(i,{defaultValue:n})})]})}},66600:function(e,t,i){i.d(t,{W:()=>c});var r=i(52322),s=i(45654),a=i(27680),o=i(33657),l=i(33980),n=i(55281),d=i.n(n);i(87363);let c=e=>{var t;let{children:i,contractAddress:n,chainId:c,target:h,rel:u}=e,{data:g}=(0,l.Yj)(),m=(null==(t=d()(g,{chainId:c}))?void 0:t.chainName)||"",p=(0,o.o)(`${m}`);return(0,r.jsx)(s.rU,{to:a.uE,className:"no-underline text-PrimaryText cursor-pointer md:hover:text-TextLink",params:{chainSymbol:p,contractAddress:n},preload:!1,target:h,rel:u,children:i})}},70088:function(e,t,i){i.d(t,{i:()=>r});let r={QUERY_ALPHA_CHAIN_MAP:["queryAlphaChainMap"],QUERY_ALPHA_TOKEN_MAP:["queryAlphaTokenMap"],QUERY_ALPHA_WALLET_LIST:["queryAlphaWalletList"],QUERY_ALPHA_PROCESSING_LIST:["queryAlphaProcessingList"],QUERY_ALPHA_TRADE_HISTORY_LIST:e=>["queryAlphaTradeHistoryList",..."number"==typeof(null==e?void 0:e.startTime)?[e.startTime]:[],..."number"==typeof(null==e?void 0:e.endTime)?[e.endTime]:[],..."string"==typeof(null==e?void 0:e.side)?[e.side]:[]],QUERY_ALPHA_LIMIT_OPEN_ORDER_LIST:e=>["queryAlphaLimitOpenOrderList",e.side],QUERY_ALPHA_ORDER_LISTEN_KEY:["queryAlphaOrderListenKey"],QUERY_ALPHA_ORDER_LIST:["queryAlphaOrderList"],QUERY_ALPHA_ORDER_DETAIL:["queryAlphaOrderDetail"],QUERY_ALPHA_SWAP_RATE:e=>["queryAlphaSwapRate",e.fromChain,e.fromToken,e.toChain,e.toToken,e.fromAmount,e.priorityMode,e.customNetworkFeeMode,e.customSlippage],QUERY_ALPHA_TERMS_AGREEMENT:["queryAlphaTermsAgreement"],QUERY_ALPHA_TOKEN_INFO:e=>["queryAlphaTokenInfo",e.chainId,e.contractAddress],QUERY_ALPHA_TOKEN_AUDIT:e=>["queryAlphaTokenAudit",e.chainId,e.contractAddress],QUERY_BUSINESS_COMPLIANCE_CHECK:["queryBusinessComplianceCheck"],QUERY_ALPHA_FAVORITE_LIST:["queryAlphaFavoriteList"],QUERY_ALPHA_KLINE_PRECISION:e=>["queryAlphaKlinePrecision",e.chainId,e.contractAddress,e.interval],QUERY_ALPHA_TRANSACTIONS:["queryAlphaTransactions"],QUERY_ALPHA_LIMIT_ORDER_LIST:["queryAlphaLimitOrderList"],QUERY_ALPHA_LIMIT_ORDER_DETAIL:["queryAlphaLimitOrderDetail"],QUERY_ALPHA_LIMIT_TRADE_HISTORY_DETAIL:["queryAlphaLimitTradeHistoryDetail"],QUERY_ALPHA_FROM_ASSETS:["queryAlphaFromAssets"],QUERY_ALPHA_EXCHANGE_INFO:["queryAlphaExchangeInfo"],QUERY_ALPHA_FEE_RATE:["queryAlphaFeeRate"],QUERY_ALPHA_AVG_COST:["queryAlphaAvgCost"],QUERY_ALPHA_AVERAGE_COSTS:e=>["queryAlphaAverageCost",...e.tokens],QUERY_ALPHA_FEE_LIST:["queryAlphaFeeRateList"]}},14199:function(e,t,i){i.d(t,{CP:()=>a,N8:()=>l,X2:()=>s,eh:()=>o,tE:()=>n,xy:()=>d,y$:()=>r});let r={CR00:"cr00",BNC_UUID:"bnc-uuid"},s="--",a=3,o=2,l=1,n=3e3,d={INSTANT:"INSTANT",LIMIT:"LIMIT"}},55887:function(e,t,i){i.d(t,{s:()=>r});let r="undefined"==typeof window},82294:function(e,t,i){i.d(t,{Y:()=>r});let r={CHANGE_FORM_BUY_SELL:"CHANGE_FORM_BUY_SELL"}},95e3:function(e,t,i){i.d(t,{M:()=>r,q:()=>s});let r="alpha-trade",s={HIGHT_SLIPPAGE_REMINDER:"highSlippageReminder",SYMBOL_DISCLAIMER:"symbolDisClaimer",HIDE_OTHER_TOKEN:"hideOtherToken",RATE_REVERSE_PREFERENCE:"rateReversePreference"}},78369:function(e,t,i){i.d(t,{Bu:()=>r,mQ:()=>o,md:()=>a});let r={HIGH:"HIGHT",MIDDLE:"MIDDLE",LOW:"LOW",LOWEST:"LOWEST",HIGH_LOW:"HIGH_LOW",HIGH_LOWEST:"HIGH_LOWEST"},s={[r.HIGH]:{maximum:2,minimum:2},[r.MIDDLE]:{maximum:5,minimum:5},[r.LOW]:{maximum:15,minimum:5},[r.LOWEST]:{maximum:15,minimum:5}},a={[r.HIGH]:{maximum:14,minimum:5},[r.MIDDLE]:{maximum:8,minimum:5},[r.LOW]:{maximum:4,minimum:4}};r.HIGH,r.MIDDLE,r.LOW;let o={HIGH_LOW:{[r.HIGH]:s[r.HIGH],[r.MIDDLE]:s[r.MIDDLE],[r.LOW]:s[r.LOW]},HIGH_LOWEST:{[r.HIGH]:s[r.HIGH],[r.MIDDLE]:s[r.MIDDLE],[r.LOW]:s[r.LOWEST]}}},27680:function(e,t,i){i.d(t,{$y:()=>s,G$:()=>a,U3:()=>o,uE:()=>r});let r="/alpha/$chainSymbol/$contractAddress",s="/alpha/$chainSymbol/",a="/alpha/",o="/alpha/limitfee"},42660:function(e,t,i){i.d(t,{lO:()=>g,cg:()=>h,Xs:()=>f,mK:()=>C,Nz:()=>O,Ad:()=>V,CD:()=>M,mX:()=>E,yH:()=>R,$g:()=>D,Ij:()=>j,BB:()=>N,My:()=>v,yB:()=>p,WH:()=>I,oj:()=>P,vt:()=>m,uX:()=>o,oV:()=>B});var r=i(62871);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e?e.replace("{{rootDomain}}",t):e}var a=i(55887);let o=["API_HOST","ACCELERATE_DEFAULT_DOMAIN","ACCELERATE_AVAILABLE_DOMAIN","ACCELERATE_ENBLED_SITES","I18N_BASE_PUBLIC","RELEASE_CHANNEL","COMMIT_HEAD","GA_TRACKING_ID","SENSORS_SERVER_HOST","STATIC_HOST","CM_WS_HOST_TEMPLATE","UM_WS_HOST_TEMPLATE","THEMIS_ADDRESS","THEMIS_ENV","THEMIS_FUTURES_TRADE_UI_AUTH_HEADER","DEPLOYMENT_ENV","SITE_HOST","SITE_HOST_TEMPLATE","ACCOUNTS_HOST_PUBLIC_TEMPLATE","MARKET_STREAM_HOST_TEMPLATE","WS_HTTP_SDK_RESTFUL_RATE","MARGIN_STREAM_HOST_TEMPLATE","WS_HOST_TEMPLATE","THEMIS_FINANCE_COMMON_AUTH_HEADER","SENTRY_DSN","SENTRY_RELEASE_FROM_CI","SENTRY_ENV"],{API_HOST:l,ACCELERATE_DEFAULT_DOMAIN:n,ACCELERATE_AVAILABLE_DOMAIN:d,ACCELERATE_ENBLED_SITES:c,I18N_BASE_PUBLIC:h,RELEASE_CHANNEL:u,COMMIT_HEAD:g,GA_TRACKING_ID:m,SENSORS_SERVER_HOST:p,SITE_HOST:x,STATIC_HOST:f,CM_WS_HOST_TEMPLATE:b,UM_WS_HOST_TEMPLATE:y,THEMIS_ENV:v,THEMIS_ADDRESS:C,DEPLOYMENT_ENV:w,ACCOUNTS_HOST_PUBLIC_TEMPLATE:S,SITE_HOST_TEMPLATE:T,MARKET_STREAM_HOST_TEMPLATE:A,WS_HTTP_SDK_RESTFUL_RATE:_,MARGIN_STREAM_HOST_TEMPLATE:L,WS_HOST_TEMPLATE:k,THEMIS_FINANCE_COMMON_AUTH_HEADER:I,SENTRY_DSN:P,SENTRY_RELEASE_FROM_CI:E,SENTRY_ENV:B}=(0,r.B8)(),N="prod"===w,M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(null==t?void 0:t.hostname)?t.hostname:"undefined"==typeof window?"":window.location.hostname,r=i.split(".");return r.length>2?r.slice(-e).join("."):i}(2,a.s?{hostname:x}:{hostname:window.location.hostname}),D=s(T,M),V=s(S,M),j=s(A,M),R=s(L,M),O=s(k,M)},82240:function(e,t,i){i.d(t,{f_:()=>eE,Cu:()=>eI,X5:()=>eP});var r,s,a,o,l,n=i(61533);let d=function(e){e()},c=e=>d=e,h=class{subscribe(e){return this._subscribers.push(e),this._isHot||(this._isHot=!0,this._unsubscribe=this._runner(this._stubSubscriber)),()=>{let t=this._subscribers.indexOf(e);t>=0&&this._subscribers.splice(t,1),this._subscribers.length<=0&&(this._isHot=!1,this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null))}}_applyCallback(e){let t=this._subscribers;for(let i=0;i<t.length;i++)(0,t[i])(e)}constructor(e){this._subscribers=[],this._isHot=!1,this._unsubscribe=null,this._runner=e,this._stubSubscriber={next:e=>{d(()=>this._applyCallback(e))}}}};function u(e){return new h(e)}function g(){let e=Object.create(null);return{on(t,i){(e[t]||(e[t]=[])).push(i)},once(e,t){let i=()=>{this.off(e,i),t()};this.on(e,t)},off(t,i){if(e[t])if(i){let r=e[t].indexOf(i);r>=0&&e[t].splice(r,1)}else e[t].length=0},emit(t,...i){(e[t]||[]).slice().forEach(e=>{e(...i)})}}}class m{getOptions(){return this._options}updateOptionField(e){this._eventEmitter.emit("CHANGE_FIELD",e)}withOptionsStream(e){return u(t=>{let i;i=e(this._options).subscribe(t.next);let r=this._optionsStream.subscribe(r=>{i&&i(),i=e(r).subscribe(t.next)});return()=>{r(),i&&i()}})}constructor(e){this._eventEmitter=g(),this._options=e,this._optionsStream=u(e=>(this._eventEmitter.on("CHANGE_FIELD",t=>{let{fieldName:i,value:r}=t;this._options={...this._options,[i]:r},e.next({...this._options,[i]:r})}),()=>{this._eventEmitter.off("CHANGE_FIELD")}))}}var p=i(58565);let x=class{get(e){return Object.prototype.hasOwnProperty.call(this._cache,e)?this._cache[e]:null}set(e,t){this._cache[e]=t}delete(e){delete this._cache[e]}constructor(){this._cache=Object.create(null)}};var f=i(12436),b=i.n(f);let y={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},v=1,C=class{get readyState(){return this._readyState}open(e=!1){if(this._readyState===y.OPEN)return;this._readyState=y.CONNECTING,e?(this._reconnectAttempts+=1,this._socketEvents.emit("reConnecting",this._reconnectAttempts),console.log("WebSocket Reconnecting Attempts:",this._url,this._reconnectAttempts)):this._reconnectAttempts=0;let t=this._wsInstance=new WebSocket(this._url),i=!1,r=setTimeout(()=>{console.debug("WebSocket connection-timeout",this._url),i=!0,t.close(),i=!1},this._timeout),s=()=>clearTimeout(r);t.onerror=e=>{console.error("socket error",this._url,e)},t.onclose=e=>{s(),this._wsInstance=null,this._readyState=y.CONNECTING,this._reconnectAttempts<=0&&!i&&this._socketEvents.emit("close",e),this.reconnect()},t.onopen=e=>{s(),this._readyState=y.OPEN,this._reconnectAttempts>0&&this._socketEvents.emit("reConnected",this._reconnectAttempts),this._reconnectAttempts=0,this._socketEvents.emit("open",e)},t.onmessage=e=>{this._socketEvents.emit("message",e)}}onOpen(e){return this._socketEvents.on("open",e),()=>{this._socketEvents.off("open",e)}}onReConnected(e){return this._socketEvents.on("reConnected",e),()=>{this._socketEvents.off("reConnected",e)}}onReConnecting(e){return this._socketEvents.on("reConnecting",e),()=>{this._socketEvents.off("reConnecting",e)}}onMessage(e){return this._socketEvents.on("message",e),()=>{this._socketEvents.off("message",e)}}onClose(e){return this._socketEvents.on("close",e),()=>{this._socketEvents.off("close",e)}}send(e){this._wsInstance&&this.getStatus()===y.OPEN&&this._wsInstance.send(e)}close(){let e=this._wsInstance;e&&(this._wsInstance=null,this._readyState=y.CLOSED,e.onopen=null,e.onerror=null,e.onmessage=null,e.onclose=e=>{this._socketEvents.emit("close",e)},e.close())}isValidStatus(e){return e===y.CONNECTING||e===y.OPEN||e===y.CLOSING||e===y.CLOSED}getStatus(){return this.isValidStatus(this._wsInstance?.readyState)?this._wsInstance.readyState:this._readyState}refresh(){this.close(),this.reconnect()}reconnect(){this._reconnectHandle||(this._reconnectHandle=setTimeout(()=>{this._reconnectHandle=null,this.open(!0)},this.calcReconnectTime()))}calcReconnectTime(){return 1e3*Math.min(this._maxReconnectTime,2**this._reconnectAttempts)+Math.floor(1e3*Math.random())}constructor(e){this._debugId=v++,this._wsInstance=null,this._reconnectAttempts=0,this._maxReconnectTime=300,this._socketEvents=g(),this._readyState=y.CONNECTING,this._timeout=5e3,this._netWorkStatus=!0,this._url=e,window.addEventListener("offline",()=>{this._netWorkStatus=!1}),window.addEventListener("online",()=>{this._netWorkStatus||this.open(),this._netWorkStatus=!0})}};var w=i(83669);let S=(e,t="w3w")=>{let i=`${t}@${e}`;return i.length<=65?i:`${t}@${(0,w.sha3_224)(e)}`};function T(e){let t=Object.create(null),i=[];for(let r=0;r<e.length;r++){let s,a=e[r];switch(a.stream){case"aggSnap":s=`${a.symbol.toLowerCase()}@aggSnap`;break;case"tradeAggregate":case"aggTrade":case"alpha@aggTrade":s=`${a.symbol.toLowerCase()}@aggTrade`;break;case"trade":s=`${a.symbol.toLowerCase()}@trade`;break;case"kline":s=a.upperSymbolWithPrefix?`${a.symbol}@kline_${a.interval}${a.timeZone?`@${a.timeZone}`:""}`:`${a.symbol.toLowerCase()}@kline_${a.interval}${a.timeZone?`@${a.timeZone}`:""}`;break;case"tickerMiniOne":s=`${a.symbol.toLowerCase()}@miniTicker`;break;case"tickerMiniAll":case"24hrMiniTicker":s="!miniTicker@arr",a.speed&&(s=`${s}@${a.speed}ms`);break;case"tickerOne":s=`${a.symbol.toLowerCase()}@ticker`;break;case"tickerAll":s="!ticker@arr";break;case"tickerAllWindowSize":s="!ticker",a.windowSize&&(s+=`_${a.windowSize}`),s+="@arr",a.speed&&(s+=`@${a.speed}ms`);break;case"bookTicker":s=`${a.symbol.toLowerCase()}@bookTicker`;break;case"bookTickerAll":s="!bookTicker";break;case"alpha":s=`${a.stream}@${a.key}`;break;case"depth":case"depthUpdate":s=`${a.symbol.toLowerCase()}@depth`,a.level&&(s=`${s}${a.level}`),"number"==typeof a.speed?s=`${s}@${a.speed}ms`:a.fast&&(s=`${s}@100ms`);break;case"ORDER_TRADE_UPDATE":case"ALGO_UPDATE":case"ACCOUNT_UPDATE":case"ACCOUNT_CONFIG_UPDATE":case"STRATEGY_UPDATE":case"GRID_UPDATE":case"userData":s=a.key;break;case"markPrice":s=`${a.symbol.toLowerCase()}@markPrice`,a.speed&&(s=`${s}@${a.speed}`);break;case"portfolioAssetPrice":s="!portfolioAssetPrice@arr";break;case"assetIndexAll":case"assetIndexUpdate":s="!assetIndex@arr";break;case"markPriceAll":s="!markPrice@arr",a.speed&&(s=`${s}@${a.speed}`);break;case"markPriceUpdate":s=a.isArr?"!markPrice@arr":`${a.symbol.toLowerCase()}@markPrice`,a.speed&&(s=`${s}@${a.speed}`);break;case"markPriceMini":s="!markPriceMini@arr",a.speed&&(s=`${s}@${a.speed}`);break;case"l_kline":s=`${a.symbol.toLowerCase()}@nav_kline_${a.interval}`;break;case"netValue":case"nav":s=`${a.symbol.toUpperCase()}@tokenNav`;break;case"netValueAll":s="nav@tokenNavArr";break;case"continuous_kline":s=`${a.pair.toLowerCase()}_${a.contractType.toLowerCase()}@continuousKline_${a.interval}`;break;case"indexPrice_kline":case"indexPriceKline":s=`${a.pair.toLowerCase()}@indexPriceKline_${a.interval}`;break;case"markPrice_kline":case"markPriceKline":s=`${a.symbol.toLowerCase()}@markPriceKline_${a.interval}`;break;case"indexPriceUpdate":s=`${a.pair.toLowerCase()}@indexPrice`;break;case"priceIndex":{let e=a?.marginSymbol;s="string"==typeof e?`${e.toLocaleLowerCase()}@priceIndex`:"!priceIndex@arr";break}case"convertTicker":{let e=a?.marginSymbol;s="string"==typeof e?`${e.toLocaleLowerCase()}@convertTicker`:"!convertTicker@arr";break}case"contractInfo":s="!contractInfo";break;case"compositeIndex":s=`${a.symbol.toLowerCase()}@compositeIndex`;break;case"stockTokenDepth":s=`${a.symbol}@stockTokenDepth`;break;case"stockTokenMiniTicker":s="!stockTokenMiniTicker@arr";break;case"stockTokenKline":s=`${a.symbol}@stockTokenKline_${a.interval}`;break;case"stockTokenMiniTickerOne":s=`${a.symbol.toUpperCase()}@stockTokenMiniTicker`;break;case"marketStatusUpdate":s="marketStatusUpdate";break;case"eOptions":s=a.streamName;break;case"topMovers":s=a.stream;break;case"alpha@kline":s=`came@${a.contractAddress}@${a.chainId}@kline_${a.interval}`;break;case"alpha@ticker":s=S(`${a.contractAddress}@${a.chainId}@ticker24h`);break;case"alpha@trade":s=S(`${a.contractAddress}@${a.chainId}@trade`)}s&&(t[s]=a.stream,i.push(s))}return{typeMaps:t,streams:i}}let A={},_=1,L={},k=!0;if("undefined"!=typeof window&&window.Worker)try{let e=new Blob(["      onmessage = function (event) {        setTimeout(function () {          postMessage(event.data)        }, 150)      }    "]),t=window.URL.createObjectURL(e);(A=new Worker(t)).onmessage=e=>{L[e.data]()}}catch(e){k=!1}let I=(r=e=>{"undefined"!=typeof window&&window.Worker&&k?(L[++_]=e,A.postMessage(`${_}`)):setTimeout(e,150)},function(e,{init:t,collect:i}){let s,a=!1,o=()=>{s=t()},l=()=>{a=!1;let t=s;o(),e(t)};return o(),(...e)=>{i(s,...e),a||(a=!0,r(l))}});var P=i(21380);let E="undefined"!=typeof TextDecoder?e=>new TextDecoder().decode(e):e=>decodeURIComponent(String.fromCharCode.apply(null,e)),B={gzip:{headerCheck:e=>31===e[0]&&139===e[1]&&8===e[2],parser:e=>JSON.parse(E(P.ungzip(e,{})))}},N=new x,M=1;async function D(e){return"function"==typeof e.arrayBuffer?await e.arrayBuffer():new Promise(t=>{let i=new FileReader;i.readAsArrayBuffer(e),i.onload=function(){t(i.result)}})}let V={},j=()=>{},R=b()(()=>{Object.keys(V).forEach(e=>{V[e].subscribeStreamSet.size&&(V[e].subscribe||j)(Array.from(V[e].subscribeStreamSet||new Set)),V[e].unsubscribeStreamSet.size&&(V[e].unsubscribe||j)(Array.from(V[e].unsubscribeStreamSet||new Set)),V[e].subscribeStreamSet=new Set,V[e].unsubscribeStreamSet=new Set})},500,{leading:!1,trailing:!0}),O=({baseUrl:e="",subscribeSet:t=new Set,unsubscribeSet:i=new Set,subscribe:r,unsubscribe:s})=>{V[e]||(V[e]={subscribe:j,unsubscribe:j,subscribeStreamSet:new Set,unsubscribeStreamSet:new Set});let{subscribeStreamSet:a}=V[e],{unsubscribeStreamSet:o}=V[e];V[e]={subscribe:r||V[e].subscribe,unsubscribe:s||V[e].unsubscribe,subscribeStreamSet:new Set([...Array.from(a).filter(e=>!i.has(e)),...Array.from(t)]),unsubscribeStreamSet:new Set([...Array.from(o).filter(e=>!t.has(e)),...Array.from(i).filter(e=>!a.has(e))])},R()};async function F(e){if(e instanceof Blob||"Blob"===e.constructor.name){let t=await D(e);return t=new Uint8Array(t),B.gzip.parser(t)}return JSON.parse(e)}let H="wss://fe-wsreplayer.devfdg.net/ws";function Z(e,t=[]){let i=e.toLowerCase(),r=e.includes(H),s=N.get(e);if(!s){let t=new C(r?H:`${e}/stream`),a={},o=()=>{let e=M++;t.send(JSON.stringify({method:"GET_PROPERTY",params:["combined"],id:e}));let i=setTimeout(()=>{d(),t.refresh()},5e3);return{id:e,resolve:()=>clearTimeout(i)}},l=null,n=()=>{l=setInterval(()=>{let{id:e,resolve:t}=o();a[e]=t},5e3)},d=()=>{clearInterval(l),Object.keys(a).forEach(e=>{a[e](e),delete a[e]})};t.onOpen(()=>{!0===window.__WS_PING__&&n(),r&&t.send(JSON.stringify(function(e){let[t,i]=e.split("?")[1]?.split("||");return{id:t,frequency:Number(i)}}(e)));let i=Object.keys(s.streamStatus);i.length&&O({baseUrl:e,subscribeSet:new Set(i),subscribe:e=>{t.send(JSON.stringify({method:"SUBSCRIBE",params:e,id:M++}))}})});let c=u(e=>{let r=I(t=>e.next(t),{init:()=>[],collect(e,t){e.push(t)}}),s=t.onMessage(async e=>{let i=await F(e.data);if("result"in i&&"id"in i){let e=a[i.id];e&&(e(i.id),delete a[i.id])}else"error"in i||(i?.method==="PING"?t.send(JSON.stringify({method:"PONG",E:i.E})):i.stream||i.data?r(i):r({stream:"",data:i}))});return t.open(),()=>{s(),d(),t.close(),N.delete(i)}});s={client:t,wsStream:c,streamStatus:{}},N.set(i,s)}let{streamStatus:a,client:o}=s,l=[];for(let e=0;e<t.length;e++){let i=t[e];a[i]?a[i]+=1:(l.push(i),a[i]=1)}return o.getStatus()===y.OPEN&&l.length&&O({baseUrl:e,subscribeSet:new Set(l),subscribe:e=>{o.send(JSON.stringify({method:"SUBSCRIBE",params:e,id:M++}))}}),s}function U(e){let t=Z(e).client;return u(e=>{let i=t.onOpen(()=>{t.readyState===y.OPEN&&e.next({status:"connected"})}),r=t.onClose(()=>{t.readyState===y.CLOSED&&e.next({status:"disconnected"})}),s=t.onReConnecting(i=>{t.readyState===y.CONNECTING&&e.next({status:"connecting",times:i})});return e.next({status:t.getStatus()===y.OPEN?"connected":"disconnected"}),()=>{i(),r(),s()}})}function W(e,t,{transform:i,filter:r}){let{typeMaps:s,streams:a}=T(t);return u(o=>{let l=e=>o.next(e),n=Z(e,a).wsStream.subscribe(e=>{let a=e.filter(e=>(function(e,t,i){if(e.stream)return e.stream in t;let r=function(e){let t=Array.isArray(e),{s:i,k:r,e:s,ct:a,ps:o,i:l}=(e=t?e[0]:e)||{};return s?{symbol:i||r?.s,stream:s,interval:r?.i,pair:o||l,contractType:a,isArr:t}:void 0}(e.data);if(!r)return!1;let{streams:s}=T(i.map(e=>Object.assign({},e,r)));return s.some(e=>e&&e in t)})(e,s,t)&&(!r||r(e)));if(a.length){let e=a[0];e.coalscedMsg=a;let t=i(e);"function"==typeof t?t(l):l(t)}});return()=>{!function(e,t){let i=e.toLowerCase(),r=N.get(i);if(!r)return;let{client:s,streamStatus:a}=r,o=[];t.forEach(e=>{let t=a[e];void 0!==t&&(a[e]=Math.max(0,t-1),0===a[e]&&(o.push(e),delete a[e]))}),o.length&&O({baseUrl:e,unsubscribeSet:new Set(o),unsubscribe:e=>{s.send(JSON.stringify({method:"UNSUBSCRIBE",params:e,id:M++}))}})}(e,a),n()}})}function $(e,{wssBaseUrl:t,speed:i}){return W(t,[{stream:"depth",symbol:e,speed:i}],{transform(e){let t=function(e){let t=[];for(let i=0;i<e.length;i++){let{data:r}=e[i];t.push({asks:r.a||[],bids:r.b||[],symbol:r.s,lastUpdateId:r.u,firstUpdateId:r.U,preLastUpdateId:r.pu})}return t}(e.coalscedMsg);return e=>t.forEach(t=>e(t))}})}let z=(e,t)=>e-t;function K(e,t){return Number(Math.abs(e-0).toFixed(t))<10**(-1*(t+1))}function X(e,t){return`${e}@${t}`}function Y(e){let t=String(e),i=t.indexOf(".");return i<0?0:t.length-i-1}function G(e,t,i){let r=e%t;switch(i){case"floor":return e-r;case"ceil":return 0===r?e:e-r+t;default:return r<t/2?e-r:e+t-r}}function q(e,t,i){let r=Number(t);if(r<1){let s=Y(t),a=Y(e);return 0===a?e+"."+"0".repeat(s):a<=s?e+"0".repeat(s-a):(G(function(e,t){let i=t,r=String(e).split("");if(0>r.indexOf("."))return+e*10**t;for(let e=0;e<r.length&&i>0;e++){let t=r[e];if("."===t){let s=r[e+1]||"0";r[e]=s,r[e+1]=t,i--}else r[e]=t}return Number(r.join(""))}(e,s),1,i)*r).toFixed(s)}return G(Number(e),r,i).toFixed(0)}function Q(e,t,i,r,s){let{entityById:a}=e;t.forEach(t=>{let o=t[0],l=Number(t[1]),n=a[o];if(n){0===l&&delete a[o];let t=l-n.amount;K(t,s)||(n.amount=l,function(e,{price:t,amountDelta:i,type:r,levels:s,quantityPrecision:a}){let{levelById:o,tree:l}=e,n={children:l},d=-1;for(;++d<s.length;){let{children:l}=n;if(!l)break;let c=s[d],h=q(t,c,r),u=X(c,h),g=o[u];if(!g){delete e.entityById[t];continue}if(n=g.treeNode,g.amount+=i,K(g.amount,a)){let i=function(e,t,i=z){let r,s,a=e.length-1,o=0;for(;a>=o;)if((s=i(e[r=(a+o)/2>>>0],t))<0)o=r+1;else{if(!(s>0))return r;a=r-1}return -1}(l,Number(h),(e,t)=>e.price-t);if(i>=0){l.splice(i,1),delete o[u];for(let e=d+1;e<s.length;e++){let i=s[e],a=X(i,q(t,i,r));delete o[a]}delete e.entityById[t]}return}g.total+=+t*i}}(e,{price:o,amountDelta:t,levels:i,type:r,quantityPrecision:s}))}else 0!==l&&function(e,{price:t,amount:i,type:r,levels:s}){let{entityById:a,levelById:o,tree:l}=e;a[t]={amount:i};let n={children:l},d=-1;for(;++d<s.length;){let e=n.children=n.children||[],a=s[d],l=q(t,a,r),c=X(a,l),h=o[c];h?(n=h.treeNode,h.amount+=i,h.total+=+t*i):(h={amount:i,total:+t*i,treeNode:n={levelID:c,level:a,price:l,numberPrice:Number(l)}},o[c]=h,function(e,t,i=z){let r,s,a=e.length-1,o=0,l=-1;for(;a>=o;)if((s=i(e[r=(a+o)/2>>>0],t))<0)o=r+1;else if(s>0)a=r-1;else{l=r;break}for(-1===l&&(l=a),l++,a=e.length-1;l<a&&0===i(t,e[l]);)l++;for(r=e.length;r>l;)e[r]=e[--r];e[l]=t}(e,n,(e,t)=>e.numberPrice-t.numberPrice))}}(e,{price:o,amount:l,levels:i,type:r})})}function J(e,t){(t.asks.length||t.bids.length)&&(t.asks.length&&Q(e.ask,t.asks,e.levels,"ceil",e.quantityPrecision),t.bids.length&&Q(e.bid,t.bids,e.levels,"floor",e.quantityPrecision))}function ee(e,t){return{levels:e.sort((e,t)=>Number(t)-Number(e)),ask:{tree:[],entityById:Object.create({}),levelById:Object.create({})},bid:{tree:[],entityById:Object.create({}),levelById:Object.create({})},quantityPrecision:t}}function et(e,t){let i={...e.entityById};return t.forEach(([e,t])=>{let r=Number(t);0===r?delete i[e]:i[e]={amount:r}}),i}let ei=e=>{let{ask:{entityById:t},bid:{entityById:i}}=e;return Math.min(...Object.keys(t).map(Number))<Math.max(...Object.keys(i).map(Number))};function er(e,t){console.log(e),window.SensorsSdk&&window.SensorsSdk.track&&window.SensorsSdk.track(e,t)}let es=new x,ea=-1/0,eo=ee([],1),el={getState:()=>eo,subscribe:()=>()=>null,getSnapshot:()=>({init:!0})},en={isolated:!0,cross:!1};function ed(e){let t=e.split(".");return e=>{for(let i=0;i<t.length;i++){if(!e)return;e=e[t[i]]}return e}}let ec={number(e){let t=ed(e);return e=>Number(t(e))},text(e){let t=ed(e);return e=>t(e)},isolatedVal(e){let t=ed(e);return e=>en[t(e)]},now:()=>e=>Date.now()};function eh(e,t){let i=Object.keys(t),r=Object.create(null);for(let s=0;s<i.length;s++){let a,o=i[s],l=t[o];a="function"==typeof l?l(e):e[l],r[o]=a}return r}let eu=({data:e,eventType:t,keys:i})=>e.e===t&&(!e.lk||i.some(({listenKey:t})=>t===e.lk));(s=o||(o={})).SPOT="SPOT",s.CROSS="CROSS",s.ISOLATED="ISOLATED",s.FUTURES="FUTURES",s.FUTURES_CM="FUTURES_CM",s.PM="PM";let eg=new x;function em({apiGetKeyUrl:e,apiRefreshKeyUrl:t,wssBaseUrl:i},{type:r,eventType:s,transform:a},o,l){let n,d=!1,{portfolioId:c,copyTradeType:h}=o||{},g="FUTURES"===r&&!l&&c&&h?`${r}-${h}-${c}`:r,m=async l=>{let c;if(d)return;let h=eg.get(g);if(null===h)c=("ISOLATED"===r?(0,p.v_)(e,{...o}):(0,p.v_)(e,"CROSS"===r?{accountType:"MARGIN",...o}:{...o}).then(e=>({...e,data:[{symbol:null,listenKey:e.data}]}))).then(e=>{let i=e.data||[];return setInterval(()=>(function(e,t,i,r){if("ISOLATED"===t||"PM"===t)return(0,p.v_)(e,{...r});let s=i.map(({listenKey:e})=>e).join("");return(0,p.v_)(e,{listenKey:s,...r})})(t,r,i,o),3e6),i}),eg.set(g,c);else c=h;let u=await c,m=u.reduce((e,t)=>({...e,[t.listenKey]:t.symbol}),{});n=W(i,u.map(({listenKey:e})=>({stream:"userData",key:e})),{filter:e=>eu({data:e.data,eventType:s,keys:u}),transform:e=>a(e,m)}).subscribe(e=>l.next(e))};return u(e=>(m(e),()=>{d=!0,n&&(n(),l&&eg.delete(g))}))}function ep(e){return eh(e,{symbol:"s",eventTime:"E",time:ed("k.t"),open:ec.number("k.o"),close:ec.number("k.c"),high:ec.number("k.h"),low:ec.number("k.l"),volume:ec.number("k.v"),quantity:ec.number("k.q")})}(a=l||(l={})).SPOT="SPOT",a.CROSS="CROSS",a.ISOLATED="ISOLATED",a.FUTURES="FUTURES",a.FUTURES_CM="FUTURES_CM",a.PM="PM";let ex=new x,ef=class{static setStreamBatch(e){c(e)}getOrderbookStatusStream(){return U(this._options.marketWebsocketBaseUrl)}getOrderbookStore(e,{levels:t=["1"],quantityPrecision:i}){return function(e,{apiBaseUrl:t,wssBaseUrl:i,levels:r,speed:s,quantityPrecision:a}){if(r.length<=0||!e)return el;let o=[e,t,i,r].map(e=>JSON.stringify(e)).join(""),l=es.get(o);if(l)return l;let n=ee(r,a),d={lastUpdateId:ea,firstEvent:!0},c=u(l=>{var c;let h,u,g=!0,m=!1,x=[],f=(c=async()=>{try{if(!g)return;let i=await (0,p.U2)(`${t}?symbol=${e.toUpperCase()}&limit=1000`);if("number"!=typeof i.lastUpdateId)throw Error("invalid response, lastUpdateId not a number");if(i.lastUpdateId<=d.lastUpdateId)return er("orderbook_api_delayed",{cacheId:o}),b();if(function(e){let{asks:t,bids:i}=e;return Math.min(...t.map(([e,t])=>Number(e)))<Math.max(...i.map(([e,t])=>Number(e)))}(i))return er("orderbook_api_crossed",{cacheId:o}),b();m=!1,er(d.lastUpdateId===ea?"orderbook_api_init":"orderbook_api_sync",{cacheId:o}),d={lastUpdateId:i.lastUpdateId,firstEvent:!0},n=ee(r,a),J(n,i),l.next(n)}catch(t){let e=t.code||t.status;er("orderbook_api_error",{cacheId:o,code:e,msg:t.message}),(419===e||418===e||429===e)&&await new Promise(e=>setTimeout(e,6e4)),m=!1}},function(){u?(clearTimeout(h),h=setTimeout(function(){c(),u=Date.now()},2e3-(Date.now()-u))):(c(),u=Date.now())}),b=()=>{m=!0,f()};function y(){if(m||0===x.length)return;let{orderBookDelayed:e,buffer:t}=function(e,t){let i={orderBookDelayed:!1,buffer:[]},r=t[0];if(void 0!==r.preLastUpdateId)if(e.firstEvent){let s=t.findIndex(t=>t.firstUpdateId<=e.lastUpdateId&&t.lastUpdateId>=e.lastUpdateId);return -1!==s?{orderBookDelayed:!1,buffer:t.slice(s)}:r.firstUpdateId>e.lastUpdateId?{orderBookDelayed:!0,buffer:t}:i}else{let s=t.findIndex(t=>t.preLastUpdateId===e.lastUpdateId);return -1!==s?{orderBookDelayed:!1,buffer:t.slice(s)}:r.preLastUpdateId&&r.preLastUpdateId>e.lastUpdateId?{orderBookDelayed:!0,buffer:t}:i}if(e.firstEvent){let s=t.findIndex(t=>t.firstUpdateId<=e.lastUpdateId+1&&t.lastUpdateId>=e.lastUpdateId+1);return -1!==s?{orderBookDelayed:!1,buffer:t.slice(s)}:r.firstUpdateId>e.lastUpdateId+1?{orderBookDelayed:!0,buffer:t}:i}{let s=t.findIndex(t=>t.firstUpdateId===e.lastUpdateId+1);return -1!==s?{orderBookDelayed:!1,buffer:t.slice(s)}:r.firstUpdateId>e.lastUpdateId+1?{orderBookDelayed:!0,buffer:t}:i}}(d,x);if(e)return er("orderbook_shown_data_delayed",{cacheId:o,preLastUpdateId:d.lastUpdateId,wsPreLastUpdateId:x[0].preLastUpdateId}),b();if(0===t.length){er("orderbook_ws_buffer_delayed",{cacheId:o,preLastUpdateId:d.lastUpdateId,wsPreLastUpdateId:x[x.length-1].lastUpdateId}),x=[];return}if(ei(t.reduce((e,t)=>(function(e,t){if(!t.asks.length&&!t.bids.length)return e;let i=e.ask.entityById,r=e.bid.entityById;return t.asks.length&&(i=et(e.ask,t.asks)),t.bids.length&&(r=et(e.bid,t.bids)),{...e,ask:{...e.ask,entityById:i},bid:{...e.bid,entityById:r}}})(e,t),n)))return er("orderbook_crossed",{cacheId:o}),b();d={lastUpdateId:t[t.length-1].lastUpdateId,firstEvent:!1},t.forEach(e=>J(n,e)),l.next(n),x=[]}b();let v=$(e,{wssBaseUrl:i,speed:s}).subscribe(function(e){if(0===x.length)return x=[e],y();let t=x[x.length-1],i=void 0!==e.preLastUpdateId?e.preLastUpdateId<t.lastUpdateId:e.firstUpdateId<t.lastUpdateId+1,r=void 0!==e.preLastUpdateId?e.preLastUpdateId===t.lastUpdateId:e.firstUpdateId===t.lastUpdateId+1;return i||(r?(x.push(e),x=x.slice(-1e4)):x=[e]),y()});return()=>{es.delete(o),g=!1,v()}}),h={getState:()=>n,getSnapshot:()=>({...d}),subscribe:e=>c.subscribe(()=>e(n))};return es.set(o,h),h}(e,{apiBaseUrl:`${this._options.apiBaseUrl}/api/v3/depth`,wssBaseUrl:this._options.marketWebsocketBaseUrl,levels:t,quantityPrecision:i})}getStreamTrade(e){return function(e,{wssBaseUrl:t}){return W(t,[{stream:"tradeAggregate",symbol:e}],{transform:e=>e.coalscedMsg.map(e=>eh(e.data,{symbol:"s",eventTime:"E",aggTradeId:"a",price:"p",quantity:"q",firstTradeId:"f",lastTradeId:"l",tradeTime:"T",buyerIsMaker:"m"}))})}(e,{wssBaseUrl:this._options.marketWebsocketBaseUrl})}getStreamTickers(e=3e3){return function({wssBaseUrl:e,speed:t}){return W(e,[{stream:"tickerMiniAll",speed:t}],{transform(e){let t={},i=e.coalscedMsg;for(let e=0;e<i.length;e++){let{data:r}=i[e];for(let e=0;e<r.length;e++){let i=eh(r[e],{symbol:"s",eventTime:"E",openPrice:ec.number("o"),highPrice:ec.number("h"),lowPrice:ec.number("l"),lastPrice:ec.number("c"),volume:ec.number("v"),quoteVolume:ec.number("q")});t[i.symbol]=i}}return t}})}({wssBaseUrl:this._options.marketWebsocketBaseUrl,speed:e})}getStreamTickersWithWindowSize(e="24h",t=3e3){return function({wssBaseUrl:e,windowSize:t,speed:i}){return W(e,[{stream:"tickerAllWindowSize",windowSize:t,speed:i}],{transform(e){let t={},i=e.coalscedMsg;for(let e=0;e<i.length;e++){let{data:r}=i[e];for(let e=0;e<r.length;e++){let i=eh(r[e],{symbol:"s",eventTime:"E",openPrice:ec.number("o"),highPrice:ec.number("h"),lowPrice:ec.number("l"),lastPrice:ec.number("c"),volume:ec.number("v"),quoteVolume:ec.number("q")});t[i.symbol]=i}}return t}})}({wssBaseUrl:this._options.marketWebsocketBaseUrl,windowSize:e,speed:t})}getStreamTickersWithWindowSizeRaw(e="24h",t=3e3){return function({wssBaseUrl:e,windowSize:t,speed:i}){return W(e,[{stream:"tickerAllWindowSize",windowSize:t,speed:i}],{transform:e=>e.coalscedMsg.reduce((e,{data:t})=>(t.forEach(t=>e[t.s]=t),e),{})})}({wssBaseUrl:this._options.marketWebsocketBaseUrl,windowSize:e,speed:t})}getStreamDepth(e){return $(e,{wssBaseUrl:this._options.marketWebsocketBaseUrl})}getStreamKline(e,t,{timeZone:i}={}){return function(e,t,{wssBaseUrl:i,leveragedToken:r,timeZone:s}){return W(i,[{stream:r?"l_kline":"kline",symbol:e,interval:t,timeZone:s}],{transform(e){let t=function(e){if(e.length<=1)return e;let t=[],i=e[0];for(let r=1;r<e.length;r++){let s=e[r];i.data.k.t!==s.data.k.t&&t.push(i),i=s}return t.push(i),t}(e.coalscedMsg);return 1===t.length?ep(t[0].data):e=>t.forEach(t=>e(ep(t.data)))}})}(e,t,{wssBaseUrl:this._options.marketWebsocketBaseUrl,timeZone:i})}getUserAssetsStream(e=o.SPOT,t,i){var r={...e===o.ISOLATED?this._getIsolatedUserKeyApiUrls():this._getUserKeyApiUrls(),type:e,wssBaseUrl:this._options.marketWebsocketBaseUrl};return em(r,{type:r.type,eventType:"outboundAccountPosition",transform:(e,t)=>i=>e.coalscedMsg.forEach(({data:e,stream:r})=>i({symbol:t[r],balances:e.B.map(e=>eh(e,{asset:"a",free:ec.number("f"),locked:ec.number("l")}))}))},t,i)}getUserOrderStream(e=o.SPOT,t,i){var r={...e===o.ISOLATED?this._getIsolatedUserKeyApiUrls():this._getUserKeyApiUrls(),type:e,wssBaseUrl:this._options.marketWebsocketBaseUrl};return em(r,{type:r.type,eventType:"executionReport",transform:e=>t=>e.coalscedMsg.forEach(({data:e})=>t(eh(e,{symbol:"s",clientOrderId:"c",side:"S",orderType:"o",timeInForce:"f",quantity:ec.number("q"),price:ec.number("p"),stopPrice:ec.number("P"),icebergQuantity:ec.number("F"),orderListId:"g",originalClientOrderId:"C",executionType:"x",orderStatus:"X",orderRejectReason:"r",orderId:"i",LastExecutedQuantity:ec.number("l"),cumulativeFilledQuantity:ec.number("z"),lastPrice:ec.number("L"),commissionAmount:ec.number("n"),commissionAsset:"N",transactionTime:"T",tradeId:"t",isOnOrderBook:"w",isMaker:"m",orderCreationTime:"O",cumulativeQuoteQuantity:ec.number("Z"),lastQuoteQuantity:ec.number("Y"),quoteOrderQty:ec.number("Q"),activatePrice:ec.number("AP"),callbackRate:ec.number("cr"),trailingDelta:"d",trailingTime:"D",workingTime:"W",isSor:"uS"})))},t,i)}getMarginIndexStream(e){if(!this._options.marginWebsocketBaseUrl)throw Error("marginWebsocketBaseUrl is required");return function({wssBaseUrl:e,symbols:t}){return W(e,Array.isArray(t)?t.map(e=>({stream:"priceIndex",marginSymbol:e.toLocaleLowerCase()})):[{stream:"priceIndex"}],{transform:e=>{let t={},i=e.coalscedMsg;for(let e=0;e<i.length;e++){let{data:r}=i[e];if(Array.isArray(r))for(let e=0;e<r.length;e++){let i=eh(r[e],{eventTime:"E",symbol:"s",price:ec.number("p")});t[i.symbol]=i}else{let e=eh(r,{eventTime:"E",symbol:"s",price:ec.number("p")});t[e.symbol]=e}}return t}})}({wssBaseUrl:this._options.marginWebsocketBaseUrl,symbols:e})}getConvertTickerStream(e){if(!this._options.marginWebsocketBaseUrl)throw Error("marginWebsocketBaseUrl is required");return function({wssBaseUrl:e,symbols:t}){return W(e,Array.isArray(t)?t.map(e=>({stream:"convertTicker",marginSymbol:e.toLocaleLowerCase()})):[{stream:"convertTicker"}],{transform:e=>{let t={},i=e.coalscedMsg;for(let e=0;e<i.length;e++){let{data:r}=i[e];if(Array.isArray(r))for(let e=0;e<r.length;e++){let i=eh(r[e],{eventTime:"E",symbol:"s",price:ec.number("p")});t[i.symbol]=i}else{let e=eh(r,{eventTime:"E",symbol:"s",price:ec.number("p")});t[e.symbol]=e}}return t}})}({wssBaseUrl:this._options.marginWebsocketBaseUrl,symbols:e})}getUserDebtStream(){if(!this._options.marginWebsocketBaseUrl)throw Error("marginWebsocketBaseUrl is required");return function({apiGetKeyUrl:e,apiRefreshKeyUrl:t,wssBaseUrl:i},{transform:r}){let s,a=!1,o=async o=>{let l;if(a)return;let n=ex.get(e);if(null===n)l=(0,p.v_)(e).then(e=>{let{listenKey:i}=e.data||{};return setInterval(()=>(0,p.gz)(`${t}?listenKey=${i}`),3e6),i}),ex.set(e,l);else l=n;s=W(i,[{stream:"userData",key:await l}],{transform:e=>r(e)}).subscribe(e=>o.next(e))};return u(e=>(o(e),()=>{a=!0,s&&s()}))}({...this._getMarginApiUrls(),wssBaseUrl:this._options.marginWebsocketBaseUrl},{transform:e=>t=>e.coalscedMsg.forEach(({data:e})=>t(e))})}getMarginStatusStream(){if(!this._options.marginWebsocketBaseUrl)throw Error("marginWebsocketBaseUrl is required");return U(this._options.marginWebsocketBaseUrl)}_getIsolatedUserKeyApiUrls(){return{apiGetKeyUrl:`${this._options.apiBaseUrl}/bapi/mbx/v1/private/mbxgateway/user-stream/isolated-margin/start/batch`,apiRefreshKeyUrl:`${this._options.apiBaseUrl}/bapi/mbx/v1/private/mbxgateway/user-stream/isolated-margin/ping/batch`}}_getUserKeyApiUrls(){return{apiGetKeyUrl:`${this._options.apiBaseUrl}/bapi/mbx/v1/private/mbxgateway/user-stream/start`,apiRefreshKeyUrl:`${this._options.apiBaseUrl}/bapi/mbx/v1/private/mbxgateway/user-stream/ping`}}_getMarginApiUrls(){return{apiGetKeyUrl:`${this._options.apiBaseUrl}/bapi/margin/v1/private/margin/user-data-stream`,apiRefreshKeyUrl:`${this._options.apiBaseUrl}/bapi/margin/v1/private/margin/user-data-stream`}}constructor(e){this._options=e}};var eb=i(23059),ey=i.n(eb);let ev=({wssBaseUrl:e,contractAddress:t,chainId:i,interval:r})=>W(e,[{stream:"alpha@kline",contractAddress:t,chainId:i,interval:r}],{transform:ey()}),eC=({wssBaseUrl:e,contractAddress:t,chainId:i})=>W(e,[{stream:"alpha@ticker",contractAddress:t,chainId:i}],{transform:ey()}),ew=({wssBaseUrl:e,contractAddress:t,chainId:i})=>W(e,[{stream:"alpha@trade",contractAddress:t,chainId:i}],{transform:ey()}),eS=({wssBaseUrl:e,symbol:t})=>W(e,[{stream:"alpha@aggTrade",symbol:t}],{transform:ey()});class eT extends m{static setStreamBatch(e){c(e)}getAlphaOrderTradeUpdateStream(e){var t={alphaIds:e,wssBaseUrl:this._options.marketWebsocketBaseUrl};return function({alphaIds:e,wssBaseUrl:t},{transform:i}){let r,s=!1,a=async a=>{if(s)return;let o=e.reduce((e,t)=>({...e,[t]:t}),{});r=W(t,e.map(e=>({stream:"alpha",key:e})),{transform:e=>i(e,o)}).subscribe(e=>a.next(e))};return u(e=>(a(e),()=>{s=!0,r&&r()}))}({wssBaseUrl:t.wssBaseUrl,alphaIds:t.alphaIds},{transform:e=>t=>e.coalscedMsg.forEach(({data:e})=>t({order:eh(e,{symbol:"s",clientOrderId:"c",side:"S",orderType:"o",timeInForce:"f",quantity:ec.number("q"),origQty:ec.number("q"),price:ec.number("p"),stopPrice:ec.number("P"),orderListId:"g",originalClientOrderId:"C",executionType:"x",orderStatus:"X",status:"X",orderRejectReason:"r",orderId:"i",LastExecutedQuantity:ec.number("l"),qty:ec.number("l"),executedQty:ec.number("z"),cumulativeFilledQuantity:ec.number("z"),lastPrice:ec.number("L"),commission:ec.number("n"),commissionAmount:ec.number("n"),commissionAsset:"N",tradeId:"t",isOnOrderBook:"w",isMaker:"m",orderCreationTime:"O",cumulativeQuoteQuantity:ec.number("Z"),cumQuote:ec.number("Z"),lastQuoteQuantity:ec.number("Y"),quoteOrderQty:ec.number("Q"),avgPrice:ec.number("ap"),callbackRate:ec.number("cr"),workingTime:"W",updateTime:"T",baseAsset:"ba",quoteAsset:"qa"})}))})}getKlineStream(e){return this.withOptionsStream(t=>ev({...e,wssBaseUrl:t.marketWebsocketBaseUrl}))}getTickerStream(e){return this.withOptionsStream(t=>eC({...e,wssBaseUrl:t.marketWebsocketBaseUrl}))}getTradeStream(e){return this.withOptionsStream(t=>ew({...e,wssBaseUrl:t.marketWebsocketBaseUrl}))}getTranscations(e){return this.withOptionsStream(t=>eS({...e,wssBaseUrl:t.marketWebsocketBaseUrl}))}}var eA=i(42660);let e_=null,eL=null,ek=null,eI=()=>(null===e_&&(e_=new ef({apiBaseUrl:"",marketWebsocketBaseUrl:eA.Nz,marginWebsocketBaseUrl:eA.yH}),ef.setStreamBatch(n.unstable_batchedUpdates)),e_),eP=()=>(null===eL&&(eL=new eT({apiBaseUrl:"",marketWebsocketBaseUrl:`${eA.Ij}/w3w`}),eT.setStreamBatch(n.unstable_batchedUpdates)),eL),eE=()=>(null===ek&&(ek=new eT({apiBaseUrl:"",marketWebsocketBaseUrl:`${eA.Ij}/w3w/wsa`}),eT.setStreamBatch(n.unstable_batchedUpdates)),ek)},53531:function(e,t,i){i.d(t,{Hf:()=>l,Ks:()=>o,NP:()=>d,kj:()=>n});var r=i(33120),s=i(34406);let{isHybrid:a}=(0,r.L)();s.electron;let o={click:"$WebClick",moduleView:"ModuleView",popupView:"PopupView",$pageView:"$pageview",placeOrderEvent:"place_order_event",user_convert_event:"user_convert_event",widgetError:"widget_error",edit_reminder_popup:"edit_reminder_popup"},l="alpha_trading",n={OOP:"oop",MARKET:"market",INFO:"info",ORDER_FORM:"order_form",ANTI_MEV:"anti_mev",EXCESSIVE_VALUE:"excessive_value",HIGH_SLIPPAGE:"high_slippage",CONFIRM_PAYMENT:"confirm_payment",FAT_FINGER:"fat_finger",LIMIT_ORDER_CONFIRM:"order_confirm"},d="alpha_trading"},65853:function(e,t,i){i.d(t,{P:()=>a,n:()=>s});var r=i(87363);let s=(0,r.createContext)(void 0),a=()=>{let e=(0,r.useContext)(s);if(!e)throw Error("AlphaSDKProvider: Prop getSDK is not available");return e}},48988:function(e,t,i){let r;var s,a,o,l=i(52322),n=i(17029),d=i(31370),c=i(98441),h=i(62871),u=i(34406);let g="undefined"==typeof window,m=["/fapi/v1/klines","/fapi/v1/continuousKlines","/api/v3/depth","/fapi/v1/depth","/api/v1/aggTrades","/fapi/v1/aggTrades","/api/v1/time","/fapi/v1/ticker/24hr","/fapi/v1/premiumIndex","/fapi/v1/fundingRate","/fapi/v1/time","/fapi/v1/exchangeInfo","/dapi/v1/exchangeInfo","/dapi/v1/ticker/24hr","/dapi/v1/continuousKlines","/dapi/v1/time","/dapi/v1/depth","/dapi/v1/aggTrades"],{ACCELERATE_DEFAULT_DOMAIN:p,ACCELERATE_AVAILABLE_DOMAIN:x,ACCELERATE_ENBLED_SITES:f}=(0,h.B8)(),b=e=>e;var y=i(2446),v=i(69529),C=i(42045),w=i(19792),S=i(24910),T=i(25543),A=i(6010),_=i(42660);let L=_.cg;async function k(e,t,i){let r=y.Z.language||"undefined"!=typeof window&&window.localStorage.i18nextLng,{status:s}=e=await (0,v.r)({response:e,apiOpts:t,opts:i,staticHost:_.Xs});return 404===s||401===s||(e=await (0,C.jD)({response:e,apiOpts:t,opts:i,globalOpts:{language:r,enableDefault:!0,staticHost:_.Xs}}),await (0,w.Z)({response:e,apiOpts:t,globalOpts:{language:r,i18nHost:L,enableAutoToast:!0,toastOpts:{anchorOrigin:{horizontal:"right",vertical:"bottom"}}}}),(0,S.j)({response:e,apiOpts:t,globalOpts:{language:r,i18nHost:L,i18nInstance:y.Z,enable:!0,excludeErrorCode:["100001005","90804169"],useUniversal:!0,plugins:[new T.G,new A.U({shouldSkip:e=>{let{code:t,url:i}=e;return["200003919","200003975"].includes(t)&&/userComplianceCheck/.test(i)}})],toastOpts:{anchorOrigin:{horizontal:"right",vertical:"bottom"}}}})),e}var I=i(65533),P=i(53122),E=i(31827),B=i(99186),N=i(89985),M=i(58922),D=i(87363),V=i.n(D),j=i(90404),R=i(15761),O=i(66223),F=i(14872),H=i(56053),Z=i(24498),U=i(83025),W=i(76507),$=i(67035);function z(e){let{error:t}=e,i=(0,W.t)();return console.error("DefaultCatchBoundary Error:",t),(0,l.jsxs)("div",{className:"min-w-0 flex-1 p-4 flex flex-col items-center justify-center gap-6",children:[(0,l.jsx)($.q,{error:t}),(0,l.jsx)("div",{className:"flex gap-2 items-center flex-wrap",children:(0,l.jsx)("button",{onClick:()=>{i.invalidate()},className:"px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold",children:"Try Again"})})]})}function K(e){let{children:t}=e;return(0,l.jsxs)("div",{className:"space-y-2 p-2",children:[(0,l.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:t||(0,l.jsx)("p",{children:"The page you are looking for does not exist."})}),(0,l.jsx)("p",{className:"flex items-center gap-2 flex-wrap",children:(0,l.jsx)("button",{onClick:()=>window.history.back(),className:"bg-emerald-500 text-white px-2 py-1 rounded uppercase font-black text-sm",children:"Go back"})})]})}var X=i(8976),Y=i(4091),G=i(76053),q=i(82946),Q=i(68087);let J=(0,D.createContext)(void 0),ee=()=>{let e=(0,D.useContext)(J);if(!e)throw Error("SpotCoreProvider: Prop getSDK is not available");return e};var et=i(31197);let ei=(0,D.memo)(({getSDK:e,isLoggedIn:t,children:i})=>V().createElement(J.Provider,{value:e},V().createElement(et.G.Provider,{value:t},i)));ei.displayName="SpotCoreProvider";let er=["Navigation","trade-ui","asset-transfer","alpha-ui","kline-ui"];var es=i(82240),ea=i(65853);let eo=(0,D.memo)(e=>{let{getSDK:t,children:i}=e;return(0,l.jsx)(ea.n.Provider,{value:t,children:i})});eo.displayName="AlphaSDKProvider";var el=i(73151),en=i(32963),ed=i(3276),ec=i(8190),eh=i(47279),eu=i(67852);let eg=(0,ec.init)({models:{cookies:eh.Z,userCenter:eu.Z}});var em=i(82066),ep=i(17783);let ex=e=>{let{children:t}=e,i=(0,D.useRef)(null);return null===i.current&&(i.current=new em.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}})),(0,l.jsx)(em.QueryClientProvider,{client:i.current,children:(0,l.jsxs)(l.Fragment,{children:[t,(0,l.jsx)(ep.ReactQueryDevtools,{})]})})};var ef=i(45774),eb=i(93014),ey=i(28098),ev=i(92655),eC=i(14199),ew=i(8664),eS=i(96866);let eT="shouldResetTradingView",eA=()=>{let{theme:e,setTheme:t,toggleTheme:i}=(0,eS.Z)(),r=(0,D.useCallback)(()=>ew.tO.getItem(eT,0)||0,[]),s=(0,D.useCallback)(()=>{let e=r();ew.tO.setItem(eT,e+1)},[r]),a=(0,D.useCallback)(e=>{t(e),s()},[t,s]),o=(0,D.useCallback)(e=>{"boolean"==typeof e?a(e?"light":"dark"):"light"===e||"dark"===e?a(e):i()},[i,a]),l=e.startsWith("light");return(0,D.useMemo)(()=>({isLight:l,theme:e,setTheme:a,toggleTheme:o}),[l,e,a,o])};var e_=i(62567);let eL="dark",ek="traditional",eI="fresh",eP="false",eE="color",eB="theme",eN="isRedUpGreenDown";var eM=i(55887);let eD=eI,eV=eP;eM.s||(eD=e_.Qk.read(eE)??eI,e_.fO.setState(eE,eD),eV=e_.Qk.read(eN)??eP,e_.fO.setState(eN,eV));let ej=()=>{let{theme:e,toggleTheme:t,isLight:i}=eA(),[r]=(0,e_.QL)(eN,eP),[s]=(0,e_.QL)(eE,eI);return(0,D.useMemo)(()=>({theme:e,isLight:i,toggleTheme:t,isRUGD:"true"===r,isCVD:"cvd"===s,isTraditionalColor:s===ek,colorMode:s}),[i,e,t,r,s])};var eR=i(86341),eO=i(17563),eF=i(34406);let eH="";"undefined"!=typeof window&&(eH=function(e,t){let i=document.getElementsByTagName("meta");for(let r=0;r<i.length;r++)if(i[r].getAttribute(e)===t)return i[r].getAttribute("content");return""}("http-equiv","etag"));let eZ=e=>{r=e},eU=()=>!!r,eW=new Set,e$=(e,t)=>{var i,s;if(eM.s)return;let{contentId:a=""}=eO.parse(null==(s=window)||null==(i=s.location)?void 0:i.search);eW.add([e,t]),r&&(eW.forEach(e=>{let[t,i]=e,s={...i,etag:eH,df_5:a||(null==i?void 0:i.df_5),...eF.electron?{}:{bnc_uuid:eR.Q.read("bnc-uuid")}};r.track(t,s)}),eW.clear())},ez=()=>{let{isLight:e}=ej(),{userId:t}=(0,en.Pc)(),i="alpha_trading",r=(0,D.useRef)({});(0,D.useEffect)(()=>{r.current={...{pageName:i},bnc_uuid:(0,ev.read)(eC.y$.BNC_UUID)||""}},[i]);let[s,a]=(0,D.useState)(!1);return(0,D.useEffect)(()=>{if(!s)try{let{sensors:e}=(0,ef.Z)({sensorsConfig:{server_url:_.yB,staticHost:_.Xs,batch_send:!0,heatmap:{useCapture:!0,collect_elements:"all",scroll_notice_map:"default",clickmap:"default",track_attr:["data-testid"],custom_property(e){let t={};if(e){var i;let s=null==(i=e.dataset)?void 0:i.testid;return s&&(t.dataTestId=s,t.$element_id=s),{...r.current,...t}}return t}},preset_properties:{url:!0},show_log:!1},ableGA:"test"!==_.vt});(0,ey.Q)(()=>{eZ(e),a(!0)})}catch(e){console.error("senor init error",e)}},[s,e,r]),(0,D.useEffect)(()=>{s&&t&&((0,eb.Z)(t),void 0!==window.Sentry&&window.Sentry.setUser({id:t}))},[t,s]),null};var eK=i(52671);let eX={"finance-common":_.WH},eY=e=>{let{children:t}=e,{isLoading:i}=(0,en.f0)(),{userId:r}=(0,en.Pc)(),s=(0,D.useMemo)(()=>({THEMIS_ADDRESS:_.mK||"",THEMIS_ENV:_.My||"",uid:r||null}),[r]);return(0,l.jsx)(eK.j,{THEMIS_AUTH_HEADER_MAP:eX,enabled:!i,themisConfig:s,enableLocalCache:!0,children:t})};var eG=i(5437),eq=i(23779),eQ=i.n(eq),eJ=i(89783),e0=i(7013);let e1=(e,t)=>{switch(e){case"traditional":return t?"traditional-reverse":"traditional";case"cvd":return t?"cvd-reverse":"cvd";default:return"traditional"}},e2=(e,t)=>{let{colorMode:i,isRedUpGreenDown:r}=t,s="light"===e?eJ.R2:"dark"===e?eJ._4:eJ.jN,a="light"===e?e0.XQ:"dark"===e?e0.k$:e0.Bk,o=e1(i,r),l={...s,..."fresh"===i?{}:a[o]};return{overallBg:l.SecondaryBg,moduleBg:l.BasicBg,modalBg:l.CardBg,modal:l.CardBg,popBg:l.CardBg,newLine:l.Line,lineForK:l.Line,slider:{line:l.Line},icons:{close:l.IconNormal},tagBg:l.BadgeBg,success:l.Success,successBg:l.SuccessBg,error:l.Error,errorBg:l.ErrorBg,t:{emphasize:l.EmphasizeText,primary:l.PrimaryText,secondary:l.SecondaryText,third:l.TertiaryText,disabled:l.DisabledText,white:l.RedGreenBgText,yellow:l.TextLink,buy:l.TextBuy,sell:l.TextSell},buy:l.Buy,buyHover:l.BuyHover,depthBuyBg:l.DepthBuyBg,sell:l.Sell,sellHover:l.SellHover,depthSellBg:l.DepthSellBg}},e5={lightTheme:{colors:e2("light",{colorMode:"fresh",isRedUpGreenDown:!1})},lightTrdTheme:{colors:e2("light",{colorMode:"traditional",isRedUpGreenDown:!1})},lightCVDTheme:{colors:e2("light",{colorMode:"cvd",isRedUpGreenDown:!1})},reversedLightTheme:{colors:e2("light",{colorMode:"fresh",isRedUpGreenDown:!0})},reversedLightTrdTheme:{colors:e2("light",{colorMode:"traditional",isRedUpGreenDown:!0})},reversedLightCVDTheme:{colors:e2("light",{colorMode:"cvd",isRedUpGreenDown:!0})},darkTheme:{colors:e2("dark",{colorMode:"fresh",isRedUpGreenDown:!1})},darkTrdTheme:{colors:e2("dark",{colorMode:"traditional",isRedUpGreenDown:!1})},darkCVDTheme:{colors:e2("dark",{colorMode:"cvd",isRedUpGreenDown:!1})},reversedDarkTheme:{colors:e2("dark",{colorMode:"fresh",isRedUpGreenDown:!0})},reversedDarkTrdTheme:{colors:e2("dark",{colorMode:"traditional",isRedUpGreenDown:!0})},reversedDarkCVDTheme:{colors:e2("dark",{colorMode:"cvd",isRedUpGreenDown:!0})},midnightTheme:{colors:e2("midnight",{colorMode:"fresh",isRedUpGreenDown:!1})},midnightTrdTheme:{colors:e2("midnight",{colorMode:"traditional",isRedUpGreenDown:!1})},midnightCVDTheme:{colors:e2("midnight",{colorMode:"cvd",isRedUpGreenDown:!1})},reversedMidnightTheme:{colors:e2("midnight",{colorMode:"fresh",isRedUpGreenDown:!0})},reversedMidnightTrdTheme:{colors:e2("midnight",{colorMode:"traditional",isRedUpGreenDown:!0})},reversedMidnightCVDTheme:{colors:e2("midnight",{colorMode:"cvd",isRedUpGreenDown:!0})}};var e3=i(98537),e6=i.n(e3);let e4=new Map,e8=(e,...t)=>{if(e4.has(e))return e4.get(e);let i=e6()({},...t);return e4.set(e,i),i};var e7=i(78937);let e9={colors:{},breakpoints:["767px","1023px","1279px"],zIndices:{notification:1e5}};var te=i(94979),tt=i(83765);let ti={colors:{moduleBg:"#161A1E",board:te.BA["900"],quizBoard:"#14151a",inputBg:te.BA["700"],empty:"rgb(38,38,38)",control:te.BA["700"],marketCard:"#1B1F25",opacityBg:"rgba(255, 255, 255, 0.04)",tradeSwitchBg:"#3C2E10",closeHoverBg:te.BA["300"],line:"#474D57",newLine:"#252930",tagBg:"#36321D",overallBg:"#2B313A",t:{thead:"#84849C",tbody:"#FFFFFF",fourth:te.BA["200"],grey200:te.BA["200"],fifth:te.BA["100"],grey0:te.BA["0"],grey5:te.BA["5"],grey10:te.BA["10"],grey50:te.BA["50"],grey100:te.BA["100"],grey300:te.BA["300"],grey400:te.BA["400"],grey500:te.BA["500"],grey600:te.BA["50"],grey700:te.BA["700"],yellow5:te.er["5"],yellow50:te.er["50"],yellow300:te.er["300"],yellow400:te.er["400"],yellow500:te.er["500"],yellow200:te.er["200"],yellow600:te.er["600"],yellow700:te.er["700"],yellow800:te.er["800"],grey800:te.BA["800"],grey900:te.BA["900"],grey60:te.BA["600"],green400:te.ek["400"],emphasize:"#D77843"},themeConfig:{primary:te.BA["50"],secondary:te.BA["200"],error:te.Q6["500"],grey0:te.BA["0"],grey5:te.BA["5"],grey50:te.BA["50"],grey300:te.BA["300"],grey600:te.BA["600"],grey700:te.BA["700"],grey800:te.BA["800"],grey900:te.BA["900"],grey1000:te.BA["1000"]},noticeBg:te.er["700"],noticeText:te.BA["50"],orderformBg:"#1e2026",componentBg:"#1B1D23",buy:te.ek["400"],sell:te.Q6["400"],icon:{close:"#3D4653"},risk:{low:te.ek["400"],medium:"#FF7E0D",high:te.Q6["400"],force:te.Q6["400"]},hovers:{primary:"rgb(38, 38, 38)"},lines:{light:te.BA["900"],border:te.BA["700"],minorBorder:te.BA["600"],secondBorder:"#1F2124",inputBorder:"grey[700]",divider:te.BA["700"]},modalErr:{bg:te.Q6["800"],border:"#96475C",icon:te.Q6["400"]},tabs:{bg:"#14151A",active:te.BA["800"],hover:te.BA["50"]},dropdown:{bg:te.BA["800"],bg2:te.BA["700"],bg3:"#2D3136",hoverBg:te.BA["600"]},table:{timeColor:te.BA["300"],color:te.BA["50"]},dialog:{bg:te.BA["800"],panelBg:te.BA["700"],panelInputBorder:te.BA["600"]},orderItemBg:te.er["600"],orderItemColor:te.er["200"],bg2:"rgba(0, 0, 0, 0.5)",bg3:"#2D3136",radio:{gray:"#ccc"},textField:{color:te.BA["0"],bg:te.BA["500"]},formInputBg:{bg:"rgba(43, 47, 54, 0.9)",border:"rgba(43, 47, 54, 0.8)"},button:{buyBg:te.ek["400"],buyHover:"#2ED191",sellBg:te.Q6["400"],sellHover:"#FF4265",disabledBg:"#48515D",disabledColor:"#848E9C",switchBorder:te.BA["600"],downloadBg:te.BA["600"]},ticker:{gradColor:te.BA["50"]},tradeSwitch:{bg:te.BA["700"],activeBg:"rgba(106,76,12,0.5)",color:te.BA["300"],activeColor:te.er["200"]},progressBar:{bg:te.BA["700"]},smartSlider:{progress:"#FFFFFF",stepperBg:"#48515D",stepperDisabledBg:te.BA["800"],stepperDisabledBorder:"rgba(43, 47, 54, 0.5)",barBg:"#2A2F37",ratioBBg:"#1E2126",scaleColor:"#848E9C",disabledBarBg:"rgba(43, 47, 54, 0.5)",scaleDisabledColor:te.BA["600"],tipColor:"#1E2126"},marginStep:{bg:te.BA["800"],border:te.BA["800"]},orderBook:{rowColor:te.BA["100"],hoverBg:te.BA["800"],statusGreenColor:te.ek["400"],askColor:te.Q6["400"],askDarkColor:te.Q6["600"],askBarColor:te.Q6["400"],bidColor:te.ek["400"],bidDarkColor:te.ek["600"],bidBarColor:te.ek["400"],moreIconColor:te.BA["50"]},marketColumn:{hover:"rgba(255, 255, 255, 0.04)"},orderformBtn:{bg:"none",borderColor:te.BA["600"],color:te.BA["300"]},orderformBtnHover:{bg:te.er["700"],borderColor:te.er["600"],color:te.BA["50"],labelBg:te.BA["600"]},filterDropdown:{bg:te.BA["700"],color:te.BA["50"],listHoverBg:te.BA["600"],listActive:te.er["200"],listMarketTabHover:te.BA["600"],intervalOption:{untoggled:{normal:"rgba(71,77,87,0.5)",hover:te.BA["600"]},toggled:{normal:"rgba(240, 185, 11, 0.15)",hover:"rgba(240, 185, 11, 0.3)"},checkbox:{uncheck:te.BA["500"],checked:"linear-gradient(90deg, #FCD535 0%, #F0B90B 100%)",checkmark:te.BA["700"]}}},orderForm:{leverageLabelColor:"#848E9C",lARColor:"#848E9C",lARBg:"rgba(255, 255, 255, 0.04)",lARBorder:"#48515D",btnOutlineColor:"#FFFFFF",btnOutlineBdColor:"#48515D",textFieldBg:"#14151a",textFieldBgDisabled:"#2B2F36",tooltipColor:te.BA["300"],tooltipHoverColor:te.er["300"],dialogContainerBg:te.BA["800"],marginTypeCloseColor:te.BA["500"],marginTypeCloseHColor:te.BA["300"],marginTypeTipBlockBg:te.BA["700"],marginTypeTipBlock:te.BA["300"],advancedIconColor:te.BA["300"],advancedBg:te.BA["800"],advancedDropPlaceBorder:te.BA["600"],advancedDropdownBg:te.BA["700"],advancedDropdownHBg:te.BA["600"],strategyBorderBottom:te.BA["700"],advancedDropdownColor:te.BA["50"],advancedDropdownFill:te.BA["300"],placeOrder:"#fff",positionDirectionBorder:te.BA["600"],horizontalPositionDirectionBorder:"#F0B90B",leverageBg:te.BA["600"],strategyTextDisable:te.BA["600"],line:"rgba(71, 77, 87, 0.3)"},multiple:{border:te.er["600"],color:te.er["300"]},inputNumber:{btnBg:"#39404A",btnColor:"#C4C4C4",btnHoverBg:"#48515D",fieldBg:"#48515D"},calculator:{dialogBg:"#1E2126",resultBg:te.BA["700"],resultBgMobile:"#212833",labelColor:te.BA["200"],tabBtColor:"rgba(255,255,255, 0.08)",closeColor:"#EAECEF",tabBdColor:"#474D57",sliderTipColor:"#212833",sliderLabelColor:te.BA["50"],inputPrefixColor:te.BA["300"],panelColor:"#848E9C",sliderBg:"#48515D",inputColor:"#FFF !important",inputBorderColor:te.BA["600"],inputBorderColorMobile:"#333",numberColor:"#FFFFFF",dropBoxBg:"rgba(72,81,93,0.15)",dropBoxActiveBg:te.BA["600"],dropBoxItemColor:"#FFFFFF",dropBoxItemBg:te.BA["700"],dropBoxTitleColor:te.BA["50"],dropBoxTitleColorMobile:te.BA["0"],openPriceInputBg:te.BA["700"],containerBorderColor:"#0B0E11",closeIconColor:te.BA["500"],closeIconActiveColor:te.BA["300"],inputAssetLabelBg:"#2b2f36"},commonDialog:{color:te.BA["100"],bg:te.BA["700"],deepBg:te.BA["800"],opacityBg:"rgba(43, 47, 54, 0.9)",opacity5Bg:"rgba(43, 47, 54, 0.5)",labelColor:te.BA["300"],labelActiveBg:te.BA["700"],lightColor:te.BA["50"],titleColor:te.BA["200"],contentColor:te.BA["200"],descColor:te.BA["400"],tipColor:te.BA["400"],borderColor:te.BA["600"],borderLineColor:te.BA["700"],discaimerColor:te.BA["400"]},position:{leverageColor:te.BA["50"],leverageBorderColor:te.er["200"],limitOrdersColor:te.BA["0"],limitOrdersBg:te.BA["700"],percentInputBorderColor:te.BA["600"],buttonActiveBorderColor:te.er["200"],buttonActiveBg:te.er["700"],closePositionColor:te.er["200"],closePositionActiveColor:te.er["300"]},assets:{cellBorder:"rgba(43,47,54, 0.5)",mBorder:"rgba(71,77,87, 0.5)"},marketActivities:{empty:te.BA["50"]},optionsTutorial:{bg:"#12171d",drawerBg:"#1a1f28",tipColor:"#E5E5E5",finishedBg:"rgba(240, 185, 11, 0.5)",radioColor1:"rgba(255, 255, 255, 0.5)",radioColor2:"#888a8d",radioActivedBg1:"rgba(240, 185, 11, 0.15)",radioActivedBg2:"rgba(240, 185, 11, 0.1)",radioActivedBg3:"rgba(72, 81, 93, 0.5)"},orderbookTickerBg:te.BA["800"],tradingRules:{titleColor:te.BA["50"],titleLineColor:"#2B2F36",closeColor:te.BA["500"],rulesColor:te.BA["50"],labelColor:te.BA["300"],labelHoverColor:te.er["300"],viewMoreColor:te.er["200"]},icons:{loadingFill:te.BA["200"],loadingTxt:te.BA["50"],loadingBg:te.BA["700"]},unitDialog:{tip:"#848E9C",bg:te.BA["800"],labelBorder:te.BA["600"]},delist:{bg:"#3C2E10",color:"#E6E8EA",borderColor:"#665A28"},preference:{titleColor:"#E6E7EA",cancelButton:"#474D57",cancelButtonTextColor:"#EAECEF"},amountBorderColor:te.BA["1000"],flashOrder:{bg:"#2B2F36",iconColor:te.BA["300"],buyButtonBg:te.ek["800"],sellButtonBg:te.Q6["800"],hoverBuyButtonBg:te.ek["500"],hoverSellButtonBg:te.Q6["500"],tradeButtonTitleColor:"rgba(255, 255, 255, 0.6)",tradeButtonTextColor:"#FFFFFF",inputTitleColor:"#929AA5",inputTextColor:"#E6E8EA",percentBg:"rgba(25, 27, 32, 0.8)",percentStepperColor:te.BA["300"],percentStepperBg:te.BA["700"],percentStepperActiveBg:te.BA["200"]},marketTabs:{hoverBg:"#2B2F36",fontcolor:"#E6E8EA"},threeSquare:{bg:"#5E6673",hoverBg:"#EAECEF",tickerPreferncebg:"#2B3139"},subHeader:{borderColor:"#474D57"},slider:{line:"#474D57"}},tabs:{"trade-next":{tab:{color:"t.grey300"}}},shadows:{outlineBtnShadow:"inset 0 0 0 1px #48515D",inputNumber:{btnShadow:"inset 0 0 0 1px #39404A"},shadow1:"inset 0px -1px 0px #212833",selectShadow:"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 7px 14px rgba(71, 77, 87, 0.08), 0px 3px 6px rgba(20, 21, 26, 0.08)",boxShadow:"0px 2px 16px rgba(0, 0, 0, 0.25)",preference:{header:"inset 0px -1px 0px #2B2F36",navigation:"0px 2px 8px rgba(0, 0, 0, 0.25)",shadow:"0px 16px 32px rgba(0, 0, 0, 0.16), 0px 8px 16px rgba(0, 0, 0, 0.16), inset 0px 0px 2px rgba(94, 102, 115, 0.9)"},elevation2:"0px 7px 14px rgba(0, 0, 0, 0.08), 0px 3px 6px rgba(0, 0, 0, 0.08), inset 0px 0px 1px rgba(94, 102, 115, 0.9)"},tradeSwitch:{bg:te.BA["50"],activeBg:te.er["200"],color:te.BA["600"],activeColor:te.BA["800"]},marketColor:{switchActiveBg:te.er["600"]},checkbox:{"checkIcon:hover":te.BA["0"]}},tr=()=>e8("darkTheme",tt.Z,ti),ts=()=>e8("cvdFinanceDark",tr(),e7.pp,e9);var ta=i(70600);let to={colors:{moduleBg:te.BA["5"],board:te.BA["10"],quizBoard:"#fff",empty:"rgb(247,247,247)",inputBg:"#F2F3F5",control:te.BA["50"],marketCard:"#FFFFFF",opacityBg:"rgba(255, 255, 255, 0.04)",tradeSwitchBg:"#FEF6D8",closeHoverBg:te.BA["800"],popupBg:"#fff",line:"#EAECEF",newLine:"#EEF0F2",tagBg:"#F9F4E2",overallBg:te.BA["50"],t:{thead:"#84849C",tbody:"#212833",fourth:te.BA["600"],fifth:te.BA["600"],grey0:te.BA["0"],grey10:te.BA["10"],grey50:te.BA["50"],grey100:te.BA["600"],grey200:te.BA["200"],grey300:te.BA["300"],grey400:te.BA["400"],grey500:te.BA["500"],grey600:te.BA["600"],grey700:"#E6E8EA",yellow5:te.er["5"],yellow50:te.er["50"],yellow300:te.er["300"],yellow400:te.er["400"],yellow500:te.er["500"],yellow200:te.er["200"],yellow600:te.er["600"],yellow700:te.er["700"],yellow800:te.er["800"],grey60:te.BA["600"],grey800:te.BA["800"],grey900:te.BA["900"],green400:te.ek["400"],emphasize:"#E79255"},themeConfig:{primary:te.BA["800"],secondary:te.BA["200"],grey0:te.BA["0"],grey5:te.BA["5"],grey50:te.BA["50"],grey600:te.BA["600"],grey700:te.BA["700"],grey800:te.BA["800"],grey900:te.BA["900"],grey1000:te.BA["1000"]},noticeBg:"#FEF6D8",noticeText:"#1E2329",orderformBg:"#fff",componentBg:"#FAFAFA",buy:te.ek["400"],sell:te.Q6["400"],iconColor:"#CACED3",icon:{close:"#C6CAD0"},risk:{low:te.ek["400"],medium:"#FF7E0D",high:te.Q6["400"],force:te.Q6["400"]},progressBar:{bg:te.BA["10"]},hovers:{primary:"rgb(253, 247, 236)"},lines:{light:te.BA["50"],border:te.BA["50"],minorBorder:te.BA["50"],secondBorder:te.BA["10"],inputBorder:te.BA["100"],divider:"#f5f5f5"},modalErr:{bg:te.Q6["10"],border:te.Q6["100"],icon:te.Q6["500"]},orderItemBg:te.er["200"],orderItemColor:te.BA["800"],tabs:{bg:"#F5F5F5",active:"#FFFFFF",hover:te.BA["800"]},dropdown:{bg:"#F5F5F5",bg2:te.BA["0"],bg3:te.BA["50"],hoverBg:te.BA["50"]},dialog:{bg:"#F5F5F5",panelBg:te.BA["10"],panelInputBorder:te.BA["200"]},bg2:"#fafafa",bg3:"#F5F5F5",radio:{gray:"#ccc"},textField:{color:te.BA["0"],bg:te.BA["500"]},formInputBg:{bg:"rgba(230,232,234,0.6)",border:"rgba(230,232,234,0.1)"},button:{buyBg:te.ek["400"],buyHover:"#2ED191",sellBg:te.Q6["400"],sellHover:"#FF4265",disabledBg:"#F5F5F5",disabledColor:"#CACACA",switchBorder:te.BA["50"],downloadBg:"#FFFFFF"},orderformBtn:{bg:"none",borderColor:te.BA["50"],color:te.BA["400"]},orderformBtnHover:{bg:te.er["5"],borderColor:te.er["50"],color:te.BA["800"],labelBg:te.BA["50"]},ticker:{gradColor:te.BA["600"]},tradeSwitch:{bg:te.BA["50"],activeBg:te.er["200"],color:te.BA["600"],activeColor:te.BA["800"]},smartSlider:{progress:"#212833",stepperBg:"#EAECEF",stepperDisabledBg:"#FFFFFF",stepperDisabledBorder:"#EAECEF",barBg:"#EAECEF",ratioBBg:"#FFFFFF",scaleColor:"#848E9C",disabledBarBg:"rgba(234, 236, 239, 0.5)",scaleDisabledColor:"#CCCCCC",tipColor:"#FFFFFF"},orderBook:{rowColor:te.BA["600"],hoverBg:"#F5F5F5",statusGreenColor:te.ek["500"],askColor:te.Q6["500"],askDarkColor:te.Q6["300"],askBarColor:te.Q6["500"],bidColor:te.ek["500"],bidDarkColor:te.ek["300"],bidBarColor:te.ek["500"],moreIconColor:te.BA["600"]},table:{timeColor:te.BA["400"],color:te.BA["800"]},orderRow:{color:te.BA["600"]},marketColumn:{hover:te.BA["10"]},filterDropdown:{bg:te.BA["0"],color:te.BA["800"],listHoverBg:te.BA["50"],listActive:te.er["300"],listMarketTabHover:te.BA["5"],intervalOption:{untoggled:{normal:te.BA["10"],hover:te.BA["50"]},toggled:{normal:"rgba(240, 185, 11, 0.15)",hover:"rgba(240, 185, 11, 0.3)"},checkbox:{uncheck:te.BA["200"],checked:"linear-gradient(90deg, #FCD535 0%, #F0B90B 100%)",checkmark:"#fff"}}},orderForm:{leverageLabelColor:"#48515D",lARColor:"rgb(146, 154, 165)",lARBg:"rgba(0, 0, 0, 0.02)",lARBorder:"#E5E5E5",textFieldBg:"#fff",textFieldBgDisabled:"#F5F5F5",tooltipColor:te.BA["400"],tooltipHoverColor:te.er["300"],dialogContainerBg:te.BA["0"],marginTypeCloseColor:te.BA["200"],marginTypeCloseHColor:te.BA["400"],marginTypeTipBlockBg:"#EAECEF",marginTypeTipBlock:"#000",advancedIconColor:te.BA["400"],advancedBg:te.BA["5"],advancedDropPlaceBorder:te.BA["100"],advancedDropdownBg:te.BA["0"],advancedDropdownHBg:te.BA["10"],strategyBorderBottom:te.BA["50"],advancedDropdownColor:te.BA["800"],advancedDropdownFill:te.BA["400"],placeOrder:te.BA["800"],positionDirectionBorder:te.BA["50"],horizontalPositionDirectionBorder:te.BA["50"],leverageBg:te.BA["600"],strategyTextDisable:te.BA["200"],line:"rgba(234, 236, 239, 0.8)"},multiple:{border:te.er["50"],color:te.er["200"]},inputNumber:{fieldBg:"#F2F2F2"},calculator:{dialogBg:"#FFFFFF",resultBg:"#F4F5F7",resultBgMobile:"#EAECEF",labelColor:"#48515D",tabBtColor:"#EAECEF",closeColor:"#212833",tabBdColor:"#E6E8EA",sliderTipColor:te.BA["0"],sliderLabelColor:"#848E9C",inputPrefixColor:te.BA["200"],panelColor:"#848E9C",sliderBg:"#EAECEF",inputColor:"#848E9C !important",inputBorderColor:te.BA["100"],inputBorderColorMobile:"#EAECEF",numberColor:"#212833",dropBoxBg:"#EAECEF",dropBoxActiveBg:"#EAECEF",dropBoxItemColor:te.BA["800"],dropBoxItemBg:te.BA["0"],dropBoxTitleColor:"#848E9C",dropBoxTitleColorMobile:"#848E9C",openPriceInputBg:te.BA["0"],containerBorderColor:"#EAECEF",closeIconColor:te.BA["200"],closeIconActiveColor:te.BA["400"],inputAssetLabelBg:"rgba(11, 14, 17, 0.03)"},commonDialog:{color:te.BA["600"],bg:te.BA["0"],deepBg:te.BA["0"],opacityBg:"rgba(255, 255, 255, 0.9)",opacity5Bg:te.BA["5"],labelColor:te.BA["400"],labelActiveBg:te.BA["10"],lightColor:te.BA["800"],titleColor:te.BA["500"],contentColor:te.BA["600"],descColor:te.BA["600"],tipColor:te.BA["300"],borderColor:te.BA["50"],borderLineColor:te.BA["10"],discaimerColor:te.BA["100"]},position:{leverageColor:te.BA["800"],leverageBorderColor:te.BA["100"],limitOrdersColor:te.BA["800"],limitOrdersBg:te.BA["0"],percentInputBorderColor:te.BA["100"],buttonActiveBorderColor:te.er["50"],buttonActiveBg:te.er["5"],closePositionColor:te.er["300"],closePositionActiveColor:te.er["300"]},assets:{cellBorder:"rgba(230,232,234, 0.5)",mBorder:"rgba(230,232,234, 0.5)"},marketActivities:{empty:te.BA["400"]},marginStep:{bg:"#fff",border:"#EAECEF"},orderbookTickerBg:te.BA["10"],tradingRules:{titleColor:"#1E2026",titleLineColor:"#E6E8EA",closeColor:"#AEB4BC",rulesColor:te.BA["800"],labelColor:te.BA["400"],labelHoverColor:te.er["300"],viewMoreColor:te.er["300"]},icons:{loadingFill:te.BA["200"],loadingTxt:te.BA["400"],loadingBg:te.BA["0"]},unitDialog:{tip:"#848E9C",bg:te.BA["0"],labelBorder:te.BA["100"]},delist:{bg:"#FEF6D8",color:"t.primary",borderColor:"#F0B90B"},preference:{titleColor:te.BA["800"],cancelButton:"#EAECEF",cancelButtonTextColor:"#1E2329"},amountBorderColor:te.BA["200"],flashOrder:{bg:"#FFFFFF",iconColor:te.BA["400"],buyButtonBg:te.ek["50"],sellButtonBg:te.Q6["50"],hoverBuyButtonBg:te.ek["300"],hoverSellButtonBg:te.Q6["300"],tradeButtonTitleColor:"rgba(30, 32, 38, 0.6)",tradeButtonTextColor:"#1E2026",inputTitleColor:"#5E6673",inputTextColor:"#1E2026",percentBg:"rgba(250, 250, 250, 0.8)",percentStepperColor:te.BA["400"],percentStepperBg:te.BA["200"],percentStepperActiveBg:te.BA["800"]},marketTabs:{hoverBg:"#EAECEF",fontcolor:"#474D57"},threeSquare:{bg:"#707A8A",hoverBg:"#1E2329",tickerPreferncebg:"#fff"},subHeader:{borderColor:"#EAECEF"},slider:{line:"#DCE0E5"}},tabs:{"trade-next":{tab:{color:"t.grey300"}}},shadows:{shadow1:"inset 0px -1px 0px #E6E8EA",selectShadow:"0px 2px 16px rgba(0, 0, 0, 0.25)",boxShadow:"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 7px 14px rgba(71, 77, 87, 0.08), 0px 3px 6px rgba(20, 21, 26, 0.08)",preference:{header:"inset 0px -1px 0px #E6E8EA",navigation:"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 3px 6px rgba(71, 77, 87, 0.04), 0px 1px 2px rgba(20, 21, 26, 0.04)",shadow:"0px 0px 1px rgba(24, 26, 32, 0.1), 0px 16px 32px rgba(71, 77, 87, 0.16), 0px 8px 16px rgba(24, 26, 32, 0.16)"},boxShadowTicker:"0px 0px 1px rgba(24, 26, 32, 0.1), 0px 7px 14px rgba(71, 77, 87, 0.08), 0px 3px 6px rgba(24, 26, 32, 0.08)",elevation2:"0px 0px 1px rgba(24, 26, 32, 0.1), 0px 7px 14px rgba(71, 77, 87, 0.08), 0px 3px 6px rgba(24, 26, 32, 0.08)"},tradeSwitch:{bg:te.BA["700"],activeBg:"rgba(106,76,12,0.5)",color:te.BA["300"],activeColor:te.er["200"]},marketColor:{switchActiveBg:te.er["200"]},checkbox:{"checkIcon:hover":te.BA["800"]}},tl=()=>e8("lightTheme",ta.Z,to),tn=()=>e8("cvdFinanceLight",tl(),e7.jP,e9),td=()=>e8("cvdFinanceMidnight",tr(),e7.pp,e9),tc=()=>e8("financeDark",tr(),e7._4,e9),th=()=>e8("financeLight",tl(),e7.R2,e9),tu=()=>e8("financeMidnight",tr(),e7._4,e9),tg="#EA0070",tm="#74A700",tp={colors:{buy:tm,sell:tg,success:tm,t:{buy:tm,sell:tg,success:tm},risk:{low:"#74A700",medium:"#FF7E0D",high:"#EA0070",force:"#EA0070"},button:{buyBg:tm,buyHover:"#89B537",sellBg:tg,sellHover:"#EC357B"},tradeWidget:{orderbookAskColor:tg,orderbookStatusGreenColor:tm,orderbookBidColor:tm,orderbookAskBarColor:tg,orderbookAskDarkColor:tg,orderbookBidBarColor:tm,orderbookBidDarkColor:tm}}},tx=()=>e8("trdlFinanceDark",tc(),e7.YE,tp,e9),tf="#EA0070",tb="#74A700",ty={colors:{buy:tb,sell:tf,success:tb,t:{buy:tb,sell:tf,success:tb},risk:{low:"#74A700",medium:"#FF7E0D",high:"#EA0070",force:"#EA0070"},button:{buyBg:tb,buyHover:"#89B537",sellBg:tf,sellHover:"#EC357B"},tradeWidget:{orderbookAskColor:tf,orderbookStatusGreenColor:tb,orderbookBidColor:tb,orderbookAskBarColor:tf,orderbookAskDarkColor:tf,orderbookBidBarColor:tb,orderbookBidDarkColor:tb}}},tv=()=>e8("trdlFinanceLight",th(),e7.it,ty,e9),tC=()=>e8("trdlFinanceMidnight",tu(),e7.YE,tp,e9),tw=e=>{let t=e.colors.buy,i=e.colors.sell,r=e.colors.buyHover,s=e.colors.sellHover,a=e.colors.t.buy,o=e.colors.t.sell,l=e.colors.depthBuyBg,n=e.colors.depthSellBg,d=e.colors.button.buyHover,c=e.colors.button.buyActiveBg,h=e.colors.button.sellHover,u=e.colors.button.sellActiveBg,g=e.colors.orderBook.bidColor,m=e.colors.orderBook.bidDarkColor,p=e.colors.orderBook.askColor,x=e.colors.orderBook.askDarkColor,f=e.colors.flashOrder.buyButtonBg,b=e.colors.flashOrder.sellButtonBg,y=e.colors.flashOrder.hoverBuyButtonBg,v=e.colors.flashOrder.hoverSellButtonBg;return e6()({},e,{colors:{buy:i,sell:t,buyHover:s,sellHover:r,depthBuyBg:n,depthSellBg:l,t:{buy:o,sell:a},button:{buyBg:i,buyHover:h,buyActiveBg:u,sellBg:t,sellHover:d,sellActiveBg:c},flashOrder:{buyButtonBg:b,hoverBuyButtonBg:v,sellButtonBg:f,hoverSellButtonBg:y},orderBook:{askColor:g,askDarkColor:m,askBarColor:g,bidColor:p,bidDarkColor:x,bidBarColor:p},tradeWidget:{orderbookAskColor:t,orderbookAskBarColor:t,orderbookAskDarkColor:t,orderbookBidColor:i,orderbookBidBarColor:i,orderbookBidDarkColor:i}}})},tS={lightCVDTheme:e=>e8("variantAndLightCVDTheme",tn(),e?.variants||{}),lightTheme:e=>e8("variantAndLightTheme",th(),e?.variants||{}),lightTrdTheme:e=>e8("variantAndLightTrdTheme",tv(),e?.variants||{}),darkCVDTheme:e=>e8("variantAndDarkCVDTheme",ts(),e?.variants||{}),darkTheme:e=>e8("variantAndDarkTheme",tc(),e?.variants||{}),darkTrdTheme:e=>e8("variantAndDarkTrdTheme",tx(),e?.variants||{}),midnightCVDTheme:e=>e8("variantAndMidnightCVDTheme",td(),e?.variants||{}),midnightTheme:e=>e8("variantAndMidnightTheme",tu(),e?.variants||{}),midnightTrdTheme:e=>e8("variantAndMidnightTrdTheme",tC(),e?.variants||{}),reversedLightTheme:e=>tw(e8("variantAndReversedLightTheme",th(),e?.variants||{})),reversedDarkTheme:e=>tw(e8("variantAndReversedDarkTheme",tc(),e?.variants||{})),reversedMidnightTheme:e=>tw(e8("variantAndReversedMidnightTheme",tu(),e?.variants||{})),reversedLightTrdTheme:e=>tw(e8("variantAndReversedLightTrdTheme",tv(),e?.variants||{})),reversedDarkTrdTheme:e=>tw(e8("variantAndReversedDarkTrdTheme",tx(),e?.variants||{})),reversedMidnightTrdTheme:e=>tw(e8("variantAndReversedMidnightTrdTheme",tC(),e?.variants||{})),reversedLightCVDTheme:e=>tw(e8("variantAndReversedLightCVDTheme",tn(),e?.variants||{})),reversedDarkCVDTheme:e=>tw(e8("variantAndReversedDarkCVDTheme",ts(),e?.variants||{})),reversedMidnightCVDTheme:e=>tw(e8("variantAndReversedMidnightCVDTheme",td(),e?.variants||{}))},tT=e=>tS[e]||tS.darkTheme,tA=({theme:e,colorMode:t,isRedUpGreenDown:i})=>{let r="";return e.startsWith("light")?r="light":e.endsWith("_midnight")?r="midnight":e.startsWith("dark")&&(r="dark"),"traditional"===t?r=`${r}Trd`:"cvd"===t&&(r=`${r}CVD`),i&&(r=`reversed${eQ()(r)}`),`${r}Theme`},t_=({theme:e="dark",colorMode:t="fresh",isRedUpGreenDown:i=!1},r)=>{let s=tA({theme:e,colorMode:t,isRedUpGreenDown:i}),a=tT(s)(r);return e8(`custom${s}`,a,e5[s],r?.customTheme||{})},tL=e=>{let{children:t}=e,i=(0,Q.tZ)(),{theme:r,isRUGD:s,colorMode:a}=ej();return(0,l.jsx)(eG.Z,{theme:t_({theme:r,colorMode:a,isRedUpGreenDown:s}),dir:(0,Z.c)(i),children:t})};var tk=i(27503),tI=i(44483),tP=i(51081);let tE=e=>{let{pathPrefix:t,isRegionMode:i,locale:r,...s}=e,{theme:a,isRUGD:o,isCVD:n,colorMode:d}=ej(),{isRTL:c}=(0,Q.LP)(),{themeColors:h,themeExtraColors:u,mode:g}=(0,tk.L)(a);return(0,l.jsx)(tI.Z,{mode:g,themeColors:h,themeExtraColors:u,isRTL:c,isCVD:n,lang:r,pathPrefix:t,level2Domain:_.CD,isRegionMode:i,isReverse:o,colorMode:d===ek?ek:eI,children:(0,l.jsx)(tP.ZP,{children:s.children})})};var tB=i(80161),tN=i(23286),tM=i(55227),tD=i(20321),tV=i(34757),tj=i(65037);(0,tB.F7)(tM.V),(0,tB.F7)(tV.j),(0,tB.F7)(tj.Su),(0,tB.F7)(tD.Wk);let tR=e=>{(0,tN.oO)({clientType:"web",isHttp:!0,sourceUrl:`${_.Ij}/market`,track:()=>{},getSessionInfo:()=>new Promise(e=>{e({"bnc-uuid":eR.Q.read("bnc-uuid")??void 0,lang:eR.Q.read("lang")??void 0,cr00:eR.Q.read("cr00")??void 0})})}).then(()=>{e&&e(!0)})},tO=e=>{let{locale:t,pathPrefix:i,children:r,isRegionMode:s}=e,{isMobile:a}=(0,el.F)(),o=(0,en._n)(),n=(0,en.Pc)(),d=(0,ed.P)(e=>e.setIsInit),c=(0,q.G)(e=>e.setNotificationConfig);return(0,D.useEffect)(()=>{tR(d)},[d]),(0,D.useEffect)(()=>{c({anchorOrigin:{vertical:a?"top":"bottom",horizontal:"right"},autoHideDuration:4500})},[a,c]),(0,l.jsx)(Q.bd,{defaultNS:"alpha-ui",namespaces:er,serverLang:t,clientI18nBasePath:(0,h.B8)().I18N_BASE_PUBLIC||"",children:(0,l.jsx)(ex,{children:(0,l.jsx)(ei,{getSDK:es.Cu,isLoggedIn:!!o,userInfo:n,children:(0,l.jsx)(eo,{getSDK:es.X5,children:(0,l.jsx)(X.zt,{store:eg,children:(0,l.jsx)(eY,{children:(0,l.jsx)(tL,{children:(0,l.jsx)(tE,{locale:t,isRegionMode:s,pathPrefix:i,children:(0,l.jsx)(Y.Z,{queueSize:2,closable:!0,autoHideDuration:4500,anchorOrigin:{vertical:a?"top":"bottom",horizontal:"right"},children:(0,l.jsxs)(l.Fragment,{children:[r,G.Sq,(0,l.jsx)(ez,{})]})})})})})})})})})})};var tF=i(38449),tH=i(89802),tZ=i(777);let tU=(0,tZ.U)(e=>({chatWidgetInstance:void 0,setLoadLoadChat:t=>e(()=>({chatWidgetInstance:t}))}));var tW=i(44637),t$=i(78369),tz=i(34406);let tK=()=>{let{t:e}=(0,tF.cK)(),{targetToken:t}=(0,j.s)({from:"__root__"}),i=e("alpha-seo-title",{defaultValue:"{{price}} | {{token}} USD | Alpha Trade",price:(0,tW.Dn)((null==t?void 0:t.price)||"0",t$.Bu.HIGH_LOWEST),token:null==t?void 0:t.symbol}),r=e("alpha-seo-description-v2",{token:null==t?void 0:t.symbol,defaultValue:"Trade {{token}} USD on Binance Alpha. We offer users a streamlined process for rapidly trading Web3 tokens without the need to create a personal Web3 account."}),s=e("alpha-seo-keywords",{defaultValue:"Binance Alpha trading, Web3 Wallet, Dex, Decentralized Wallet, Alpha Listing, Web3 Token Price, Decentralized Crypto Trading, Trade on Chain, Ethereum Chain, BSC Chain, Base Chain, Solona Chain, Memecoin"});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("title",{children:i}),(0,l.jsx)("meta",{name:"keywords",content:s}),(0,l.jsx)("meta",{name:"description",content:r})]})},tX=(0,H.uM)({head:()=>({meta:[{charSet:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{httpEquiv:"etag",content:tz.env.COMMIT_HEAD}],links:[{rel:"shortcut icon",href:`${(0,h.B8)().STATIC_HOST||""}/static/images/common/favicon.ico`}]}),errorComponent:e=>(0,l.jsx)(z,{...e}),notFoundComponent:()=>(0,l.jsx)(K,{}),component:"undefined"==typeof window?function(){let{basepath:e,locale:t,nonce:i,host:r,isRegionMode:s}=(0,j.s)({from:"__root__"}),a=null==e?void 0:e.replace("/",""),o=_.uX.reduce((e,t)=>(e[t]=tz.env[t],e),{}),n=(0,h.B8)().STATIC_HOST||"",d=(0,U.D)({lang:t,staticHost:n||"",host:r,nonce:i});return(0,l.jsx)("html",{"path-prefix":a,"data-is-region-mode":s,lang:t,dir:(0,Z.c)(t),children:(0,l.jsxs)(tO,{pathPrefix:a,isRegionMode:s,locale:t,children:[(0,l.jsxs)("head",{children:[d,(0,l.jsx)(R.Q,{}),(0,l.jsx)(tK,{}),(0,l.jsx)("script",{nonce:i,dangerouslySetInnerHTML:{__html:`window.__STATIC_HOST__ = '${n}'`}}),er.map(e=>(0,l.jsx)("link",{rel:"preload",as:"fetch",crossOrigin:"anonymous",href:`${(0,h.B8)().I18N_BASE_PUBLIC||""}/${t}/${e}`},e))]}),(0,l.jsxs)("body",{children:[(0,l.jsxs)("div",{id:"__APP",children:[(0,l.jsx)(O.j3,{}),(0,l.jsx)(F.K,{})]}),(0,l.jsx)("script",{id:"__NEXT_DATA__",nonce:i,type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify({props:{runtimeConfig:o}})}})]})]})})}:function(){let{locale:e,basepath:t,isRegionMode:i}=(0,j.s)({from:"__root__"}),r=null==t?void 0:t.replace("/",""),s=tU(e=>e.setLoadLoadChat),[a]=(0,tH.K)(_.Xs,{isChatEnable:!0,isChatVisible:!1,isChatPopUp:!1,onChatLoadedCallbackFunction(){},sourceEntry:"16"});return(0,D.useEffect)(()=>{s(a)},[s,a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tO,{isRegionMode:i,locale:e,pathPrefix:r,children:(0,l.jsx)(O.j3,{})}),!1,(0,l.jsx)(F.K,{})]})},beforeLoad:e=>{let{context:t}=e;return{basepath:t.basepath,locale:t.locale,host:t.headers.host,isRegionMode:t.isRegionMode}}});var tY=i(51142);let tG=(0,tY.f2)("/404")({component:function(){return(0,l.jsx)("div",{children:"404"})}});var tq=i(87051),tQ=i(31249),tJ=i(33657);function t0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((e,i)=>e.replace(RegExp(`%${i}%`,"g"),t[i]),e)}var t1=i(84383),t2=i(27680);let t5=e=>{let{isNeedRevalidatePath:t,path:i}=e,[r,s]=(0,D.useState)(!t),{data:a}=(0,t1.R)({enabled:!r}),{contractAddress:o,chainSymbol:l}=(0,tq.U)({from:i}),n=(0,tQ.s)();return(0,D.useEffect)(()=>{if(t&&(null==a?void 0:a.length)){let{targetToken:e}=function(e){let{tokenList:t,contractAddress:i,chainSymbol:r}=e;if(i)return{targetToken:null==t?void 0:t.find(e=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e===decodeURIComponent(t)||e.slice(0,50)===t.slice(0,50)})(e.contractAddress,i)&&(0,tJ.o)(e.chainName)===r&&!e.cexOffDisplay),isQueryTokenListSuccess:!0};if(r){let e=null==t?void 0:t.filter(e=>(0,tJ.o)(e.chainName)===r&&!e.cexOffDisplay);return e.length?{targetToken:((null==e?void 0:e.sort((e,t)=>Number(t.volume24h)-Number(e.volume24h)))||[])[0],isQueryTokenListSuccess:!0}:{targetToken:void 0,isQueryTokenListSuccess:!0}}let s=null==t?void 0:t.filter(e=>"56"===e.chainId&&!e.cexOffDisplay),a=s.length?s:t,o=(null==a?void 0:a.sort((e,t)=>Number(t.volume24h)-Number(e.volume24h)))||[];return{targetToken:null==o?void 0:o[0],isQueryTokenListSuccess:!0}}({tokenList:a,contractAddress:o??void 0,chainSymbol:l??void 0});s(!0),e&&n({to:t2.uE,params:{chainSymbol:(0,tJ.o)(e.chainName),contractAddress:e.contractAddress}})}},[t,a,o,l,n]),null},t3=(0,tY.f2)("/alpha/")({loader:async e=>{let{targetToken:t}=e.context;return{isNeedRevalidatePath:!0}},component:function(){let e=t3.useLoaderData()||{};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(t5,{path:t2.G$,isNeedRevalidatePath:e.isNeedRevalidatePath})})}});var t6=i(20462),t4=i(22900);let t8=({sentryEventId:e,name:t,resetErrorBoundary:i})=>{let r=(0,D.useCallback)(()=>{window.location.reload()},[]),s=(0,D.useCallback)(()=>{e&&(0,t6.v)(e)},[e]);return(0,l.jsxs)("div",{className:"error-boundary-default",children:[(0,l.jsxs)("p",{className:"error-boundary-default-tip",children:["Sorry, ",t||"something"," went wrong."]}),!!e&&(0,l.jsxs)("p",{className:"error-boundary-default-id",onClick:s,children:[e,(0,l.jsx)(t4.Z,{})]}),(0,l.jsxs)("p",{className:"error-boundary-default-tip",children:[(0,l.jsx)("span",{className:"error-boundary-default-action",onClick:i,children:"Reload"})," ","it or"," ",(0,l.jsx)("span",{className:"error-boundary-default-action",onClick:r,children:"refresh"})," ","the page."]})]})},t7={hasError:!1,error:null,info:null,sentryEventId:null},t9="fatal",ie=!1;class it extends V().Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){let{name:i,beforeCapture:r}=this.props,s=t?.componentStack;console.error(`${i||"Something"} went wrong.`,e,s);try{if(console.log("captureException"),"undefined"!=typeof window&&console.log(window.Sentry,"window.Sentry"),"undefined"!=typeof window&&void 0!==window.Sentry){let t=window.Sentry?.captureException(e,function(t){return r?.(t,e,s),t.setExtra("componentStack",s),t.setLevel(t9),t.setTag("component",i||"ErrorBoundary ".concat(e?.message)),t});this.setState({sentryEventId:t})}}catch(e){console.error("Error reporting failed: ",e)}this.props.onError?.(e,t?.componentStack,null),this.setState({error:e,info:t,hasError:!0})}componentDidMount(){let{onComponentMounting:e}=this.props;e&&e()}componentWillUnmount(){let{error:e,info:t}=this.state,{onUnmount:i}=this.props;i&&i(e,t?.componentStack,null)}render(){let{error:e,info:t,hasError:i,sentryEventId:r}=this.state,{fallbackRender:s,FallbackComponent:a,fallback:o,name:n}=this.props;if(i){let i={componentStack:t?.componentStack,error:e,resetErrorBoundary:this.resetErrorBoundary,eventId:null};return V().isValidElement(o)?o:"function"==typeof s?s(i):"function"==typeof a?(0,l.jsx)(a,{...i}):(0,l.jsx)(t8,{name:n,sentryEventId:r,resetErrorBoundary:this.resetErrorBoundary})}return this.props.children}constructor(e){super(e),this.state=t7,this.resetErrorBoundary=()=>{let{error:e,info:t,sentryEventId:i}=this.state,{onReset:r}=this.props;r&&r(e,t?.componentStack,i),this.setState(t7)},!ie&&"undefined"!=typeof Sentry&&"object"==typeof Sentry&&"addGlobalEventProcessor"in Sentry&&(Sentry.addGlobalEventProcessor(e=>{try{return e.level===t9&&e.exception&&e.exception.values.forEach(e=>{e.mechanism.handled=!1}),e}catch{return e}}),ie=!0)}}var ii=i(53531),ir=i(64084),is=i(27722),ia=i(54554),io=i(35727),il=i(48363),id=i(66600),ic=i(79710),ih=i(69007),iu=i(79676),ig=i(38081),im=i(14483),ip=i(90534),ix=i(87585),ib=i(33980);let iy=e=>Object.values(e),iv=()=>{let{data:e,isLoading:t}=(0,ib.uz)({select:iy});return{data:e||[],isLoading:t}};var iC=i(1886);let iw=ip.Z.Option,iS=e=>{let{handleStatusFilter:t,textArrayMap:i,dropDownKey:r}=e;return(0,l.jsx)(ir.Z,{style:{flexDirection:"column",padding:"10px 0px"},children:Object.keys(i).map(e=>(0,l.jsxs)(ir.Z,{className:"hover:bg-Line whitespace-nowrap h-[38px] w-[164px] rounded-[0px] px-[10px] justify-between text-[14px] items-center [&_.bn-svg]:h-[20px] [&_.bn-svg]:w-[20px]",style:{color:r===e?"var(--color-PrimaryText)":"var(--color-SecondaryText)",fontWeight:r===e?"500":"400"},onClick:()=>t(e),children:[(0,l.jsxs)(ir.Z,{className:"flex-row items-center justify-start",children:[i[e].icon&&(0,l.jsx)("img",{className:"w-[20px] h-[20px] mr-[4px]",src:i[e].icon}),(0,l.jsx)(is.ZP,{children:i[e].label})]}),r===e?(0,l.jsx)(iu.Z,{style:{color:"var(--color-PrimaryText)"}}):(0,l.jsx)(l.Fragment,{})]},e))})},iT=e=>{let{value:t,handleClick:i=()=>{}}=e,{t:r}=(0,tF.Mi)(),{data:s=[]}=iv(),a=s.reduce((e,t)=>(e[null==t?void 0:t.chainName]={label:null==t?void 0:t.chainName,title:null==t?void 0:t.chainName,icon:null==t?void 0:t.chainIconUrl},e),{}),o=r("trd-market-chain",{defaultValue:"Chain"}),n=r("trd-orderHistory-all",{defaultValue:"All"}),d=(0,D.useMemo)(()=>({All:{label:n,title:o},...a}),[a,n,o]),[c,h]=(0,D.useState)("down"),u=d[t].title||o;return(0,l.jsx)(ix.Z,{trigger:"click",style:{userSelect:"none",display:"flex"},overlay:(0,l.jsx)(iS,{dropDownKey:t,handleStatusFilter:e=>{i(e)},textArrayMap:d}),once:!0,enableClickBubble:!0,useReactPopper:!0,onVisibleChange:()=>{h("down"===c?"up":"down")},bubbleClassName:"[&_.bn-bubble-content]:rounded-[12px]",reactPopperProps:{offsetX:-10},children:(0,l.jsxs)(ir.Z,{"data-area":"left",className:"items-center cursor-pointer rounded-[2px] h-[24px]",children:[(0,l.jsx)(is.ZP,{className:"text-[12px]",style:{color:"up"===c?"var(--color-PrimaryText)":"var(--color-TertiaryText)"},children:u}),(0,l.jsx)(ig.Z,{className:"text-IconNormal",style:{transform:"up"===c?"rotate(180deg)":"rotate(0deg)"}})]})})},iA=e=>{let{onClick:t}=e;return(0,l.jsx)("div",{onClick:t,className:"flex justify-end h-[44px] items-center px-[15px]",children:(0,l.jsx)(im.Z,{className:"!w-[20px] !h-[20px] text-PrimaryText"})})},i_=e=>{let{value:t,handleClick:i=()=>{}}=e,{t:r}=(0,tF.Mi)(),{data:s=[]}=iv(),[a,o]=(0,D.useState)(!1),[n,d]=(0,D.useState)(""),c=s.reduce((e,t)=>(e[null==t?void 0:t.chainName]={label:null==t?void 0:t.chainName,title:null==t?void 0:t.chainName,icon:null==t?void 0:t.chainIconUrl},e),{}),h=r("trd-market-chain",{defaultValue:"Chain"}),u=r("trd-orderHistory-all",{defaultValue:"All"}),g=(0,D.useMemo)(()=>({All:{label:u,title:h},...c}),[c,u,h]);return(0,l.jsx)(ip.Z,{emptyText:(0,l.jsx)("div",{className:"min-h-[300px] w-full",children:(0,l.jsx)(iC.p,{i18nKey:"trd-common-norecords",i18nDefault:"no records",className:"!mt-[0px]"})}),onChange:e=>{i(e[0])},onClose:()=>{o(!1),d("")},onVisibleChange:e=>{o(e),e||setTimeout(()=>{d("")},200)},searchPlaceholder:r("trd-market-searchHolder"),drawerCancelText:r("trd-market-cancel"),searchValue:n,onSearchFn:e=>(d(e),!0),open:a,size:"middle",value:[t],variant:"full",wrapperType:"drawer",trigger:"click",customField:(0,l.jsx)(iA,{onClick:()=>{o(!0)}}),children:Object.keys(g).filter(e=>e.toLowerCase().startsWith(n.toLowerCase())).map(e=>{var t;return(0,l.jsx)(iw,{optionCheckIcon:!0,value:e,children:(0,l.jsx)(ir.Z,{className:"hover:bg-Line whitespace-nowrap h-[24px] w-[full] justify-between text-[14px] items-center [&_.bn-svg]:h-[20px] [&_.bn-svg]:w-[20px]",children:(0,l.jsxs)(ir.Z,{className:"flex-row items-center justify-start",children:[(null==(t=g[e])?void 0:t.icon)&&(0,l.jsx)("img",{className:"w-[20px] h-[20px] mr-[8px]",src:g[e].icon}),(0,l.jsx)(is.ZP,{children:g[e].label})]})},e)},e)})})};var iL=i(58565);let ik=async()=>{let e=null;try{e=await (0,iL.U2)("/bapi/defi/v1/public/alpha-trade/get-all-fee-rate")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,msg:t,data:{}}}return e};var iI=i(70088);let iP=()=>{let{isLoading:e,data:t,refetch:i}=(0,em.useQuery)(iI.i.QUERY_ALPHA_FEE_LIST,async()=>await ik(),{enabled:!0,staleTime:1/0});return{data:(null==t?void 0:t.data)||[],isLoading:e,refetch:i}};var iE=i(48373),iB=i(98442);let iN=async()=>{let e;try{e=await (0,iL.U2)("/bapi/defi/v1/public/alpha-trade/get-exchange-info")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,msg:t,data:{}}}return e},iM=()=>{let{isLoading:e,data:t,refetch:i}=(0,em.useQuery)(iI.i.QUERY_ALPHA_EXCHANGE_INFO,async()=>await iN(),{enabled:!0,cacheTime:1/0,staleTime:1/0});return{data:null==t?void 0:t.data,isLoading:e,refetch:i}};var iD=i(1201);let iV={TRADING:"TRADING",SELL_ONLY:"SELL_ONLY",PENDING:"PENDING_TRADING",INIT:"INIT",DElISTED:"DELISTED"},ij=e=>{let{alphaId:t,text:i}=e,{contractAddress:r,chainId:s}=(0,ic.f)({alphaId:t});return(0,l.jsx)(id.W,{chainId:s,contractAddress:r,target:"_blank",rel:"noreferrer",children:(0,l.jsxs)(ir.Z,{className:"flex-row items-center",children:[(0,l.jsx)(il._,{alphaTokenId:`${s}-${r}`,size:"xs",className:"mt-[3px]"}),(0,l.jsx)(is.ZP,{className:"ml-[8px]",children:i})]})})},iR=()=>{let{t:e}=(0,tF.cK)(),{t:t}=(0,tF.Mi)(),[i,r]=(0,D.useState)("All"),{data:s,isLoading:a}=iP(),{data:o}=iM(),{data:n={}}=(0,iD._)(),{symbols:d=[]}=o||{},c=d.reduce((e,t)=>(e[null==t?void 0:t.symbol]=null==t?void 0:t.status,e),{}),{data:h}=(0,ih.G)(),u=Object.keys(h)||[],g=s.map(e=>{let{symbol:t,...i}=e,r="",s="",a="",o={},l="",n="",d="",c="";return u.map(e=>{let i=`${t}`.replace(e,"");if(`${t}`.includes(e)&&!/\d/.test(i)){var u,g,m,p;r=e,s=null==(u=h[e])?void 0:u.baseAsset,a=`${t}`.replace(e,""),o=h[e],l=null==(g=h[e])?void 0:g.chainName,n=`${s}/${a}`,d=null==(m=h[e])?void 0:m.chainId,c=null==(p=h[e])?void 0:p.contractAddress}}),{...i,symbol:t,alphaId:r,quote:a,detail:o,chain:l,formatSymbol:n,chainId:d,contractAddress:c}}).filter(e=>{let{alphaId:t}=e;return""!==t}).filter(e=>{var t;let{alphaId:i,quote:r,chainId:s,contractAddress:a}=e;return(null==c?void 0:c[`${i}${r}`])!==iV.DElISTED&&(null==n||null==(t=n[`${s}-${a}`])?void 0:t.cexOffDisplay)!==!0}).filter(e=>{let{chain:t}=e;return"All"===i||t===i}),[m,p]=(0,D.useState)(1),x=Math.ceil(g.length/10),f=g.slice((m-1)*10,10*m),b=f.length>0,y=e=>{e<1||e>x||p(e)},v=[{key:"formatSymbol",dataIndex:"formatSymbol",title:t("trd-market-pair",{defaultValue:"Pair"}),render:(e,t)=>{let{alphaId:i}=t;return(0,l.jsx)(ij,{alphaId:i,text:e})},width:290},{key:"chain",dataIndex:"chain",title:(0,l.jsx)(iT,{value:i,handleClick:e=>{y(1),r(e)}}),width:290},{key:"buyerCommission",dataIndex:"buyerCommission",title:e("trd-feeRate-buy",{defaultValue:"Buy"}),width:290,render:e=>`${(0,iB.Kl)((0,iE.yd)(e/1e4,2,1))}%`},{key:"sellerCommission",dataIndex:"sellerCommission",title:e("trd-feeRate-sell",{defaultValue:"Sell"}),width:290,render:e=>`${(0,iB.Kl)((0,iE.yd)(e/1e4,2,1))}%`}];return(0,l.jsxs)(is.ZP,{className:"h-full w-full px-[120px] sm:block hidden",children:[(0,l.jsx)(is.ZP,{className:"h-[56px] flex items-center justify-start gap-[8px]"}),(0,l.jsx)(is.ZP,{className:"text-[32px] font-[600] h-[80px] text-PrimaryText",children:e("alpha-limit-fee-rate",{defaultValue:"Alpha Limit Fee Rate"})}),(0,l.jsxs)(is.ZP,{className:"[&_.bn-web-table-thead>tr]:bg-[initial]",children:[(0,l.jsx)(ia.Z,{emptyText:(0,l.jsx)(iC.p,{i18nKey:"trd-common-norecords",i18nDefault:"no records"}),columns:v,data:f,rowSize:"small",loading:a}),(0,l.jsx)(ir.Z,{className:"justify-end mt-[16px]",style:{display:b?"flex":"none"},children:(0,l.jsx)(io.Z,{total:x,current:m,onChange:y})})]})]})};var iO=i(47445),iF=i(45303),iH=i(58564);let iZ=!!(()=>{if("undefined"!=typeof window&&window.navigator.userAgent&&/BNC\/[\d\.]+/i.test(window.navigator.userAgent)){var e;return null==(e=window.navigator.userAgent.match(/BNC\/[\d\.]+/i))?void 0:e[0].slice(4)}return""})(),iU=(0,iF.Ue)((0,iF.xf)(iH)),iW=e=>{let{alphaId:t,text:i}=e,{contractAddress:r,chainId:s}=(0,ic.f)({alphaId:t});return iZ?(0,l.jsxs)(ir.Z,{className:"flex-row items-center",children:[(0,l.jsx)(il._,{alphaTokenId:`${s}-${r}`,size:"xs",className:"mb-[4px]"}),(0,l.jsx)(is.ZP,{className:"ml-[4px] text-[16px] font-[500]",children:i})]}):(0,l.jsx)(id.W,{chainId:s,contractAddress:r,children:(0,l.jsxs)(ir.Z,{className:"flex-row items-center",children:[(0,l.jsx)(il._,{alphaTokenId:`${s}-${r}`,size:"xs",className:"mb-[4px]"}),(0,l.jsx)(is.ZP,{className:"ml-[4px] text-[16px] font-[500]",children:i})]})})},i$=()=>{let{t:e}=(0,tF.cK)(),t=(0,D.useRef)(null),[i,r]=(0,D.useState)("All"),{data:s,isLoading:a}=iP(),{data:o,isLoading:n}=(0,ih.G)(),d=Object.keys(o)||[],{data:c}=iM(),{data:h={}}=(0,iD._)(),{symbols:u=[]}=c||{},g=u.reduce((e,t)=>(e[null==t?void 0:t.symbol]=null==t?void 0:t.status,e),{}),m=s.map(e=>{let{symbol:t,...i}=e,r="",s="",a="",l={},n="",c="",h="",u="";return d.map(e=>{let i=`${t}`.replace(e,"");if(`${t}`.includes(e)&&!/\d/.test(i)){var d,g,m,p;r=e,s=null==(d=o[e])?void 0:d.baseAsset,a=`${t}`.replace(e,""),l=o[e],n=null==(g=o[e])?void 0:g.chainName,c=`${s}/${a}`,h=null==(m=o[e])?void 0:m.chainId,u=null==(p=o[e])?void 0:p.contractAddress}}),{...i,symbol:t,alphaId:r,quote:a,detail:l,chain:n,formatSymbol:c,chainId:h,contractAddress:u}}).filter(e=>{let{alphaId:t}=e;return""!==t}).filter(e=>{var t;let{alphaId:i,quote:r,chainId:s,contractAddress:a}=e;return(null==g?void 0:g[`${i}${r}`])!==iV.DElISTED&&(null==h||null==(t=h[`${s}-${a}`])?void 0:t.cexOffDisplay)!==!0}).filter(e=>{let{chain:t}=e;return"All"===i||t===i}),p=(0,D.useMemo)(()=>t=>{let{key:i,index:r,style:s}=t,{alphaId:a,formatSymbol:o,chain:n,buyerCommission:d,sellerCommission:c}=m[r]||{};return(0,l.jsxs)(is.ZP,{style:s,className:"py-[12px] border-solid-b px-[15px]",children:[(0,l.jsx)(is.ZP,{className:"h-[24px] mb-[4px]",children:(0,l.jsx)(iW,{alphaId:a,text:o})}),(0,l.jsxs)(ir.Z,{className:"items-center justify-between leading-[22px] py-[4px] text-[14px]",children:[(0,l.jsx)(is.ZP,{className:"text-SecondaryText",children:e("trd-market-chain",{defaultValue:"Chain"})}),(0,l.jsx)(is.ZP,{children:n})]}),(0,l.jsxs)(ir.Z,{className:"items-center justify-between leading-[22px] py-[4px] text-[14px]",children:[(0,l.jsx)(is.ZP,{className:"text-SecondaryText",children:e("trd-feeRate-buy",{defaultValue:"Buy"})}),(0,l.jsx)(is.ZP,{children:`${(0,iB.Kl)((0,iE.yd)(d/1e4,2,1))}%`})]}),(0,l.jsxs)(ir.Z,{className:"items-center justify-between leading-[22px] py-[4px] text-[14px]",children:[(0,l.jsx)(is.ZP,{className:"text-SecondaryText",children:e("trd-feeRate-sell",{defaultValue:"Sell"})}),(0,l.jsx)(is.ZP,{children:`${(0,iB.Kl)((0,iE.yd)(c/1e4,2,1))}%`})]})]},i)},[m,e]);return a||n?(0,l.jsxs)(is.ZP,{className:"h-[calc(100vh-150px)] w-full",children:[(0,l.jsx)(is.ZP,{style:{borderBottom:"1px solid var(--color-Line)"},className:"text-PrimaryText px-[15px] font-[500] text-[16px] leading-[24px] py-[8px]",children:e("alpha-limit-fee-rate",{defaultValue:"Alpha Limit Fee Rate"})})," "]}):(0,l.jsxs)(is.ZP,{className:"h-[calc(100vh-150px)] w-full mb-[40px]",children:[(0,l.jsx)(is.ZP,{style:{borderBottom:"1px solid var(--color-Line)"},className:"text-PrimaryText px-[15px] font-[500] text-[16px] leading-[24px] py-[8px]",children:e("alpha-limit-fee-rate",{defaultValue:"Alpha Limit Fee Rate"})}),(0,l.jsx)(i_,{value:i,handleClick:e=>{r(e)}}),0===m.length?(0,l.jsx)(iC.p,{i18nKey:"trd-common-norecords",i18nDefault:"no records",className:"[&_svg]:!mt-[0px]"}):(0,l.jsx)(iO.qj,{children:e=>{let{width:i,height:r}=e;return(0,l.jsx)(iO.aV,{ref:t,width:i,height:r,rowCount:m.length,rowHeight:142,rowRenderer:p})}})]})};var iz=i(60072),iK=i(10225);let iX=(0,D.memo)(e=>{let{children:t,defaultTrackingData:i,sensorTrack:r}=e,s=(0,D.useContext)(iK.Ui)||{},a=(0,D.useContext)(iz.S),o={...s,...i||{}};return(0,l.jsx)(iz.S.Provider,{value:r||a,children:(0,l.jsx)(iK.Ui.Provider,{value:o,children:t})})});iK.Ui.displayName="TrackProvider";let iY=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"string"!=typeof e||"string"!=typeof t?e===t:e.toLowerCase()===t.toLowerCase()},iG=e=>{let{ctx:{req:t}}=e;if(t&&"headers"in t){let e=iY((0,ev.read)(eB,t.headers)||"",eL)?eL:"light",i=(0,ev.read)(eN,t.headers)||eP,r=(0,ev.read)(eE,t.headers)||eI;e_.fO.setState(eB,e),e_.fO.setState(eN,i),e_.fO.setState(eE,r)}},iq=()=>{let{t:e}=(0,tF.cK)();(0,D.useEffect)(()=>{let t=e("alpha-limit-fee-rate",{defaultValue:"Alpha Limit Fee Rate"});document.title=t,iZ&&iU.setTitle(t)},[e])},iQ={pageName:ii.Hf,df_business:ii.NP},iJ=(0,tY.f2)("/alpha/limitfee")({loader:async e=>{let{context:t}=e;return"undefined"!=typeof window?null:(iG({ctx:{req:{headers:t.headers}}}),await Promise.all([(0,Q.EQ)({namespaces:er,locale:t.locale})]),{})},component:function(){let{isMobile:e}=(0,el.F)();return iq(),(0,l.jsx)(iX,{defaultTrackingData:iQ,sensorTrack:e$,children:e?(0,l.jsx)(it,{name:"mobileLayout",children:(0,l.jsx)(i$,{})}):(0,l.jsx)(it,{name:"layout",children:(0,l.jsx)(iR,{})})})}});var i0=i(82185);let i1=(0,tY.f2)("/alpha/$chainSymbol/")({loader:async e=>{let{targetToken:t,isQueryTokenListSuccess:i}=e.context;if(!t&&i)throw(0,i0.uX)({to:"/404",statusCode:404});return{isNeedRevalidatePath:!0}},component:function(){let e=i1.useLoaderData()||{};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(t5,{path:t2.$y,isNeedRevalidatePath:e.isNeedRevalidatePath})})}});var i2=i(16709),i5=i.n(i2);let i3=async e=>{let t;try{t=await (0,iL.U2)(`/bapi/defi/v1/public/wallet-direct/buw/wallet/cex/alpha/token/full/info?chainId=${e.chainId}&contractAddress=${e.contractAddress}`)}catch(i){let e="";i instanceof Error&&(e=i.message),t={success:!1,msg:e,data:{}}}return t},i6=async(e,t)=>{let i;try{i=await (0,iL.v_)("/bapi/defi/v1/public/wallet-direct/security/token/audit",e,t)}catch(t){let e="";t instanceof Error&&(e=t.message),i={success:!1,msg:e,data:{}}}return i};var i4=i(48396),i8=i(46432),i7=i(71926);let i9={CONNECTED:"connected",DIS_CONNECTED:"disconnected",CONNECTING:"connecting",UNSTABLE:"unstable"};var re=i(26034);let rt=e=>(0,re.K)({channel:"WEB3_CEX_ALPHA_DYNAMIC_INFO",responseName:"alphaCexTokenDynamicMgs"})(t=>{t&&t.items&&Array.isArray(t.items)&&e(t.items)}),ri=(e,t)=>{if(!t)return t;let i={...t};return e.forEach(e=>{i[`${e.chain}-${e.ca}`]&&(i[`${e.chain}-${e.ca}`]={...i[`${e.chain}-${e.ca}`],price:e.price.p,close:e.price.p,volume24h:e.stats.vol,marketCap:e.stats.cap,fdv:e.stats.fdv,high:e.stats.ph,low:e.stats.pl,liquidity:e.stats.liq,holders:e.stats.holders,percentChange24h:e.price.pc24})}),i},rr=()=>{let e=(0,em.useQueryClient)(),t=(0,ed.d)();(0,D.useEffect)(()=>{if(t)return rt(t=>e.setQueryData(iI.i.QUERY_ALPHA_TOKEN_MAP,e=>ri(t,e)))},[e,t])},rs=()=>{let[e,t]=(0,D.useState)(!0),[i,r]=(0,D.useState)(!1),[s,a]=(0,D.useState)(0),o=(0,D.useRef)(0),l=(0,D.useRef)(0),n=(0,ed.d)();return((0,D.useEffect)(()=>{if(n)return l.current=Date.now(),rt(()=>{r(!0),o.current=Date.now()})},[n]),(0,i7.Z)(()=>{if(l.current&&!o.current&&Date.now()-l.current>=15e3){t(!1),a(e=>e+1);return}o.current&&(Date.now()-o.current>=15e3?(t(!1),a(e=>e+1)):(t(!0),a(0)))},1e3),s>5)?i9.DIS_CONNECTED:e?i?i9.CONNECTED:i9.CONNECTING:i9.UNSTABLE},ra={[i9.CONNECTED]:{colorList:["var(--color-Success)","var(--color-Success)","var(--color-Success)","var(--color-Success)"],i18nKey:"trd-singal-connected",color:"var(--color-Success)"},[i9.UNSTABLE]:{colorList:["var(--color-Success)","var(--color-Success)","var(--color-Success)","var(--color-TertiaryText)"],i18nKey:"trd-singal-unstable",color:"var(--color-Success)"},[i9.DIS_CONNECTED]:{colorList:["var(--color-TertiaryText)","var(--color-TertiaryText)","var(--color-TertiaryText)","var(--color-TertiaryText)"],i18nKey:"trd-singal-disconnected",color:"var(--color-TertiaryText)"},[i9.CONNECTING]:{colorList:[],i18nKey:"trd-singal-connecting",color:"var(--color-TextLink)",width:"100px"}},ro=()=>{let e=rs(),[t,i]=(0,D.useState)(0),r=i9.CONNECTING===e;return(0,i7.Z)(()=>{i((t+1)%4)},r?1e3:null),(0,D.useMemo)(()=>{let i=ra[e],s=[];return s=r?["","","",""].map((e,i)=>i<t?"var(--color-PrimaryYellow)":"var(--color-TertiaryText)"):i.colorList,{...i,colorList:s}},[e,t,r])},rl=e=>{let{colorList:t}=e;return(0,l.jsxs)("svg",{width:"12",height:"10",viewBox:"0 0 12 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6.33331H0V9.66665H2V6.33331Z",fill:t[0]}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33333 4.33331H3.33333V9.66665H5.33333V4.33331Z",fill:t[1]}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66667 2.33331H8.66667V9.66665H6.66667V2.33331Z",fill:t[2]}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0.333313H10V9.66665H12V0.333313Z",fill:t[3]})]})},rn=V().memo(()=>{let{t:e}=(0,tF.Mi)(),{colorList:t,i18nKey:i,color:r,width:s}=ro();return(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(rl,{colorList:t}),(0,l.jsx)("div",{style:{color:r,fontSize:"12px",marginLeft:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:s||"auto"},children:e(i)})]})}),rd={display:"flex",alignItems:"center",marginRight:"8px",cursor:"pointer",fontSize:"12px",height:"24px"},rc=V().memo(()=>{let{t:e}=(0,tF.Mi)();return(0,l.jsx)("div",{className:"text-PrimaryText hover:text-TertiaryText",style:rd,"data-ot-trigger":"true",children:e("ba-one-trust-cookie",{defaultValue:"Cookie Preferences"})})}),rh=V().memo(()=>{let{t:e}=(0,tF.Mi)(),{changeVisibility:t}=function(){let e=tU(e=>e.chatWidgetInstance);return{changeVisibility:(0,D.useCallback)(t=>{e&&(e.changeChatVisibilityStatus(t),e.changeChatPopUpStatus(t))},[e])}}();return(0,l.jsx)("div",{className:"text-PrimaryText hover:text-TertiaryText",style:rd,onClick:()=>t(!0),children:e("trd-footer-support")})}),ru={width:"1px",height:"16px",backgroundColor:"var(--color-Line)",marginRight:"8px"},rg=V().memo(()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(rn,{}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:"16px"},children:[(0,l.jsx)("div",{style:ru}),(0,l.jsx)(rc,{}),(0,l.jsx)(rh,{})]})]})),rm=V().memo(()=>(0,l.jsx)("div",{className:"fixed bottom-0 flex justify-between items-center bg-BasicBg text-TradeBg py-[0px] px-[16px] w-full z-10 border-solid border-0 border-t-[4px] border-TradeBg",children:(0,l.jsx)(rg,{})}));var rp=i(22465);let rx=(0,tZ.U)(e=>({activeKey:0,setActiveKey:t=>e(()=>({activeKey:t}))})),rf=()=>({activeKey:rx(e=>e.activeKey),setActiveKey:rx(e=>e.setActiveKey)});var rb=i(55281),ry=i.n(rb),rv=i(64116),rC=i.n(rv),rw=i(89195);let rS=()=>{let e=(0,en._n)(),t=(0,em.useQueryClient)(),{refetch:i}=(0,rw.E)(),r=(0,ed.d)();(0,D.useEffect)(()=>{if(e&&r){var s;return s=e=>{t.setQueryData(iI.i.QUERY_ALPHA_WALLET_LIST,t=>(function(e){let{response:t,oldData:i,queryHttp:r}=e;if(!i||(null==i?void 0:i.length)<=0||!ry()(i,{chainId:null==t?void 0:t.chain,contractAddress:null==t?void 0:t.contractAddress}))return r(),i;let s=i.reduce((e,t)=>(e.push({...t}),e),[]),a=ry()(s,{chainId:null==t?void 0:t.chain,contractAddress:null==t?void 0:t.contractAddress});return a&&(a.amount=null==t?void 0:t.amount,a.free=null==t?void 0:t.free,a.freeze=null==t?void 0:t.freeze),a&&0===Number(t.amount)&&rC()(s,e=>e.chainId===(null==t?void 0:t.chain)&&e.contractAddress===(null==t?void 0:t.contractAddress)),s})({response:e,oldData:t,queryHttp:i}))},(0,re.K)({channel:"ALPHA_BALANCE",responseName:"alphaBalanceMsg"})(e=>{s(e)})}return()=>{}},[t,e,r,i])};var rT=i(73605),rA=i(51074);let r_=e=>/^[a-zA-Z][a-zA-Z\d+\-.]*?:/.test(e),rL=e=>{let t=(0,rT._)(),{path:i,subDomain:r,className:s,...a}=e,{pathPrefix:o,level2Domain:n}=t||{};return(0,D.useMemo)(()=>!(!o||r_(i))&&(!r||!!n),[n,i,o,r])?(0,l.jsx)(rA.Z,{path:i,subDomain:r,className:i5()("f-link",s),...a}):(0,l.jsx)("a",{href:i,className:i5()("f-link",s),...a})};var rk=i(64930),rI=i(14323);let rP={LOGIN_URL:`${_.Ad}/login?return_to=%callback%`,REGISTER_URL:`${_.Ad}/register?return_to=%callback%`,FAQ:"/support/faq/98e52d2bf2db4e0c963fb41004080826",DEEP_LINK_TRADE_PAGE:"bnc://app.binance.com/trade/trade?at=futures&symbol=BTCUSDT",TERM_OF_USE:"/about-legal/terms-alpha",HELP_URL:"/support/faq/detail/60cc2e54aa32453387523c10254438c1"},rE=e=>{let{children:t,height:i}=e,r=t0(rP.REGISTER_URL,{callback:(0,rk.Ok)(eM.s?"":window.location.href)}),s=t0(rP.LOGIN_URL,{callback:(0,rk.Ok)(eM.s?"":window.location.href)}),{t:a}=(0,tF.Mi)(),{isLoggedIn:o,isLoading:n}=(0,en.f0)();return o?t:(0,l.jsx)(ir.Z,{className:"h-full justify-center items-center text-PrimaryText py-[20px] mt-[108px]",style:{height:i||"100%"},children:(0,l.jsx)(is.ZP,{className:`[&_a]:text-TextLink ${n?"hidden":"block"}`,children:(0,l.jsx)(rI.c,{t:a,i18nKey:"trd-login-or-register",defaults:"<LoginIn>Log In</LoginIn> or <Register>Register Now</Register> to trade",components:{LoginIn:(0,l.jsx)(e=>{let{children:t}=e;return(0,l.jsx)(rL,{className:"no-underline",path:s,children:t})},{}),Register:(0,l.jsx)(e=>{let{children:t}=e;return(0,l.jsx)(rL,{className:"no-underline",path:r,children:t})},{})}})})})},rB=(0,D.lazy)(()=>Promise.all([i.e("5082"),i.e("6836"),i.e("3909"),i.e("5764")]).then(i.bind(i,99047))),rN=(0,D.lazy)(()=>Promise.all([i.e("5082"),i.e("6836"),i.e("3909"),i.e("4297")]).then(i.bind(i,38686))),rM=(0,D.lazy)(()=>i.e("340").then(i.bind(i,12985))),{TabPane:rD}=rp.Z,rV=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:"text-[14px] font-[500]",children:t})},rj=V().memo(()=>{let{t:e}=(0,tF.cK)(),{activeKey:t,setActiveKey:i}=rf(),r=e=>{i(e)},{data:s,isLoading:a}=(0,rw.E)(),o=(null==s?void 0:s.length)||0;rS();let n=(0,l.jsx)(rV,{children:e("order-openOrder",{defaultValue:"Open Order"})}),d=(0,l.jsx)(rV,{children:e("order-orderHistory",{defaultValue:"Order History"})}),c=(0,l.jsx)(rV,{children:a?e("holdings",{defaultValue:"Holdings"}):`${e("holdings",{defaultValue:"Holdings"})}(${o})`});return(0,l.jsx)(ir.Z,{className:"pb-[80px] md:pb-[0px] trd-order w-full bg-BasicBg min-h-[366px] text-[14px] pt-[4px] relative [&_.bn-web-table_thead_th]:p-[0px] [&_.bn-web-table_tbody_td]:p-[0px]",children:(0,l.jsxs)(rp.Z,{lazy:!0,variant:"default-breakline",className:"flex-1 h-full [&>.bn-tab-list]:h-[38px] [&>.bn-tab-list]:min-h-[38px] [&>.bn-tab-list>:first-child>div]:pl-[16px] [&>.bn-tab-list_.bn-tab]:h-full",showSlideArrow:!0,showSlideMasks:!0,onChange:e=>r(e),initialIndex:0,selectedIndex:t,children:[(0,l.jsx)(rD,{tabKey:"orderOrder",tabNode:n,children:(0,l.jsx)(D.Suspense,{fallback:null,children:(0,l.jsx)(rE,{children:(0,l.jsx)(rB,{})})})}),(0,l.jsx)(rD,{tabKey:"orderHistory",tabNode:d,children:(0,l.jsx)(D.Suspense,{fallback:null,children:(0,l.jsx)(rE,{children:(0,l.jsx)(rN,{})})})}),(0,l.jsx)(rD,{tabKey:"holdings",tabNode:c,children:(0,l.jsx)(D.Suspense,{fallback:null,children:(0,l.jsx)(rE,{children:(0,l.jsx)(rM,{})})})})]})})}),rR=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:" bg-TradeBg md:pt-[4px] md:grid md:gap-[4px] md:grid-cols-[1fr_280_288px] md:grid-rows-[56px_585px_480px_24px]  lg:grid-cols-[1fr_288px_320px] lg:grid-rows-[56px_585px_480px_24px]  lgx:grid-cols-[320px_1fr_288px_320px] lgx:grid-rows-[56px_585px_480px_24px] xlgx:grid-cols-[320px_1fr_320px_400px] xlgx:grid-rows-[56px_585px_480px_24px]",children:t})},rO={subHeader:"order-1 col-start-1 col-end-5",market:"max-lg:hidden order-2 lgx:col-start-1",chart:"order-3 md:col-start-1 lgx:col-start-2",transactions:"order-4 md:col-start-2 lgx:col-start-3",orderForm:"order-5 md:col-start-3 lgx:col-start-4",history:"order-6 col-start-1 md:col-end-3 lgx:col-end-4 overflow-hidden",auditInfo:"order-7 md:col-start-3 lgx:col-start-4",footer:"order-8 col-start-1 col-end-4"},rF=e=>{let{name:t,children:i,isMobileLayout:r=!1,className:s=""}=e;return(0,l.jsx)("div",{className:i5()(s,rO[t],"md:rounded-[8px] bg-BasicBg",{"max-md:hidden":!r}),children:(0,l.jsx)(it,{name:t,children:i})})};var rH=i(80914);let rZ=e=>{let{className:t}=e;return(0,l.jsx)(ir.Z,{className:`items-center justify-center ${t}`,children:(0,l.jsx)(rH.Z,{variant:"secondary"})})};var rU=i(22265);let rW="STRATEGY_BUSINESS_STATES",r$="MICA_FORBIDDEN_LOCALSTORAGE_KEY",rz="ALPHA_FAVORITE_LOCALSTORAGE_KEY",rK="ALPHA_MARKET_TAB_LOCALSTORAGE_KEY",rX="ALPHA_MARKET_SORTING_LOCALSTORAGE_KEY";var rY=i(45242),rG=i(42244);let rq=async({platform:e,currency:t})=>{let i,r=rG.C&&eR.Q.read("userPreferredCurrency");try{i=await (0,iL.U2)(`/bapi/compliance/v1/friendly/compliance/market/business-compliance-check?platform=${e?.toUpperCase()}`,{headers:{"bnc-currency":t||r||"USD_USD"}})}catch(t){let e="";t instanceof Error&&(e=t.message),i={success:!1,data:{},message:e}}return i},rQ={web_alpha_buy_sell:"web_alpha_buy_sell",alpha_instant:"alpha_instant",alpha_limit:"alpha_limit"},rJ={},r0=(e,t)=>{var i;let r=null==(i=e.restriction.keys)?void 0:i.reduce((e,t)=>({...e,[t]:t}),{});return"function"==typeof(null==t?void 0:t.onResponse)&&t.onResponse(r||rJ),r},r1=(e,t,i)=>{let{data:r,isLoading:s,isFetched:a,isError:o}=(0,em.useQuery)(iI.i.QUERY_BUSINESS_COMPLIANCE_CHECK,()=>rq({platform:e,currency:t}).then(e=>{if(e.success)return r0(e.data,i);throw Error("queryBusinessComplianceCheck failed")}),{staleTime:1/0});return{restriction:r||rJ,isLoading:s,isFetched:a,isError:o}};var r2=i(97030),r5=i.n(r2),r3=i(18149),r6=i.n(r3);let r4=e=>{let{currency:t,isUseCache:i=!1}=e,{restriction:r,isLoading:s,isFetched:a,isError:o}=r1("WEB",t,{onResponse:e=>ew.tO.setItem(rW,e)}),l=(0,D.useRef)(eM.s?{}:ew.tO.getItem(rW));if(eM.s)return{restrictedBusinessMap:r,isLoading:!0,isError:!1};if(i&&(!a||r6()(l.current,r)))try{if(l.current&&r5()(l.current))return{restrictedBusinessMap:l.current,isLoading:!1,isError:!1}}catch{}return{restrictedBusinessMap:r,isLoading:s,isError:o}},r8=e=>{let{currency:t,isUseCache:i=!0}=e,{restrictedBusinessMap:r,isLoading:s}=r4({currency:t,isUseCache:i});return{getIsComplianceValid:(0,D.useCallback)(e=>!s&&void 0===r[e],[s,r]),isComplianceValidReady:!s}};var r7=i(82002);let r9="web_alpha_instant_entrance",se=e=>(0,r7.E)("finance-common",e);var st=i(84612);let si={canShowInstant:!0,canShowLimit:!1,isReady:!1},sr=()=>{let{currency:e}=(0,st.U8)(),{getIsComplianceValid:t,isComplianceValidReady:i}=r8({currency:e}),{result:r,isLoading:s}=se(r9),a=!!(null==r?void 0:r.pass)&&t(rQ.alpha_instant),{result:o,isLoading:l}=se("web_alpha_limit_entrance"),n=!!(null==o?void 0:o.pass)&&t(rQ.alpha_limit),d=i&&!s&&!l;return(0,D.useMemo)(()=>d?{canShowInstant:!n||a,canShowLimit:n,isReady:!0}:si,[a,n,d])},ss=(e,t)=>(null==e?void 0:e.symbols.filter(e=>e.baseAsset===t))||[],sa=e=>e===iV.TRADING||e===iV.SELL_ONLY,so=e=>e===iV.PENDING||e===iV.INIT||e===iV.DElISTED,sl=(e,t,i)=>{let r=ss(e,t);return i&&r.length>0&&r.every(e=>sa(e.status))?eC.xy.LIMIT:!i&&(0===r.length||r.length>0&&r.every(e=>so(e.status)))?eC.xy.INSTANT:void 0},sn=e=>{let{exchangeInfo:t,alphaId:i="",offline:r=!1,onlineAirdrop:s=!1,onlineTge:a=!1,tabKey:o=""}=e,l=sl(t,i,r);return"initial"===o?a?["tge",l]:s?["airdrop",l]:["",l]:[l,l]};var sd=i(94724),sc=i(11457);let sh=()=>{let[e="",t]=(0,rY.g)("alpha-tradeType",eC.xy.LIMIT);return{tradeType:e,setTradeType:t}},su=()=>{var e;let{alphaTokenId:t}=(0,sd.K)(),{data:i}=iM(),{data:r}=(0,sc.u)({alphaTokenId:t}),s=null==r?void 0:r.alphaId;return(null==i?void 0:i.symbols)&&(null==(e=i.symbols)?void 0:e.length)&&s&&sl(i,s,r.offline)||""},sg=()=>{let{tradeType:e,setTradeType:t}=sh(),{canShowInstant:i,canShowLimit:r,isReady:s}=sr();su(),(0,D.useEffect)(()=>{s&&(e===eC.xy.INSTANT&&!i&&r?t(eC.xy.LIMIT):e===eC.xy.LIMIT&&!r&&i&&t(eC.xy.INSTANT))},[e,s,r,i])},sm=async()=>{let e;try{e=await (0,iL.U2)("/bapi/asset/v2/private/asset-service/portfolio/get")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,msg:t,data:[]}}return e},sp=()=>{let e=(0,en._n)();return(0,em.useQuery)(iI.i.QUERY_ALPHA_FAVORITE_LIST,async()=>{let e=await sm();if(!e.success)throw Error(e.message||"");return e.data},{enabled:!!e,staleTime:1/0})},sx=()=>{let{data:e=[]}=sp(),t=(0,en._n)(),[i=[],r]=(0,rY.g)(rz,[]);return(0,D.useMemo)(()=>{if(!t)return i;let r=e.filter(e=>"ALPHA"===e.i)[0];return(null==r?void 0:r.l)?r.l.filter(e=>"L"===e.t).map(e=>e.s):[]},[e,i,t])},sf=e=>sx().some(t=>t===e),sb=(e,t,i)=>"ascend"===i?t-e:e-t,sy=e=>{let{sortInfo:t,keyword:i,tokenList:r,tabKey:s}=e,a=Object.keys(t)[0],o=Object.values(t)[0],{data:l}=(0,iD._)(),n=sx(),{data:d}=iM(),c=String(i).toLowerCase(),h=!!c,u=(0,D.useMemo)(()=>r.filter((e,t)=>{let i=null==l?void 0:l[e];return!!i&&!i.cexOffDisplay&&(!!h||"initial"===s||("favorite"===s?n.includes(i.alphaId):""===s||i.chainId===s))}),[r,l,s,n,d,h,o]),g=(0,D.useMemo)(()=>r.some(e=>{var t,i,r,a,o;return!!(null==l?void 0:l[e])&&((null==l||null==(i=l[e])||null==(t=i.symbol)?void 0:t.toLowerCase())===c||(null==l||null==(a=l[e])||null==(r=a.contractAddress)?void 0:r.toLowerCase())===c)&&(null==l||null==(o=l[e])?void 0:o.chainId)!==s}),[l,r,s,c]);return{filterAlphaTickersList:(0,D.useMemo)(()=>c?u.filter(e=>{var t,i,r,s,a,o;return(null==l||null==(i=l[e])||null==(t=i.symbol)?void 0:t.toLowerCase().includes(c))||(null==l||null==(s=l[e])||null==(r=s.baseAssetName)?void 0:r.toLowerCase().includes(c))||(null==l||null==(o=l[e])||null==(a=o.contractAddress)?void 0:a.toLowerCase())===c}).sort((e,t)=>{var i,r;return sb(+((null==l||null==(i=l[e])?void 0:i.chainId)==="56"),+((null==l||null==(r=l[t])?void 0:r.chainId)==="56"),"ascend")}):"initial"===s?u.slice(0,15):"default"!==o&&o&&a?"vol"===a?u.slice().sort((e,t)=>sb(Number(null==l?void 0:l[e].volume24h),Number(null==l?void 0:l[t].volume24h),o)):"24h"===a?u.slice().sort((e,t)=>sb(Number(null==l?void 0:l[e].percentChange24h),Number(null==l?void 0:l[t].percentChange24h),o)):"price"===a?u.slice().sort((e,t)=>sb(Number(null==l?void 0:l[e].price),Number(null==l?void 0:l[t].price),o)):"token"===a?u.slice().sort((e,t)=>{var i,r;let s=(null==l||null==(i=l[t].symbol)?void 0:i.charAt(0).toLowerCase())||"",a=(null==l||null==(r=l[e].symbol)?void 0:r.charAt(0).toLowerCase())||"";return"ascend"===o?s<a?-1:1:s<a?1:-1}):u:u,[u,a,o,l,c,s]),isOtherNetworkHasToken:g}};var sv=i(61939);let sC=e=>{let{keyword:t,onChange:i}=e,{t:r}=(0,tF.cK)();return(0,l.jsx)(is.ZP,{className:"w-full",children:(0,l.jsx)(sv.Z,{textFieldClassName:"w-full h-[32px]",mpInputType:"web",onChange:i,placeholder:r("alpha-market-searchPlaceholder",{defaultValue:"Search token name or address"}),value:t,enableClear:!0,variant:"line",size:"small"})})};var sw=i(88288),sS=i(56223);let sT=e=>{let{handleActiveTabClick:t,tabList:i,activeTab:r}=e,s=(0,iK.Sl)(),a=(0,D.useMemo)(()=>i.reduce((e,t,i)=>(e[i]=t.chainName,e),{}),[i]);return(0,l.jsx)(ir.Z,{className:"w-full mt-[12px]",children:(0,l.jsx)(rp.Z,{selectedIndex:r,onChange:e=>{t(e),ew.tO.setItem(rK,e),s(ii.Ks.click,{$element_id:"select_network",df_9:a[e]})},showSlideMasks:!0,showSlideArrow:!0,size:"small",variant:"primary-gray",children:i.map(e=>"favorite"===e.tabKey?(0,l.jsx)(rp.Z.TabPane,{className:"p-[2px]",tabNode:(0,l.jsx)(ir.Z,{className:"items-center justify-center",children:(0,l.jsx)(sw.Z,{className:`w-[16px] h-[16px] text-[16px] ${0===r?"text-PrimaryText":"text-DisableText"}`})})},e.tabKey):(0,l.jsx)(rp.Z.TabPane,{className:"p-[2px]",tabNode:(0,l.jsxs)(ir.Z,{className:"t-subtitle3 gap-[4px] text-PrimaryText items-center justify-center",children:[e.tabLogo&&(0,l.jsx)(sS.Z,{className:"w-[16px] h-[16px] rounded-[4px]",src:e.tabLogo}),e.tabText]})},e.tabKey))})})};var sA=i(88938),s_=i(62635),sL=i(2224),sk=i(34291),sI=i.n(sk);let sP=["default","descend","ascend"],sE="text-PrimaryText pointer-events-none	flex-none",sB=(0,D.memo)(e=>{let{sortDirections:t}=e;return null===t?(0,l.jsx)(sA.Z,{className:sE,size:10}):"descend"===t?(0,l.jsx)(s_.Z,{className:sE,size:10}):"ascend"===t?(0,l.jsx)(sL.Z,{className:sE,size:10}):(0,l.jsx)(sA.Z,{size:10})}),sN=(0,D.memo)(e=>{let{value:t,label:i,order:r,getOrder:s,style:a,showSort:o,postRender:n}=e,d=(0,D.useCallback)(e=>()=>{let i=sP.indexOf(e);i<2?i+=1:i=0,s({[t]:sP[i]})},[s,t]);return(0,l.jsxs)(is.ZP,{className:"flex items-center",style:a,children:[(0,l.jsxs)(is.ZP,{onClick:o?d(r):sI(),className:"flex cursor-pointer overflow-hidden items-center",children:[(0,l.jsx)(is.ZP,{className:"truncate text-TertiaryText typography-caption1",children:i}),o&&(0,l.jsx)(is.ZP,{className:"w-[16px] h-[16px] items-center justify-center flex",children:(0,l.jsx)(sB,{sortDirections:r})})]}),null==n?void 0:n()]})}),sM=(0,D.memo)(e=>{let{group:t,getGroupOrderKey:i,showSort:r,active:s}=e,a=!!Object.keys(s).length&&Object.keys(s)[0],o=Object.values(s).length?Object.values(s)[0]:"default",n=e=>{i(e)};return(0,l.jsx)(is.ZP,{className:"flex text-TertiaryText",children:t.map(e=>{let{key:t,label:i,postRender:s=()=>null,...d}=e;return(0,l.jsx)(sN,{value:t,label:i,getOrder:n,showSort:r,style:d,order:a===t?o:"default",postRender:s},t)})})}),sD=(0,D.memo)(e=>{let{group:t,active:i,getGroupOrderKey:r,showSort:s}=e;return(0,l.jsx)(is.ZP,{className:"h-[20px] mb-[4px] leading-[20px] w-full",children:(0,l.jsx)(sM,{group:t,active:i,getGroupOrderKey:r,showSort:s})})}),sV=e=>{let{showSort:t,sortInfo:i,onColumnClick:r}=e,{t:s}=(0,tF.cK)(),a=(0,D.useMemo)(()=>[{label:s("alpha-name",{defaultValue:"Name"}),key:"token",flex:"1 1 75",justifyContent:"flex-start",minWidth:"30px"},{label:(0,l.jsxs)(l.Fragment,{children:[" / ",s("alpha-vol",{defaultValue:"Vol"})]}),key:"vol",flex:"5 1 0",justifyContent:"flex-start",minWidth:"30px"},{label:s("alpha-last-price",{defaultValue:"Last Price"}),key:"price",flex:"1 1 75",minWidth:"75px",justifyContent:"flex-end"},{label:(0,l.jsxs)(l.Fragment,{children:[" / ",s("alpha-24h-chg",{defaultValue:"24h Chg"})]}),key:"24h",flex:"1 1 30",minWidth:"30px",justifyContent:"flex-end"}],[s]);return(0,l.jsx)(ir.Z,{className:"pt-[16px]",children:(0,l.jsx)(sD,{group:a,active:i,getGroupOrderKey:r,showSort:t})})};var sj=i(92251),sR=i(45654);let sO=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text-PrimaryText";return 0===Number(e)||Number.isNaN(Number(e))?t:Number(e)>0?"text-TextBuy":"text-TextSell"},sF=async(e,t)=>{let i;try{i=await (0,iL.v_)("/bapi/asset/v2/private/asset-service/portfolio/add",{symbols:e,groupIds:t})}catch(t){let e="";t instanceof Error&&(e=t.message),i={success:!1,msg:e,data:null}}return i},sH=async(e,t)=>{let i;try{i=await (0,iL.v_)("/bapi/asset/v2/private/asset-service/portfolio/delete",{symbols:e,groupIds:t})}catch(t){let e="";t instanceof Error&&(e=t.message),i={success:!1,msg:e,data:null}}return i},sZ=e=>{let t=(0,en._n)(),[i=[],r]=(0,rY.g)(rz,[]),s=[{s:e,t:"L"}],a=["ALPHA"];return(0,em.useMutation)(()=>(r([...i,e]),t)?sF(s,a).then(e=>{if(!e.success)throw e;return e}):Promise.resolve(null))},sU=e=>{let t=(0,en._n)(),[i=[],r]=(0,rY.g)(rz,[]),s=[{s:e,t:"L"}],a=["ALPHA"];return(0,em.useMutation)(()=>(r(i.filter(t=>t!==e)),t)?sH(s,a).then(e=>{if(!e.success)throw e;return e}):Promise.resolve(null))},sW=e=>{let{alphaId:t,from:i="ticker",className:r=""}=e,s=sf(t),{mutateAsync:a}=sZ(t),{mutateAsync:o}=sU(t),{refetch:n}=sp(),d=(0,en._n)(),c=(0,D.useCallback)(async e=>{e.stopPropagation(),e.preventDefault(),s?await o():await a(),d&&n()},[s,a,o,d,n]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ir.Z,{className:i5()(`justify-center items-center cursor-pointer ${r}`,{"w-[24px] h-[24px] text-[16px] rounded-[6px] border-[0.5px] border-solid border-Line mr-[8px]":"ticker"===i,"w-[16px] h-[16px]":"market"===i}),children:(0,l.jsx)(sw.Z,{onClick:c,className:`w-[16px] h-[16px] text-[16px] ${s?"text-PrimaryYellow":"text-DisableText"}`})})})},s$=e=>{let t=Number(e);return null!==e&&e!==1/0&&!Number.isNaN(t)};var sz=i(53202);let sK=e=>{let{alphaTokenId:t,onRowClick:i,style:r,tabKey:s}=e,{data:a}=(0,sc.u)({alphaTokenId:t}),{data:o}=iM(),n=Number(null==a?void 0:a.percentChange24h)>0?"+":"",{t:d}=(0,tF.cK)(),[c,h]=sn({exchangeInfo:o,alphaId:null==a?void 0:a.alphaId,offline:null==a?void 0:a.offline,onlineAirdrop:null==a?void 0:a.onlineAirdrop,onlineTge:null==a?void 0:a.onlineTge,tabKey:s});return(0,l.jsx)(is.ZP,{style:r,className:"cursor-pointer hover:bg-Input px-[16px]",children:(0,l.jsx)(sR.rU,{className:"no-underline",to:t2.uE,params:{chainSymbol:(0,tJ.o)((null==a?void 0:a.chainName)||""),contractAddress:(null==a?void 0:a.contractAddress)||""},preload:!1,children:(0,l.jsxs)(is.ZP,{className:"flex justify-between py-[4px]",onClick:()=>null==i?void 0:i((null==a?void 0:a.symbol)||"",h),children:[(0,l.jsxs)(ir.Z,{className:"items-center gap-[8px]",children:[(0,l.jsx)(sW,{from:"market",alphaId:(null==a?void 0:a.alphaId)||""}),(0,l.jsx)(il._,{alphaTokenId:t,size:"s"}),(0,l.jsxs)(is.ZP,{children:[(0,l.jsxs)(is.ZP,{className:"t-body3 text-PrimaryText",children:[(null==a?void 0:a.symbol)||"",!!c&&(0,l.jsx)(sj.Z,{className:"ml-[4px]",label:d(`alpha-${c.toLowerCase()}-only`,{defaultValue:c.toLocaleUpperCase()}),placement:"left",size:"small",variant:"info"})]}),(0,l.jsx)(is.ZP,{className:"t-caption1 text-TertiaryText",children:s$(null==a?void 0:a.volume24h)?`$${(0,iB.L$)((null==a?void 0:a.volume24h)||"")}`:eC.X2})]})]}),(0,l.jsxs)(is.ZP,{className:"text-right",children:[(0,l.jsx)(is.ZP,{className:"t-body3 text-PrimaryText",children:s$(null==a?void 0:a.price)?`${(0,tW.Dn)(`${null==a?void 0:a.price}`,t$.Bu.HIGH_LOWEST)}`:eC.X2}),(0,l.jsxs)(is.ZP,{className:`t-caption1 ${sO(Number(null==a?void 0:a.percentChange24h))}`,children:[n,s$(null==a?void 0:a.percentChange24h)?`${(0,iE.At)(null==a?void 0:a.percentChange24h,2)}%`:eC.X2]})]})]})})})},sX=(0,D.memo)(e=>{let{tokenList:t,onRowClick:i,isOtherNetworkHasToken:r,tabKey:s}=e,{t:a}=(0,tF.cK)(),o=(0,D.useMemo)(()=>e=>{let{key:r,index:a,style:o}=e,n=t[a];return(0,l.jsx)(sK,{onRowClick:i,style:o,alphaTokenId:n,tabKey:s},r)},[t,i,s]),{direction:n}=(0,Q.LP)();return(0,l.jsx)(is.ZP,{className:"h-[calc(100%-60px)] sm:h-[calc(100vh-284px)] lgx:h-[444px]",children:(null==t?void 0:t.length)>0?(0,l.jsx)(iO.qj,{children:e=>{let{width:i,height:r}=e;return(0,l.jsx)(iO.aV,{style:{direction:n},width:i,height:r,rowCount:t.length,rowHeight:50,rowRenderer:o})}}):(0,l.jsxs)(is.ZP,{className:"h-full text-DisableText text-[12px] text-center",children:[(0,l.jsx)(sz.Z,{className:"w-[64px] h-[64px] mt-[80px]"}),(0,l.jsxs)(ir.Z,{className:i5()("mt-[10px] flex-col items-center",{"text-PrimaryText t-subtitle2":r,"text-SecondaryText t-body3":!r}),children:[a("trd-common-norecords",{defaultValue:"No records"}),(0,l.jsx)(is.ZP,{className:"text-TertiaryText t-body3 w-[280px] mt-[12px]",children:r?a("alpha-try-switch-network",{defaultValue:"Try switching networks or searching by contract address."}):null})]})]})})}),sY=e=>{let{handleOnRowClick:t}=e,[i,r]=(0,D.useState)(),{t:s}=(0,tF.cK)(),a=(0,iK.Sl)(),{setTradeType:o}=sh(),n=ew.tO.getItem(rK),d=ew.tO.getItem(rX),[c,h]=(0,D.useState)(1),[u,g]=(0,D.useState)(d||{token:"default"}),{data:m,isLoading:p,isFetching:x}=(0,t1.R)(),f=(null==m?void 0:m.map(e=>(0,rU.y)(e)))||[],{data:b=[]}=iv(),{chainTabList:y,chainTabMap:v}=(0,D.useMemo)(()=>{let e=[{tabText:"",tabLogo:null,chainName:"",tabKey:"favorite"},{tabText:s("alpha-market-all",{defaultValue:"All"}),tabLogo:null,chainName:"",tabKey:""},{tabText:s("alpha-market-new",{defaultValue:"New"}),tabLogo:null,chainName:"",tabKey:"initial"},...b.map(e=>({tabText:e.chainName,tabLogo:e.chainIconUrl,chainName:e.chainName,tabKey:e.chainId}))],t=e.reduce((e,t,i)=>(e[i]=t.tabKey,e),{});return{chainTabList:e,chainTabMap:t}},[b,s]);(0,D.useEffect)(()=>{if(y.length>3){if("number"==typeof n)return h(n);let e=y.findIndex(e=>"56"===e.tabKey);ew.tO.setItem(rK,e),h(e)}},[y,n]);let{filterAlphaTickersList:C,isOtherNetworkHasToken:w}=sy({keyword:i||"",sortInfo:u,tokenList:f,tabKey:v[c]}),[S,T]=(0,D.useState)(!1);(0,D.useEffect)(()=>{S||T(!0)},[S]);let A=!p&&x||!S;return(0,l.jsx)(iX,{defaultTrackingData:{module:ii.kj.MARKET},children:(0,l.jsxs)(is.ZP,{className:"h-full",children:[(0,l.jsxs)(is.ZP,{className:"px-[16px] mt-[16px] lg:mt-[12px]",children:[(0,l.jsx)(sC,{keyword:i||"",onChange:e=>{r(e)}}),!i&&(0,l.jsx)(sT,{activeTab:c,tabList:y,handleActiveTabClick:h}),"initial"!==v[c]&&(0,l.jsx)(sV,{sortInfo:u,onColumnClick:e=>{g(e),ew.tO.setItem(rX,e)},showSort:!i})]}),A?(0,l.jsx)(rZ,{className:"h-[200px]"}):(0,l.jsx)(sX,{isOtherNetworkHasToken:w,onRowClick:(e,i)=>{null==t||t(),i&&o(i),a(ii.Ks.click,{$element_id:"select_network",df_9:e})},tokenList:C,tabKey:v[c]})]})})};var sG=i(73881);let sq=(0,D.memo)(e=>{let{alphaTokenId:t,className:i,logoSize:r="m",symbolTextSize:s=20,withCaret:a=!1,onClick:o}=e,{data:n}=(0,sc.u)({alphaTokenId:t});return(0,l.jsxs)(ir.Z,{className:i5()("gap-[8px] items-center",{"cursor-pointer":"function"==typeof o},i),onClick:o,children:[(0,l.jsx)(il._,{alphaTokenId:t,size:r}),(0,l.jsxs)(is.ZP,{children:[(0,l.jsxs)(ir.Z,{className:i5()("font-[600] leading-[24px] text-PrimaryText",{"text-[18px]":18===s,"text-[20px]":20===s}),children:[null==n?void 0:n.symbol,a?(0,l.jsx)(ig.Z,{className:"text-PrimaryText self-start pt-[4px] w-[20px] h-[20px]"}):null]}),(0,l.jsx)(is.ZP,{className:"text-[12px] font-[400] leading-[18px] text-ToastBg",children:null==n?void 0:n.name})]})]})});function sQ(e,t){let{onOpen:i,onClose:r}=t||{},[s,a]=(0,D.useState)(e||!1),o=(0,D.useCallback)(()=>{a(e=>e||(i?.(),!0))},[i]),l=(0,D.useCallback)(()=>{a(e=>e?(r?.(),!1):e)},[r]),n=(0,D.useCallback)(()=>s?l():o(),[l,o,s]);return[s,{open:o,close:l,toggle:n}]}sq.displayName="CoinTitle";var sJ=i(7344),s0=i(30617),s1=i(63541),s2=i(39326);let s5=e=>{let t=!!e.chainId&&!!e.contractAddress,{isLoading:i,data:r,refetch:s}=(0,em.useQuery)(iI.i.QUERY_ALPHA_TOKEN_AUDIT(e),async()=>await i6({binanceChainId:e.chainId,contractAddress:e.contractAddress,requestId:(0,i8.v4)()}),{enabled:t,cacheTime:1/0,staleTime:1/0}),a=(0,D.useMemo)(()=>{var e,t;return null==r||null==(t=r.data)||null==(e=t.riskItems)?void 0:e.map(e=>e.details).flat().filter(e=>e.isHit)},[r]),o=(0,D.useMemo)(()=>!(null==r?void 0:r.data)||(null==r?void 0:r.data.isHidden),[r]),l=(0,D.useMemo)(()=>(null==r?void 0:r.data)&&r.data.isSupported&&!r.data.hasResult,[r]),n=(0,D.useMemo)(()=>(null==r?void 0:r.data)&&(!r.data.isSupported||!r.data.riskItems||0===r.data.riskItems.length),[r]);return{data:null==r?void 0:r.data,discoveredRisks:a,shouldHideAuditData:o,isAuditInProgress:l,isNotSupportedYet:n,isLoading:i,refetch:s}},s3=()=>{let{alphaTokenId:e}=(0,sd.K)(),{data:t}=(0,sc.u)({alphaTokenId:e}),{chainId:i,contractAddress:r}=t||{chainId:"",contractAddress:""};return s5({chainId:i,contractAddress:r})};var s6=i(81867),s4=i(89814);let s8=e=>{let{onClick:t}=e;return(0,l.jsx)(s6.Z,{onClick:t,sz:"tiny",textVariant:"gray",variant:"text",children:(0,l.jsx)(s4.Z,{className:"w-[20px] h-[20px] text-IconNormal"})})},s7=()=>{let{t:e}=(0,tF.cK)();return(0,l.jsxs)(ir.Z,{className:"flex-col justify-center items-center h-full px-[32px]",children:[(0,l.jsx)(sz.Z,{className:"w-[64px] h-[64px] mb-[16px]"}),(0,l.jsx)(is.ZP,{className:"t-subtitle1 mb-[8px]",children:e("coin.title/audit_no_security_info",{defaultValue:"No security information available"})}),(0,l.jsx)(is.ZP,{className:"text-center t-body2 text-SecondaryText",children:e("coin.content/audit_no_security_info",{defaultValue:"Due to the token's low liquidity, making it temporarily unsupported for detection. Please carefully assess the risks associated with the token before trading."})})]})},s9=e=>{let{visible:t,className:i}=e,r=(0,D.useRef)(null),[s,a]=(0,D.useState)(!0),[o,{toggle:n}]=sQ(!1),{t:d}=(0,tF.cK)();return(0,D.useEffect)(()=>{function e(){(null==r?void 0:r.current)&&a(r.current.scrollHeight>r.current.clientHeight)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),(0,l.jsxs)(ir.Z,{className:i5()("gap-[4px] t-caption2 text-[10px] leading-[16px] text-SecondaryText md:text-TertiaryText",i),children:[(0,l.jsx)(is.ZP,{children:"*"}),(0,l.jsx)(is.ZP,{ref:r,className:i5()({"line-clamp-2":!o}),children:d("coin.content/audit_disclaimer",{defaultValue:`This security detection function provides a reference assessment of the tokens security. The results may have limitations or inaccuracies and should not be considered a guarantee of the tokens safety.`})}),(0,l.jsx)(is.ZP,{className:"h-[16px] self-end cursor-pointer",onClick:n,children:(0,l.jsx)(s0.Z,{className:i5()("w-[16px] h-[16px] text-IconNormal",{"rotate-180":o,hidden:!s})})})]})},ae=e=>{var t;let{type:i,className:r}=e,{discoveredRisks:s}=s3(),{t:a}=(0,tF.cK)(),o=null==(t=(s||[]).filter(e=>e.riskType===i))?void 0:t.length;return(0,l.jsxs)(ir.Z,{className:i5()("gap-[8px]",r),children:[(0,l.jsx)(is.ZP,{className:"grid items-center justify-center w-[40px] h-[40px] bg-Input rounded-[10px]",children:(0,l.jsx)(sJ.Z,{className:i5()("w-[27px] h-[27px]",{"text-Error":o>0&&"RISK"===i,"text-PrimaryYellow":o>0&&"CAUTION"===i,"text-DisableText":0===o})})}),(0,l.jsx)(is.ZP,{className:"text-PrimaryText t-caption0",children:(0,l.jsx)(rI.c,{t:a,i18nKey:`coin.label/audit_${"CAUTION"===i?"caution":"risk"}_count`,defaults:`<count_number>{{count}}</count_number> ${"CAUTION"===i?"Caution(s)":"Risk(s)"}`,components:{count_number:(0,l.jsx)(is.ZP,{className:"font-medium text-[16px] leading-[20px]"})},count:o})})]})},at=e=>{let{className:t}=e;return(0,l.jsxs)(ir.Z,{className:t,children:[(0,l.jsx)(ae,{className:"basis-1/2",type:"RISK"}),(0,l.jsx)(ae,{className:"basis-1/2",type:"CAUTION"})]})};var ai=i(43396);let ar=e=>{let{risk:t,compact:i,className:r}=e;return t?(0,l.jsxs)(ir.Z,{className:i5()("gap-[4px]",r),children:[(0,l.jsx)(ir.Z,{className:"w-[16px] h-[18px] shrink-0 items-center",children:t.isHit?(0,l.jsx)(sJ.Z,{className:i5()("w-[16px] h-[16px]",{"text-Error":"RISK"===t.riskType,"text-PrimaryYellow":"CAUTION"===t.riskType})}):(0,l.jsx)(ai.Z,{className:"w-[16px] h-[16px] text-Success"})}),(0,l.jsxs)(ir.Z,{className:i?void 0:"flex-col",children:[(0,l.jsx)("dt",{className:"t-body4 text-PrimaryText text-[12px] leading-[18px]",children:t.title}),i?null:(0,l.jsx)("dd",{className:"t-body5 text-SecondaryText md:text-TertiaryText text-[12px] leading-[18px]",children:t.description})]})]}):null};var as=i(31563),aa=i(45897);let ao=e=>{let{children:t,portalNode:i,enablePortal:r,isInDrawer:s}=e;return(0,l.jsx)(as.Z,{placement:"top",tooltips:t,portalNode:i,enablePortal:r,arrow:!0,useReactPopper:!0,className:s?"z-[10000]":void 0,offset:8,reactPopperProps:{screenPadding:8},enableClickBubble:!0,delay:{enter:600},children:(0,l.jsx)(aa.Z,{className:"w-[16px] h-[16px] text-IconNormal cursor-pointer"})})},al=e=>{let{type:t}=e,{discoveredRisks:i}=s3(),r=(null==i?void 0:i.filter(e=>e.riskType===t))||[],{t:s}=(0,tF.cK)();return 0===r.length?null:(0,l.jsxs)(is.ZP,{className:"mb-[12px]",children:[(0,l.jsx)(is.ZP,{className:"mb-[12px] t-subtitle2 text-ToastBg",children:s(`coin.title/audit_${t.toLowerCase()}s`,{defaultValue:"CAUTION"===t?"Cautions":"Risks"})}),r.map(e=>(0,l.jsx)(ar,{className:"mb-[12px]",risk:e},e.order))]})},an=e=>{let{category:t}=e,{isMobile:i}=(0,el.F)(),r=t.details.filter(e=>!e.isHit);return r.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(ir.Z,{className:"gap-[4px] items-center mb-[16px]",children:[(0,l.jsx)(is.ZP,{className:"t-subtitle2 text-ToastBg",children:t.name}),(0,l.jsxs)(ao,{isInDrawer:!i,children:[(0,l.jsx)(is.ZP,{children:t.name}),(0,l.jsx)(is.ZP,{children:t.description})]})]}),(0,l.jsx)("dl",{className:"grid gap-[12px] mb-[24px]",children:r.map(e=>(0,l.jsx)(ar,{risk:e},e.order))})]}):null},ad=e=>{let{className:t}=e,{data:i,discoveredRisks:r}=s3();return(0,l.jsxs)(is.ZP,{className:t,children:[(null==r?void 0:r.length)?(0,l.jsxs)(is.ZP,{className:"mb-[24px] empty:hidden",children:[(0,l.jsx)(al,{type:"RISK"}),(0,l.jsx)(al,{type:"CAUTION"})]}):null,null==i?void 0:i.riskItems.map(e=>(0,l.jsx)(an,{category:e},e.id))]})};var ac=i(34986);let ah=e=>{let{className:t}=e,{isLight:i}=ej();return(0,l.jsxs)(is.ZP,{className:i5()("mt-auto",t),children:[(0,l.jsxs)(ir.Z,{className:"gap-[16px] items-center mb-[16px]",children:[(0,l.jsx)(sG.Z,{className:"w-auto min-w-0 flex-grow"}),(0,l.jsxs)(ir.Z,{className:"gap-[4px] t-caption1 items-center text-IconNormal dark:text-ToastBg",children:[(0,l.jsx)(ac.Z,{className:"w-[16px] h-[16px] text-DisableText dark:text-TertiaryText"}),"Binance Security"]}),(0,l.jsx)(sG.Z,{className:"w-auto min-w-0 flex-grow"})]}),(0,l.jsx)(ir.Z,{className:"mb-[16px] justify-center",children:(0,l.jsx)(sS.Z,{className:"w-[247px] h-[14px]",src:i?`${_.Xs}/static/images/futures/alpha/coin-audit-logos.png`:`${_.Xs}/static/images/futures/alpha/coin-audit-logos-dark.png`,isBackground:!0})})]})},au=e=>{let{visible:t,requestClose:i}=e,{isNotSupportedYet:r}=s3(),{t:s}=(0,tF.cK)();return(0,l.jsx)(s2.Z,{visible:t,direction:"right",children:(0,l.jsxs)(ir.Z,{className:"w-[400px] flex-col h-[100vh]",children:[(0,l.jsxs)(ir.Z,{className:"px-[16px] pt-[24px] pb-[12px] justify-between sticky top-0 border-0 border-b-[1px] border-solid border-Line bg-CardBg",children:[(0,l.jsx)(is.ZP,{className:"t-subtitle6",children:s("coin.title/audit",{defaultValue:"Audit"})}),(0,l.jsx)(s8,{onClick:i})]}),(0,l.jsx)(ir.Z,{className:"p-[16px] flex-grow overflow-auto flex-col",children:r?(0,l.jsx)(s7,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s9,{className:"mb-[16px]"}),(0,l.jsx)(at,{className:"mb-[24px]"}),(0,l.jsx)(ad,{}),(0,l.jsx)(ah,{})]})})]})})},ag=e=>{var t;let{type:i}=e,{discoveredRisks:r}=s3(),{t:s}=(0,tF.cK)(),a=null==(t=(r||[]).filter(e=>e.riskType===i))?void 0:t.length;return(0,l.jsxs)(ir.Z,{className:"gap-[4px] items-center",children:[(0,l.jsx)(sJ.Z,{className:i5()("w-[16px] h-[16px]",{"text-Error":a>0&&"RISK"===i,"text-PrimaryYellow":a>0&&"CAUTION"===i,"text-DisableText":0===a})}),(0,l.jsx)(is.ZP,{children:(0,l.jsx)(rI.c,{t:s,i18nKey:`coin.label/audit_${"CAUTION"===i?"caution":"risk"}_count`,defaults:`<count_number>{{count}}</count_number> ${"CAUTION"===i?"Caution(s)":"Risk(s)"}`,components:{count_number:(0,l.jsx)("span",{})},count:a})})]})},am=()=>{let[e,t]=(0,D.useState)(!0),{discoveredRisks:i}=s3(),r=(0,D.useCallback)(e=>{e.stopPropagation(),t(e=>!e)},[]);return(null==i?void 0:i.length)?(0,l.jsxs)(is.ZP,{className:"mt-[12px] mb-[16px] px-[12px] pt-[12px] rounded-[12px] bg-SecondaryBg",children:[i.map(t=>(0,l.jsx)(ar,{className:"mb-[12px]",risk:t,compact:e},t.order)),(0,l.jsx)(ir.Z,{className:"justify-center mb-[8px]",children:(0,l.jsx)(is.ZP,{className:"mt-[-4px] text-IconNormal hover:text-PrimaryText cursor-pointer",onClick:r,children:(0,l.jsx)(s0.Z,{className:i5()("w-[16px] h-[16px]",{"rotate-180":!e})})})})]}):null},ap=()=>{let{data:e,shouldHideAuditData:t,isAuditInProgress:i,isNotSupportedYet:r}=s3(),[s,{open:a,close:o}]=sQ(!1),{t:n}=(0,tF.cK)(),d=(0,iK.Sl)();return t?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(ir.Z,{className:"mb-[12px] justify-between",children:[(0,l.jsx)(is.ZP,{className:"t-body3 text-TertiaryText",children:n("coin.label/audit",{defaultValue:"Audit"})}),(0,l.jsxs)(ir.Z,{className:i5()("items-center gap-[4px] group",{"cursor-pointer":!i}),onClick:()=>{i||(a(),d(ii.Ks.click,{$element_id:"audit"}))},children:[i?(0,l.jsx)(is.ZP,{className:"t-subtitle2",children:n("coin.content/audit_status_in_progress",{defaultValue:"In Progress"})}):r?(0,l.jsx)(is.ZP,{className:"t-subtitle2",children:eC.X2}):(0,l.jsxs)(ir.Z,{className:"t-subtitle2 items-center",children:[(0,l.jsx)(ag,{type:"RISK"}),(0,l.jsx)(is.ZP,{className:"w-[1px] h-[12px] mx-[8px] bg-Line"}),(0,l.jsx)(ag,{type:"CAUTION"})]}),i?null:(0,l.jsx)(s1.Z,{className:"h-4 w-4 text-IconNormal group-hover:text-PrimaryText"})]})]}),(0,l.jsx)(am,{},null==e?void 0:e.requestId),(0,l.jsx)(au,{visible:s,requestClose:o})]})},ax=e=>{let{className:t}=e,{t:i}=(0,tF.cK)();return(0,l.jsxs)(ir.Z,{className:i5()("gap-[4px] t-caption2 text-[10px] leading-[16px] text-SecondaryText md:text-TertiaryText",t),children:[(0,l.jsx)(is.ZP,{children:"*"}),(0,l.jsx)(is.ZP,{children:i("coin.content/info_disclaimer",{defaultValue:`The data presented is for informational purposes only, Its provided by the third party, and shown on an as is
        basis, without representation or warranty or any klind.`})})]})},af=e=>{let t=!!e.chainId&&!!e.contractAddress,{isLoading:i,data:r,refetch:s}=(0,em.useQuery)(iI.i.QUERY_ALPHA_TOKEN_INFO(e),async()=>await i3(e),{enabled:t,cacheTime:1/0,staleTime:1/0});return{data:null==r?void 0:r.data,isLoading:i,refetch:s}},ab=()=>{let{alphaTokenId:e}=(0,sd.K)(),{data:t}=(0,sc.u)({alphaTokenId:e}),{chainId:i,contractAddress:r}=t||{chainId:"",contractAddress:""};return af({chainId:i,contractAddress:r})},ay=e=>{let{tooltipContent:t,children:i}=e,{isMobile:r}=(0,el.F)();return(0,l.jsx)(as.Z,{arrow:!0,enablePortal:!0,useReactPopper:!0,trigger:"hover",placement:"top-start",tooltips:t,delay:{enter:600},offset:-8,reactPopperProps:{screenPadding:8},enableClickBubble:!0,children:(0,l.jsx)(s6.Z,{className:"t-caption1 md:t-body3",textVariant:"gray",variant:"info",sz:r?"tiny":"middle",children:i})})},av=e=>{let{type:t,value:i}=e,{t:r}=(0,tF.cK)();return(0,l.jsxs)(ir.Z,{className:"justify-between flex-col md:flex-row basis-1/2",children:[(0,l.jsx)("dt",{children:(0,l.jsx)(ay,{tooltipContent:"buy"===t?(0,l.jsxs)(is.ZP,{children:[(0,l.jsx)(is.ZP,{children:r("coin.label/buy_tax",{defaultValue:"Buy Tax"})}),(0,l.jsx)(is.ZP,{children:r("coin.hint/buy_tax",{defaultValue:"A fee deducted when purchasing tokens; a high tax rate can reduce received tokens."})})]}):(0,l.jsxs)(is.ZP,{children:[(0,l.jsx)(is.ZP,{children:r("coin.label/sell_tax",{defaultValue:"Sell Tax"})}),(0,l.jsx)(is.ZP,{children:r("coin.hint/sell_tax",{defaultValue:"A fee deducted when selling tokens; a high tax rate can make selling impossible or draining users' funds."})})]}),children:r(`coin.label/${t}_tax`,{defaultValue:"buy"===t?"Buy Tax":"Sell Tax"})})}),(0,l.jsx)("dd",{className:"t-subtitle2 text-PrimaryText",children:i?`${i}%`:eC.X2})]})},aC=e=>{var t,i,r,s;let{className:a}=e,{data:o}=ab(),{data:n}=s5({chainId:null==o||null==(t=o.metaInfo)?void 0:t.chainId,contractAddress:null==o||null==(i=o.metaInfo)?void 0:i.contractAddress});return!n||(null==n?void 0:n.isHidden)?null:(0,l.jsxs)("dl",{className:i5()("flex md:flex-col md:gap-[12px]",a),children:[(0,l.jsx)(av,{type:"buy",value:null==n||null==(r=n.extraInfo)?void 0:r.buyTax}),(0,l.jsx)(av,{type:"sell",value:null==n||null==(s=n.extraInfo)?void 0:s.sellTax})]})};var aw=i(20763);let aS=e=>{let{value:t,gap:i="medium",iconSize:r=16,children:s,onClick:a}=e,{showSuccessNotification:o}=(0,aw.l)(),{t:n}=(0,tF.yk)(),d=(0,D.useCallback)(()=>{let e=(0,t6.v)(t);e&&o(n("copy-success",{defaultValue:"Copy successfully!"})),"function"==typeof a&&a(e)},[t,o,n,a]);return(0,l.jsxs)(ir.Z,{className:i5()("group items-center cursor-pointer",{"gap-[2px]":"small"===i,"gap-[4px]":"medium"===i,"gap-[8px]":"large"===i}),onClick:d,children:[s||t,(0,l.jsx)(t4.Z,{className:i5()("text-IconNormal group-hover:text-PrimaryText",{"w-[12px] h-[12px]":12===r,"w-[16px] h-[16px]":16===r})})]})};var aT=i(22992),aA=i(91881),a_=i(11609),aL=i(56538),ak=i(39856),aI=i(6629),aP=i(58714);let aE=new Map([["github",aT.Z],["rules",aA.Z],["etherscan",a_.Z],["x",aL.Z],["telegram",ak.Z],["discord",aI.Z],["facebook",aP.Z]]),aB=e=>{let{site:t}=e,i=(0,iK.Sl)(),r=(0,D.useCallback)(()=>{i(ii.Ks.click,{$element_id:"social_media"})},[i]),s=aE.get(t.label);return s?(0,l.jsx)(rL,{className:"cursor-pointer",path:t.link,target:"_blank",onClick:r,children:(0,l.jsx)(s,{className:"w-[24px] h-[24px] text-PrimaryText"})},t.label):null},aN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.slice(0,6)+"..."+e.slice(-6):""};var aM=i(28879),aD=i.n(aM);let aV=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return aD()(e).format(t)},aj=new Map([["website","Official Website"],["whitepaper","Whitepaper"]]),aR=e=>{let{title:t,content:i}=e;return(0,l.jsxs)(ir.Z,{className:"justify-between mb-[12px]",children:[(0,l.jsx)("dt",{className:"t-body3 text-SecondaryText md:text-TertiaryText",children:t}),(0,l.jsx)("dd",{className:"t-body3 text-PrimaryText",children:i})]})},aO=e=>{let{site:t}=e,{t:i}=(0,tF.cK)(),r=(0,iK.Sl)(),s=(0,D.useCallback)(()=>{"website"===t.label&&r(ii.Ks.click,{$element_id:"official_website"}),"whitepaper"===t.label&&r(ii.Ks.click,{$element_id:"white_paper"})},[t,r]);return t?(0,l.jsx)(rL,{className:"cursor-pointer",path:t.link,target:"_blank",onClick:s,children:(0,l.jsx)(sj.Z,{className:"[&>div]:!cursor-pointer [&>div>div]:!h-[24px] [&>div>div]:!rounded-[6px] [&>div>div]:!px-[8px] [&>div>div]:!py-[3px]",label:i(`coin.label/link_${t.label}`,{defaultValue:aj.get(t.label)||t.label}),size:"middle",variant:"info"})},t.link):null},aF=e=>{var t,i,r,s,a,o,n,d,c,h,u,g,m,p,x,f,b,y,v,C,w,S;let{className:T}=e,{data:A}=ab()||{},{isMobile:_}=(0,el.F)(),{t:L}=(0,tF.cK)(),k=(0,iK.Sl)(),I=(0,D.useCallback)(e=>{e&&k(ii.Ks.click,{$element_id:"copy"})},[k]);return A?(0,l.jsxs)("dl",{className:T,children:[_?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(aR,{title:L("coin.label/24h_high_price",{defaultValue:"24h High"}),content:`$${null==(t=A.statsInfo)?void 0:t.priceHigh24h}`}),(0,l.jsx)(aR,{title:L("coin.label/24h_low_price",{defaultValue:"24h Low"}),content:`$${null==(i=A.statsInfo)?void 0:i.priceLow24h}`}),(0,l.jsx)(aR,{title:L("coin.label/24h_volume",{defaultValue:"24h Volume"}),content:`$${(0,iB.L$)((null==(r=A.statsInfo)?void 0:r.volume24h)||"")}`}),(0,l.jsx)(aR,{title:L("coin.label/24h_transaction",{defaultValue:"24h Transaction"}),content:(0,iB.L$)((null==A||null==(s=A.statsInfo)?void 0:s.count24h)||"")})]}):null,(0,l.jsx)(aR,{title:L("coin.label/circulating_supply",{defaultValue:"Circulating Supply"}),content:(null==(a=A.statsInfo)?void 0:a.circulatingSupply)?`${(0,iB.L$)(null==(o=A.statsInfo)?void 0:o.circulatingSupply)} ${null==(n=A.metaInfo)?void 0:n.symbol}`:eC.X2}),(0,l.jsx)(aR,{title:L("coin.label/total_supply",{defaultValue:"Total Supply"}),content:(null==(d=A.statsInfo)?void 0:d.totalSupply)?`${(0,iB.L$)(null==(c=A.statsInfo)?void 0:c.totalSupply)} ${null==(h=A.metaInfo)?void 0:h.symbol}`:eC.X2}),(0,l.jsx)(aR,{title:L("coin.label/create_time",{defaultValue:"Create Time"}),content:(null==(u=A.statsInfo)?void 0:u.createTime)?aV(new Date(null==(g=A.statsInfo)?void 0:g.createTime),"YYYY-MM-DD HH:mm"):eC.X2}),(0,l.jsx)(aR,{title:L("coin.label/launch_time",{defaultValue:"Launch Time"}),content:(null==(m=A.statsInfo)?void 0:m.launchTime)?aV(new Date(null==(p=A.statsInfo)?void 0:p.launchTime),"YYYY-MM-DD HH:mm"):eC.X2}),(0,l.jsx)(aR,{title:L("coin.label/contract_address",{defaultValue:"Contract Address"}),content:(()=>{let{contractAddress:e}=(null==A?void 0:A.metaInfo)||{};return(0,l.jsx)(aS,{value:e,onClick:I,children:aN(e)})})()}),(null==(x=A.metaInfo)?void 0:x.links)&&(null==(f=A.metaInfo.links)?void 0:f.length)!==0?(0,l.jsx)(aR,{title:L("coin.label/website",{defaultValue:"Website"}),content:(null==(v=A.metaInfo)?void 0:v.links)&&(null==(C=A.metaInfo.links)?void 0:C.length)!==0?(0,l.jsx)(ir.Z,{className:"gap-[8px] justify-end flex-wrap",children:A.metaInfo.links.map(e=>(0,l.jsx)(aO,{site:e},e.label))}):null}):null,!_&&(null==(b=A.metaInfo)?void 0:b.socialMedias)&&(null==(y=A.metaInfo.socialMedias)?void 0:y.length)!==0?(0,l.jsx)(aR,{title:L("coin.label/social_media",{defaultValue:"Social Media"}),content:(null==(w=A.metaInfo)?void 0:w.socialMedias)&&(null==(S=A.metaInfo.socialMedias)?void 0:S.length)!==0?(0,l.jsx)(ir.Z,{className:"gap-[8px] justify-end flex-wrap",children:A.metaInfo.socialMedias.map(e=>(0,l.jsx)(aB,{site:e},e.label))}):null}):null]}):null},aH=e=>{var t,i;let{className:r}=e,s=(0,Q.tZ)(),{data:a}=ab(),{t:o}=(0,tF.cK)(),{isMobile:n}=(0,el.F)(),d="zh-CN"===s?null==a||null==(t=a.metaInfo)?void 0:t.cnDescription:null==a||null==(i=a.metaInfo)?void 0:i.enDescription;return d?(0,l.jsxs)(is.ZP,{className:i5()("md:my-[16px]",r),children:[(0,l.jsx)(is.ZP,{className:i5()("mb-[16px] md:mb-[8px] text-PrimaryText md:text-TertiaryText",{"t-body3":!n,"t-subtitle6":n}),children:(0,l.jsx)(aS,{value:d,children:o("coin.label/introduction",{defaultValue:"Introduction"})})}),(0,l.jsx)(is.ZP,{className:"t-body2 text-PrimaryText !text-[14px] break-words",children:d})]}):null},aZ=()=>{let{alphaTokenId:e}=(0,sd.K)();return(0,l.jsx)(iX,{defaultTrackingData:{module:ii.kj.INFO},children:(0,l.jsxs)(is.ZP,{className:"p-[16px] h-full overflow-y-auto",children:[(0,l.jsx)(sq,{alphaTokenId:e,className:"mb-[16px]"}),(0,l.jsx)(ap,{}),(0,l.jsx)(aC,{}),(0,l.jsx)(sG.Z,{className:"my-[16px]"}),(0,l.jsx)(aF,{}),(0,l.jsx)(aH,{}),(0,l.jsx)(ax,{})]})})};var aU=i(66597);let aW=e=>{let{title:t="",onClose:i}=e;return(0,l.jsxs)("div",{className:i5()("flex items-center justify-between mb-[16px]",{"py-[14px]":!!t}),children:[(0,l.jsx)("div",{className:"t-headline4 text-PrimaryText",children:t}),(0,l.jsx)(s4.Z,{className:"text-PrimaryText cursor-pointer w-[20px] h-[20px]",onClick:()=>i()})]})};var a$=i(15030),az=i(82294);let aK=!1,aX=()=>{let e=ee(),t=(0,en._n)();(0,D.useEffect)(()=>{e&&re.K&&!aK&&t&&((0,e_.lB)({type:"sdk",name:"tradeSDK",sdk:e()}),(0,e_.lB)({type:"withStream",name:"",sdk:re.K}),aK=!0)},[e,t]),(0,D.useEffect)(()=>{(0,st.op)(["spot","funding"])},[])},aY=e=>{if(!(null==e?void 0:e.selectedWallet))return!1;if(0===e.selectedWallet.length)return!0;let t=Array.isArray(null==e?void 0:e.walletConfig)&&e.walletConfig.length>0&&e.walletConfig.some(e=>(null==e?void 0:e.balance)&&+e.balance>0),i=Array.isArray(null==e?void 0:e.selectedWallet)&&e.selectedWallet.length>0&&e.selectedWallet.every(e=>!e.balance);return t&&i},aG=e=>{let{asset:t}=e,i=(0,st.of)({biz:"alpha",coin:t});return(0,D.useMemo)(()=>({maxAvailable:null==i?void 0:i.maxAvaliable,selectedWallet:null==i?void 0:i.selectedWallet,walletConfig:null==i?void 0:i.walletConfig,isAvailableLoading:aY(i)}),[null==i?void 0:i.maxAvaliable,null==i?void 0:i.selectedWallet,null==i?void 0:i.walletConfig])};var aq=i(20366),aQ=i(76539);let aJ=async e=>{let t;try{t=await (0,iL.v_)("/bapi/defi/v1/private/wallet-direct/swap/cex/get-quote",e)}catch(i){let e="";i instanceof Error&&(e=i.message),t={success:!1,msg:e,data:{rate:{},mode:{priorityOnPrice:{},priorityOnSuccess:{}}}}}return t},a0=(0,tZ.U)(e=>({lastFetchTime:0,animationPlayedTimestamp:0,isEnablePolling:!0,setLastFetchTime:t=>e(()=>({lastFetchTime:t})),setIsEnablePolling:t=>{e(()=>({isEnablePolling:t}))},playLoadingAnimation:()=>{e(()=>({animationPlayedTimestamp:Date.now()}))}})),a1=e=>({fromChain:e.fromBinanceChainId,fromToken:e.fromToken,toChain:e.toBinanceChainId,toToken:e.toToken,fromAmount:e.fromCoinAmount,priorityMode:e.priorityMode,customNetworkFeeMode:e.customNetworkFeeMode||"",customSlippage:e.customSlippage||""}),a2=e=>{let{payload:t,enabled:i,onSuccess:r}=e,s=(0,en._n)(),a=(0,D.useRef)(null),o=!Number.isNaN(Number(t.fromCoinAmount))&&Number(t.fromCoinAmount)>0,l=!!t.fromBinanceChainId&&!!t.fromToken&&!!t.toBinanceChainId&&!!t.toToken&&o&&!!t.fromCoinAmount,{setLastFetchTime:n,isEnablePolling:d,playLoadingAnimation:c}=a0();return(0,em.useQuery)(iI.i.QUERY_ALPHA_SWAP_RATE(a1(t)),async()=>{let{data:e,success:i}=await aJ(t);return(a.current&&clearTimeout(a.current),n(Date.now()),a.current=setTimeout(()=>{c()},13e3),i)?e:{}},{enabled:d&&!!s&&l&&!1!==i,cacheTime:15e3,staleTime:15e3,refetchInterval:15e3,onSuccess(e){"function"==typeof r&&r(e)}})},a5=()=>{let e=(0,aq.qo)({name:aU.Tj.SIDE});return{side:e,isBuy:e===aU.V$.BUY,isSell:e===aU.V$.SELL}},a3=e=>{let{alphaTokenId:t}=e,{isBuy:i}=a5(),[r]=(0,aq.qo)({name:[aU.Tj.CEX_ASSET]}),{data:s}=(0,sc.u)({alphaTokenId:t}),a={symbol:r,chainId:null==s?void 0:s.chainId,contractAddress:""};return i?{fromToken:r,fromTokenInfo:a,toToken:null==s?void 0:s.symbol,toTokenInfo:s}:{fromToken:null==s?void 0:s.symbol,fromTokenInfo:s,toToken:r,toTokenInfo:a}},a6=e=>e?e.reduce((e,t)=>(t.chainId&&t.contractAddress&&(e[`${t.chainId}-${t.contractAddress}`]=t),e),{}):{},a4=e=>{let{alphaTokenId:t}=e,{data:i=[]}=(0,rw.E)();return(0,D.useMemo)(()=>{var e;let r=a6(i);return{maxAvailable:(null==r||null==(e=r[t])?void 0:e.free)||""}},[t,i])},a8=async()=>{let e;try{e=await (0,iL.U2)("/bapi/asset/v2/public/asset/asset/get-all-asset")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,message:t,data:[]}}return e},a7=["queryAssetLogo"],a9=["QUERY_ALL_COINS_FINANCE"],oe=e=>["queryUserStrategyComplianceCheck",e],ot=e=>e.reduce((e,t)=>{let{assetCode:i,assetName:r}=t;return e[i]={...t,coin:i,name:r},e},{}),oi=async()=>{let{data:e}=await a8();return ot(e)},or=({asset:e})=>{let{data:t}=(0,em.useQuery)(a9,()=>oi(),{refetchOnMount:!1});return t?.[e]||{}},os=e=>{let{cexAsset:t}=e,i=or({asset:t});return(null==i?void 0:i.assetDigit)||8},oa=e=>{let{alphaTokenId:t}=e,{data:i}=(0,sc.u)({alphaTokenId:t});return(null==i?void 0:i.tradeDecimal)||18},oo=e=>{let{cexAsset:t,alphaTokenId:i,isAlphaToken:r}=e,s=oa({alphaTokenId:i}),a=os({cexAsset:t}),o=r?s:a,l=(0,D.useCallback)(e=>(0,iB.Kl)((0,iE.At)(e,o)),[o]);return{precision:o,formatFn:l}},ol=e=>{let{alphaTokenId:t,isAlphaToken:i,cexAsset:r}=e,{maxAvailable:s}=a4({alphaTokenId:t}),{maxAvailable:a,isAvailableLoading:o}=aG({asset:r}),{precision:l,formatFn:n}=oo({alphaTokenId:t,cexAsset:r,isAlphaToken:i}),d=i?Number(s)||0:a,c=i?String(s||""):String(a||""),h=Number((0,iE.yd)(d,l,eC.CP)),u=i?t$.md[t$.Bu.MIDDLE].maximum:l,g=(0,iE.yd)(d,u,eC.CP),m=n(String(d)),p=(0,D.useCallback)(e=>i?(0,tW.E$)(e,"MIDDLE"):(0,iE.At)(e,l),[i,l]),x=p(c||"0");return{maxAvailable:d,stringMaxAvailable:c,roundedMaxAvailable:h,formattedMaxAvailable:m,formattedMiddlePrecisionAvbl:x,roundedMiddleMaxAvailable:g,formatMiddlePrecisionAvbFn:p,isWalletAvailableLoading:o}},on=e=>{let{alphaTokenId:t,isAlphaToken:i,cexAsset:r,fromAmount:s}=e,{maxAvailable:a}=ol({alphaTokenId:t,isAlphaToken:i,cexAsset:r});return Number(s)>Number(a)},od=()=>{let e=(0,aq.qo)({name:aU.Tj.PRIORITY_MODE_FROM_RECOMMEND});return(0,aq.qo)({name:aU.Tj.PRIORITY_MODE_FROM_USER})||e},oc=e=>{let{alphaTokenId:t,cexAsset:i}=e,[r]=(0,aq.qo)({name:[aU.Tj.FROM_AMOUNT]}),{isBuy:s}=a5(),{stringMaxAvailable:a,roundedMaxAvailable:o,maxAvailable:l,formatMiddlePrecisionAvbFn:n,formattedMiddlePrecisionAvbl:d,isWalletAvailableLoading:c}=ol({alphaTokenId:t,isAlphaToken:!s,cexAsset:i}),h=r===String(o)||n(r)===d;return{shouldPlaceAllAvbl:h,stringMaxAvailable:a,maxAvailable:l,placeAmount:h?a:r,isWalletAvailableLoading:c}},oh=e=>{let{alphaTokenId:t}=e,i=od(),[r,s,a,o]=(0,aq.qo)({name:[aU.Tj.PRIORITY_MODE_FROM_USER,aU.Tj.CUSTOM_PRIORITY_NETWORK_FEE,aU.Tj.CUSTOM_PRIORITY_SLIPPAGE,aU.Tj.CEX_ASSET]}),{placeAmount:l}=oc({alphaTokenId:t,cexAsset:o}),{setValue:n}=(0,aq.Gc)(),{isBuy:d}=a5(),[c,h]=(0,D.useState)(l),u=(0,D.useRef)(null),g=(0,em.useQueryClient)(),{fromTokenInfo:m,toTokenInfo:p}=a3({alphaTokenId:t}),x=(0,D.useMemo)(()=>({fromToken:null==m?void 0:m.symbol,fromContractAddress:(null==m?void 0:m.contractAddress)||"",fromBinanceChainId:(null==m?void 0:m.chainId)||"",fromCoinAmount:c,toToken:null==p?void 0:p.symbol,toContractAddress:(null==p?void 0:p.contractAddress)||"",toBinanceChainId:(null==p?void 0:p.chainId)||"",...r?{priorityMode:i}:{},...r===aU.Dr.CUSTOMIZE?{customNetworkFeeMode:s,customSlippage:a}:{}}),[s,a,null==m?void 0:m.chainId,null==m?void 0:m.contractAddress,null==m?void 0:m.symbol,i,r,c,null==p?void 0:p.chainId,null==p?void 0:p.contractAddress,null==p?void 0:p.symbol]);return(0,D.useEffect)(()=>{c!==l&&(g.setQueryData(iI.i.QUERY_ALPHA_SWAP_RATE(a1(x)),void 0),g.invalidateQueries(iI.i.QUERY_ALPHA_SWAP_RATE(a1(x)),{exact:!0,refetchActive:!1,refetchInactive:!1}))},[l,x,g,c]),(0,D.useEffect)(()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{h(l)},1e3)},[l]),(0,D.useEffect)(()=>()=>{u.current&&(clearTimeout(u.current),u.current=null)},[c]),a2({enabled:!on({alphaTokenId:t,cexAsset:o,isAlphaToken:!d,fromAmount:l})&&c===l,payload:x,onSuccess:e=>{(null==e?void 0:e.priorityMode)&&void 0===x.priorityMode?n(aU.Tj.PRIORITY_MODE_FROM_RECOMMEND,e.priorityMode):void 0!==x.priorityMode&&(null==e?void 0:e.priorityMode)&&n(aU.Tj.PRIORITY_MODE_FROM_RECOMMEND,void 0)}})},ou=()=>{let{reset:e}=(0,aq.Gc)();return(0,D.useCallback)(t=>{e({...aU.Sr,...t||{}})},[e])},{TabPane:og}=rp.Z,om=()=>{let{t:e}=(0,tF.Mi)(),t=ou(),{getValues:i}=(0,aq.Gc)(),{field:{value:r,onChange:s}}=(0,aq.bc)({name:aU.Tj.SIDE,rules:{required:!0}}),a=+(r!==aU.V$.BUY),o=e=>{t({[aU.Tj.SIDE]:e,[aU.Tj.CEX_ASSET]:i(aU.Tj.CEX_ASSET)})};return(0,l.jsxs)(rp.Z,{variant:"buySell",selectedIndex:a,className:"rounded-[8px]",onChange:e=>{o(0===e?aU.V$.BUY:aU.V$.SELL)},children:[(0,l.jsx)(og,{tabNode:e("buy",{defaultValue:"Buy"})}),(0,l.jsx)(og,{tabNode:e("sell",{defaultValue:"Sell"})})]})},op=e=>{let{showUnderLine:t,triggerClassName:i,children:r,enterDelayTime:s=600,...a}=e;return(0,l.jsx)(as.Z,{useReactPopper:!0,bubbleFontSize:12,delay:{enter:s},placement:"top",triggerClassName:i5()("cursor-help",i),arrow:!0,enableClickBubble:!0,once:!0,...a,children:t?(0,l.jsx)(is.ZP,{className:"border-0 border-b border-dotted",children:r}):r})},{TabPane:ox}=rp.Z,of=e=>{let{tradeType:t}=e,{t:i}=(0,tF.Mi)(),{t:r}=(0,tF.cK)();return(0,l.jsxs)("div",{className:"w-[280px]",children:[t===eC.xy.LIMIT&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"text-[12px] leading-[18px] font-[400]",children:r("order-type-limit-tips",{defaultValue:"Limit Tips"})})}),t===eC.xy.INSTANT&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"text-[12px] leading-[18px] font-[400]",children:r("order-type-instant-tips",{defaultValue:"Instant Tips"})})})]})},ob=e=>{let{onTabChange:t}=e,{t:i}=(0,tF.cK)(),{tradeType:r,setTradeType:s}=sh(),a=(0,iK.Sl)(),{canShowInstant:o,canShowLimit:n,isReady:d}=sr(),c=(0,D.useMemo)(()=>{let e=[];return n&&e.push({label:i("order-type-limit",{defaultValue:"Limit"}),value:eC.xy.LIMIT}),o&&e.push({label:i("order-type-instant",{defaultValue:"Instant"}),value:eC.xy.INSTANT}),e},[n,o,i]);(0,D.useEffect)(()=>{d&&(o?n||s(eC.xy.INSTANT):s(eC.xy.LIMIT))},[o,n,d,s]),(0,D.useEffect)(()=>{t(r)},[r,t]);let h=(0,D.useCallback)(e=>{let t=c[e].value;t!==r&&(a(ii.Ks.click,{$element_id:0===e?"limit":"instant",module:ii.kj.ORDER_FORM}),s(t))},[c,s,r]),u=(0,D.useCallback)(e=>{e&&a(ii.Ks.click,{$element_id:"order_type_info",module:ii.kj.ORDER_FORM,type:"limit"})},[]);return(0,l.jsxs)("div",{className:"flex items-center justify-between [&_.bn-tab]:!text-[14px]",children:[(0,l.jsx)(rp.Z,{variant:"default",selectedIndex:c.findIndex(e=>e.value===r),onChange:h,children:c.map(e=>(0,l.jsx)(ox,{tabKey:e.value,tabNode:e.label}))}),(0,l.jsx)(op,{enterDelayTime:50,offset:4,tooltips:(0,l.jsx)(of,{tradeType:r}),trigger:"hover",onVisibleChange:u,children:(0,l.jsx)(aa.Z,{className:"cursor-help w-[16px] h-[16px] text-IconNormal hover:text-PrimaryText"})})]})};var oy=i(66257),ov=i(69688);let oC=e=>{let{isAlphaToken:t,alphaTokenId:i,cexAsset:r,asset:s}=e,{fromToken:a}=a3({alphaTokenId:i}),o=s||a,{t:n}=(0,tF.cK)(),d=(0,et._)(),c=(0,iK.Sl)(),{maxAvailable:h,formattedMiddlePrecisionAvbl:u,roundedMiddleMaxAvailable:g}=ol({isAlphaToken:t,alphaTokenId:i,cexAsset:r}),m=os({cexAsset:r}),p=t?t$.md[t$.Bu.MIDDLE].maximum:m,x=Number(h)>0&&0===Number(g),{theme:f}=ej(),b=(0,l.jsx)(is.ZP,{className:i5()("text-SecondaryText md:text-TertiaryText t-caption1",{"cursor-help border-0 border-b border-dotted !leading-[15px]":d}),children:n("common-Avbl",{defaultValue:"Avbl"})}),y=(0,D.useCallback)(e=>{e&&c(ii.Ks.click,{$element_id:"available",module:ii.kj.ORDER_FORM})},[]);return d&&s$(h)?(0,l.jsx)(ir.Z,{className:"h-full w-full",children:(0,l.jsxs)(ir.Z,{className:"text-TertiaryText items-center justify-between w-full",children:[t?(0,l.jsx)(is.ZP,{className:"mr-[4px]",children:(0,l.jsx)(op,{tooltips:n("alpha-avbl-tooltip",{defaultValue:"Available source: Alpha wallet."}),onVisibleChange:y,enterDelayTime:50,children:b})}):(0,l.jsx)(ov.f6,{className:"flex",theme:f,children:(0,l.jsx)(ov.WR,{coin:r,biz:"alpha",children:(0,l.jsx)(is.ZP,{className:"pr-[4px] bg-CardBg md:bg-transparent",children:b})})}),(0,l.jsx)(ir.Z,{className:"gap-[4px] items-center",children:(0,l.jsxs)(is.ZP,{className:"text-PrimaryText text-[12px] leading-[18px] font-[500]",children:[x?`< 0.${"0".repeat(p-1)}1`:u," ",o]})})]})}):(0,l.jsxs)(ir.Z,{className:"text-TertiaryText items-baseline justify-between",children:[b,(0,l.jsxs)(is.ZP,{className:"ml-[4px] text-PrimaryText truncate text-[12px] leading-[18px] font-[500]",children:[d?t?(0,tW.E$)(String(0),"MIDDLE"):(0,iE.At)(0,m):"--",o]})]})};var ow=i(88294);let oS=e=>{let{classname:t,target:i,text:r}=e;return(0,l.jsx)(is.ZP,{className:i5()("max-w-[135px] whitespace-nowrap overflow-hidden text-ellipsis typography-subtitle2",t),htmlFor:i,children:r})},oT=/^\d+\.?\d*|%$/,oA=/^0+(?=\d)/,o_=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,oL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?1:Math.abs(1/10**e)};var ok=i(34406);let oI=e=>{let{precision:t,maxLength:i,value:r="",onChange:s,onBlur:a,onFocus:o,prefix:n,prefixClassnames:d,suffix:c,name:h,variant:u="line",className:g,maxNumber:m,minNumber:p,errorText:x,highlightInitValue:f=!1,testId:b,focusRef:y,tooltipNode:v,shouldFocus:C=!1,rhfInputRef:w,status:S,isTextAlignRight:T=!1,...A}=e,_=(0,D.useRef)(r),[L,k]=(0,D.useState)(!1),I=(0,D.useRef)(null),P=!Number.isNaN(Number(r)),E=oL(t),B=e=>{let s=String(e);return!oT.test(s)&&""!==s||Number.isNaN(Number(s))?r:(function(e){let t=`${e}`.match(o_);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(s=s.replace(oA,""))>t&&(s=s.replace(RegExp(`^(\\d*\\.\\d{${t}})\\d*`),"$1")),i&&s.split(".")[0].length>i&&(s=r),0===t&&(s=s.replace(".","")),m&&Number(s)>m&&(s=m.toString()),s)},N=B(r);(0,D.useEffect)(()=>{C&&I.current&&setTimeout(()=>{var e,t;null==(t=I.current)||null==(e=t.focus)||e.call(t)})},[w,C]),(0,D.useImperativeHandle)(y,()=>({focus:()=>{setTimeout(()=>{var e,t;null==(t=I.current)||null==(e=t.focus)||e.call(t)},100)}})),(0,D.useEffect)(function(){N!==r&&"function"==typeof s&&s(N)},[N,s,r]);let M=(0,D.useMemo)(()=>!!f&&(P?Number(N)===Number(_.current):N===_.current),[P,N,f]),V=(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ow.Z,{className:i5()("!w-full placeholder:text-[14px]",g,{"no-prefix":!n,"no-suffix":!c,highlight:M}),id:h,variant:u,type:P?"number":"text",step:E,value:N,onChange:e=>{"function"==typeof s&&s(B(e))},onFocus:e=>{"function"==typeof o&&o(e)},onBlur:e=>{let t=e.target.value;"function"==typeof a&&a(t),""!==t&&("number"==typeof p&&Number(t)<p&&(t=p.toString()),"number"==typeof m&&Number(t)>m&&(t=m.toString()),t!==r&&(e.target.value=t,"function"==typeof s&&s(t)))},onKeyDown:e=>{if("e"===e.key||"-"===e.key||"+"===e.key)return void e.preventDefault();ok.electron&&(38===e.keyCode||40===e.keyCode)&&(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)&&e.preventDefault()},prefix:n?(0,l.jsx)(oS,{classname:d,text:n,target:h}):null,suffix:(0,l.jsx)(ir.Z,{className:"text-PrimaryText typography-subtitle2",children:c}),"data-testid":b,ref:w||I,status:x?"error":S,isPrefixFixedType:T,autoComplete:"off",...A})});return void 0!==v?(0,l.jsx)(as.Z,{arrow:!0,onVisibleChange:k,offset:4,placement:"top-start",useReactPopper:!0,open:!!v&&L,tooltips:L&&(0,l.jsx)("span",{className:"text-[12px]",children:v}),className:"w-full overflow-hidden",trigger:"click",variant:"gray",delay:{enter:600},children:(0,l.jsx)(is.ZP,{className:"w-full",children:V})}):V};var oP=i(61350);let oE=e=>{let{cexAsset:t}=e,{selectedWallet:i}=aG({asset:t});return(0,D.useMemo)(()=>1===i.length?"FUNDING":"FUNDING_AND_SPOT",[i.length])},oB=async e=>{let t;try{t=await (0,iL.v_)("/bapi/accounts/v1/private/account/compliance/userComplianceCheck",e)}catch(i){let e="";i instanceof Error&&(e=i.message),t={success:!1,message:e,data:{}}}return t};var oN=i(18401),oM=i(47110),oD=i(17851),oV=i(21324);let oj=["200003903","200003904","200003905"],oR={0xbebd140:{icon:(0,l.jsx)(oN.Z,{className:"w-[96px] h-[96px]"}),title:"kyc-required-title",description:"kyc-required-desc",buttonText:"kyc-verify-now",trackPop:"submit_kyc"},0xbebd13f:{icon:(0,l.jsx)(oM.Z,{className:"w-[96px] h-[96px]"}),title:"kyc-failed-title",description:"kyc-failed-desc",buttonText:"kyc-view-status",trackPop:"kyc_fail"},0xbebd141:{icon:(0,l.jsx)(oD.Z,{className:"w-[96px] h-[96px]"}),title:"kyc-pending-title",description:"kyc-pending-desc",faqUrl:"/support/faq/list/255-303",buttonText:"kyc-verify-again",trackPop:"under_review"}},oO=()=>{let{openModal:e,closeModal:t,openDrawer:i,closeDrawer:r}=(0,tP.sJ)(),{t:s}=(0,tF.cK)(),a=(0,iK.Sl)(),{isMobile:o}=(0,el.F)();return(0,D.useCallback)(async()=>new Promise((n,d)=>{oB({productLine:"USER_KYC_GUIDE",operation:"KYC_STATUS_CHECK"}).then(c=>{let{success:h,data:u}=c,g=null==u?void 0:u.errorCode;if(h&&g&&oj.includes(g)){let{icon:n,title:c,description:h,faqUrl:u,buttonText:m,trackPop:p}=oR[g];a(ii.Ks.popupView,{pageName:"alpha_trading",eventName:"kyc_popup",title:p});let x=(0,l.jsxs)("div",{className:"text-center p-[24px]",children:[n,(0,l.jsxs)("div",{className:"mt-[16px]",children:[(0,l.jsx)("div",{className:"text-[20px] font-[600] leading-[28px] text-TextPrimary",children:s(c)}),(0,l.jsx)("div",{onClick:e=>{var t;(null==e||null==(t=e.target)?void 0:t.tagName)==="A"&&a(ii.Ks.click,{eventName:"kyc_popup",pageName:"alpha_trading",title:p,$element_id:"help_center"})},className:"text-[14px] font-[400] leading-[22px] text-TextSecondary mt-[8px] text-left [&_a]:text-TextLink [&_a]:underline",dangerouslySetInnerHTML:{__html:s(h,{faqUrl:u})||""}})]}),(0,l.jsx)(s6.Z,{variant:"primary",className:"flex-1 w-full rounded-[10px] mt-[24px]",onClick:()=>{a(ii.Ks.click,{eventName:"kyc_popup",pageName:"alpha_trading",title:p,$element_id:"verify"}),o?r():t(),window.open("/kyc-router","_blank"),d("")},children:s(m)}),(0,l.jsxs)("a",{href:`/chat/?errorCode=${g}&question=account_function_verify_personal_account&bizType=13&sourceEntry=58&sendCategoryTag=true`,target:"_blank",className:"flex items-center gap-[4px] text-TextLink justify-center no-underline mt-[8px] h-[40px]",onClick:()=>{a(ii.Ks.click,{eventName:"kyc_popup",pageName:"alpha_trading",title:p,$element_id:"cs_bot"})},children:[(0,l.jsx)(oV.Z,{className:"w-[20px] h-[20px] text-TextLink"}),(0,l.jsx)("div",{className:"text-[16px] font-[500] leading-[24px]",children:s("kyc-custom-service")})]})]});o?i({direction:"bottom",content:x}):e({maskClose:!0,className:"[&_.bn-modal-wrap]:!w-[360px] [&_.bn-modal-wrap]:!h-[360px] z-[1500]",content:x})}else n("")}).catch(e=>{n("")})}),[o,s,a,t,r])},oF=e=>{let{children:t,fromAmount:i,targetAmount:r,containerClassName:s="inline-block",source:a="alpha",trackType:o="instant",trackElementId:n="transfer",targetCoin:d}=e;(0,oP.v)({cdnHost:_.Xs||"",host:_.$g,onerror:console.error,loadUikitStyle:!1});let[c,h]=(0,D.useState)(!1),u=(0,iK.Sl)(),g=(0,aq.qo)({name:aU.Tj.CEX_ASSET}),m=oE({cexAsset:g||""}),p=oO(),x="FUNDING_AND_SPOT"===m?"SPOT_FUNDING":"FUNDING",f=d||g,b=(0,Q.tZ)(),y=(0,oP.I)().getCoinPair,v=async()=>{if(await p(),"undefined"!=typeof window&&!c){var e;h(!0);let t="USDT"===f?"BTC":"USDT",{fromCoin:s,success:l}=await y({toCoin:f,walletType:x,maxRequest:3,defaultFromCoin:t});null==(e=window.CONVERT_WIDGET)||e.open({source:a,biz:"alpha",fromCoin:l?s:t,targetCoin:f,fromAmount:i,targetAmount:r,lng:b}),h(!1),u(ii.Ks.click,{$element_id:n,module:ii.kj.ORDER_FORM,type:o})}};return(0,l.jsx)("div",{onClick:v,className:s,children:t})};var oH=i(89874),oZ=i(67365),oU=i(6713);let oW=()=>{let{data:e}=(0,em.useQuery)(a7,()=>(0,oU.XO)().then(e=>e.reduce((e,t)=>(e[t.asset]=t.pic,e),{})),{refetchOnMount:!1});return(0,D.useCallback)(t=>e?.[t]||"",[e])},o$=e=>{let{currency:t,size:i=20,className:r,showEmpty:s=!1}=e,a=oW(),o=t?a(t):"",n=i5()(r,{"w-[40px] h-[40px]":40===i,"w-[20px] h-[20px]":20===i,"text-DisableText":!o});return o?(0,l.jsx)(is.ZP,{as:"img",className:n,src:o}):s?"":(0,l.jsx)(oZ.Z,{className:n})},oz=e=>{let{asset:t,amount:i,amountInUsd:r}=e,s=(0,st.Bb)();return(0,D.useMemo)(()=>{let e=s(Number(i),t),a=s(Number(r)),o=r?a:e,{formattedFiatAmountWithPrefix:l,formattedFiatPrice:n}=(0,iB.x6)({symbol:null==o?void 0:o.symbol,fiatPriceNumber:null==o?void 0:o.fiatPriceNumber,amount:i});return{formattedFiatPrice:n,formattedFiatAmountWithPrefix:l,...o}},[i,t,r,s])},oK=()=>{let e=(0,st.Bb)();return(0,D.useCallback)(t=>{let{amount:i,asset:r}=t,s=e(Number(i),r),{formattedFiatAmountWithPrefix:a,formattedFiatPrice:o}=(0,iB.x6)({symbol:null==s?void 0:s.symbol,fiatPriceNumber:null==s?void 0:s.fiatPriceNumber,amount:i});return{formattedFiatPrice:o,formattedFiatAmountWithPrefix:a,...s}},[e])},oX=["MAIN","CARD"],oY={MAIN:{},CARD:{}},oG=()=>{var e,t,i;let r=(0,st.FB)();return(null==(e=r.value)?void 0:e.walletBalanceData)?{isReady:!0,userBalanceMap:null==(i=r.value)||null==(t=i.walletBalanceData)?void 0:t.reduce((e,t)=>{let i=t.accountType;if(oX.includes(i)){let r=t.assetBalances.reduce((e,t)=>({...e,[t.asset]:{free:t.free}}),{});e[i]=r}return e},oY)}:{isReady:!1,userBalanceMap:oY}},oq=e=>{let{assets:t}=e,{isReady:i,userBalanceMap:r}=oG(),s=oK();return(0,D.useMemo)(()=>{if(!i||0===t.length)return[];let e=[];return t.forEach(t=>{var i,a,o,l,n;let d=+((null==(a=r.CARD)||null==(i=a[t])?void 0:i.free)||0)+ +((null==(l=r.MAIN)||null==(o=l[t])?void 0:o.free)||0),c=null==(n=s({amount:`${d}`,asset:t}))?void 0:n.fiatPriceNumber;e.push({asset:t,free:d,fiatAmount:c})}),e},[t,r,s,i])},{Option:oQ}=ip.Z,oJ=e=>{let{value:t,showCoinLogo:i,showDropdown:r=!0,onClick:s}=e;return(0,l.jsxs)("div",{className:i5()("flex items-center",{"cursor-pointer":r}),onClick:s,children:[i&&t&&(0,l.jsx)(o$,{currency:t,size:20,showEmpty:!0}),(0,l.jsx)("span",{className:"t-body4 text-PrimaryText ml-[4px]",children:t}),r&&(0,l.jsx)(oH.Z,{className:"ml-[2px] text-IconNormal",size:16})]})},o0=e=>{let{asset:t,showBalance:i,free:r=0,onClick:s}=e,{isMobile:a}=(0,el.F)(),o=or({asset:t}),{formattedFiatAmountWithPrefix:n}=oz({asset:t,amount:r.toString()});return a?(0,l.jsxs)("div",{className:"py-[4px] px-[6px] flex items-center",onClick:s,children:[(0,l.jsx)(o$,{currency:t,size:20}),(0,l.jsxs)("div",{className:"mr-[auto] ml-[10px] text-left",children:[(0,l.jsx)("div",{className:"t-subtitle6 text-PrimaryText",children:t}),(0,l.jsx)("div",{className:"t-caption1 t-SecondaryText",children:(null==o?void 0:o.name)||t})]}),(0,l.jsxs)("div",{className:"text-right",children:[i&&(0,l.jsx)("div",{className:"t-subtitle1 text-PrimaryText",children:r}),i&&(0,l.jsx)("div",{className:"t-caption1 t-SecondaryText",children:n})]})]}):(0,l.jsxs)("div",{className:"py-[4px] px-[6px]",children:[(0,l.jsxs)("div",{className:"flex items-center mb-[4px]",children:[(0,l.jsx)(o$,{currency:t,size:20}),(0,l.jsx)("div",{className:"ml-[8px] t-subtitle1 text-PrimaryText",children:t}),i&&(0,l.jsx)("div",{className:"ml-[auto] t-subtitle1 text-PrimaryText",children:r})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center pl-[28px]",children:[(0,l.jsx)("div",{className:"t-body3 t-TertiaryText",children:(null==o?void 0:o.name)||t}),i&&(0,l.jsx)("div",{className:"t-body3 t-TertiaryText",children:n})]})]})},o1=[iV.PENDING,iV.SELL_ONLY,iV.TRADING],o2=e=>{let{className:t,showCoinLabelLogo:i,showBalance:r,containerWidth:s,transformAssets:a,value:o,onChange:n,exchangeInfoAssets:d}=e,{isLoading:c,isLoggedIn:h}=(0,en.f0)(),u=oq({assets:a}),{isMobile:g}=(0,el.F)(),[m,p]=(0,D.useState)(!1),x=!c&&!h&&a.length>0,f=(0,D.useMemo)(()=>x?a.map(e=>({asset:e,free:void 0})):u.sort((e,t)=>{if(d){var i,r;let s=null==d||null==(i=d[e.asset])?void 0:i.status,a=null==d||null==(r=d[t.asset])?void 0:r.status;if(s&&a&&s!==a)return o1.indexOf(a)-o1.indexOf(s)}return t.fiatAmount-e.fiatAmount}),[u,d,x]);(0,D.useEffect)(()=>{if(!c&&f.length>0&&(!o||!a.includes(o))){var e;n(null==(e=f[0])?void 0:e.asset)}},[o,c,n,f,a]);let b=(0,D.useMemo)(()=>0===f.length?"--":o,[o,f,x]);return a.length<=1?(0,l.jsx)("div",{className:t,children:(0,l.jsx)(oJ,{value:b,showCoinLogo:i,showDropdown:!1})}):g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s2.Z,{visible:m,direction:"bottom",size:"auto",enablePortal:!0,onClose:()=>p(!1),children:(0,l.jsx)("div",{className:"p-[16px]",children:f.length>0&&f.map(e=>{let{asset:t,free:i}=e;return(0,l.jsx)(o0,{asset:t,showBalance:!x&&r,free:i,onClick:()=>{n(t),p(!1)}},t)})})}),(0,l.jsx)(oJ,{value:b,showCoinLogo:i,onClick:()=>p(!0)})]}):(0,l.jsx)(ip.Z,{customField:(0,l.jsx)(oJ,{value:b,showCoinLogo:i}),fieldVariant:"borderless",onChange:e=>{n(e[0])},placement:"bottom-end",size:"tiny",trigger:"click",type:"single",value:[b],variant:"auto",className:i5()("text-left",t),useReactPopper:!0,reactPopperProps:s?{popperWidth:s}:void 0,children:f.map(e=>{let{asset:t,free:i}=e;return(0,l.jsx)(oQ,{value:t,children:(0,l.jsx)(o0,{asset:t,showBalance:!x&&r,free:i})},t)})})},o5={symbol:"",code:"",fiatPrice:eC.X2,userFiat:"",fiatPriceNumber:0,formattedFiatPrice:eC.X2},o3=e=>{let{alphaTokenId:t,tokenAmount:i,tokenAmountInUsd:r}=e,{data:s}=(0,sc.u)({alphaTokenId:t}),a=(0,st.Bb)();return(0,D.useMemo)(()=>{let e=(null==s?void 0:s.close)&&i?a((0,iE.Jp)(i,null==s?void 0:s.close).toNumber(),null==s?void 0:s.quoteAsset):o5,t=a(+(r||0)),o=r?t:e,{formattedFiatAmountWithPrefix:l,formattedFiatPrice:n}=(0,iB.x6)({symbol:null==o?void 0:o.symbol,fiatPriceNumber:null==o?void 0:o.fiatPriceNumber,amount:i});return{...o,formattedFiatPrice:n,formattedFiatAmountWithPrefix:l}},[null==s?void 0:s.close,a,null==s?void 0:s.quoteAsset,i,r])},o6=e=>{let{fromAmount:t,fromCoinAmountInUsd:i}=e,{getValues:r}=(0,aq.Gc)(),{formattedFiatAmountWithPrefix:s}=oz({amount:t,asset:r(aU.Tj.CEX_ASSET),amountInUsd:i});return(0,l.jsx)(l.Fragment,{children:s})},o4=e=>{let{alphaTokenId:t,fromAmount:i,fromCoinAmountInUsd:r}=e,{formattedFiatAmountWithPrefix:s}=o3({alphaTokenId:t,tokenAmount:i,tokenAmountInUsd:r});return(0,l.jsx)(l.Fragment,{children:s})},o8=e=>{let{alphaTokenId:t,isBuy:i,fromAmount:r,fromCoinAmountInUsd:s}=e;return i?(0,l.jsx)(o6,{fromAmount:r,fromCoinAmountInUsd:s}):(0,l.jsx)(o4,{fromAmount:r,alphaTokenId:t,fromCoinAmountInUsd:s})},o7=()=>{let{t:e}=(0,tF.cK)(),{isBuy:t}=a5();return(0,D.useCallback)((i,r)=>{let{minInputAmount:s,maxInputAmount:a,maxAvailable:o,precision:l}=r;if(!i)return{isValid:!1,errorMessage:""};if(s&&Number(i)<Number(s))return{isValid:!1,errorMessage:e("min-amount-error",{defaultValue:"Min Amount {{ minInputAmount }}",minInputAmount:(0,iE.At)(s,l)})};if(!t&&o&&Number(i)>Number(o))return{isValid:!1,errorMessage:e("sell-overMaxAvailable-error",{defaultValue:"Exceed available"})};if(a&&Number(i)>Number(a)||o&&Number(i)>Number(o)){let t=a?Math.min(Number(a),Number(o)):o;return{isValid:!1,errorMessage:e("max-amount-error",{defaultValue:"Max Amount {{ maxInputAmount }}",maxInputAmount:(0,iE.yd)(t,l,eC.CP)})}}return{isValid:!0,errorMessage:""}},[t,e])},o9=e=>{let{alphaTokenId:t}=e,{data:i}=(0,sc.u)({alphaTokenId:t}),r=(0,tJ.o)((null==i?void 0:i.chainName)||""),{data:s,isLoading:a}=(0,ib.Yj)();return{data:(s?s[r]:void 0)||{},isLoading:a}},le=e=>{let{data:t}=o9({alphaTokenId:e});return t.transformAssets||[""]},lt=[{value:0},{value:25},{value:50},{value:75},{value:100}],li=e=>{let{alphaTokenId:t,minInputAmount:i,maxInputAmount:r,containerWidth:s,fromCoinAmountInUsd:a}=e,{t:o}=(0,tF.cK)(),n=(0,iK.Sl)(),{isBuy:d}=a5(),c=o7(),{trigger:h,getValues:u}=(0,aq.Gc)(),g=u(aU.Tj.CEX_ASSET),m=!d,{maxAvailable:p,roundedMaxAvailable:x,stringMaxAvailable:f}=ol({alphaTokenId:t,isAlphaToken:m,cexAsset:g}),{precision:b}=oo({alphaTokenId:t,cexAsset:g,isAlphaToken:m}),y=(0,en._n)(),v=le(t),{field:{value:C,onChange:w}}=(0,aq.bc)({name:aU.Tj.CEX_ASSET,rules:{required:!0}}),{field:{value:S,onChange:T},fieldState:{error:A}}=(0,aq.bc)({name:aU.Tj.FROM_AMOUNT,rules:{required:!0,validate:e=>{let{isValid:t,errorMessage:s}=c(e,{minInputAmount:i,maxInputAmount:r,maxAvailable:Number(p),precision:b});return s||t}}}),{fromToken:_}=a3({alphaTokenId:t}),L=!!(null==A?void 0:A.message);(0,D.useEffect)(()=>{(r||i||p)&&h(aU.Tj.FROM_AMOUNT)},[r,h,p,i]);let k=S&&Number(p)&&y?Number((Number(S)/Number(x)*100).toFixed(1)):0;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between mb-[4px] t-caption1 text-SecondaryText md:text-TertiaryText",children:[d?o("pay-amount-label",{defaultValue:"Pay Amount"}):o("sell-amount-label",{defaultValue:"Sell Amount"}),y&&(0,l.jsxs)(ir.Z,{className:"space-x-[4px]",children:[(0,l.jsx)("div",{className:"t-caption1 text-TertiaryText",children:(0,l.jsx)(oC,{alphaTokenId:t,isAlphaToken:m,cexAsset:g})}),d&&(0,l.jsx)(oF,{children:(0,l.jsx)("div",{onClick:()=>{n(ii.Ks.click,{$element_id:"add_funds"})},className:"t-caption0 text-TextLink cursor-pointer",children:o("form-addFunds",{defaultValue:"Add funds"})})})]})]}),(0,l.jsx)(oI,{className:"w-full pr-[0px]",onChange:T,type:"text",placeholder:(0,iE.yd)(0,b,eC.CP),suffix:d?(0,l.jsx)(o2,{className:"pr-[12px]",alphaTokenId:t,showCoinLabelLogo:!0,showBalance:!0,containerWidth:s,transformAssets:v,value:C,onChange:w}):(0,l.jsxs)("div",{className:"flex items-center pr-[12px]",children:[(0,l.jsx)(il._,{alphaTokenId:t,size:"20",className:"top-[2px]"}),(0,l.jsx)("div",{className:"t-body4 text-PrimaryText ml-[4px]",children:_})]}),value:S,variant:"line",status:L?"error":void 0,name:aU.Tj.FROM_AMOUNT,precision:b}),L?(0,l.jsx)("div",{className:"mt-[4px] t-caption1 text-Error",children:null==A?void 0:A.message}):(0,l.jsx)("div",{className:"mt-[4px] t-caption1 text-SecondaryText md:text-TertiaryText",children:(0,l.jsx)(o8,{fromAmount:S,fromCoinAmountInUsd:a,alphaTokenId:t,isBuy:d})}),(0,l.jsx)("div",{className:"mt-[10px]",children:(0,l.jsx)(oy.Z,{onChange:e=>{Number(p)&&y&&T(100===e?f:(0,iE.yd)((0,iE.Jp)(p,.01*e).toString(),b,eC.CP).toString())},steppers:lt,value:k>100?100:k,showStepMarks:!1,showValueOnHover:!0})})]})};var lr=i(30060),ls=i(85090),la=i(32680),lo=i(70268);let ll=e=>{let{visible:t,valueDiscrepancyPercent:i,onOk:r}=e,{t:s}=(0,tF.cK)(),{isMobile:a}=(0,el.F)(),o=(0,iK.Sl)();(0,lo.Z)(()=>{o(ii.Ks.popupView,{module:ii.kj.EXCESSIVE_VALUE})});let n=()=>{o(ii.Ks.click,{module:"excessive_value",$element_id:"ok"}),r()},d=(0,l.jsx)("div",{className:"t-body3 text-PrimaryText",children:(0,l.jsx)(rI.c,{t:s,i18nKey:"excessive-value-warning-1",defaults:"Due to low liquidity or high network fees, the amount you receive after this transaction will be reduced by <highlight>{{reducePercent}}</highlight>, are you sure to continue?",values:{reducePercent:i},components:{highlight:(0,l.jsx)("span",{className:"t-body3 text-Error"})}})}),c=(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s6.Z,{className:"w-full mb-[10px] md:mb-[0px]",onClick:n,children:s("trd-orderForm-ok",{defaultValue:"OK"})})});return a?(0,l.jsx)(s2.Z,{visible:t,direction:"bottom",size:"auto",enablePortal:!0,onClose:n,children:(0,l.jsxs)("div",{className:"p-[24px]",children:[(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)(la.Z,{className:"mx-[auto] w-[64px] h-[64px]"})}),(0,l.jsx)("div",{className:"t-headline4 text-PrimaryText my-[12px] text-center",children:s("excessive-value-title",{defaultValue:"Excessive Value Discrepancy"})}),d,(0,l.jsx)("div",{className:"py-[16px] mt-[8px]",children:c})]})}):(0,l.jsx)(lr.ZP,{visible:t,modalSize:"medium",children:(0,l.jsx)(ls.Z,{actions:(0,l.jsx)(lr.ZP.Footer,{layout:"column",children:c}),description:d,icon:(0,l.jsx)(la.Z,{size:96}),title:s("excessive-value-title",{defaultValue:"Excessive Value Discrepancy"})})})},ln={small:{amount:100,difference:.05,checkbox:.1},medium:{amount:1e4,difference:.03,checkbox:.05},large:{amount:1e4,difference:.01,checkbox:.03}},ld=e=>e<ln.small.amount?"small":e<=ln.medium.amount?"medium":"large",lc=(e,t)=>{let{difference:i,checkbox:r}=ln[ld(e)];return{isExcessive:t>=i,showCheckbox:t>=r}},lh=e=>{let{quoteInfo:t,alphaTokenId:i}=e,[r]=(0,aq.qo)({name:[aU.Tj.FROM_AMOUNT]}),{isBuy:s}=a5(),{fromToken:a,toToken:o}=a3({alphaTokenId:i}),l=oz({asset:o,amount:null==t?void 0:t.toCoinAmount,amountInUsd:null==t?void 0:t.toCoinAmountInUsd}),n=oz({asset:a,amount:r,amountInUsd:null==t?void 0:t.fromCoinAmountInUsd}),d=o3({alphaTokenId:i,tokenAmount:null==t?void 0:t.toCoinAmount,tokenAmountInUsd:null==t?void 0:t.toCoinAmountInUsd}),c=o3({alphaTokenId:i,tokenAmount:r,tokenAmountInUsd:null==t?void 0:t.fromCoinAmountInUsd}),{toAmount:{fiatPriceNumber:h,formattedFiatPrice:u,symbol:g},fromAmount:{fiatPriceNumber:m,formattedFiatAmountWithPrefix:p,formattedFiatPrice:x}}=s?{fromAmount:n,toAmount:d}:{fromAmount:c,toAmount:l},f=Math.abs(+(0,iE.h9)(h,m))/+m;return{formattedFromFiatAmount:p,formattedToFiatAmountString:u,formattedFromFiatAmountString:x,valueDiscrepancyPercent:`${(0,iE.yd)(100*f,2,eC.CP)}%`,isExcessiveValue:lc(m,f).isExcessive,fromFiatAmount:m,symbol:g,valueDiscrepancy:f}},lu=e=>{let{toFiatNumber:t,fromFiatNumber:i,fromAmount:r,toAmount:s}=e;if(!(s&&r))return{roi:0,roiPercent:eC.X2};let a=+(0,iE.h9)(t,i),o=Math.abs(a)/+i,l=`${a>0?"":"-"}${(0,iE.yd)(100*o,2,eC.CP)}%`;return{roi:o,roiPercent:l}},lg=e=>{let{alphaTokenId:t,roi:i,roiPercent:r,quoteInfo:s}=e,a=(0,iK.Sl)(),[o,n]=(0,D.useState)(!1),{valueDiscrepancyPercent:d,formattedToFiatAmountString:c,formattedFromFiatAmountString:h,symbol:u,fromFiatAmount:g}=lh({quoteInfo:s,alphaTokenId:t}),m=`${d}(${u}${h}  ${u}${c})`,p=(0,D.useCallback)(()=>{n(!1),a(ii.Ks.popupView,{module:"excessive_value",pageName:"alpha_trading",df_5:m})},[m]),x=!isNaN(+i)&&lc(g,i).isExcessive;return isNaN(+i)||!x?`(${r})`:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"text-EmphasizeText cursor-pointer inline-flex items-center",onClick:()=>n(!0),style:{borderBottom:"1px dashed var(--color-EmphasizeText)"},children:["(",r,(0,l.jsx)(sJ.Z,{className:"w-[12px] h-[12px] text-EmphasizeText mt-[2px]"}),")"]}),(0,l.jsx)(ll,{visible:o,valueDiscrepancyPercent:m,onOk:p})]})},lm=e=>{let{alphaTokenId:t,toAmount:i,enableRoi:r=!0,quoteInfo:s,toAmountInUsd:a}=e,[o]=(0,aq.qo)({name:[aU.Tj.FROM_AMOUNT]}),{getValues:n}=(0,aq.Gc)(),{fiatPriceNumber:d}=oz({amount:o,asset:n(aU.Tj.CEX_ASSET),amountInUsd:null==s?void 0:s.fromCoinAmountInUsd}),{fiatPriceNumber:c,formattedFiatAmountWithPrefix:h}=o3({alphaTokenId:t,tokenAmount:i,tokenAmountInUsd:a}),{roi:u,roiPercent:g}=lu({toAmount:i,fromAmount:o,toFiatNumber:c,fromFiatNumber:d});return(0,l.jsxs)(l.Fragment,{children:[h," ",r&&(0,l.jsx)(lg,{quoteInfo:s,alphaTokenId:t,roi:u,roiPercent:g})]})},lp=e=>{let{alphaTokenId:t,toAmount:i,enableRoi:r=!0,quoteInfo:s,toAmountInUsd:a,fromAmountInUsd:o}=e,[n]=(0,aq.qo)({name:[aU.Tj.FROM_AMOUNT]}),{getValues:d}=(0,aq.Gc)(),{fiatPriceNumber:c,formattedFiatAmountWithPrefix:h}=oz({amount:i,asset:d(aU.Tj.CEX_ASSET),amountInUsd:a}),{fiatPriceNumber:u}=o3({alphaTokenId:t,tokenAmount:n,tokenAmountInUsd:o}),{roi:g,roiPercent:m}=lu({toAmount:i,fromAmount:n,toFiatNumber:c,fromFiatNumber:u});return(0,l.jsxs)(l.Fragment,{children:[h," ",r&&(0,l.jsx)(lg,{quoteInfo:s,alphaTokenId:t,roi:g,roiPercent:m})]})},lx=e=>{let{alphaTokenId:t,toAmount:i,isBuy:r,enableRoi:s=!0,quoteInfo:a,toAmountInUsd:o,fromAmountInUsd:n}=e;return r?(0,l.jsx)(lm,{alphaTokenId:t,toAmount:i,toAmountInUsd:o,enableRoi:s,quoteInfo:a}):(0,l.jsx)(lp,{alphaTokenId:t,toAmount:i,toAmountInUsd:o,fromAmountInUsd:n,enableRoi:s,quoteInfo:a})},lf=e=>{let{alphaTokenId:t,minReceivedAmount:i,toCoinAmount:r,containerWidth:s,quoteInfo:a}=e,{t:o}=(0,tF.cK)(),{toToken:n}=a3({alphaTokenId:t}),{isBuy:d}=a5(),{formatFn:c}=oo({cexAsset:n,alphaTokenId:t,isAlphaToken:d}),{field:{value:h,onChange:u}}=(0,aq.bc)({name:aU.Tj.CEX_ASSET,rules:{required:!0}}),g=le(t);return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between mt-[16px] mb-[4px]",children:[(0,l.jsx)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText",children:o("receive-amount-label",{defaultValue:"Receive Amount"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:i5()("t-subtitle2 text-PrimaryText text-right",{hidden:!r,flex:r}),children:[c(r)," ",d?n:(0,l.jsx)(o2,{alphaTokenId:t,showCoinLabelLogo:!1,showBalance:!1,containerWidth:s,transformAssets:g,value:h,onChange:u}),(0,l.jsx)("div",{className:i5()({hidden:r,block:!r}),children:eC.X2})]}),(0,l.jsx)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText text-right",children:r?(0,l.jsx)(lx,{isBuy:d,alphaTokenId:t,toAmount:r,fromAmountInUsd:null==a?void 0:a.fromCoinAmountInUsd,toAmountInUsd:null==a?void 0:a.toCoinAmountInUsd,quoteInfo:a}):eC.X2})]})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-[5px]",children:[(0,l.jsx)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText",children:o("min-received-label",{defaultValue:"Min Received"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"t-subtitle2 text-PrimaryText",children:i?`${c(i)} ${n}`:eC.X2}),(0,l.jsx)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText text-right",children:r?(0,l.jsx)(lx,{isBuy:d,alphaTokenId:t,toAmount:i,toAmountInUsd:null==a?void 0:a.minReceivedAmountInUsd,enableRoi:!1}):eC.X2})]})]})]})};var lb=i(66745),ly=i(51467),lv=i(95e3);let lC=(0,tZ.U)(e=>({isFromCoinAsBase:!0,toggleIsFromCoinAsBase:()=>e(e=>({isFromCoinAsBase:!e.isFromCoinAsBase})),resetIsFromCoinAsBase:()=>e(()=>({isFromCoinAsBase:!0})),reverseIsFromCoinAsBase:()=>e(()=>({isFromCoinAsBase:!1}))})),lw=e=>{let{quoteRate:t,baseCoin:i,quoteCoin:r,rateDisplayCls:s}=e,a=!t||0>=Number(t)||!s$(t);if(t&&i&&r&&!a){let e=`1 ${i}`,a=`${(0,tW.E$)(t.toString(),"HIGHT")} ${r}`;return(0,l.jsxs)("div",{className:i5()(s,"flex items-center"),children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("span",{className:"mx-[4px]",children:""}),(0,l.jsx)("span",{children:a})]})}return(0,l.jsx)(l.Fragment,{children:eC.X2})},lS=e=>{let{fromCoin:t,toCoin:i,fromToRatio:r,preferenceKey:s,rateDisplayCls:a}=e,o=(0,D.useRef)(!1),{data:l,setData:n}=(0,ly.S)(lv.M,lv.q.RATE_REVERSE_PREFERENCE,new Map([])),{isFromCoinAsBase:d,toggleIsFromCoinAsBase:c,resetIsFromCoinAsBase:h,reverseIsFromCoinAsBase:u}=lC(),g=d?t:i,m=d?i:t,p=d?Number(r):1/Number(r);return(0,D.useEffect)(()=>{s&&(h(),o.current=!1)},[s,h]),(0,D.useEffect)(()=>{s&&!o.current&&l.has(s)&&(u(),o.current=!0)},[s,l,u]),(0,D.useEffect)(()=>{s&&(d||l.has(s)||(l.set(s,"reversed"),n(l)),d&&l.has(s)&&(l.delete(s),n(l)))},[s,d,l,n]),{isFromCoinAsBase:d,toggleIsFromCoinAsBase:c,resetIsFromCoinAsBase:h,reverseIsFromCoinAsBase:u,baseCoin:g,quoteCoin:m,quoteRate:p,formattedQuoteRate:(0,tW.E$)(p.toString(),"HIGHT"),rateDisplayElement:lw({quoteRate:p,baseCoin:g,quoteCoin:m,rateDisplayCls:a})}},lT=()=>{let{t:e}=(0,tF.cK)();return(0,l.jsx)(as.Z,{arrow:!0,delay:{enter:50},placement:"top-start",tooltips:(0,l.jsx)("div",{className:"text-[12px]",children:e("trading-fee-tip",{defaultValue:"Trading Fee (Service Fee) charged by the platform for trading."})}),children:(0,l.jsx)("div",{className:"t-body3 text-SecondaryText md:text-TertiaryText border-dotted border-0 border-b-[1px] border-TertiaryText cursor-help text-[12px]",children:e("trading-fee-label",{defaultValue:"Trading Fee"})})})},lA=()=>(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 100 100",children:(0,l.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"var(--color-PrimaryYellow)",strokeWidth:"10",strokeOpacity:"0.2"})}),l_=e=>{let{offsetPortion:t=0}=e;return(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 100 100",children:[(0,l.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"var(--color-PrimaryYellow)",strokeWidth:"10",strokeOpacity:"0.2"}),(0,l.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"var(--color-PrimaryYellow)",strokeWidth:"10",transform:"rotate(-90 50 50)",children:(0,l.jsx)("animate",{attributeName:"stroke-dasharray",from:`${282.743*t}, ${282.743*(1-t)}`,to:"282.743, 0",dur:`${2*(1-t)}s`,fill:"freeze"})})]})},lL=()=>{let{isEnablePolling:e,animationPlayedTimestamp:t}=a0(),i=Date.now()-t;return e&&i>=0&&i<2e3?(0,l.jsx)(l_,{offsetPortion:i/2e3}):(0,l.jsx)(lA,{})},lk=e=>{let{children:t,fromToken:i,toToken:r,basicFromToRatio:s,networkFee:a,tradingFee:o}=e,{t:n}=(0,tF.cK)(),{t:d}=(0,tF.Mi)(),{isMobile:c}=(0,el.F)(),[h,u]=(0,D.useState)(!1),g=(0,iK.Sl)(),{rateDisplayElement:m}=lS({fromCoin:i,toCoin:r,fromToRatio:s,rateDisplayCls:"t-body3 text-PrimaryText text-right"}),p=(0,l.jsxs)("div",{className:"w-full md:w-[360px] p-[16px] rounded-[16px] bg-CardBg",children:[(0,l.jsxs)("div",{className:"flex items-center mb-[20px] md:mb-[12px]",children:[(0,l.jsx)("div",{className:"text-[16px] leading-[24px] font-[600] text-PrimaryText mr-[4px]",children:n("rate-label",{defaultValue:"Rate"})}),s&&(0,l.jsx)(lL,{})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[4px] text-[14px] leading-[22px] font-[400] text-PrimaryText",children:[(0,l.jsx)("div",{className:"text-SecondaryText md:text-TertiaryText",children:n("basic-rate-label",{defaultValue:"Basic Rate"})}),m]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[4px] text-[14px] leading-[22px] font-[400] text-PrimaryText",children:[(0,l.jsx)("div",{className:"text-SecondaryText md:text-TertiaryText",children:n("est-network-fee-label",{defaultValue:"Est. Network Fee"})}),(0,l.jsx)("div",{className:"text-PrimaryText",children:(0,iB.IZ)(a)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[12px] text-[14px] leading-[22px] font-[400] text-PrimaryText",children:[(0,l.jsx)(lT,{}),(0,l.jsx)("div",{className:"text-PrimaryText",children:(0,iB.IZ)(o)})]}),(0,l.jsx)("div",{className:"text-[12px] leading-[18px] font-[400] text-SecondaryText md:text-TertiaryText",children:(0,l.jsx)(rI.c,{t:n,i18nKey:"rate-desc",defaults:"The Rate varies between the {{modeNumber}} Priority Modes. The rate displayed on the trading page includes the Basic Rate, Network Fee, and Trading Fee (Service Fee). The rate updates when your input amount changes and also refreshes every {{pollSec}} seconds if you do not proceed to the next step.",values:{modeNumber:2,pollSec:15}})}),c&&(0,l.jsx)(s6.Z,{onClick:()=>u(!1),className:"w-full mb-[15px] mt-[23px]",children:d("trd-dialog-ok",{defaultValue:"OK"})})]});return c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s2.Z,{visible:h,direction:"bottom",size:"auto",enablePortal:!0,onClose:()=>u(!1),children:p}),(0,l.jsx)("div",{onClick:()=>u(!0),children:t})]}):(0,l.jsx)(ix.Z,{onVisibleChange:e=>{e&&g(ii.Ks.click,{$element_id:"rate"})},enablePortal:!0,useReactPopper:!0,placement:"bottom",trigger:"hover",delay:{enter:50,leave:300},overlay:p,children:t})},lI=e=>{let{rate:t,alphaTokenId:i}=e,{side:r}=a5(),{t:s}=(0,tF.cK)(),a=(0,iK.Sl)(),{fromToken:o,toToken:n}=a3({alphaTokenId:i}),{rateDisplayElement:d,toggleIsFromCoinAsBase:c}=lS({fromCoin:o,toCoin:n,fromToRatio:(null==t?void 0:t.fromToRatio)||"",preferenceKey:`${r}_${i}`,rateDisplayCls:"t-subtitle3 text-PrimaryText"});return(0,l.jsxs)(ir.Z,{className:"items-center justify-between mt-[5px]",children:[(0,l.jsx)(lk,{basicFromToRatio:(null==t?void 0:t.basicFromToRatio)||"",networkFee:(null==t?void 0:t.networkFee)||"",tradingFee:(null==t?void 0:t.tradingFee)||"",fromToken:o,toToken:n,children:(0,l.jsx)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText cursor-help border-dotted border-0 border-b-[1px] border-TertiaryText",children:s("rate-label",{defaultValue:"Rate"})})}),(0,l.jsx)(l.Fragment,{children:t&&t.fromToRatio?(0,l.jsxs)(ir.Z,{className:"items-center cursor-pointer",onClick:()=>{a(ii.Ks.click,{$element_id:"rate_switch"}),c()},children:[(0,l.jsx)(lL,{}),(0,l.jsxs)("div",{className:"flex items-center ml-[4px]",children:[d,(0,l.jsx)(lb.Z,{size:16,className:"w-[16px] h-[16px] ml-[4px] text-IconNormal cursor-pointer"})]})]}):(0,l.jsx)("div",{className:"t-subtitle3 text-PrimaryText",children:eC.X2})})]})};var lP=i(45455),lE=i.n(lP);let lB=async e=>{let t;try{t=await (0,iL.v_)("/bapi/defi/v2/private/wallet-direct/swap/cex/buy/pre/payment",e)}catch(i){let e="";i instanceof Error&&(e=i.message),t={success:!1,msg:e,data:{}}}return t},lN=async e=>{let t;try{t=await (0,iL.v_)("/bapi/defi/v2/private/wallet-direct/swap/cex/sell/pre/payment",e)}catch(i){let e="";i instanceof Error&&(e=i.message),t={success:!1,msg:e,data:{}}}return t},lM=()=>{let{lastFetchTime:e}=a0(),t=(0,D.useRef)(null),[i,r]=(0,D.useState)(Date.now()-e>15e3);return(0,D.useEffect)(()=>{if(t.current&&clearTimeout(t.current),e){let i=Date.now()-e;i<15e3?(t.current=setTimeout(()=>{r(!0)},15e3-i),r(!1)):r(!0)}},[e]),{isRateOutdated:i}},lD=e=>{let{coin:t,isAlphaToken:i,alphaTokenId:r,coinTitle:s}=e,{data:a}=(0,sc.u)({alphaTokenId:r}),o=or({asset:t}),{isMobile:n}=(0,el.F)();return(0,l.jsxs)("div",{className:"flex flex-1 items-center mr-[4px]",children:[(0,l.jsx)("div",{className:"mr-[8px] w-[40px] h-[40px]",children:i&&r?(0,l.jsx)(il._,{alphaTokenId:r,size:"m"}):(0,l.jsx)(o$,{currency:t,size:40})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:i5()("text-PrimaryText",{"t-subtitle1":n,"t-subtitle4":!n}),children:s}),(0,l.jsx)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText",children:i?(null==a?void 0:a.name)||t:(null==o?void 0:o.name)||t})]})]})},lV=e=>e.length>50?"t-subtitle3":e.length>45?"t-subtitle2":e.length>40?"t-subtitle1":e.length>35?"t-Secondary":"t-subtitle4",lj=e=>{let{fromCoin:t,toCoin:i,toCoinAmount:r,minReceivedAmount:s,alphaTokenId:a,minInputAmount:o,maxInputAmount:n,formattedFromFiatAmount:d}=e,{t:c}=(0,tF.cK)(),[h]=(0,aq.qo)({name:[aU.Tj.FROM_AMOUNT]}),[u]=(0,aq.qo)({name:[aU.Tj.CEX_ASSET]}),{isBuy:g}=a5(),m=lV(t+h+t),p=lV(i+r+i),x=o7(),{roundedMaxAvailable:f}=ol({alphaTokenId:a,isAlphaToken:!g,cexAsset:u}),{precision:b,formatFn:y}=oo({alphaTokenId:a,isAlphaToken:!g,cexAsset:u}),{formatFn:v}=oo({alphaTokenId:a,isAlphaToken:g,cexAsset:u}),{isValid:C,errorMessage:w}=x(h,{minInputAmount:o,maxInputAmount:n,maxAvailable:f,precision:b});return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between mb-[24px]",children:[(0,l.jsx)(lD,{coin:t,isAlphaToken:!g,alphaTokenId:a,coinTitle:c("order-form-from",{defaultValue:"From"})}),(0,l.jsxs)("div",{className:"t-headline5 md:t-subtitle4 text-right overflow-hidden",children:[(0,l.jsxs)("div",{className:i5()(m,"text-PrimaryText flex justify-end"),children:[(0,l.jsx)("div",{className:"truncate",children:y(h)}),(0,l.jsxs)("div",{children:["\xa0",t]})]}),C?(0,l.jsx)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText",children:d}):(0,l.jsx)("div",{className:"t-caption1 text-Error",children:w})]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)(lD,{coin:i,isAlphaToken:g,alphaTokenId:a,coinTitle:c("order-form-to",{defaultValue:"To"})}),(0,l.jsxs)("div",{className:"t-headline5 md:t-subtitle4 text-right overflow-hidden",children:[(0,l.jsxs)("div",{className:i5()(p,"text-PrimaryText flex justify-end"),children:[(0,l.jsx)("div",{className:"truncate",children:v(r)}),(0,l.jsxs)("div",{children:["\xa0",i]})]}),(0,l.jsxs)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText",children:[c("min-received-label",{defaultValue:"Min Received"})," ",v(s)," ",i]})]})]})]})};var lR=i(45913);let lO=e=>{let{fromCoin:t,toCoin:i,fromToRatio:r,isRateOutdated:s,refetchQuote:a}=e,{t:o}=(0,tF.cK)(),n=(0,iK.Sl)(),[d,c]=(0,D.useState)(!1),{baseCoin:h,quoteCoin:u,toggleIsFromCoinAsBase:g,formattedQuoteRate:m}=lS({fromCoin:t,toCoin:i,fromToRatio:r}),p=async()=>{d||(n(ii.Ks.click,{$element_id:"refresh"}),c(!0),await a(),c(!1))};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("div",{className:"t-body2 md:t-body3 text-SecondaryText md:text-TertiaryText",children:o("rate-label",{defaultValue:"Rate"})}),(0,l.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>g(),children:[(0,l.jsxs)("div",{className:"t-body3 md:t-body5 text-PrimaryText",children:["1 ",h]}),(0,l.jsx)(lb.Z,{size:16,className:"text-IconNormal mx-[4px]"}),(0,l.jsxs)("div",{className:"t-body3 md:t-body5 text-PrimaryText",children:[m," ",u]})]})]}),s&&(0,l.jsxs)("div",{className:"flex justify-between mt-[12px] py-[8px] px-[10px] rounded-[8px] bg-Input",children:[(0,l.jsx)("div",{className:"t-caption1 text-PrimaryText mr-[10px]",children:o("refresh-rate-hint",{defaultValue:"Quote rate updated, please check the order before continuing."})}),(0,l.jsxs)("div",{className:i5()("flex items-center text-TextLink active:text-PrimaryYellow",{"cursor-not-allowed":d,"cursor-pointer hover:text-BtnBg":!d}),onClick:p,children:[(0,l.jsx)(lR.Z,{className:i5()("w-[16px] h-[16px] md:w-[20px] md:h-[20px]",{"animate-spin-in-2s":d})}),(0,l.jsx)("div",{className:"t-subtitle2 md:t-caption0",children:o("refresh-rate-btn",{defaultValue:"Refresh"})})]})]})]})},lF=e=>{let{networkFee:t,tradingFee:i,slippage:r}=e,{t:s}=(0,tF.cK)();return console.log("slippage",r),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[8px]",children:[(0,l.jsx)("div",{className:"t-body3 text-SecondaryText md:text-TertiaryText",children:s("priority-content-slippage",{defaultValue:"Slippage"})}),(0,l.jsx)("div",{className:"t-body3 text-PrimaryText",children:(0,iB.fU)(r)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[8px]",children:[(0,l.jsx)("div",{className:"t-body3 text-SecondaryText md:text-TertiaryText",children:s("network-fee-label",{defaultValue:"Network Fee"})}),(0,l.jsx)("div",{className:"t-body3 text-PrimaryText",children:(0,iB.IZ)(t)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[8px]",children:[(0,l.jsx)(lT,{}),(0,l.jsx)("div",{className:"t-body3 text-PrimaryText",children:(0,iB.IZ)(i)})]})]})},lH=e=>{let{cexAsset:t}=e,{t:i}=(0,tF.cK)(),r=oE({cexAsset:t}),{isBuy:s}=a5();return(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("div",{className:"t-body3 text-SecondaryText md:text-TertiaryText",children:i("pay-from-title",{defaultValue:"Pay From"})}),s?(0,l.jsx)("div",{className:"t-body3 text-PrimaryText",children:"FUNDING_AND_SPOT"===r?i("payFrom-spotAndFunding",{defaultValue:"Spot + Funding"}):i("payFrom-funding",{defaultValue:"Funding"})}):(0,l.jsx)("div",{className:"t-body3 text-PrimaryText",children:i("payFrom-alpha",{defaultValue:"Alpha"})})]})},lZ=e=>{let{alphaTokenId:t,quoteInfo:i,visible:r,onClose:s,onConfirm:a,refetchQuote:o,formattedFromFiatAmount:n,cexAsset:d,disableConfirm:c,slippage:h}=e,{t:u}=(0,tF.cK)(),{isMobile:g}=(0,el.F)(),{fromToken:m,toToken:p}=a3({alphaTokenId:t}),x=(null==i?void 0:i.rate)||{},{isRateOutdated:f}=lM(),b=u("confirm-payment-title",{defaultValue:"Confirm Payment"}),y=(0,iK.Sl)();(0,lo.Z)(()=>{y(ii.Ks.popupView)});let v=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"p-[16px] rounded-[12px] border-solid border-[1px] border-Line",children:[(0,l.jsx)(lj,{alphaTokenId:t,fromCoin:m,toCoin:p,toCoinAmount:(null==i?void 0:i.toCoinAmount)||"",minReceivedAmount:(null==i?void 0:i.minReceivedAmount)||"",minInputAmount:(null==i?void 0:i.minInputAmount)||"",maxInputAmount:(null==i?void 0:i.maxInputAmount)||"",formattedFromFiatAmount:n}),(0,l.jsx)("div",{className:"w-full h-[1px] bg-Line my-[12px]"}),(0,l.jsx)(lO,{fromCoin:m,toCoin:p,fromToRatio:x.fromToRatio||"",isRateOutdated:f,refetchQuote:o})]}),(0,l.jsxs)("div",{className:"my-[12px] p-[16px] rounded-[12px] border-solid border-[1px] border-Line",children:[(0,l.jsx)(lF,{networkFee:x.networkFee||"",tradingFee:x.tradingFee||"",slippage:h}),(0,l.jsx)(lH,{cexAsset:d})]})]}),C=(0,l.jsx)(s6.Z,{className:"w-full mt-[18px] md:mt-[0px]",onClick:()=>{y(ii.Ks.click,{$element_id:"confirm"}),a()},disabled:f||c,children:u("common-Confirm",{defaultValue:"Confirm"})});return g?(0,l.jsx)(s2.Z,{visible:r,direction:"bottom",size:"auto",enablePortal:!0,onClose:()=>s(),children:(0,l.jsxs)("div",{className:"px-[16px] pb-[24px]",children:[(0,l.jsx)(aW,{title:b,onClose:()=>s()}),v,C]})}):(0,l.jsxs)(lr.ZP,{visible:r,modalSize:"middle",children:[(0,l.jsx)(lr.ZP.Header,{showNext:!0,onNextClick:s,children:b}),(0,l.jsx)(lr.ZP.Content,{className:"!max-h-fit !pt-[8px]",children:v}),(0,l.jsx)(lr.ZP.Footer,{children:C})]})},lU=e=>{let{visible:t,onConfirm:i,onCancel:r,disableConfirm:s}=e,{t:a}=(0,tF.cK)(),{isMobile:o}=(0,el.F)(),n=(0,iK.Sl)(),d=(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mt-[8px] t-body3 text-PrimaryText",children:a("anti-mev-closed-description-1",{defaultValue:"Due to heavy traffic in anti-MEV trading nodes, the anti-MEV node is temporarily closed. High slippage may result in potential losses if you continue trading. Please carefully confirm whether you wish to proceed with the transaction."})}),(0,l.jsx)("div",{className:"mt-[8px] t-body3 text-PrimaryText",children:a("anti-mev-closed-description-2",{defaultValue:"MEV (Maximal Extractable Value) attackers manipulate asset prices by altering the sequence of transaction packaging on public network nodes. They insert transactions before and after yours, leading to potential financial losses."})})]});(0,lo.Z)(()=>{n(ii.Ks.popupView,{module:ii.kj.ANTI_MEV})});let c=()=>{n(ii.Ks.click,{module:"anti_mev",$element_id:"close"}),r()},h=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s6.Z,{className:"w-full mb-[10px] md:mb-[0px]",onClick:()=>{n(ii.Ks.click,{module:"anti_mev",$element_id:"continue"}),i()},disabled:s,children:a("continue-btn",{defaultValue:"Continue"})}),(0,l.jsx)(s6.Z,{className:"w-full",variant:"secondary",onClick:c,children:a("cancel-btn",{defaultValue:"Cancel"})})]});return o?(0,l.jsx)(s2.Z,{visible:t,direction:"bottom",size:"auto",enablePortal:!0,onClose:c,children:(0,l.jsxs)("div",{className:"p-[24px]",children:[(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)(la.Z,{className:"mx-[auto] w-[64px] h-[64px]"})}),(0,l.jsx)("div",{className:"t-headline4 text-PrimaryText my-[12px] text-center",children:a("anti-mev-closed-title",{defaultValue:"Anti-MEV Closed"})}),d,(0,l.jsx)("div",{className:"py-[16px] mt-[8px]",children:h})]})}):(0,l.jsx)(lr.ZP,{visible:t,modalSize:"medium",children:(0,l.jsx)(ls.Z,{actions:(0,l.jsx)(lr.ZP.Footer,{layout:"column",children:h}),description:d,icon:(0,l.jsx)(la.Z,{size:96}),title:a("anti-mev-closed-title",{defaultValue:"Anti-MEV Closed"})})})};var lW=i(51445),l$=i(51652);let lz=()=>{let{result:e,isLoading:t}=se(r9);return(0,D.useMemo)(()=>{if(t||!(null==e?void 0:e.pass))return{};let i=e.extra||"",r={};try{r=JSON.parse(i)}catch(e){console.error("parse extraConfig error",e)}return r},[e,t])},lK=e=>{let t=lz(),i=(t.config||[]).find(t=>(null==t?void 0:t.chainId)===e);return(0,D.useMemo)(()=>i||{maxCustomSlippage:t.maxCustomSlippage||"",minCustomSlippage:t.minCustomSlippage||""},[i,t])},lX=e=>{let{customizeSlippage:t,onPriceConfig:i,maxCustomSlippage:r,minCustomSlippage:s}=e,{t:a}=(0,tF.cK)();return(0,D.useMemo)(()=>{if(!(null==i?void 0:i.slippage))return{type:null,message:""};if(!t||0>=Number(t))return{type:"error",message:a("priority-customValidate-enterValidSlippage",{defaultValue:"Please enter a valid slippage."})};if(Number(t)<+s)return{type:"error",message:a("priority-customValidate-minimumSlippage",{defaultValue:"Minimum slippage is {{minimumSlippage}}%.",minimumSlippage:s})};let e=(0,iE.Jp)(null==i?void 0:i.slippage,100).toNumber();return Number(t)<e?{type:"warning",message:a("priority-customValidate-highChanceFail",{defaultValue:"Slippage set to lower than {{slippage}}%.  There is a high chance to fail.",slippage:e})}:Number(t)>+r?{type:"error",message:a("priority-customValidate-maximumSlippage",{defaultValue:"Maximum slippage is {{maximumSlippage}}%.",maximumSlippage:r})}:{type:null,message:""}},[t,null==i?void 0:i.slippage,a])},lY=e=>{let{left:t,right:i}=e;return(0,l.jsxs)(ir.Z,{className:"justify-between items-center",children:[(0,l.jsx)(is.ZP,{className:"flex-1 text-SecondaryText md:text-TertiaryText t-body3",children:t}),(0,l.jsx)(is.ZP,{className:"flex-1 text-PrimaryText t-body3",children:i})]})},lG=e=>{let{type:t,message:i}=e;return t&&i?(0,l.jsx)(is.ZP,{className:i5()("t-caption1 text-right",{"text-Error":"error"===t,"text-EmphasizeText":"warning"===t}),children:i}):(0,l.jsx)(l.Fragment,{})},lq=e=>{let{onCustomConfigChange:t,customizeConfig:i,onPriceConfig:r,onSuccessConfig:s,minCustomSlippage:a,maxCustomSlippage:o}=e,{t:n}=(0,tF.cK)(),[d,c]=(0,D.useState)((null==i?void 0:i.networkFeeMode)||aU.Hr),{isMobile:h}=(0,el.F)(),u=lX({customizeSlippage:i.slippage,onPriceConfig:r,maxCustomSlippage:o,minCustomSlippage:a}),g=(0,D.useRef)(null);(0,D.useEffect)(()=>{var e;null==g||null==(e=g.current)||e.focus()},[]);let m=e=>{t({slippage:e,networkFeeMode:null==i?void 0:i.networkFeeMode})},p=e=>{c(e),t({slippage:null==i?void 0:i.slippage,networkFeeMode:e})};return(0,l.jsxs)(is.ZP,{children:[(0,l.jsx)(is.ZP,{className:"t-caption1 text-SecondaryText",children:n("priority-customMode-activeContent",{defaultValue:"A higher slippage tolerance helps transactions succeed."})}),(0,l.jsx)(is.ZP,{className:"mt-[12px]",children:(0,l.jsx)(lY,{left:n("priority-content-slippage",{defaultValue:"Slippage"}),right:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(ir.Z,{className:"justify-between items-center gap-x-[8px]",children:[(0,l.jsx)("div",{className:"!w-[90px] md:!w-[102px]",children:(0,l.jsx)(oI,{focusRef:g,gapSize:"small",onChange:m,placeholder:`${n("common-Min",{defaultValue:"Min"})} ${a}`,size:h?"small":"middle",value:null==i?void 0:i.slippage,variant:"default",suffix:(0,l.jsx)("div",{className:i5()({"t-body4":h,"t-subtitle2":!h}),children:"%"}),step:.01,type:"number",precision:2,name:"customize-slippage",minNumber:+a,className:" border border-solid border-InputLine bg-transparent"})}),(0,l.jsxs)(is.ZP,{className:i5()("h-[32px] md:h-[40px] px-[12px] py-[7px] text-PrimaryText rounded-[8px] border border-solid border-InputLine cursor-pointer",{"t-body4":h,"t-subtitle2":!h}),onClick:()=>m("1"),children:[(0,l.jsx)("span",{className:" mr-[4px]",children:1}),(0,l.jsx)("span",{children:"%"})]}),(0,l.jsxs)(is.ZP,{className:i5()("h-[32px] md:h-[40px] px-[12px] py-[7px] text-PrimaryText rounded-[8px] border border-solid border-InputLine cursor-pointer",{"t-body4":h,"t-subtitle2":!h}),onClick:()=>m("5"),children:[(0,l.jsx)("span",{className:" mr-[4px]",children:5}),(0,l.jsx)("span",{children:"%"})]})]})})})}),(0,l.jsx)(is.ZP,{className:"mt-[4px]",children:(0,l.jsx)(lG,{type:u.type,message:u.message})}),(0,l.jsx)(is.ZP,{className:"mt-[12px]",children:(0,l.jsx)(lY,{left:n("priority-content-estNetWorkFee",{defaultValue:"Est. Network Fee"}),right:(0,l.jsxs)(ir.Z,{className:"justify-end",children:[(0,l.jsxs)(is.ZP,{onClick:()=>p(aU.Dr.SUCCESS),className:i5()("px-[6px] py-[5px] md:px-[12px] md:py-[7px] rounded-[8px] border border-solid mr-[8px] whitespace-nowrap",{"border-InputLine":d!==aU.Dr.SUCCESS,"border-PrimaryText":d===aU.Dr.SUCCESS}),children:[(0,l.jsx)("span",{className:i5()("text-PrimaryText mr-[4px]",{"t-caption1":h,"t-body3":!h}),children:n("common-Fast",{defaultValue:"Fast"})}),(0,l.jsx)("span",{className:i5()("text-PrimaryText mr-[4px]",{"t-caption1":h,"t-body3":!h}),children:(0,iB.IZ)(null==s?void 0:s.networkFee)})]}),(0,l.jsxs)(is.ZP,{onClick:()=>p(aU.Dr.PRICE),className:i5()("px-[6px] py-[5px] md:px-[12px] md:py-[7px] rounded-[8px] border border-solid whitespace-nowrap",{"border-InputLine":d!==aU.Dr.PRICE,"border-PrimaryText":d===aU.Dr.PRICE}),children:[(0,l.jsx)("span",{className:i5()("text-PrimaryText mr-[4px]",{"t-caption1":h,"t-body3":!h}),children:n("common-Normal",{defaultValue:"Normal"})}),(0,l.jsx)("span",{className:i5()("text-PrimaryText mr-[4px]",{"t-caption1":h,"t-body3":!h}),children:(0,iB.IZ)(null==r?void 0:r.networkFee)})]})]})})})]})},lQ=e=>{let{isActive:t,onPriceConfig:i,onSuccessConfig:r,onCustomConfigChange:s,customizeConfig:a,minCustomSlippage:o,maxCustomSlippage:n}=e,{t:d}=(0,tF.cK)();return t?(0,l.jsx)(lq,{onCustomConfigChange:s,customizeConfig:a,onPriceConfig:i,onSuccessConfig:r,minCustomSlippage:o,maxCustomSlippage:n}):(0,l.jsx)(is.ZP,{className:"t-caption1 text-SecondaryText mt-[12px]",children:d("priority-customMode-unActiveContent",{defaultValue:"A higher slippage tolerance can help transactions succeed, but it might lower the minimum received amount."})})},lJ=e=>{let{content:t}=e;return(0,l.jsx)(is.ZP,{className:"t-subtitle1 text-PrimaryText",children:t})},l0=e=>{let{left:t,right:i}=e;return(0,l.jsxs)(ir.Z,{className:"justify-between items-center",children:[(0,l.jsx)(is.ZP,{className:"text-SecondaryText md:text-TertiaryText t-body3",children:t}),(0,l.jsx)(is.ZP,{className:"text-PrimaryText t-body3",children:i})]})},l1=e=>{let{tagText:t}=e;return(0,l.jsx)(is.ZP,{className:"t-caption2 text-PrimaryText bg-Input rounded-[2px] px-[4px] ml-[2px]",children:t})},l2=e=>{let{isVisible:t,setIsVisible:i,defaultMode:r,defaultCustomSlippage:s,defaultCustomNetworkFee:a,onConfirmClick:o,onPriceConfig:n,onSuccessConfig:d,minReceivedAmount:c,toToken:h,isBuy:u,alphaTokenId:g,onClose:m}=e,{t:p}=(0,tF.cK)(),x=(0,iK.Sl)(),{data:f}=(0,sc.u)({alphaTokenId:g}),{minCustomSlippage:b,maxCustomSlippage:y}=lK((null==f?void 0:f.chainId)||""),[v,C]=(0,D.useState)(r),[w,S]=(0,D.useState)({slippage:s?String(100*Number(s)):"",networkFeeMode:a||aU.Hr}),T=(0,D.useCallback)(e=>()=>C(e),[C]),{formatFn:A}=oo({cexAsset:h,alphaTokenId:g,isAlphaToken:u}),_=lX({customizeSlippage:null==w?void 0:w.slippage,onPriceConfig:n,maxCustomSlippage:y,minCustomSlippage:b}),L=(0,D.useMemo)(()=>!n||!d||v===aU.Dr.CUSTOMIZE&&"error"===_.type,[_.type,v,n,d]),{isEnablePolling:k}=a0(),I=v===r;return t?(0,l.jsxs)(lr.ZP,{responsive:!0,visible:t,modalSize:"middle",enablePortal:!0,children:[(0,l.jsx)(lr.ZP.Header,{showNext:!0,onNextClick:()=>{"function"==typeof m&&m(),i(!1)},children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-[4px]",children:p("priority-header-title",{defaultValue:"Priority Mode"})}),k&&(0,l.jsx)(lL,{})]})}),(0,l.jsx)(lr.ZP.Content,{className:"!max-h-fit !pt-[8px]",children:(0,l.jsxs)(is.ZP,{className:"space-y-[12px]",children:[(0,l.jsxs)(is.ZP,{onClick:T("priorityOnSuccess"),className:i5()("p-[16px] rounded-[12px] border border-solid cursor-pointer",{"border-InputLine":"priorityOnSuccess"!==v,"border-PrimaryText":"priorityOnSuccess"===v}),children:[(0,l.jsx)(is.ZP,{className:"mb-[8px]",children:(0,l.jsx)(lJ,{content:p("priority-successMode-title",{defaultValue:"Priority on Success"})})}),(0,l.jsxs)(is.ZP,{className:"space-y-[4px]",children:[(0,l.jsx)(l0,{left:(0,l.jsx)(op,{showUnderLine:!0,delay:1e3,tooltips:p("priority-contentSlippage-tooltip",{defaultValue:"The difference between the executed and expected trade price. A higher slippage tolerance increases the chance of a successful trade in volatile markets but may result in a price deviation from expectations."}),children:p("priority-content-slippage",{defaultValue:"Slippage"})}),right:(0,iB.fU)((null==d?void 0:d.slippage)||"")}),(0,l.jsx)(l0,{left:(0,l.jsxs)(ir.Z,{className:"items-center",children:[(0,l.jsx)(op,{showUnderLine:!0,delay:1e3,tooltips:p("priority-contentEstNetWorkFee-tooltip",{defaultValue:"Transaction fee paid to blockchain validators.  "}),children:p("priority-content-estNetWorkFee",{defaultValue:"Est. Network Fee"})}),(0,l.jsx)(l1,{tagText:p("common-Fast",{defaultValue:"Fast"})})]}),right:(0,iB.IZ)(null==d?void 0:d.networkFee)})]})]}),(0,l.jsxs)(is.ZP,{onClick:T("priorityOnPrice"),className:i5()("p-[16px] rounded-[12px] border border-solid cursor-pointer",{"border-InputLine":"priorityOnPrice"!==v,"border-PrimaryText":"priorityOnPrice"===v}),children:[(0,l.jsx)(is.ZP,{className:"mb-[8px]",children:(0,l.jsx)(lJ,{content:p("priority-priceMode-title",{defaultValue:"Priority on Price"})})}),(0,l.jsxs)(is.ZP,{className:"space-y-[4px]",children:[(0,l.jsx)(l0,{left:(0,l.jsx)(op,{showUnderLine:!0,tooltips:p("priority-contentSlippage-tooltip",{defaultValue:"The difference between the executed and expected trade price. A higher slippage tolerance increases the chance of a successful trade in volatile markets but may result in a price deviation from expectations."}),children:p("priority-content-slippage",{defaultValue:"Slippage"})}),right:(0,iB.fU)((null==n?void 0:n.slippage)||"")}),(0,l.jsx)(l0,{left:(0,l.jsxs)(ir.Z,{className:"items-center",children:[(0,l.jsx)(op,{showUnderLine:!0,tooltips:p("priority-contentEstNetWorkFee-tooltip",{defaultValue:"Transaction fee paid to blockchain validators."}),children:p("priority-content-estNetWorkFee",{defaultValue:"Est. Network Fee"})}),(0,l.jsx)(l1,{tagText:p("common-Normal",{defaultValue:"Normal"})})]}),right:(0,iB.IZ)(null==n?void 0:n.networkFee)})]})]}),(0,l.jsxs)(is.ZP,{onClick:T(aU.Dr.CUSTOMIZE),className:i5()("p-[16px] rounded-[12px] border border-solid cursor-pointer",{"border-InputLine":v!==aU.Dr.CUSTOMIZE,"border-PrimaryText":v===aU.Dr.CUSTOMIZE}),children:[(0,l.jsx)(lJ,{content:p("priority-customMode-title",{defaultValue:"Custom"})}),(0,l.jsx)(lQ,{onCustomConfigChange:S,customizeConfig:w,isActive:v===aU.Dr.CUSTOMIZE,onPriceConfig:n,onSuccessConfig:d,minCustomSlippage:b,maxCustomSlippage:y})]}),(0,l.jsx)(is.ZP,{children:(0,l.jsx)(l0,{left:p("priority-content-minReceived",{defaultValue:"Min Received"}),right:I?`${A(c)} ${h}`:eC.X2})}),(0,l.jsx)(is.ZP,{className:"t-caption1 text-SecondaryText md:text-TertiaryText",children:p("priority-footer-content",{defaultValue:'Priority Mode determines the strategy for processing your order: either "Success" or "Price" first. Slippage and Est. Network Fee vary between modes.'})})]})}),(0,l.jsx)(lr.ZP.Footer,{style:{gap:"var( --space-2xs)"},children:(0,l.jsx)(s6.Z,{disabled:L,onClick:()=>{let e;v===aU.Dr.CUSTOMIZE&&(e={slippage:String(Number(null==w?void 0:w.slippage)/100),networkFee:null==w?void 0:w.networkFeeMode},x(ii.Ks.click,{module:"orderform",$element_id:"confirm",df_9:{slippage:String(Number(null==w?void 0:w.slippage)/100),networkfee:null==w?void 0:w.networkFeeMode}}));let t=v===aU.Dr.CUSTOMIZE?"custom":v===aU.Dr.PRICE?"priority_on_price":"priority_on_success";x(ii.Ks.click,{$element_id:"confirm",df_9:t}),o({mode:v,priorityConfig:e}),i(!1)},style:{flex:1},children:p("common-Confirm",{defaultValue:"Confirm"})})})]}):null},l5=e=>{let{priorityPriceConfig:t,prioritySuccessConfig:i}=e,[r,s]=(0,aq.qo)({name:[aU.Tj.CUSTOM_PRIORITY_SLIPPAGE,aU.Tj.CUSTOM_PRIORITY_NETWORK_FEE]}),a=od();return(0,D.useMemo)(()=>a===aU.Dr.CUSTOMIZE?{slippage:r,networkFee:s===aU.Dr.PRICE?null==t?void 0:t.networkFee:null==i?void 0:i.networkFee}:a===aU.Dr.PRICE?t:a===aU.Dr.SUCCESS?i:null,[t,i,a,r,s])},l3="SLIPPAGE_STORAGE_KEY",l6=()=>{let[e,t]=(0,rY.g)(l3,{});return(0,D.useCallback)(i=>{let{alphaTokenId:r,mode:s,priorityConfig:a}=i;t({...e,[r]:{mode:s,slippage:(null==a?void 0:a.slippage)||"",networkFee:(null==a?void 0:a.networkFee)||""}})},[e])},l4=e=>{let{alphaTokenId:t,onChangePriorityMode:i,onChangeCustomPrioritySlippage:r,onChangeCustomPriorityNetworkFee:s,prioritySeted:a}=e,[o]=(0,rY.g)(l3,{}),l=(0,D.useRef)({});(0,D.useEffect)(()=>{var e;let o=null==(e=l.current)?void 0:e[t];o&&a&&(i(o.mode),r(o.slippage),s(o.networkFee))},[t,a]),(0,D.useEffect)(()=>{o&&(l.current=o)},[o])},l8=e=>{let{slippage:t,maxSlippage:i,minSlippage:r}=e;return!!t&&!!i&&!!r&&(100*Number(t||"")>Number(i)||100*Number(t||"")<Number(r))},l7={[aU.Dr.CUSTOMIZE]:{key:"priority-mode-priorityOnCustom",defaultValue:"Custom"},[aU.Dr.PRICE]:{key:"priority-mode-priorityOnPrice",defaultValue:"Priority on Price"},[aU.Dr.SUCCESS]:{key:"priority-mode-priorityOnSuccess",defaultValue:"Priority on Success"}},l9=e=>{var t,i;let{onPriceConfig:r,onSuccessConfig:s,isVisible:a,setIsVisible:o,minReceivedAmount:n,toToken:d,isBuy:c,alphaTokenId:h,showLabel:u=!0,onChange:g,onClose:m}=e,{t:p}=(0,tF.cK)(),x=(0,iK.Sl)(),{data:f}=(0,sc.u)({alphaTokenId:h}),{maxCustomSlippage:b,minCustomSlippage:y}=lK((null==f?void 0:f.chainId)||""),v=od(),{field:{onChange:C}}=(0,aq.bc)({name:aU.Tj.PRIORITY_MODE_FROM_USER,rules:{required:!1}}),w=v===aU.Dr.CUSTOMIZE,{field:{value:S,onChange:T}}=(0,aq.bc)({name:aU.Tj.CUSTOM_PRIORITY_SLIPPAGE,rules:{required:w}}),{field:{value:A,onChange:_}}=(0,aq.bc)({name:aU.Tj.CUSTOM_PRIORITY_NETWORK_FEE,rules:{required:w}}),L=l6(),k=l5({priorityPriceConfig:r,prioritySuccessConfig:s});l4({alphaTokenId:h,onChangePriorityMode:C,onChangeCustomPrioritySlippage:T,onChangeCustomPriorityNetworkFee:_,prioritySeted:!!n});let I=l8({slippage:(null==k?void 0:k.slippage)||"",maxSlippage:b,minSlippage:y});return(0,l.jsxs)(l.Fragment,{children:[u&&(0,l.jsxs)(ir.Z,{className:"justify-between items-center",children:[(0,l.jsx)("div",{className:"t-caption1 text-SecondaryText md:text-TertiaryText",children:p("form-priority-itemName",{defaultValue:"Priority"})}),(0,l.jsx)("div",{className:"t-subtitle3 text-PrimaryText",children:n?(0,l.jsxs)(ir.Z,{className:"cursor-pointer flex",onClick:()=>{x(ii.Ks.click,{$element_id:"priority_mode"}),o(!0)},children:[(0,l.jsxs)("div",{className:"space-x-[6px]",children:[v&&(0,l.jsx)("span",{children:p(`${null==(t=l7[v])?void 0:t.key}`,{defaultValue:null==(i=l7[v])?void 0:i.defaultValue})}),(0,l.jsx)("span",{className:"text-Line",children:"|"}),I?(0,l.jsx)(as.Z,{tooltips:p("slippage-exceeds"),open:!0,offset:0,delay:{enter:600},useReactPopper:!0,enablePortal:!0,arrow:!0,children:(0,l.jsx)("span",{className:"text-Error",children:(0,iB.fU)((null==k?void 0:k.slippage)||"")})}):(0,l.jsx)("span",{children:(0,iB.fU)((null==k?void 0:k.slippage)||"")}),(0,l.jsx)("span",{className:"text-Line",children:"|"}),(0,l.jsx)("span",{children:(0,iB.IZ)((null==k?void 0:k.networkFee)||"")})]}),(0,l.jsx)("div",{children:(0,l.jsx)(ig.Z,{className:"text-IconNormal w-[16px] h-[16px] text-[16px]"})})]}):eC.X2})]}),a&&(0,l.jsx)(l2,{onClose:m,alphaTokenId:h,isVisible:a,setIsVisible:o,defaultMode:v,defaultCustomSlippage:S,defaultCustomNetworkFee:A,onConfirmClick:e=>{let{mode:t,priorityConfig:i}=e,r=v!==t,s=t===aU.Dr.CUSTOMIZE&&!!i&&(i.networkFee!==A||i.slippage!==S);r||s?(C(t),t===aU.Dr.CUSTOMIZE&&i&&(T(i.slippage),_(i.networkFee)),L({alphaTokenId:h,mode:t,priorityConfig:i}),o(!1),"function"==typeof g&&g()):o(!1)},onPriceConfig:r,onSuccessConfig:s,minReceivedAmount:n,toToken:d,isBuy:c})]})},ne=(e,t)=>e&&t?"slippage_value":e?"high_slippage":"excessive_value",nt=e=>{let{visible:t,onConfirm:i,onCancel:r,onPriceConfig:s,onSuccessConfig:a,slippage:o,toToken:n,minReceivedAmount:d,isBuy:c,alphaTokenId:h,valueDiscrepancyPercent:u,isHighSlippageVisible:g,isExcessiveValueVisible:m,hasDisabledHighSlippageReminder:p,fromFiatAmount:x,toFiatAmount:f,faitSymbol:b,fiatAmountData:y,valueDiscrepancy:v}=e,{t:C}=(0,tF.cK)(),[w,S]=(0,D.useState)(!1),[T,A]=(0,D.useState)(!1),{isMobile:_}=(0,el.F)(),{setIsEnablePolling:L}=a0(),{result:k}=se("web_alpha_warning_checkbox"),I=(0,iK.Sl)(),[P,E]=(0,D.useState)(!1),{showCheckbox:B}=lc(y,Number(o)),{showCheckbox:N}=lc(y,v),M=B||N,V=(null==k?void 0:k.pass)??!1,j=M&&!P,R=`${u}(${b}${x}  ${b}${f})`,O=e=>{let t=ne(g,m);I(ii.Ks.click,{module:`${t}${M?"_checkbox":""}`,$element_id:e||"cancel"}),r()};(0,D.useEffect)(()=>{t&&(g&&m?I(ii.Ks.popupView,{module:`slippage_value${B||N?"_checkbox":""}`,df_5:`${(100*Number(o)).toFixed(2)}%,`+R}):g?I(ii.Ks.popupView,{module:`high_slippage${B?"_checkbox":""}`,df_5:`${(100*Number(o)).toFixed(2)}%`}):I(ii.Ks.popupView,{module:`excessive_value${N?"_checkbox":""}`,df_5:R}))},[t,B,N]);let F=(0,l.jsxs)("div",{className:"flex flex-row items-start",children:[(0,l.jsx)("div",{className:"mr-[8px]",style:{display:g&&m&&!p?"flex":"none"},children:(0,l.jsx)(l$.Z,{className:"w-[20px] h-[20px]"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"t-body3 text-PrimaryText",children:(0,l.jsx)(rI.c,{t:C,i18nKey:"high-slippage-warning-1",defaults:"Your slippage <highlight>{{slippage}}</highlight> may result in higher execution price and potential losses.",values:{slippage:`${(100*Number(o)).toFixed(2)}%`},components:{highlight:(0,l.jsx)("span",{className:"t-body3 text-Error"})}})}),(0,l.jsx)("div",{className:"mt-[8px] t-body3 text-PrimaryText",children:C("high-slippage-warning-2",{defaultValue:"Slippage is the difference between the expected price and the execution price. Higher slippage means higher costs."})}),(0,l.jsx)("div",{className:"mt-[8px] t-body3 text-PrimaryText",children:C("high-slippage-warning-3",{defaultValue:"You can switch Priority Mode for a better price, but it may increase the risk of transaction failure."})})]})]}),H=(0,l.jsxs)("div",{className:"flex flex-row items-start",children:[(0,l.jsx)("div",{className:"mr-[8px]",style:{display:g&&m&&!p?"flex":"none"},children:(0,l.jsx)(l$.Z,{className:"w-[20px] h-[20px]"})}),(0,l.jsx)("div",{className:"t-body3 text-PrimaryText flex-1",children:(0,l.jsx)(rI.c,{t:C,i18nKey:"excessive-value-warning-1",defaults:"Due to low liquidity or high network fees, the amount you receive after this transaction will be reduced by <highlight>{{reducePercent}}</highlight>, are you sure to continue?",values:{reducePercent:R},components:{highlight:(0,l.jsx)("span",{className:"t-body3 text-Error"})}})})]}),Z=(0,l.jsxs)(l.Fragment,{children:[V&&g&&!p&&(0,l.jsx)(lW.Z,{onChange:()=>{S(!w)},checked:w,children:C("high-slippage-reminder-checkbox",{defaultValue:"I understand the risk. Don't remind me again."})}),(0,l.jsx)(s6.Z,{disabled:j,className:"w-full mt-[16px] mb-[10px] md:mt-[0px] md:mb-[0px]",onClick:()=>{let e=ne(g,m);I(ii.Ks.click,{module:`${e}${M?"_checkbox":""}`,$element_id:"continue"}),i({isDoNotRemind:w})},children:C("continue-btn",{defaultValue:"Continue"})}),g&&(0,l.jsx)(s6.Z,{className:"w-full",variant:"secondary",onClick:()=>{L(!1),A(!0);let e=ne(g,m);I(ii.Ks.click,{module:`${e}${M?"_checkbox":""}`,$element_id:"switch_priority_mode"})},children:C("priority-mode-btn",{defaultValue:"Switch Priority Mode"})}),(0,l.jsx)(l9,{alphaTokenId:h,isBuy:c,isVisible:T,setIsVisible:A,onPriceConfig:s,onSuccessConfig:a,minReceivedAmount:d,toToken:n,showLabel:!1,onChange:()=>{L(!0),r()},onClose:()=>{L(!0)}})]}),U=g&&!p?m?"high-slippage-value-checkbox-text":"high-slippage-checkbox-text":"high-excessive-checkbox-text",W=(0,l.jsxs)("div",{className:"pb-[16px]",children:[g&&!p&&(0,l.jsx)("div",{children:F}),m&&(0,l.jsx)("div",{children:H}),M&&(0,l.jsx)("div",{className:"flex items-start text-TertiaryText select-none mt-[8px]",children:(0,l.jsx)(lW.Z,{sz:"lg",checked:P,value:"hideName",onChange:(e,t)=>E(t),className:"items-start",children:(0,l.jsx)("div",{style:{userSelect:"none",fontSize:"12px",lineHeight:"16px"},children:C(U)})})})]}),$=C("excessive-value-title",{defaultValue:"Excessive Value Discrepancy"}),z=C("high-slippage-title",{defaultValue:"High Slippage Warning"}),K=C("high-slippage-value-title",{defaultValue:"Slippage and Value Warning"}),X=g&&!p?m?K:z:$,Y=(0,l.jsxs)("div",{children:[X,(0,l.jsx)(s4.Z,{onClick:()=>O(),className:"!w-[20px] !h-[20px] text-PrimaryText absolute right-[15px] top-[15px] cursor-pointer"})]});return _?(0,l.jsx)(s2.Z,{visible:t,direction:"bottom",size:"auto",enablePortal:!0,onClose:()=>O("close"),children:(0,l.jsxs)("div",{className:"p-[24px]",children:[(0,l.jsx)(aW,{title:"",onClose:r}),(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)(la.Z,{className:"mx-[auto] w-[64px] h-[64px]"})}),(0,l.jsx)("div",{className:"t-headline4 text-PrimaryText my-[12px] text-center",children:X}),W,(0,l.jsx)("div",{className:"pb-[16px]",children:Z})]})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(lr.ZP,{visible:t,modalSize:"medium",children:(0,l.jsx)(ls.Z,{className:"[&_.bn-modal-confirm-actions]:!pt-[12px]",actions:(0,l.jsx)(lr.ZP.Footer,{layout:"column",children:Z}),description:W,icon:(0,l.jsx)(la.Z,{size:96}),title:Y})})})},ni=()=>(0,ly.S)(lv.M,lv.q.HIGHT_SLIPPAGE_REMINDER,!1),nr=async()=>{let e;try{e=await (0,iL.U2)("/bapi/defi/v1/private/wallet-direct/swap/terms-agreement?termType=ALPHA_CEX_ORDER_DISCLAIMER")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,msg:t,data:null}}return e},ns=()=>{let e=(0,en._n)();return(0,em.useQuery)(iI.i.QUERY_ALPHA_TERMS_AGREEMENT,async()=>{let e=await nr();if(!e.success)throw Error(e.message||"");return e.data},{enabled:!!e,staleTime:1/0})},na=(0,tZ.U)(e=>({manualEnabledAgreement:!0,setManualEnabledAgreement:t=>e(()=>({manualEnabledAgreement:t}))})),no=()=>{let e=na(e=>e.manualEnabledAgreement),t=na(e=>e.setManualEnabledAgreement),{data:i,isFetched:r,isError:s}=ns();return{isEnabledAgreement:!0!==i&&!s&&r&&e,setManualEnabledAgreement:t}},nl=async()=>{let e;try{e=await (0,iL.v_)("/bapi/defi/v1/private/wallet-direct/swap/terms-agreement",{termType:"ALPHA_CEX_ORDER_DISCLAIMER"})}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,msg:t,data:null}}return e},nn=()=>(0,em.useMutation)(()=>nl().then(e=>{if(!e.success)throw e;return e})),nd=e=>{let{onClose:t,isLoading:i,handleOnConfirmClick:r}=e,{t:s}=(0,tF.cK)(),[a,o]=(0,D.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lr.ZP.Header,{showNext:!0,onNextClick:t,children:s("disclaimer-header-title",{defaultValue:"Disclaimer for Alpha Trading"})}),(0,l.jsx)(lr.ZP.Content,{className:"!max-h-372px !pt-[8px] !pb-[0]",children:(0,l.jsxs)(is.ZP,{className:"space-y-[12px] t-body3 text-PrimaryText",children:[(0,l.jsx)(is.ZP,{children:s("disclaimer-content-1",{defaultValue:"Binance Alpha features emerging digital assets which are not listed on the Binance Exchange and which are generally expected to have a low market capitalization and unique or novel characteristics. The inclusion of a digital asset as a Binance Alpha asset does not in any way imply, directly or indirectly, that such digital asset will be listed on Binance Exchange in future. "})}),(0,l.jsx)(is.ZP,{children:s("disclaimer-content-2",{defaultValue:"As digital asset prices can be volatile, the value of any investment that you make in Alpha Assets may go down or up and you may lose all or part of the value of the amount that you invest. Please note that in relation to Binance Alpha (i) the risk of loss of all or part of your investment is magnified with Binance Alpha assets as they are subject to increased price volatility (ii) by purchasing Alpha Assets, you are exposed to price slippage and blockchain fees, which can have a negative impact of the price of Alpha Assets (iii) Alpha Assets cannot be withdrawn from the Binance Exchange, and you will only be able to access Alpha Assets from your Alpha Account only. "})}),(0,l.jsx)(is.ZP,{children:s("disclaimer-content-3",{defaultValue:"You are solely responsible for your investment decisions. Binance will not in any circumstances be responsible or liable for any losses that you may incur arising directly or indirectly from an investment in Binance Alpha Assets."})})]})}),(0,l.jsx)(lr.ZP.Footer,{children:(0,l.jsxs)(is.ZP,{className:"w-full",children:[(0,l.jsx)(ir.Z,{className:"items-center pt-[16px] mt-[8px] mb-[12px] border-0 border-t-[1px] border-solid border-Line",children:(0,l.jsx)(lW.Z,{checked:a,onChange:(e,t)=>{o(t)},className:"mr-[4px]",children:(0,l.jsx)(is.ZP,{className:"t-body3 text-PrimaryText",children:(0,l.jsx)(rI.c,{t:s,i18nKey:"disclaimer-termsOfUse",defaults:"I accept the <Primary> Binance Alpha Terms of Use. </Primary>",components:{Primary:(0,l.jsx)(is.ZP,{href:rP.TERM_OF_USE,target:"_blank",as:"a",className:"cursor-pointer no-underline text-TextLink"})}})})})}),(0,l.jsx)(s6.Z,{inactive:!a,disabled:i,className:"w-full",onClick:r,children:s("common-Confirm",{defaultValue:"Confirm"})})]})})]})},nc=e=>{let{onAfterConfirmClick:t,onClose:i}=e,{t:r}=(0,tF.cK)(),{mutateAsync:s,isLoading:a}=nn(),{pushNotify:o}=(0,tP.sJ)(),n=async()=>{try{await s(),o({placement:"bottom-end",variant:"success",title:r("signAgreement-successfully",{defaultValue:"Disclaimer confirmed successfully! You may continue to trade now."})})}finally{t()}};return(0,l.jsx)(lr.ZP,{enablePortal:!0,responsive:!0,visible:!0,modalSize:"medium",children:(0,l.jsx)(nd,{onClose:i,isLoading:a,handleOnConfirmClick:n})})},nh=e=>{let{alphaTokenId:t}=e,{data:i}=(0,sc.u)({alphaTokenId:t}),r=(null==i?void 0:i.offsell)||!1;return{cannotBuy:(null==i?void 0:i.offline)||!1,cannotSell:r}},nu=e=>{let{isBuy:t,tokenName:i=""}=e,{t:r}=(0,tF.cK)();return(0,D.useMemo)(()=>t?`${r("buy",{defaultValue:"Buy"})} ${i}`:`${r("sell",{defaultValue:"Sell"})} ${i}`,[t,r,i])},ng=(e,t={})=>{let i=(0,et._)(),{enabled:r=!0}=t;return(0,em.useQuery)(oe(e),async()=>{let{data:t}=await oB(e);return t},{...t||{},enabled:!!i&&r,staleTime:1/0})},nm=()=>{let{data:e,isFetched:t}=ng({productLine:"WEB3_DEX_CEX",operation:"MICA_CHECK"}),i="boolean"==typeof(null==e?void 0:e.pass),r=t&&i&&(null==e?void 0:e.pass)===!1,s=ew.tO.getItem(r$);return(0,D.useEffect)(()=>{ew.tO.setItem(r$,r)},[r]),r||s},np=e=>{let{cexAsset:t}=e;return nm()&&"USDT"===t},nx=e=>{let{onPriceConfig:t,onSuccessConfig:i,alphaTokenId:r,quoteInfo:s,refetchQuote:a,isFetchingRate:o,toToken:n,onSubmitSuccess:d}=e,{t:c}=(0,tF.Mi)(),{pushNotify:h}=(0,tP.sJ)(),u=ou(),{currency:g}=(0,st.U8)(),m=(0,en._n)(),p=(0,iK.Sl)(),{isBuy:x,side:f}=a5(),[b,y]=(0,D.useState)(!1),[v,C]=(0,D.useState)(!1),[w,S]=(0,D.useState)(!1),[T,A]=(0,D.useState)(!1),[_,L]=(0,D.useState)(!1),{isEnabledAgreement:k,setManualEnabledAgreement:I}=no(),{setIsEnablePolling:P}=a0(),E=oO(),{data:B,setData:N}=ni(),M=od(),{data:V}=(0,sc.u)({alphaTokenId:r}),{handleSubmit:j,getValues:R}=(0,aq.Gc)(),{errors:O,isSubmitting:F}=(0,aq.cl)(),H=!(O&&(null==O?void 0:O.fromCoinAmount)),Z=(0,aq.qo)({name:aU.Tj.CEX_ASSET}),U=(0,aq.qo)({name:aU.Tj.FROM_AMOUNT}),W=(0,aq.qo)({name:aU.Tj.CUSTOM_PRIORITY_SLIPPAGE}),{maxCustomSlippage:$,minCustomSlippage:z}=lK((null==V?void 0:V.chainId)||""),{data:K}=s5({chainId:(null==V?void 0:V.chainId)||"",contractAddress:(null==V?void 0:V.contractAddress)||""}),X=(null==K?void 0:K.riskLevel)===5,Y=oE({cexAsset:Z}),{maxAvailable:G,placeAmount:q,isWalletAvailableLoading:Q}=oc({alphaTokenId:r,cexAsset:Z}),J=async e=>{let t;if(!s||!(null==s?void 0:s.toCoinAmount)||!(null==s?void 0:s.extra)||!V||!M)return;let i=null;if(e.side===aU.V$.BUY){var r;i=null==(t=await lB({fromToken:e.cexAsset,fromBinanceChainId:V.chainId,fromCoinAmount:q,toToken:V.symbol,toContractAddress:V.contractAddress,toCoinAmount:null==s?void 0:s.toCoinAmount,priorityMode:M,extra:null==s?void 0:s.extra,payMethod:Y}))||null==(r=t.data)?void 0:r.orderHistory}else i=null==(t=await lN({fromToken:V.symbol,fromContractAddress:V.contractAddress,fromBinanceChainId:V.chainId,fromCoinAmount:q,toToken:e.cexAsset,toBinanceChainId:V.chainId,toCoinAmount:null==s?void 0:s.toCoinAmount,priorityMode:M,extra:null==s?void 0:s.extra}))?void 0:t.data;if(null==t?void 0:t.success){p(ii.Ks.placeOrderEvent,{$element_id:"place_order_successful"}),"function"==typeof d&&d();let e=x?c("toast-instant-buyOrder-created",{defaultValue:"Submitted an instant order to buy {{quantity}} {{base}} using {{quote}}.",quantity:(0,tW.E$)(null==i?void 0:i.toTokenAmount,t$.Bu.MIDDLE),base:null==i?void 0:i.toToken,quote:null==i?void 0:i.fromToken}):c("toast-instant-sellOrder-created",{defaultValue:"Submitted an instant order to sell {{quantity}} {{base}} for {{quote}}.",quantity:(0,tW.E$)(null==i?void 0:i.fromTokenAmount,t$.Bu.MIDDLE),base:null==i?void 0:i.fromToken,quote:null==i?void 0:i.toToken});h({placement:"bottom-end",variant:"success",title:x?c("toast-Instant-buyOrderCreated-title",{defaultValue:"Instant Buy Order Created"}):c("toast-Instant-sellOrderCreated-title",{defaultValue:"Instant Sell Order Created"}),message:e}),u({[aU.Tj.SIDE]:R(aU.Tj.SIDE),[aU.Tj.CEX_ASSET]:R(aU.Tj.CEX_ASSET)})}else{let e={305003:"TIME_OUT",305022:"NO_LIQUIDITY",0x5f5e4e9:"SYSTEM_ERROR"};p(ii.Ks.placeOrderEvent,{$element_id:"place_order_failed",df_status:null==t?void 0:t.code,df_type:(null==e?void 0:e[null==t?void 0:t.code])||""})}};(0,D.useEffect)(()=>{P(!b&&!v)},[b,v,P]);let ee=l5({priorityPriceConfig:t,prioritySuccessConfig:i}),{isExcessiveValue:et,valueDiscrepancyPercent:ei,formattedFromFiatAmount:er,formattedToFiatAmountString:es,formattedFromFiatAmountString:ea,symbol:eo,fromFiatAmount:el,valueDiscrepancy:ed}=lh({quoteInfo:s,alphaTokenId:r}),ec=e=>{p(ii.Ks.placeOrderEvent,{$element_id:"place_order_intercepted",df_type:e})},eh=async()=>{if(m)if(p(ii.Ks.click,{$element_id:"trade"}),p(ii.Ks.placeOrderEvent,{$element_id:"place_order_triggered"}),await E(),k)L(!0);else{let e=lc(el,Number(null==ee?void 0:ee.slippage)).isExcessive;e&&!B||et?(S(!!e&&!B),A(!!et)):y(!0)}},{isComplianceValidReady:eu,getIsComplianceValid:eg}=r8({currency:g,isUseCache:!0}),em=eu&&eg(rQ.web_alpha_buy_sell),{cannotBuy:ep,cannotSell:ex}=nh({alphaTokenId:r}),ef=np({cexAsset:Z}),eb=x?ep:ex,{result:ey}=se("web_alpha_trade"),ev=(null==ey?void 0:ey.pass)??!1,eC=Number(U)>Number(G),ew=l8({slippage:W||"",maxSlippage:$,minSlippage:z}),eS=!V||lE()(s)||!(null==s?void 0:s.minReceivedAmount)||!H||o||eC||ew,eT=ef||!ev||!em||eb||X,eA=nu({isBuy:x,tokenName:(null==V?void 0:V.symbol)||""}),e_=async()=>{F||await j(J)()},eL=m?(0,l.jsx)(s6.Z,{className:"w-full",inactive:!eT&&eS,disabled:eT,onClick:()=>eh(),variant:f.toLowerCase(),children:eA}):(0,l.jsx)(s6.Z,{className:"w-full",onClick:()=>{p(ii.Ks.click,{$element_id:"trade_to_login"}),window.location.href=t0(rP.REGISTER_URL,{callback:(0,rk.Ok)(window.location.href)})},variant:f.toLowerCase(),children:c("trd-orderForm-login",{defaultValue:"Log In"})});return(0,l.jsxs)(l.Fragment,{children:[x&&eC&&m&&!Q?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-Error t-caption1 mb-[4px] text-center",children:c("form-insufficientBalance-error",{defaultValue:"Insufficient balance"})}),(0,l.jsx)(oF,{containerClassName:"flex",targetCoin:Z,targetAmount:String(Number(U)-Number(G)||""),children:(0,l.jsx)(s6.Z,{className:"w-full",variant:"primary",onClick:()=>{p(ii.Ks.click,{$element_id:"add_balance"})},children:c("form-addMoreBalance",{defaultValue:"Add {{asset}} balance",asset:Z})})})]}):eL,_&&k&&(0,l.jsx)(nc,{onAfterConfirmClick:()=>{I(!1),L(!1)},onClose:()=>{L(!1),ec("disclaimer")}}),(w||T)&&(0,l.jsx)(nt,{alphaTokenId:r,isBuy:x,slippage:null==ee?void 0:ee.slippage,visible:w||T,onCancel:()=>{ec("highSlippage"),S(!1),A(!1)},onConfirm:e=>{let{isDoNotRemind:t}=e;S(!1),A(!1),y(!0),t&&N(t)},onPriceConfig:t,onSuccessConfig:i,minReceivedAmount:(null==s?void 0:s.minReceivedAmount)||"",toToken:n,valueDiscrepancyPercent:ei,isExcessiveValueVisible:T,isHighSlippageVisible:w,hasDisabledHighSlippageReminder:B,fromFiatAmount:ea,toFiatAmount:es,faitSymbol:eo,fiatAmountData:el,valueDiscrepancy:ed}),b&&(0,l.jsx)(iX,{defaultTrackingData:{module:"confirm_payment"},children:(0,l.jsx)(lZ,{cexAsset:Z,alphaTokenId:r,quoteInfo:s,formattedFromFiatAmount:er,visible:b,refetchQuote:a,slippage:(null==ee?void 0:ee.slippage)||"",onClose:()=>{y(!1),ec("userCanceled")},disableConfirm:F,onConfirm:async()=>{(null==s?void 0:s.mevDisableWarning)?(y(!1),C(!0)):(await e_(),y(!1))}})}),v&&(0,l.jsx)(lU,{visible:v,disableConfirm:F,onConfirm:async()=>{await e_(),C(!1)},onCancel:()=>{y(!0),C(!1),ec("antiMEV")}})]})};var nf=i(23840),nb=i(39750);let ny=e=>{let{alphaTokenId:t}=e,{t:i}=(0,tF.cK)(),{data:r}=(0,sc.u)({alphaTokenId:t}),{data:s}=s5({chainId:(null==r?void 0:r.chainId)||"",contractAddress:(null==r?void 0:r.contractAddress)||""}),a=null==s?void 0:s.riskLevel,o=(0,D.useMemo)(()=>5===a?i("risk-alert-level-5",{defaultValue:"This token is a high-risk token and trading has been prohibited. Click here to view the risks."}):4===a?i("risk-alert-level-4",{defaultValue:"This token is a high-risk token. Please conduct transactions with caution."}):"",[i,a]);return(0,l.jsx)(nf.Z,{className:"mt-[16px]",icon:(0,l.jsx)(nb.Z,{size:20}),message:o,onClose:function(){},variant:"secondary"})},nv=e=>{let{alphaTokenId:t}=e,{t:i}=(0,tF.cK)(),{cannotBuy:r,cannotSell:s}=nh({alphaTokenId:t}),a=np({cexAsset:(0,aq.qo)({name:aU.Tj.CEX_ASSET})}),o=su(),n=(0,D.useMemo)(()=>a?i("cannot-trade-micaUser",{defaultValue:"Please note that the stablecoin you have selected is restricted for EEA users due to MiCA requirement, please select another token to continue using this service."}):o===eC.xy.LIMIT?i("alpha-disabled-instant-tips",{defaultValue:"This token is not available for Instant trading.\xa0"}):r&&s?i("cannot-trade-token-alert",{defaultValue:"This token is not available to trade."}):s?i("offsell-token-alert",{defaultValue:"This token is not available to sell."}):r?i("offline-token-alert",{defaultValue:"This token is not available to buy."}):"",[a,r,s,i,o]);return(0,l.jsx)(nf.Z,{className:"mt-[16px]",icon:(0,l.jsx)(nb.Z,{size:20}),message:n,onClose:function(){},variant:"error"})},nC=e=>{let{onPriceConfig:t,onSuccessConfig:i,minReceivedAmount:r,toToken:s,isBuy:a,alphaTokenId:o}=e,[n,d]=(0,D.useState)(!1);return(0,l.jsx)(l9,{alphaTokenId:o,isBuy:a,onPriceConfig:t,onSuccessConfig:i,isVisible:n,setIsVisible:d,minReceivedAmount:r,toToken:s})};var nw=i(9002);let nS=async e=>{let t;try{t=await (0,iL.U2)(`/bapi/defi/v1/public/alpha-trade/get-fee-rate?symbol=${e}`)}catch(i){let e="";i instanceof Error&&(e=i.message),t={success:!1,msg:e,data:{}}}return t},nT=e=>{let{isLoading:t,data:i,refetch:r}=(0,em.useQuery)([iI.i.QUERY_ALPHA_FEE_RATE["0"],e],async()=>await nS(e),{enabled:!!e,staleTime:1/0});return{data:null==i?void 0:i.data,isLoading:t,refetch:r}},nA=(e,t)=>{let{data:i}=(0,sc.u)({alphaTokenId:t}),r=(null==i?void 0:i.alphaId)||"";return((null==e?void 0:e.symbols.filter(e=>e.baseAsset===r))||[]).reduce((e,t)=>(e[t.quoteAsset]=t,e),{})},n_=async()=>{let e;try{e=await (0,iL.U2)("/bapi/defi/v1/public/alpha-trade/get-from-asset")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,msg:t,data:{}}}return e},nL=()=>{let{isLoading:e,data:t,refetch:i}=(0,em.useQuery)(iI.i.QUERY_ALPHA_FROM_ASSETS,async()=>await n_(),{enabled:!0,cacheTime:1/0,staleTime:1/0});return{data:null==t?void 0:t.data,isLoading:e,refetch:i}},nk=(0,D.memo)(e=>{let{alphaTokenId:t,value:i="",onChange:r,errorMessage:s,containerWidth:a,precision:o,quoteAsset:n,setQuoteAsset:d,suggestPrice:c,warningText:h,buyBuffer:u,sellBuffer:g,quoteAssetList:m,quoteAssets:p}=e,{t:x}=(0,tF.Mi)(),{t:f}=(0,tF.cK)(),{symbol:b,fiatPriceNumber:y}=(0,st.Bb)()(+i,n),{formattedFiatAmountWithPrefix:v}=(0,iB.x6)({symbol:b,fiatPriceNumber:y,amount:i});return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex justify-between t-caption1 text-SecondaryText md:text-TertiaryText leading-[18px] mb-[4px]",children:[(0,l.jsx)("div",{children:x("trd-orderForm-price",{defaultValue:"Price"})}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(op,{showUnderLine:!0,tooltips:f("alpha-suggestPrice-tip",{buyBuffer:u,sellBuffer:Math.abs(g)}),trigger:"hover",enterDelayTime:50,children:f("alpha-suggestPrice",{defaultValue:"Suggest Price"})}),(0,l.jsxs)("div",{onClick:()=>r(c),className:"text-PrimaryText cursor-pointer ml-[4px]",children:["$",c]})]})]}),(0,l.jsx)(oI,{className:"w-full pr-[0px]",onChange:r,type:"text",placeholder:(0,iE.yd)(0,o,eC.CP),suffix:(0,l.jsx)(o2,{className:"pr-[12px]",alphaTokenId:t,showCoinLabelLogo:!0,showBalance:!0,transformAssets:m,value:n,onChange:d,containerWidth:a,exchangeInfoAssets:p}),value:i,variant:"line",status:s?"error":void 0,name:aU.Tj.LIMIT_PRICE,precision:o,tooltipNode:v}),(!!s||h)&&(0,l.jsx)("div",{className:`mt-[4px] t-caption1 ${h?"text-EmphasizeText":"text-Error"}`,children:s||h})]})}),nI=(0,D.memo)(e=>{let{alphaTokenId:t,value:i="",onChange:r,errorMessage:s,quantityPrecision:a=0}=e,{t:o}=(0,tF.Mi)(),{data:n}=(0,sc.u)({alphaTokenId:t});return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"flex justify-between t-caption1 text-SecondaryText md:text-TertiaryText leading-[18px] mb-[4px]",children:(0,l.jsx)("div",{children:o("trd-orderForm-quantity",{defaultValue:"Amount"})})}),(0,l.jsx)(oI,{className:"w-full pr-[0px]",onChange:r,type:"text",placeholder:(0,iE.yd)(0,a,eC.CP),suffix:(0,l.jsxs)("div",{className:"flex items-center gap-[4px] pr-[12px]",children:[(0,l.jsx)(il._,{alphaTokenId:t,size:"20"}),null==n?void 0:n.baseAsset]}),value:i,variant:"line",status:s?"error":void 0,name:aU.Tj.LIMIT_AMOUNT,precision:a}),!!s&&(0,l.jsx)("div",{className:"mt-[4px] t-caption1 text-Error",children:s})]})}),nP=[{value:0},{value:25},{value:50},{value:75},{value:100}],nE=(0,D.memo)(e=>{let{amount:t,maxAvailable:i,isLogin:r,quantityPrecision:s,onChange:a,price:o}=e,n=(0,D.useMemo)(()=>{let e=t&&Number(i)&&r?Number((Number(t)/Number(i)*100).toFixed(1)):0;return e>100?100:e},[t,i,r]),d=(0,D.useCallback)(e=>{Number(i)&&r&&o&&a(100===e?i:(0,iE.yd)((0,iE.Jp)(i,.01*e).toString(),s,eC.CP).toString())},[i,r,o]);return(0,l.jsx)(oy.Z,{className:"mt-[-6px]",onChange:d,steppers:nP,value:n,showStepMarks:!1,showValueOnHover:!0})}),nB=e=>{let{value:t,lastPrice:i,enableEmpty:r=!0,getI18n:s,isBuy:a}=e;if(!+t)return r?{invalid:!1,errorMsg:"",warning:!1}:{invalid:!0,errorMsg:s("alpha-price-err-empty")};if(a&&+t<=+i)return{invalid:!1,errorMsg:s("alpha-price-warning-buy"),warning:!0};if(!a&&+t>=+i)return{invalid:!1,errorMsg:s("alpha-price-warning-sell"),warning:!0};if(a&&+t>1.05*+i||!a&&+t<.95*+i){let e=Math.abs(+t-+i)/+i*100*(a?1:-1);return{invalid:!1,errorMsg:s("alpha-price-warning-offset",{offset:(0,iE.yd)(e,2,eC.CP)}),warning:!0}}return{invalid:!1,errorMsg:"",warning:!1}},nN=e=>{let{value:t,maxQuantity:i,enableEmpty:r=!0,getI18n:s}=e;return r||t?+t>+i?{invalid:!0,errorMsg:s("alpha-amount-err-max")}:{invalid:!1,errorMsg:""}:{invalid:!0,errorMsg:s("alpha-amount-err-empty")}},nM=(e,t)=>{let{lastPrice:i,getI18n:r,maxQuantity:s,isBuy:a}=t,o=nB({value:null==e?void 0:e.price,lastPrice:i,enableEmpty:!1,getI18n:r,isBuy:a});if(o.invalid)return{...o,errorKey:aU.Tj.LIMIT_PRICE,value:null==e?void 0:e.price};let l=nN({value:null==e?void 0:e.quantity,maxQuantity:s,enableEmpty:!1,getI18n:r});return l.invalid?{...l,errorKey:aU.Tj.LIMIT_AMOUNT,value:null==e?void 0:e.quantity}:o.warning?{...o,invalid:!1,errorMsg:"",errorKey:""}:{invalid:!1,errorMsg:"",errorKey:"",value:"",warning:!1}},nD=(e,t)=>{let{result:i,isLoading:r}=se("web_limit_price_differ"),s=(0,D.useMemo)(()=>{if(r||!(null==i?void 0:i.pass))return null;let e=i.extra||"",t=null;try{t=JSON.parse(e)}catch(e){console.error("parse extraConfig error",e)}return t},[r,i]),a=s?t?s.buyDiffPercent:s.sellDiffPercent:0,{data:o}=(0,sc.u)({alphaTokenId:e});return{suggestPrice:(0,D.useMemo)(()=>o?+(null==o?void 0:o.price)*(1+.01*+a):0,[o,a,t]),sellBuffer:s?s.sellDiffPercent:0,buyBuffer:s?s.buyDiffPercent:0}},nV=e=>{let{suggestPrice:t,onChange:i,alphaTokenId:r,isBuy:s,pricePrecision:a}=e,[o,l]=(0,D.useState)(!1);(0,D.useEffect)(()=>{!o&&+t&&(i(t),l(!0))},[o,t,i]),(0,D.useEffect)(()=>{i(t)},[a]),(0,D.useEffect)(()=>{setTimeout(()=>{l(!1)},150)},[r,s])},nj=(0,tZ.U)()(e=>({quote:"",setQuote:t=>e({quote:t})})),nR=e=>{let t=(null==e?void 0:e.filters)||[],i=(null==e?void 0:e.quantityPrecision)||8,r=(null==e?void 0:e.pricePrecision)||8,s=(null==e?void 0:e.quotePrecision)||8,a=.1;return t.forEach(e=>{(null==e?void 0:e.filterType)==="PRICE_FILTER"&&(r=(0,tW.p8)(+e.tickSize)),(null==e?void 0:e.filterType)==="LOT_SIZE"&&(i=(0,tW.p8)(+e.stepSize)),(null==e?void 0:e.filterType)==="MIN_NOTIONAL"&&(a=+e.minNotional)}),{quantityPrecision:i,pricePrecision:r,totalPrecision:s,minTotal:a}},nO=e=>{let{maxAvailable:t,price:i,quantityPrecision:r}=e;return 0!=+t&&0!=+i?(0,iE.QZ)(t,i).toFixed(r,1):"0"},nF=e=>{let t=(0,en._n)(),{isBuy:i}=a5(),{t:r}=(0,tF.cK)(),{data:s,isLoading:a}=iM(),o=nA(s,e),{data:l}=(0,sc.u)({alphaTokenId:e}),{setError:n,setValue:d,getValues:c}=(0,aq.Gc)(),{suggestPrice:h,buyBuffer:u,sellBuffer:g}=nD(e,i),[m,p]=(0,D.useState)(""),[x,f]=(0,D.useState)(""),b=o[m],{maxAvailable:y,isWalletAvailableLoading:v}=ol({alphaTokenId:e,isAlphaToken:!i,cexAsset:m}),{quantityPrecision:C,pricePrecision:w,totalPrecision:S,minTotal:T}=nR(b),A=null==l?void 0:l.price,_=(0,D.useMemo)(()=>h?i?(0,iE.yd)(h,w,eC.eh):(0,iE.yd)(h,w,eC.CP):"",[i,w,h]),{field:{value:L},fieldState:{error:k}}=(0,aq.bc)({name:aU.Tj.LIMIT_PRICE}),{field:{value:I},fieldState:{error:P}}=(0,aq.bc)({name:aU.Tj.LIMIT_AMOUNT}),{field:{value:E},fieldState:{error:B}}=(0,aq.bc)({name:aU.Tj.LIMIT_TOTAL}),N=(0,D.useMemo)(()=>t?i?nO({maxAvailable:y,price:L,quantityPrecision:C}):y:"0",[t,y,i,C,L]),M=(0,D.useCallback)((e,t)=>{let{invalid:s,errorMsg:a}=nN({value:e,maxQuantity:t||N,getI18n:r,isBuy:i});return setTimeout(()=>{n(aU.Tj.LIMIT_AMOUNT,{message:s?a:""})},0),{invalid:s,errorMsg:a}},[N,r,i]);(0,D.useEffect)(()=>{i&&M(I,N)},[i,N]);let V=nj(e=>e.setQuote);(0,D.useEffect)(()=>{m&&V(m)},[m,V]);let j=(0,D.useCallback)(e=>{let{invalid:t,errorMsg:s,warning:a}=nB({value:e,lastPrice:A,getI18n:r,isBuy:i});f(a?s:""),setTimeout(()=>{n(aU.Tj.LIMIT_PRICE,{message:t?s:""})},0)},[r,i,A]),R=(0,D.useCallback)(e=>{if(d(aU.Tj.LIMIT_PRICE,e),I){let t=(0,iE.yd)(+I*+e,S,eC.CP);d(aU.Tj.LIMIT_TOTAL,0==+t?"":t),i&&M(I,nO({maxAvailable:y,price:e,quantityPrecision:C}))}j(e)},[d,n,i,S,M,I,j]),O=(0,D.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];M(e),d(aU.Tj.LIMIT_AMOUNT,e);let i=c(aU.Tj.LIMIT_PRICE);if(i&&t){let t=(0,iE.yd)(+i*+e,S,eC.CP);d(aU.Tj.LIMIT_TOTAL,0==+t?"":t)}},[n,N,i,S,L]),F=(0,D.useCallback)(e=>{d(aU.Tj.LIMIT_TOTAL,e);let t=e||"0",i=c(aU.Tj.LIMIT_AMOUNT),r=c(aU.Tj.LIMIT_PRICE);if(0!=+r){let e=(0,iE.QZ)(t,r).toFixed(C,1),i=0==+e?"":e;d(aU.Tj.LIMIT_AMOUNT,i),M(i)}else if(0!=+i){let e=(0,iE.QZ)(t,i).toFixed(w),r=nO({maxAvailable:y,price:e,quantityPrecision:C});d(aU.Tj.LIMIT_PRICE,0==+e?"":e),M(i,r),j(e)}else d(aU.Tj.LIMIT_PRICE,+_),setTimeout(()=>{d(aU.Tj.LIMIT_AMOUNT,(0,iE.QZ)(t,+_).toFixed(C,1))},0)},[d,C,w,M,_,y,j]);return nV({suggestPrice:_,onChange:R,alphaTokenId:e,isBuy:i,pricePrecision:w}),{price:L,amount:I,total:E,onChangePrice:R,onChangeAmount:O,onChangeTotal:F,priceError:(null==k?void 0:k.message)||"",amountError:(null==P?void 0:P.message)||"",totalError:(null==B?void 0:B.message)||"",maxQuantity:N,quantityPrecision:C,pricePrecision:w,totalPrecision:S,quoteAsset:m,setQuoteAsset:p,quoteAssetInfo:b,priceWarning:x,isLoadingExchangeInfo:a,haveQuoteAssets:Object.keys(o).length>0,minTotal:T,suggestPrice:_,buyBuffer:u,sellBuffer:g,isWalletAvailableLoading:v}},nH=(0,D.memo)(e=>{let{value:t="",onChange:i,errorMessage:r,precision:s=0,quoteAsset:a,minTotal:o}=e,{t:n}=(0,tF.Mi)(),{t:d}=(0,tF.cK)();return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"flex justify-between t-caption1 text-SecondaryText md:text-TertiaryText leading-[18px] mb-[4px]",children:(0,l.jsx)("div",{children:n("trd-orderForm-total",{defaultValue:"Total"})})}),(0,l.jsx)(oI,{className:"w-full pr-[0px]",onChange:i,type:"text",placeholder:d("alpha-total-min-place",{min:o}),suffix:a&&(0,l.jsxs)("div",{className:"flex items-center gap-[4px] pr-[12px]",children:[(0,l.jsx)(o$,{currency:a,size:20}),a]}),min:o,value:t,variant:"line",status:r?"error":void 0,name:aU.Tj.LIMIT_TOTAL,precision:s}),!!r&&(0,l.jsx)("div",{className:"mt-[4px] t-caption1 text-Error",children:r})]})}),nZ=(0,D.memo)(e=>{let{baseAsset:t="",commission:i,isBuy:r,quoteAsset:s,estfeeText:a}=e,{t:o}=(0,tF.cK)(),n=(0,iK.Sl)(),d=(0,l.jsxs)("div",{className:"flex flex-col gap-[10px] text-[12px] leading-[18px] font-[400]",children:[(0,l.jsx)("div",{children:o("alpha-est-fee-tips1")}),(0,l.jsx)("div",{children:o("alpha-est-fee-tips2",{fee:i?`${100*i}%`:"--"})}),(0,l.jsx)("div",{children:o("alpha-est-fee-tips3")})]}),c=(0,D.useCallback)(e=>{e&&n(ii.Ks.click,{$element_id:"estimated_fee",module:ii.kj.ORDER_FORM,type:"limit"})},[]);return(0,l.jsxs)("div",{className:"flex items-center justify-between gap-[4px] text-[12px] leading-[18px] font-[400] pt-[2px] pb-[1px]",children:[(0,l.jsx)(op,{tooltips:d,trigger:"hover",onVisibleChange:c,enterDelayTime:50,children:(0,l.jsx)("div",{className:"text-SecondaryText md:text-TertiaryText cursor-help border-0 border-b border-dotted",children:o("alpha-est-fee",{defaultValue:"Estimated fee"})})}),(0,l.jsxs)("div",{className:"text-PrimaryText font-[500]",children:[a,"\xa0",r?t:s]})]})}),nU=async e=>{let t;try{t=await (0,iL.v_)("/bapi/asset/v1/private/alpha-trade/order/place",e)}catch(i){let e="";i instanceof Error&&(e=i.message),t={success:!1,msg:e,data:null}}return t},nW=e=>"spot"===e?"MAIN":"funding"===e?"CARD":e,n$=e=>{let{price:t,quantity:i,walletConfig:r,isBuy:s,totalPrecision:a}=e;return s?nz({price:t,quantity:i,walletConfig:r,totalPrecision:a}):nK({quantity:i})},nz=e=>{let{price:t,quantity:i,walletConfig:r,totalPrecision:s}=e;if(!r||!Array.isArray(r))return[];let a=(0,iE.Jp)(+i,+t),o=[];return(r.forEach(e=>{if(+a>0&&(null==e?void 0:e.balance)&&+(null==e?void 0:e.balance)>0){let t=Math.min(+(null==e?void 0:e.balance),+a),i=+(0,iE.yd)(t,s,eC.CP);i>0&&o.push({amount:i,paymentWalletType:nW(null==e?void 0:e.walletType)})}a=(0,iE.h9)(a,+(null==e?void 0:e.balance)||0)}),0>=+a&&o.length>0)?o:[]},nK=e=>{let{quantity:t}=e;return[{amount:+t,paymentWalletType:"ALPHA"}]},nX=e=>{let{openModal:t,closeModal:i,pushNotify:r}=(0,tP.sJ)(),{t:s}=(0,tF.cK)(),{isEnabledAgreement:a,setManualEnabledAgreement:o}=no(),{mutateAsync:n,isLoading:d}=nn(),c=(0,iK.Sl)();return(0,D.useCallback)(async()=>new Promise((h,u)=>{if(!a)return void h("");let g=async()=>{i(),u(),c(ii.Ks.placeOrderEvent,{$element_id:"place_order_intercepted",df_business:"alpha_trading",type:"limit",side:e?"BUY":"SELL",df_type:"disclaimer"})},m=async()=>{try{await n(),r({placement:"bottom-end",variant:"success",title:s("signAgreement-successfully",{defaultValue:"Disclaimer confirmed successfully! You may continue to trade now."})}),o(!1)}finally{i(),setTimeout(()=>{h("")},300)}};t({maskClose:!1,className:"[&_.bn-modal-wrap]:!w-[420px] z-[1500]",content:(0,l.jsx)(nd,{onClose:g,isLoading:d,handleOnConfirmClick:m})})}),[a,e])},nY=()=>{let{openModal:e,closeModal:t}=(0,tP.sJ)(),{t:i}=(0,tF.cK)(),{t:r}=(0,tF.Mi)(),s=(0,iK.Sl)();return(0,D.useCallback)(async(a,o,n)=>new Promise((d,c)=>{if(!a||!n)return void d("");let h=(0,iE.yd)((+o-+n)/+n*100,2,eC.CP),u=async()=>{t(),c(),s(ii.Ks.click,{$element_id:"cancel",module:ii.kj.FAT_FINGER})},g=async()=>{t(),setTimeout(()=>{d(""),s(ii.Ks.click,{$element_id:"continue",module:ii.kj.FAT_FINGER})},300)};e({maskClose:!1,className:"[&_.bn-modal-wrap]:!w-[360px] z-[1500]",content:(0,l.jsx)(ls.Z,{icon:(0,l.jsx)(la.Z,{size:96}),title:i("alpha-fat-title"),description:i("alpha-fat-desc",{diff:h}),actions:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s6.Z,{style:{width:"100%"},sz:"large",onClick:g,children:r("trd-orderForm-confirm")}),(0,l.jsx)(s6.Z,{style:{width:"100%",marginTop:"8px"},sz:"large",variant:"secondary",onClick:u,children:r("trd-dialog-cancel")})]})})})}),[i,r,t,e])},nG=e=>{let{alphaTokenId:t,symbol:i,name:r}=e,{openModal:s,closeModal:a}=(0,tP.sJ)(),{t:o}=(0,tF.Mi)(),{t:n}=(0,tF.cK)(),d=(0,iK.Sl)();return(0,D.useCallback)(async e=>{let{isBuy:c,amount:h,total:u,quoteAsset:g,estfeeText:m}=e;return new Promise((e,p)=>{let x=async()=>{a(),p(),d(ii.Ks.click,{$element_id:"close",module:ii.kj.LIMIT_ORDER_CONFIRM,type:"limit"})},f=async()=>{a(),e(""),d(ii.Ks.click,{$element_id:"confirm",module:ii.kj.LIMIT_ORDER_CONFIRM,type:"limit"})};s({maskClose:!1,className:"[&_.bn-modal-wrap]:!w-[420px] z-[1500]",content:(0,l.jsxs)("div",{className:"px-[24px] pb-[24px]",children:[(0,l.jsxs)("div",{className:"pt-[18px] text-PrimaryText flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center font-[600] text-[20px] leading-[28px] gap-[8px]",children:[(0,l.jsx)(il._,{alphaTokenId:t,size:"20"}),i]}),(0,l.jsx)("div",{className:"text-TertiaryText font-[400] text-[12px] leading-[18px]",children:r})]}),(0,l.jsx)(s4.Z,{className:"cursor-pointer w-[24px] h-[24px] text-PrimaryText",onClick:()=>x()})]}),(0,l.jsxs)("div",{className:"pt-[18px] text-PrimaryText font-[500] text-[14px] leading-[30px] [&_.item]:flex [&_.item]:items-center [&_.item]:justify-between [&_.label]:text-TertiaryText [&_.label]:font-[400]",children:[(0,l.jsxs)("div",{className:"item",children:[(0,l.jsx)("div",{className:"label",children:o("trd-openOrder-type")}),(0,l.jsxs)("div",{className:`value ${c?"text-Buy":"text-Sell"}`,children:[o("trd-orderForm-LIMIT")," / ",c?o("trd-orderForm-BUY"):o("trd-orderForm-SELL")]})]}),(0,l.jsxs)("div",{className:"item",children:[(0,l.jsx)("div",{className:"label",children:o("trd-orderForm-quantity")}),(0,l.jsxs)("div",{className:"value",children:[h," ",i]})]}),(0,l.jsxs)("div",{className:"item",children:[(0,l.jsx)("div",{className:"label",children:o("trd-orderForm-total")}),(0,l.jsxs)("div",{className:"value",children:[u," ",g]})]}),(0,l.jsxs)("div",{className:"item",children:[(0,l.jsx)("div",{className:"label",children:n("alpha-est-fee")}),(0,l.jsxs)("div",{className:"value",children:[m," ",c?i:g]})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-[4px] text-PrimaryText text-[12px] leading-[22px] font-[400] p-[12px] bg-Input rounded-[12px] mt-[16px]",children:[(0,l.jsx)(nb.Z,{size:20,className:"text-PrimaryText w-[20px] h-[20px]"}),(0,l.jsx)("div",{className:"flex-1",children:n("alpha-confirm-tips")})]}),(0,l.jsx)(s6.Z,{onClick:()=>f(),className:"w-full mt-[16px] h-[48px]",children:o("trd-orderForm-confirm")})]})})})},[t,i,r,o,n,d])},nq=()=>{let e=(0,iK.Sl)();return(t,i)=>{e(ii.Ks.placeOrderEvent,{$element_id:t,df_business:"alpha_trading",type:"limit",side:i?"BUY":"SELL"})}},nQ=(0,D.memo)(e=>{let{alphaTokenId:t,quoteAsset:i,baseAsset:r,alphaId:s,amount:a,maxAvailable:o,estfeeText:n,disabledToken:d,priceError:c,amountError:h,totalPrecision:u,isWalletAvailableLoading:g}=e,m=(0,en._n)(),{t:p}=(0,tF.Mi)(),{t:x}=(0,tF.cK)(),{isBuy:f,side:b}=a5(),y=(0,iK.Sl)(),v=nq(),{showSuccessNotification:C}=(0,aw.l)(),{handleSubmit:w,setError:S,setValue:T}=(0,aq.Gc)(),{walletConfig:A}=aG({asset:i}),{data:_}=(0,sc.u)({alphaTokenId:t}),L=np({cexAsset:i||""}),k=nX(f),I=nY(),P=nG({alphaTokenId:t,symbol:(null==_?void 0:_.symbol)||"",name:(null==_?void 0:_.name)||""}),E=oO(),B=null==_?void 0:_.price,N=(0,D.useCallback)(async e=>{v("place_order_triggered",f);let t=e.limitPrice,a=e.limitAmount,{invalid:l,errorMsg:d,errorKey:c,warning:h}=nM({price:t,quantity:a},{getI18n:x,lastPrice:B,maxQuantity:o,isBuy:f});if(l){S(c,{message:d}),v("place_order_intercepted",f);return}let g=(0,iE.yd)(+a*+t,u,eC.CP);T(aU.Tj.LIMIT_TOTAL,0==+g?"":g),await E(),await k(),await I(!!h&&!!B,t,B),await P({isBuy:f,amount:a,total:g,quoteAsset:i,estfeeText:n});let m=n$({price:+e.limitPrice,quantity:+e.limitAmount,walletConfig:A,isBuy:f,totalPrecision:u});m.length<=0||((await nU({baseAsset:s,quoteAsset:i,side:e.side,price:+e.limitPrice,quantity:+e.limitAmount,paymentDetails:m})).success?(C(x(`toast-limit-${f?"buy":"sell"}Order-created`,{quantity:+e.limitAmount,base:r,quote:i}),x(`toast-limit-${f?"buy":"sell"}OrderCreated-title`)),T(aU.Tj.LIMIT_AMOUNT,""),T(aU.Tj.LIMIT_TOTAL,""),v("place_order_successful",f)):v("place_order_failed",f))},[i,s,f,A,B,o,k,I,n,P,T,u,r]),M=async()=>{y(ii.Ks.click,{$element_id:"trade",module:ii.kj.ORDER_FORM,type:"limit"}),await w(N)()},V=(0,D.useCallback)(()=>{y(ii.Ks.click,{$element_id:"trade_to_login",module:ii.kj.ORDER_FORM,type:"limit"}),window.location.href=t0(rP.REGISTER_URL,{callback:(0,rk.Ok)(window.location.href)})},[m]);return m&&f&&!g&&+a>+o?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-Error t-caption1 mb-[4px] text-center",children:p("form-insufficientBalance-error",{defaultValue:"Insufficient balance"})}),(0,l.jsx)(oF,{containerClassName:"flex",source:"Alpha_limit",trackType:"limit",trackElementId:"add_balance",targetCoin:i,children:(0,l.jsx)(s6.Z,{className:"w-full",variant:"primary",children:p("form-addMoreBalance",{defaultValue:"Add {{asset}} balance",asset:i})})})]}):(0,l.jsx)(l.Fragment,{children:m?(0,l.jsx)(s6.Z,{className:"w-full",disabled:d||L,onClick:M,variant:b.toLowerCase(),inactive:!!c||!!h,children:`${p(`trd-orderForm-${b}`)} ${r}`}):(0,l.jsx)(s6.Z,{className:"w-full",onClick:V,variant:b.toLowerCase(),children:p("trd-orderForm-login",{defaultValue:"Log In"})})})}),nJ=e=>{let{alphaId:t,alphaTokenLoading:i,quoteAssetStatus:r,isBuy:s,setDisabledToken:a,isLoadingExchangeInfo:o,haveQuoteAssets:n,quoteAsset:d}=e,{t:c}=(0,tF.cK)(),h=np({cexAsset:d||""}),u=(0,D.useMemo)(()=>h?["cannot-trade-micaUser",!0]:(i||t)&&r!==iV.INIT&&r!==iV.DElISTED?r===iV.SELL_ONLY?["alpha-limit-error-sellonly",s]:r===iV.PENDING?["alpha-limit-error-pending",!0]:r||n?["",!1]:["alpha-limit-error-pair",!0]:["alpha-limit-error-token",!0],[i,t,r,s,o,h]);return((0,D.useEffect)(()=>{a(u[1])},[u]),u[0])?(0,l.jsxs)("div",{className:"flex items-start gap-[4px] text-PrimaryText text-[12px] leading-[22px] font-[400] p-[12px] bg-ErrorBg rounded-[12px] mt-[16px]",children:[(0,l.jsx)(nb.Z,{size:20,className:"text-PrimaryText w-[20px] h-[20px]"}),(0,l.jsx)("div",{className:"flex-1",children:c(u[0])})]}):(0,l.jsx)(l.Fragment,{})},n0=(e,t)=>(0,iE.yd)(e,t,1).replace(/0*$/,"").replace(/\.$/,"");var n1=i(25037);let n2=()=>{let{t:e}=(0,tF.cK)(),t=su();return eC.xy.INSTANT===t?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(sR.rU,{to:t2.U3,className:"no-underline text-PrimaryText cursor-pointer md:hover:text-SecondaryText",preload:!1,target:"_blank",children:(0,l.jsxs)(ir.Z,{className:"flex-row items-center",children:[(0,l.jsx)(n1.Z,{className:"!w-[16px] !h-[16px] text-PrimaryText"}),(0,l.jsx)(is.ZP,{className:"ml-[4px] text-[12px] font-[400]",children:e("trd-fee-rate",{defaultValue:"Fee Rate"})})]})})};var n5=i(31478),n3=i(51817),n6=i(37502);let n4=e=>{let{data:t}=e,{t:i}=(0,tF.cK)(),{baseAsset:r,quoteAsset:s}=(0,n3.r)()||{},{isRTL:a}=(0,Q.LP)(),o=e=>{let{index:i,key:r,style:s}=e,o=t[i],n=null==o?void 0:o.color;return(0,l.jsxs)("div",{className:"flex items-center justify-between",style:{...s,boxSizing:"border-box",direction:a?"rtl":"ltr"},children:[(0,l.jsx)("div",{className:"flex-1",children:aD()(o.T).format("HH:mm:ss")}),(0,l.jsx)("div",{className:"flex-1",style:{color:n},children:o.p}),(0,l.jsx)("div",{className:"pr-[16px] sm:pr-[8px] flex-1 text-right whitespace-nowrap",children:1e3>Number(o.q)?(0,iB.Kl)(o.q):(0,n6.y_)(+o.q)})]},r)};return(0,l.jsxs)("div",{className:"w-full h-full",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-TertiaryText",children:[(0,l.jsx)("div",{className:"flex-1",children:i("transcation-Time",{defaultValue:"Time"})}),(0,l.jsxs)("div",{className:"flex-1",children:[i("transcation-Price",{defaultValue:"Price"}),"(",s,")"]}),(0,l.jsxs)("div",{className:"pr-[16px] sm:pr-[8px] flex-1 text-right",children:[i("transcation-Amount",{defaultValue:"Amount"})," (",r,")"]})]}),t&&0!==t.length?(0,l.jsx)(iO.qj,{children:e=>{let{width:i,height:r}=e;return(0,l.jsx)(iO.aV,{width:i,height:r-24,rowCount:t.length,rowHeight:24,rowRenderer:o,overscanRowCount:5})}}):(0,l.jsx)(iC.p,{className:"!mt-[0px]"})]})};var n8=i(45549);let n7=async e=>{let{limit:t,symbol:i}=e;return(0,iL.U2)(`/bapi/defi/v1/public/alpha-trade/agg-trades?${(0,n8.DT)({limit:t,symbol:i})}`)};var n9=i(34498),de=i.n(n9);let dt=(0,es.f_)(),di=e=>{let t=e.split(".");return 2===t.length?t[1].length:4},dr=e=>{let{response:t,oldData:i}=e;i.length>=40&&i.pop();let r=di(`${i[0].p}`),s=di(`${i[0].q}`),a=Number(t.p).toFixed(r),o=Number(t.q).toFixed(s);return i.unshift({...t,p:a,q:o}),i},ds=()=>{let{alphaId:e,chainId:t,contractAddress:i}=(0,n3.r)()||{},{data:r,isLoading:s}=iM(),a=nA(r,`${t}-${i}`)||{},o=Object.keys(a)[0],l=nj(e=>e.quote)||o,n=(null==a?void 0:a[l])||{},d=(null==n?void 0:n.pricePrecision)||4,c=(null==n?void 0:n.quantityPrecision)||4,h=`${e}${l}`,u=(0,em.useQueryClient)(),{isLoading:g,data:m,refetch:p}=(0,em.useQuery)([iI.i.QUERY_ALPHA_TRANSACTIONS["0"],h],async()=>{let e=await n7({limit:40,symbol:h});return de()((null==e?void 0:e.data)||[],"T","desc").map(e=>({...e,p:Number(e.p).toFixed(d),q:Number(e.q).toFixed(c)}))},{staleTime:2e3,enabled:!s&&!!l}),x=su(),f=eC.xy.INSTANT===x;return(0,D.useEffect)(()=>{let e=()=>null;return h&&!s&&l&&(e=dt.getTranscations({symbol:h}).subscribe(e=>{let{data:t}=e;u.setQueryData([iI.i.QUERY_ALPHA_TRANSACTIONS["0"],h],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return dr({response:t,oldData:e||{data:[]}})})})),()=>{e&&e()}},[h,u,s,l]),{data:f?[]:m||[],isLoading:g,refetch:p,number:(null==m?void 0:m.length)||0}};function da(e){let t=de()(e,"T","asc"),i=(0,D.useRef)(null),r=(0,D.useRef)([]),s=t.map(e=>({...e})),a=s.length>0?s[0].p:null;(0,D.useEffect)(()=>{null!==a&&(i.current=a,r.current=s)},[a,s]);let o=i.current,l=r.current.find(e=>e.p===o),n=(null==l?void 0:l.color)||"var(--color-PrimaryText)";if(s.length>0&&s.length<40)s[0].color=n;else if(s.length>=40&&o){var d;let e=parseFloat(o),t=parseFloat(null==(d=s[0])?void 0:d.p);t>e?s[0].color="var(--color-Buy)":t===e?s[0].color=n:s[0].color="var(--color-Sell)"}for(let e=1;e<s.length;e++){let t=parseFloat(s[e-1].p),i=parseFloat(s[e].p);i>t?s[e].color="var(--color-Buy)":i===t?s[e].color=s[e-1].color:s[e].color="var(--color-Sell)"}return de()(s,"T","desc")}let dl=()=>{let{t:e}=(0,tF.cK)(),{data:t}=ds(),i=da(t),{closeDrawer:r}=(0,tP.sJ)();return(0,l.jsxs)(is.ZP,{className:"text-PrimaryText w-full h-[calc(100vh-80px)]",children:[(0,l.jsxs)(is.ZP,{className:"h-[50px] leading-[50px] px-[16px] font-[500] text-[18px] flex items-center justify-between",children:[(0,l.jsx)("div",{children:e("limit-transactions",{defaultValue:"Limit Transactions"})}),(0,l.jsx)(s4.Z,{className:"!w-[20px] !h-[20px]",onClick:r})]}),(0,l.jsx)(is.ZP,{className:"h-[calc(100%-50px)] text-[12px] font-[400] pl-[16px]",children:(0,l.jsx)(n4,{data:i})})]})},dn=()=>{let{t:e}=(0,tF.cK)(),{openDrawer:t}=(0,tP.sJ)();return(0,l.jsxs)("div",{className:"flex items-center justify-start text-PrimaryText sm:!hidden",onClick:()=>{t({content:(0,l.jsx)(dl,{}),direction:"bottom",size:"auto"})},children:[(0,l.jsx)(n5.Z,{className:"!w-[16px] !h-[16px] text-PrimaryText"}),(0,l.jsx)("div",{className:"text-[12px] ml-[4px]",children:e("Transactions",{defaultValue:"Transactions"})})]})},dd=(0,D.memo)(e=>{let{alphaTokenId:t,containerWidth:i}=e,r=(0,en._n)(),{isBuy:s}=a5(),{data:a,isLoading:o}=(0,sc.u)({alphaTokenId:t}),n=(null==a?void 0:a.baseAsset)||"",{price:d,amount:c,total:h,onChangePrice:u,onChangeAmount:g,onChangeTotal:m,priceError:p,amountError:x,totalError:f,maxQuantity:b,quoteAsset:y,setQuoteAsset:v,quantityPrecision:C,pricePrecision:w,totalPrecision:S,quoteAssetInfo:T,priceWarning:A,isLoadingExchangeInfo:_,haveQuoteAssets:L,minTotal:k,suggestPrice:I,buyBuffer:P,sellBuffer:E,isWalletAvailableLoading:B}=nF(t),[N,M]=(0,D.useState)(!1),V=os({cexAsset:y}),{data:j}=iM(),R=nA(j,t),O=nL(),F=(0,D.useMemo)(()=>O.isLoading?[]:O.data.filter(e=>R[e]),[O,R]),H=(0,D.useMemo)(()=>!(F.length<=0)&&F.includes(y),[F,y]),{data:Z}=nT((null==a?void 0:a.alphaId)&&y&&H?`${null==a?void 0:a.alphaId}${y}`:""),U=!s,W=Z?(s?null==Z?void 0:Z.buyerCommission:null==Z?void 0:Z.sellerCommission)/1e4/100:0,$=(0,D.useMemo)(()=>{let e=s?+c*W:+h*W,t=(null==T?void 0:T.quotePrecision)||8,i=(null==a?void 0:a.tradeDecimal)||8;return e?n0(e,s?i:t):"--"},[s,c,h,W,null==a?void 0:a.tradeDecimal,null==T?void 0:T.quotePrecision]);return(0,l.jsxs)(ir.Z,{className:"h-auto md:h-[310px] flex-col justify-start gap-y-[16px] mt-[8px]",children:[(0,l.jsx)(nk,{alphaTokenId:t,value:d,onChange:u,errorMessage:p,containerWidth:i,quoteAsset:y,setQuoteAsset:v,precision:w,suggestPrice:I,buyBuffer:P,sellBuffer:E,warningText:A,quoteAssetList:F,quoteAssets:R}),(0,l.jsx)(nI,{alphaTokenId:t,value:c,onChange:g,errorMessage:x,quantityPrecision:C}),(0,l.jsx)(nE,{amount:c,maxAvailable:b,isLogin:r,quantityPrecision:C,onChange:g,price:d}),(0,l.jsx)(nH,{value:h,onChange:m,errorMessage:f,precision:V,quoteAsset:y,minTotal:k}),(0,l.jsxs)(ir.Z,{className:"flex flex-col gap-[4px]",children:[(0,l.jsxs)(ir.Z,{className:"space-x-[4px] py-[2px]",children:[(0,l.jsx)("div",{className:"t-caption1 text-TertiaryText flex-1",children:(0,l.jsx)(oC,{alphaTokenId:t,isAlphaToken:U,cexAsset:y,asset:s?y:n})}),r&&!U&&(0,l.jsx)(oF,{source:"alpha-limit",trackType:"limit",targetCoin:y,containerClassName:"flex items-center",children:(0,l.jsx)(nw.Z,{className:"w-[16px] h-[16px] cursor-pointer text-PrimaryYellow"})})]}),(0,l.jsx)(nZ,{baseAsset:null==a?void 0:a.baseAsset,isBuy:s,estfeeText:$,quoteAsset:y,commission:W})]}),(0,l.jsx)(nQ,{alphaTokenId:t,quoteAsset:y,baseAsset:(null==a?void 0:a.baseAsset)||"",alphaId:(null==a?void 0:a.alphaId)||"",amount:c,maxAvailable:b,estfeeText:$,disabledToken:N,priceError:p,amountError:x,totalPrecision:S,isWalletAvailableLoading:B}),(0,l.jsxs)("div",{className:"flex items-center justify-start",children:[(0,l.jsx)(n2,{})," ",(0,l.jsx)(dn,{})]}),r&&(0,l.jsx)(nJ,{alphaTokenLoading:o,isLoadingExchangeInfo:_,alphaId:null==a?void 0:a.alphaId,quoteAssetStatus:null==T?void 0:T.status,isBuy:s,setDisabledToken:M,haveQuoteAssets:L,quoteAsset:y})]})}),dc=e=>{var t,i,r,s;let{alphaTokenId:a,onSubmitSuccess:o}=e,{data:n,refetch:d,isFetching:c}=oh({alphaTokenId:a}),h=(0,aQ.Z)(a),u=h&&h!==a,g=ou(),{getValues:m,clearErrors:p}=(0,aq.Gc)(),{toToken:x}=a3({alphaTokenId:a}),{isBuy:f,side:b}=a5(),{tradeType:y,setTradeType:v}=sh();(0,D.useEffect)(()=>{if(u){let e=m(aU.Tj.SIDE);g({[aU.Tj.SIDE]:e}),p()}},[g,u,m,p]);let C=(0,D.useRef)(null),[w,S]=(0,D.useState)(null);(0,D.useEffect)(()=>{if(C.current){let{width:e}=C.current.getBoundingClientRect();S(e)}},[]),(0,D.useEffect)(function(){return a$.v.on(az.Y.CHANGE_FORM_BUY_SELL,e=>{let{value:t}=e;setTimeout(()=>{g({[aU.Tj.SIDE]:t})},100)})},[g,y]);let T=(0,l.jsxs)("div",{className:"mt-[8px]",children:[(0,l.jsx)(li,{alphaTokenId:a,minInputAmount:(null==n?void 0:n.minInputAmount)||"",maxInputAmount:(null==n?void 0:n.maxInputAmount)||"",fromCoinAmountInUsd:null==n?void 0:n.fromCoinAmountInUsd,containerWidth:w}),(0,l.jsx)(lf,{alphaTokenId:a,minReceivedAmount:(null==n?void 0:n.minReceivedAmount)||"",toCoinAmount:(null==n?void 0:n.toCoinAmount)||"",containerWidth:w,quoteInfo:n}),(0,l.jsx)("div",{className:"my-[12px] w-full bg-Line h-[1px]"}),(0,l.jsx)(nC,{alphaTokenId:a,onPriceConfig:null==n||null==(t=n.mode)?void 0:t.priorityOnPrice,onSuccessConfig:null==n||null==(i=n.mode)?void 0:i.priorityOnSuccess,minReceivedAmount:(null==n?void 0:n.minReceivedAmount)||"",toToken:x,isBuy:f}),(0,l.jsx)(lI,{alphaTokenId:a,rate:null==n?void 0:n.rate}),(0,l.jsx)("div",{className:"mt-[16px] w-full",children:(0,l.jsx)(nx,{onPriceConfig:null==n||null==(r=n.mode)?void 0:r.priorityOnPrice,onSuccessConfig:null==n||null==(s=n.mode)?void 0:s.priorityOnSuccess,quoteInfo:n,alphaTokenId:a,refetchQuote:d,isFetchingRate:c,toToken:x,onSubmitSuccess:o})}),(0,l.jsx)(nv,{alphaTokenId:a}),(0,l.jsx)(ny,{alphaTokenId:a})]});return(0,l.jsx)(iX,{defaultTrackingData:{module:ii.kj.ORDER_FORM,type:y,side:b},children:(0,l.jsxs)("div",{ref:C,children:[(0,l.jsx)(om,{}),(0,l.jsx)("div",{className:"mt-[4px]",children:(0,l.jsx)(ob,{onTabChange:v})}),y===eC.xy.LIMIT&&(0,l.jsx)(dd,{alphaTokenId:a,containerWidth:w}),y===eC.xy.INSTANT&&T]})})},dh=e=>{let{alphaTokenId:t,initialValues:i,onSubmitSuccess:r}=e,s=(0,aq.cI)({mode:"onChange",defaultValues:{...aU.Sr,...i}});return(0,l.jsx)(aq.RV,{...s,children:(0,l.jsx)(dc,{alphaTokenId:t,onSubmitSuccess:r})})},du=(0,es.X5)(),dg=(e,t)=>{let[i,r]=(0,D.useState)({}),s=(0,D.useRef)("");return(0,D.useEffect)(()=>{let i=()=>null;return e&&t&&(r({}),i=du.getTickerStream({chainId:e,contractAddress:t}).subscribe(e=>{let{data:t}=e;s.current&&+(null==t?void 0:t.t)<+s.current||(s.current=null==t?void 0:t.t,r({ca:null==t?void 0:t.ca,price:null==t?void 0:t.p,priceHigh24h:null==t?void 0:t.ph24,priceLow24h:null==t?void 0:t.pl24,percentChange24h:null==t?void 0:t.pc24,volume24h:null==t?void 0:t.vol,volume24hBuy:null==t?void 0:t.v24b,volume24hSell:null==t?void 0:t.v24s,count24h:null==t?void 0:t.cnt24,count24hBuy:null==t?void 0:t.cnt24b,count24hSell:null==t?void 0:t.cnt24s,percentChange4h:null==t?void 0:t.pc4,volume4h:null==t?void 0:t.vol4,volume4hBuy:null==t?void 0:t.v4b,volume4hSell:null==t?void 0:t.v4s,count4h:null==t?void 0:t.cnt4,count4hBuy:null==t?void 0:t.cnt4b,count4hSell:null==t?void 0:t.cnt4s,percentChange1h:null==t?void 0:t.pc1,volume1h:null==t?void 0:t.vol1,volume1hBuy:null==t?void 0:t.v1b,volume1hSell:null==t?void 0:t.v1s,count1h:null==t?void 0:t.cnt1,count1hBuy:null==t?void 0:t.cnt1b,count1hSell:null==t?void 0:t.cnt1s,percentChange5m:null==t?void 0:t.pc5m,volume5m:null==t?void 0:t.vol5m,volume5mBuy:null==t?void 0:t.v5mb,volume5mSell:null==t?void 0:t.v5ms,count5m:null==t?void 0:t.cnt5m,count5mBuy:null==t?void 0:t.cnt5mb,count5mSell:null==t?void 0:t.cnt5ms,liquidity:null==t?void 0:t.liq,totalSupply:null==t?void 0:t.ts,circulatingSupply:null==t?void 0:t.cs,holders:null==t?void 0:t.hc,holdersTop10:null==t?void 0:t.ht10p,launchTime:null==t?void 0:t.lt,happenTime:null==t?void 0:t.t}))})),()=>{i&&i()}},[e,t]),i},dm=e=>{var t;let{data:i}=(0,sc.u)({alphaTokenId:e}),{contractAddress:r=""}=(0,tq.U)({from:t2.uE}),{data:s}=af({chainId:(null==i?void 0:i.chainId)||"",contractAddress:r}),a=dg((null==i?void 0:i.chainId)||"",r),{price:o,percentChange24h:l,high:n,low:d,volume:c,transactions:h,liquidity:u,holders:g,fdv:m,marketCap:p}=(0,D.useMemo)(()=>{var e,t,r;return a&&a.ca?{price:a.price,percentChange24h:a.percentChange24h,high:a.priceHigh24h,low:a.priceLow24h,volume:a.volume24h,transactions:a.count24h,liquidity:a.liquidity,holders:a.holders,fdv:+a.totalSupply*+a.price,marketCap:+a.circulatingSupply*+a.price}:{price:null==i?void 0:i.price,percentChange24h:null==i?void 0:i.percentChange24h,high:(null==i?void 0:i.high)||(null==s||null==(e=s.statsInfo)?void 0:e.priceHigh24h),low:(null==i?void 0:i.low)||(null==s||null==(t=s.statsInfo)?void 0:t.priceLow24h),volume:null==i?void 0:i.volume24h,transactions:null==s||null==(r=s.statsInfo)?void 0:r.count24h,liquidity:null==i?void 0:i.liquidity,holders:null==i?void 0:i.holders,fdv:null==i?void 0:i.fdv,marketCap:null==i?void 0:i.marketCap}},[a,s,i]);return{price:o?`$${(0,tW.Dn)(`${o}`,t$.Bu.HIGH_LOWEST)}`:"--",percentChange24h:l,high:n?`$${(0,tW.Dn)(`${n}`,t$.Bu.HIGH_LOWEST)}`:"--",low:d?`$${(0,tW.Dn)(`${d}`,t$.Bu.HIGH_LOWEST)}`:"--",volume:c?`$${(0,iB.L$)(c)}`:"--",transactions:h?(0,iB.L$)(h):"--",liquidity:(0,iB.L$)(u||""),holders:(0,iB.L$)(g||""),fdv:(0,iB.L$)(m||""),marketCap:(0,iB.L$)(p||""),isAirdrop:null==i?void 0:i.onlineAirdrop,isTge:null==i?void 0:i.onlineTge,contractAddress:r,tags:(null==s||null==(t=s.metaInfo)?void 0:t.tagList)||[]}},dp=()=>{let{t:e}=(0,tF.cK)(),{alphaTokenId:t}=(0,sd.K)(),i=dm(t);return(0,l.jsxs)(ir.Z,{className:"sm:hidden md:flex p-[8px] bg-Vessel gap-[8px] rounded-[8px]",children:[(0,l.jsxs)(is.ZP,{className:"flex-1 text-center",children:[(0,l.jsx)(is.ZP,{className:"t-caption1 text-TertiaryText",children:e("alpha-market-cap",{defaultValue:"Market Cap"})}),(0,l.jsx)(is.ZP,{className:"t-subtitle3 text-PrimaryText",children:i.marketCap})]}),(0,l.jsxs)(is.ZP,{className:"flex-1 text-center",children:[(0,l.jsx)(is.ZP,{className:"t-caption1 text-TertiaryText",children:e("alpha-holders",{defaultValue:"Holders"})}),(0,l.jsx)(is.ZP,{className:"t-subtitle3 text-PrimaryText",children:i.holders})]}),(0,l.jsxs)(is.ZP,{className:"flex-1 text-center",children:[(0,l.jsx)(is.ZP,{className:"t-caption1 text-TertiaryText",children:e("alpha-liquidity",{defaultValue:"Liquidity"})}),(0,l.jsx)(is.ZP,{className:"t-subtitle3 text-PrimaryText",children:i.liquidity})]}),(0,l.jsxs)(is.ZP,{className:"flex-1 text-center",children:[(0,l.jsx)(is.ZP,{className:"t-caption1 text-TertiaryText",children:e("alpha-fdv",{defaultValue:"FDV"})}),(0,l.jsx)(is.ZP,{className:"t-subtitle3 text-PrimaryText",children:i.fdv})]})]})},dx=e=>{let{alphaTokenId:t}=e,{isMobile:i}=(0,el.F)(),{t:r}=(0,tF.cK)(),[s,a]=(0,D.useState)(!1),[o,n]=(0,D.useState)(aU.V$.BUY);aX(),sg();let d=(0,D.useMemo)(()=>({[aU.Tj.SIDE]:o}),[o]),c=e=>{a(!0),n(e)};if((0,D.useEffect)(function(){return a$.v.on(az.Y.CHANGE_FORM_BUY_SELL,e=>{let{value:t}=e;i&&c(t)})},[i]),i){let e=()=>{a(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s2.Z,{className:"z-[9998] [&_.bn-drawer-wrap]:overflow-y-auto",visible:s,direction:"bottom",size:"auto",onClose:e,enablePortal:!0,children:(0,l.jsxs)("div",{className:"px-[16px] pb-[24px]",children:[(0,l.jsx)(aW,{title:r("alpha-trading-title",{defaultValue:"Alpha Trading"}),onClose:e}),s&&(0,l.jsx)(dh,{alphaTokenId:t,initialValues:d,onSubmitSuccess:e})]})}),(0,l.jsxs)("div",{className:"fixed bottom-[28px] w-full py-[8px] px-[15px] gap-[8px] flex bg-BasicBg",children:[(0,l.jsx)(s6.Z,{className:"flex-1",variant:"buy",sz:"regular",onClick:()=>c(aU.V$.BUY),children:r("buy",{defaultValue:"Buy"})}),(0,l.jsx)(s6.Z,{className:"flex-1",variant:"sell",sz:"regular",onClick:()=>c(aU.V$.SELL),children:r("sell",{defaultValue:"Sell"})})]})]})}return(0,l.jsxs)("div",{className:"p-[16px] h-full overflow-y-auto",children:[(0,l.jsx)("div",{className:"h-[52px] mb-[16px]",children:(0,l.jsx)(dp,{})}),(0,l.jsx)(dh,{alphaTokenId:t})]})};var df=i(33254);let db=V().memo(e=>{let{children:t}=e,[i,r]=(0,D.useState)(!1),s=(0,D.useCallback)(e=>{r(e)},[]),a=(0,D.useMemo)(()=>(0,l.jsx)(is.ZP,{className:"w-[320px]",children:(0,l.jsx)(sY,{})}),[]);return(0,l.jsx)(ix.Z,{trigger:"hover",placement:"bottom-start",open:i,onVisibleChange:s,overlay:a,bubbleClassName:"bg-CardBg ml-[-40px]",children:t})}),dy=e=>{let{symbol:t="",alphaTokenId:i,name:r=""}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(il._,{alphaTokenId:i,size:"m"}),(0,l.jsxs)(is.ZP,{className:"min-w-[57px] ml-[8px]",children:[(0,l.jsx)(is.ZP,{className:"text-[20px] font-[600] leading-[24px] text-PrimaryText",children:t}),(0,l.jsx)(is.ZP,{className:"text-[12px] font-[400] leading-[18px] text-TertiaryText",children:r})]})]})},dv=V().memo(e=>{let{symbol:t="",alphaTokenId:i,name:r="",alphaId:s=""}=e,{isTablet:a,isLargeTablet:o}=(0,el.F)();return(0,l.jsxs)(ir.Z,{className:"items-center gap-[8px]",children:[(0,l.jsx)(sW,{alphaId:s,className:"!mr-[0px]"}),a||o?(0,l.jsx)(db,{children:(0,l.jsxs)(ir.Z,{className:"items-center cursor-pointer",children:[(0,l.jsx)(dy,{symbol:t,alphaTokenId:i,name:r}),(0,l.jsx)(ig.Z,{className:"text-PrimaryText self-start mt-[4px]",size:16})]})}):(0,l.jsx)(dy,{symbol:t,alphaTokenId:i,name:r})]})});var dC=i(7627),dw=i(25708);let dS={position:"absolute",left:"0px",height:"100%",cursor:"pointer",width:"24px",display:"flex",alignItems:"center",justifyContent:"flex-start",color:"icons.close"},dT={position:"absolute",cursor:"pointer",width:"24px",right:"0px",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",color:"icons.close"};var dA=i(12436),d_=i.n(dA);let dL=(e,...t)=>{let i=(0,D.useRef)(()=>{});return i.current=e,(0,D.useCallback)(d_()(function(...e){return i.current.apply(this,e)},...t),[])},dk=()=>({position:"relative",display:"flex",".leftArrow":{...dS,background:"linear-gradient(90deg, var(--color-BasicBg) 0%,var(--color-BasicBg) calc(24px / 2),transparent 100%)",svg:{"&:hover":{color:"var(--color-PrimaryText)"}}},".rightArrow":{...dT,background:"linear-gradient(270deg, var(--color-BasicBg) 0%,var(--color-BasicBg) calc(24px / 2),transparent 100%)",svg:{"&:hover":{color:"var(--color-PrimaryText)"}}},".container":{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden","::-webkit-scrollbar":{display:"none"}}}),dI=(0,D.memo)(({children:e,speed:t,zIndex:i,arrowSx:r,scrollLeft:s,containerClassName:a,...o})=>{let n=(0,D.useRef)(null),[d,c]=(0,D.useState)(!1),[h,u]=(0,D.useState)(!1),g=n.current?.clientWidth,m=n.current?.scrollWidth,p=dL(()=>{let{scrollWidth:e=0,clientWidth:t=0,scrollLeft:i=0}=n.current||{};c(e>Math.ceil(t+i)),u(!!i)},[c,u,n.current],1e3);(0,D.useEffect)(function(){p()},[p]);let x=(0,D.useMemo)(()=>()=>dk(),[]);(0,D.useEffect)(function(){if("ResizeObserver"in window){let e=new ResizeObserver(p);return n.current&&e.observe(n.current),()=>e.disconnect()}return window.addEventListener("resize",p,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",p)}},[p,n.current]);let f=(0,D.useCallback)(()=>{"number"==typeof n?.current?.scrollLeft&&(n.current.scrollLeft-=t||30,n.current.scrollLeft<0&&(n.current.scrollLeft=0),p())},[p,t]),b=(0,D.useCallback)(()=>{"number"==typeof n?.current?.scrollLeft&&(n.current.scrollLeft+=t||30,p())},[p,t]);return(0,D.useEffect)(()=>{s&&"number"==typeof n?.current?.scrollLeft&&(n.current.scrollLeft=s,p())},[s,n.current]),(0,D.useEffect)(()=>{p()},[g,m]),(0,l.jsxs)(dC.Z,{sx:x,...o,children:[h&&(0,l.jsx)("div",{onClick:f,className:"leftArrow",style:{...r,zIndex:i},children:(0,l.jsx)(dw.Z,{className:"text-IconNormal hover:text-PrimaryText w-[16px] h-[16px]"})}),(0,l.jsx)("div",{className:`container ${a}`,ref:n,onScroll:p,children:e}),d&&(0,l.jsx)("div",{className:"rightArrow",onClick:b,style:{...r,zIndex:i},children:(0,l.jsx)(s1.Z,{className:"text-IconNormal hover:text-PrimaryText w-[16px] h-[16px]"})})]})}),dP=e=>(Number(e)>0?"+":"")+(s$(e)?`${(0,iE.At)(e,2)}%`:eC.X2),dE=()=>(0,l.jsx)(is.ZP,{className:"w-[0.5px] h-[8px] bg-InputLine",children:"\xa0"}),dB=e=>{let{name:t,children:i,className:r=""}=e;return(0,l.jsxs)(ir.Z,{className:`flex-col gap-[2px] ${r}`,children:[(0,l.jsx)(is.ZP,{className:"text-[12px] font-[400] leading-[18px] h-[18px] text-TertiaryText",children:t}),(0,l.jsx)(ir.Z,{className:"text-[12px] font-[400] leading-[16px] h-[16px] text-PrimaryText gap-[4px] items-center",children:i})]})},dN=V().memo(e=>{let{alphaTokenId:t}=e,{t:i}=(0,tF.Mi)(),{t:r}=(0,tF.cK)(),{price:s,percentChange24h:a,contractAddress:o,high:n,low:d,volume:c,transactions:h,tags:u,isAirdrop:g,isTge:m}=dm(t);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(is.ZP,{className:"min-w-[168px]",children:[(0,l.jsx)(is.ZP,{className:"text-[20px] font-[500] leading-[24px] text-PrimaryText",children:s}),(0,l.jsxs)(ir.Z,{className:"text-[12px] font-[400] leading-[18px] gap-[8px] items-center",children:[(0,l.jsx)(is.ZP,{className:`${sO(+a)}`,children:dP(a)}),(0,l.jsx)(aS,{iconSize:12,value:o,gap:"medium",children:(0,l.jsx)(is.ZP,{className:"text-SecondaryText",children:aN(o)})})]})]}),(0,l.jsx)(dI,{speed:200,zIndex:1,bgColor:"moduleBg",className:"flex-1 min-w-0",children:(0,l.jsxs)(ir.Z,{className:"items-center gap-[24px]",children:[(0,l.jsx)(dB,{name:i("trd-ticker-high"),children:n}),(0,l.jsx)(dB,{name:i("trd-ticker-low"),children:d}),(0,l.jsx)(dB,{name:i("trd-ticker-volume"),children:c}),(0,l.jsx)(dB,{name:r("ticker-transactions",{defaultValue:"24h Transactions"}),children:h}),(0,l.jsxs)(dB,{name:i("trd-token-tag"),children:[m&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(is.ZP,{className:"text-PrimaryText",children:i("alpha-ticker-tag-tge",{defaultValue:"Exclusive TGE"})}),(u.length>0||g)&&(0,l.jsx)(dE,{})]}),g&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(is.ZP,{className:"text-PrimaryText",children:i("alpha-ticker-tag-airdrop",{defaultValue:"Alpha Airdrop"})}),u.length>0&&(0,l.jsx)(dE,{})]}),Array.isArray(u)&&u.length>0&&u.map((e,t)=>(0,l.jsxs)(V().Fragment,{children:[(0,l.jsx)(is.ZP,{className:"text-PrimaryText",children:null==e?void 0:e.defaultName}),t<u.length-1&&(0,l.jsx)(dE,{})]},null==e?void 0:e.defaultName))]})]})})]})}),dM=V().memo(()=>{let{alphaTokenId:e}=(0,sd.K)(),{data:t}=(0,sc.u)({alphaTokenId:e}),{t:i}=(0,tF.Mi)();return(0,l.jsxs)(ir.Z,{className:"items-center justify-between h-full px-[16px] gap-[24px]",children:[(0,l.jsxs)(ir.Z,{className:"items-center gap-[24px] flex-1 min-w-0",children:[(0,l.jsx)(dv,{symbol:null==t?void 0:t.symbol,alphaTokenId:e,name:null==t?void 0:t.name,alphaId:null==t?void 0:t.alphaId}),(0,l.jsx)(dN,{alphaTokenId:e})]}),(0,l.jsx)(ir.Z,{className:"items-center",children:(0,l.jsx)(op,{offset:6,tooltips:i("trd-helpcenter-faq",{defaultValue:"FAQ"}),children:(0,l.jsx)(rL,{className:"flex w-[32px] h-[32px] rounded-[8px] border-[1px] border-solid border-Line justify-center items-center cursor-pointer",path:rP.HELP_URL,target:"_blank",children:(0,l.jsx)(df.Z,{className:"w-[20px] h-[20px] text-IconNormal"})})})})]})});var dD=i(46598);let dV=e=>{let{name:t,children:i,className:r=""}=e;return(0,l.jsxs)(ir.Z,{className:`items-start justify-between gap-[4px] ${r}`,children:[(0,l.jsx)(is.ZP,{className:"text-[12px] font-[400] leading-[14px] text-SecondaryText",children:t}),(0,l.jsx)(ir.Z,{className:"text-[12px] font-[500] leading-[14px] text-PrimaryText",children:i})]})},dj=V().memo(e=>{let{alphaTokenId:t}=e,{t:i}=(0,tF.Mi)(),{t:r}=(0,tF.cK)(),{price:s,percentChange24h:a,contractAddress:o,high:n,low:d,volume:c,transactions:h,tags:u,marketCap:g,liquidity:m,fdv:p,holders:x,isAirdrop:f,isTge:b}=dm(t),[y,v]=(0,D.useState)(!0);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(is.ZP,{children:[(0,l.jsxs)(ir.Z,{className:"px-[15px] py-[12px] flex-col gap-[4px]",children:[(0,l.jsx)(is.ZP,{className:"text-[28px] font-[600] leading-[30px] text-PrimaryText",children:s}),(0,l.jsxs)(ir.Z,{className:"text-[12px] font-[500] leading-[18px] gap-[8px] items-center",children:[(0,l.jsx)(is.ZP,{className:`${sO(+a)}`,children:dP(a)}),(0,l.jsx)(aS,{iconSize:12,value:o,gap:"medium",children:(0,l.jsx)(is.ZP,{className:"text-SecondaryText",children:aN(o)})})]}),Array.isArray(u)&&u.length>0&&(0,l.jsxs)(ir.Z,{className:"items-center gap-[4px]",children:[b&&(0,l.jsx)(is.ZP,{className:"h-[20px] leading-[14px] pt-[2px] px-[6px] rounded-[4px] bg-Input text-PrimaryText text-[12px]",children:i("alpha-ticker-tag-tge",{defaultValue:"Exclusive TGE"})}),f&&(0,l.jsx)(is.ZP,{className:"h-[20px] leading-[14px] pt-[2px] px-[6px] rounded-[4px] bg-Input text-PrimaryText text-[12px]",children:i("alpha-ticker-tag-airdrop",{defaultValue:"Alpha Airdrop"})}),u.map(e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(is.ZP,{className:"h-[20px] leading-[14px] pt-[2px] px-[6px] rounded-[4px] bg-Input text-PrimaryText text-[12px]",children:null==e?void 0:e.defaultName})}))]})]}),(0,l.jsxs)(is.ZP,{className:"grid grid-cols-2 gap-x-[15px] gap-y-[4px] px-[15px] pb-[4px]",children:[(0,l.jsx)(dV,{name:i("trd-market-infoMarketCap"),children:`$${g}`}),(0,l.jsx)(dV,{name:r("ticker-holders",{defaultValue:"Holders"}),children:x}),(0,l.jsx)(dV,{name:i("trd-TRS-legend-Liquidity"),children:`$${m}`}),(0,l.jsx)(dV,{name:r("ticker-fdv",{defaultValue:"FDV"}),children:`$${p}`}),y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(dV,{name:i("trd-ticker-high"),children:n}),(0,l.jsx)(dV,{name:i("trd-ticker-volume"),children:c}),(0,l.jsx)(dV,{name:i("trd-ticker-low"),children:d}),(0,l.jsx)(dV,{name:r("ticker-transactions",{defaultValue:"24h Transactions"}),children:h})]})]}),(0,l.jsx)(ir.Z,{className:"justify-center items-center",children:y?(0,l.jsx)(dD.Z,{onClick:()=>v(!y),className:"w-[16px] h-[16px] text-IconNormal"}):(0,l.jsx)(s0.Z,{onClick:()=>v(!y),className:"w-[16px] h-[16px] text-IconNormal"})})]})})}),dR=V().memo(()=>{let{alphaTokenId:e}=(0,sd.K)();return(0,l.jsx)(dj,{alphaTokenId:e})}),dO=()=>{let{isMobile:e}=(0,el.F)();return(rr(),e)?(0,l.jsx)(dR,{}):(0,l.jsx)(dM,{})};var dF=i(76635),dH=i(90128),dZ=i(81619),dU=i(11621);let dW=(0,tZ.U)()((0,dU.tJ)(e=>({isFirstTimeVisiting:!0,setIsFirstTimeVisiting:t=>e({isFirstTimeVisiting:t})}),{name:"alpha-ui-chart-persistence"})),d$=(0,dF.memoize)(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,tZ.U)((e,t)=>({isFullscreen:!1,set:i=>{e(i(t()))}}))}),dz=e=>e.set,dK=e=>e.isFullscreen;var dX=i(42759);let dY=dH.kL.Store.Tabs.Origin,dG=e=>{let{headerSlot:t}=e;return()=>e=>{let{namespace:i,components:{intervalFilter:r,indicator:s,chartStyleDropdown:a,fullscreen:o,moreSettings:l,originalCandlestickSetting:n}}=e,d=dH.kL.Store.createStore(i),c=d$(),[h]=d(dH.kL.Store.getActiveTab),u=c(dK),g=c(dz),m=(0,dX.g)({namespace:i}),p=(0,D.useMemo)(()=>r({disableCustomInterval:!0}),[r]),x=(0,D.useMemo)(()=>s({}),[s]),f=(0,D.useMemo)(()=>a({type:h===dY?"Origin":"TradingView"}),[h,a]),b=(0,D.useMemo)(()=>o({expanded:!u,onClick:()=>g(e=>({isFullscreen:!e.isFullscreen}))}),[o,u,g]);return{medium:{head:[t,p,x,f,(0,D.useMemo)(()=>n({}),[n]),(0,D.useMemo)(()=>l({moreSettings:m}),[l,m])],mid:[],tail:[b],useDraggableHandle:!1},small:{head:[p]}}}},dq=e=>{let{onRemove:t,onResume:i}=e;return e=>{let{components:{intervalFilter:r,indicator:s,miniSymbolStatus:a,resumeWindow:o,closeButton:l,priceDropdown:n}}=e,d=(0,D.useMemo)(()=>r(),[r]);return(0,D.useMemo)(()=>({medium:{head:[d,s({}),n()],mid:[a({showChange:!0})],tail:[o({onResume:i}),l({onRemove:t})],useDraggableHandle:!1},small:{head:[d]}}),[d,l,s,a,n,o])}},dQ=V().lazy(()=>i.e("2548").then(i.bind(i,99179))),dJ=["time","1s","1m","5m","15m","1h","4h","1d"],d0=()=>!0,d1=e=>{let{namespace:t,shortcutEnabled:i,generateToolbar:r}=e,[,s]=dH.kL.Store.createStore(t)(dH.kL.Store.getInterval),{symbol:a}=(0,n3.r)()||{},{isLight:o}=ej(),{isFirstTimeVisiting:n,setIsFirstTimeVisiting:d}=dW(),c=(0,D.useMemo)(()=>o?"white":"black",[o]),h=(0,D.useCallback)(e=>"",[]),u=(0,D.useCallback)(async e=>({isReadyToTrade:!0,openTime:0}),[]),g=(0,D.useCallback)(e=>(0,l.jsx)(D.Suspense,{fallback:null,children:(0,l.jsx)(dQ,{namespace:e.namespace})}),[]);return(0,D.useEffect)(()=>{n&&(d(!1),s("15m"))},[n,s,d]),a?(0,l.jsx)(dH.kL.Containers.Chart,{namespace:t,symbol:a,hostAddress:_.Xs||"",themeName:c,getSymbolDisplayName:dF.identity,checkTradeStatus:u,checkMiniSymbolAvaliablility:h,beforeMiniChartSymbolChange:dF.identity,hasDoneFetchingSymbols:d0(),generateMiniToolbar:dq,generateToolbar:r,basicKline:g,tradingView:()=>(0,l.jsx)(l.Fragment,{}),depth:()=>(0,l.jsx)(l.Fragment,{}),shortcutEnabled:i,intervalOptions:dJ,electron:dZ.Z}):null};var d2=i(98736);let d5=V().memo(e=>{let{innerText:t,handleClose:i,closable:r=!0}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"h-[0px] sm:h-[1px]"}),(0,l.jsx)(nf.Z,{icon:(0,l.jsx)(nb.Z,{}),closable:r,message:t,onClose:i,variant:"primary",sz:"small",className:"mt-[0px] sm:mt-[3px] rounded-none"})]})}),d3=V().memo(e=>{let{title:t,text:i,attachedLink:r,linkCopy:s,onClose:a}=e,{t:o}=(0,tF.Mi)();return(0,l.jsxs)(ir.Z,{className:"flex-col px-[24px] py-[32px] items-center",style:{wordBreak:"break-word"},children:[(0,l.jsx)("div",{children:(0,l.jsx)(la.Z,{className:"w-[96px] h-[96px]"})}),t&&(0,l.jsx)(is.ZP,{className:"mt-[12px] align-baseline text-PrimaryText text-[20px] leading-[28px] min-h-[28px]",children:t}),(0,l.jsx)(is.ZP,{className:"max-h-[110px] px-[24px] overflow-auto",children:(0,l.jsx)(is.ZP,{className:"mt-[8px] align-baseline text-TertiaryText",children:i})}),(0,l.jsx)(s6.Z,{className:"w-full h-[40px] mt-[24px]",onClick:a,children:o("trd-dialog-i-understand",{defaultValue:"I understand"})}),s||r?(0,l.jsx)(is.ZP,{className:"align-middle mt-[24px] [&_a]:text-TextLink [&_a]:no-underline",children:(0,l.jsx)("a",{target:"_blank",href:`/${r||s}`,rel:"noreferrer",children:s||r})}):null]})}),d6=e=>{let{isFetched:t,data:i}=(0,em.useQuery)(["SPOT_QUERY_DISCLAIMER",e],()=>(0,d2.S)({tradingPairs:e,type:"alphas"}),{staleTime:3e3,enabled:!!e&&""!==e});return t&&i&&(null==i?void 0:i.data)&&i.data.id?null==i?void 0:i.data:{}},d4=e=>{let{closeTime:t,setCloseTime:i}=e,{alphaTokenId:r}=(0,sd.K)(),{data:s}=(0,sc.u)({alphaTokenId:r}),{alphaId:a}=s||{},{title:o,content:n,id:d,frequency:c,attachedLink:h,linkCopy:u,placement:g=""}=d6(a||""),m=(g||"").includes("3"),p=`${r}_dialog_${d}`,x=t?t[p]:"",f=!!x&&aD()(+x).isSame(aD()(),"day");return!n||!m||1===Number(c)&&t[p]||0===Number(c)&&f?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(lr.ZP,{visible:!0,children:(0,l.jsx)(d3,{onClose:()=>{i({...t,[p]:Date.now()})},title:o,text:n,attachedLink:h,linkCopy:u})})},d8=e=>{let{closeTime:t,setCloseTime:i}=e,{alphaTokenId:r}=(0,sd.K)(),{data:s}=(0,sc.u)({alphaTokenId:r}),{alphaId:a}=s||{},{title:o,content:n,id:d,frequency:c,attachedLink:h,linkCopy:u,placement:g=""}=d6(a||""),m=(g||"").includes("1"),p=`${r}_banner_${d}`,x=t?t[p]:"",f=!!x&&aD()(+x).isSame(aD()(),"day"),b=h||u?(0,l.jsx)(is.ZP,{className:"inline [&_a]:text-TextLink [&_a]:no-underline",children:(0,l.jsxs)("a",{target:"_blank",href:`/${h||u}`,rel:"noreferrer",children:[u||h," ",">"]})}):null,y=o?(0,l.jsxs)(is.ZP,{className:"inline",children:[`${o}:`,"\xa0",n,"\xa0",b]}):(0,l.jsxs)(is.ZP,{className:"inline",children:[n,"\xa0",b]});return!n||!m||1===Number(c)&&t[p]||0===Number(c)&&f?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(d5,{innerText:y,handleClose:()=>{i({...t,[p]:Date.now()})}})},d7=()=>{let{data:e,setData:t,hasInitialized:i}=(0,ly.S)(lv.M,lv.q.SYMBOL_DISCLAIMER,{});return i?(0,l.jsxs)(is.ZP,{className:"bg-TradeBg",children:[(0,l.jsx)(d8,{setCloseTime:t,closeTime:e}),(0,l.jsx)(d4,{setCloseTime:t,closeTime:e})]}):(0,l.jsx)(l.Fragment,{})},d9=e=>{let{visible:t}=e,{isNotSupportedYet:i,isAuditInProgress:r}=s3(),{t:s}=(0,tF.cK)();return i?(0,l.jsx)(is.ZP,{className:"pt-[120px] px-[15px] h-full pb-[150px]",children:(0,l.jsx)(s7,{})}):r?(0,l.jsxs)(is.ZP,{className:"pt-[180px] px-[40px] h-full pb-[150px] text-center",children:[(0,l.jsx)(oD.Z,{className:"w-[96px] h-[96px] mb-[8px]"}),(0,l.jsx)(is.ZP,{className:"t-body2 text-SecondaryText",children:s("coin.content/audit_in_progress",{defaultValue:"Detection in progress, please revisit the page later to get the latest results."})})]}):(0,l.jsxs)(ir.Z,{className:"flex-col pt-[10px] px-[15px] min-h-[calc(100vh_-_145px)] pb-[72px]",children:[(0,l.jsx)(s9,{visible:t,className:"mb-[16px]"}),(0,l.jsx)(at,{className:"mb-[24px]"}),(0,l.jsx)(aC,{className:"mb-[24px]"}),(0,l.jsx)(ad,{className:"mb-[24px]"}),(0,l.jsx)(ah,{})]})},ce=()=>{var e,t,i;let{data:r}=ab(),{t:s}=(0,tF.cK)();return(null==r||null==(e=r.metaInfo)?void 0:e.socialMedias)&&0!==r.metaInfo.socialMedias.length?(0,l.jsxs)(is.ZP,{className:"mb-[40px]",children:[(0,l.jsx)(is.ZP,{className:"mb-[16px] t-subtitle6 text-PrimaryText",children:s("coin.label/social_media",{defaultValue:"Social Media"})}),(0,l.jsx)(ir.Z,{className:"gap-[8px] flex-wrap",children:null==(i=r.metaInfo)||null==(t=i.socialMedias)?void 0:t.map(e=>(0,l.jsx)(aB,{site:e},e.label))})]}):null},ct=()=>(0,l.jsxs)(is.ZP,{className:"pt-[10px] px-[15px] pb-[80px]",children:[(0,l.jsx)(ax,{className:"mb-[16px]"}),(0,l.jsx)(aF,{className:"mb-[40px]"}),(0,l.jsx)(ce,{}),(0,l.jsx)(aH,{className:"mb-[40px]"})]}),ci=()=>{let{alphaTokenId:e}=(0,sd.K)(),{data:t}=(0,sc.u)({alphaTokenId:e}),[i,{open:r,close:s}]=sQ(!1);return(0,l.jsxs)(ir.Z,{className:"px-[16px] items-center",children:[(0,l.jsx)(sW,{alphaId:(null==t?void 0:t.alphaId)||""}),(0,l.jsx)(sq,{alphaTokenId:e,logoSize:"s",symbolTextSize:18,onClick:r,withCaret:!0}),(0,l.jsx)(s2.Z,{visible:i,direction:"bottom",size:"limit",onClose:s,className:"[&_.bn-drawer-wrap]:pb-[12px]",children:(0,l.jsx)(sY,{handleOnRowClick:s})})]})},cr=e=>{let{tabIndex:t,setTabIndex:i,chartClassName:r}=e,{t:s}=(0,tF.cK)(),{alphaTokenId:a}=(0,sd.K)(),{shouldHideAuditData:o}=s3(),n=(0,iK.Sl)();return(0,D.useEffect)(()=>{2===t&&o&&i(0)},[t,o,i]),(0,D.useEffect)(()=>{2===t&&n(ii.Ks.click,{module:ii.kj.INFO,$element_id:"audit"})},[t,n]),(0,l.jsxs)(ir.Z,{className:"flex-col h-[calc(100vh_-_64px)]",children:[(0,l.jsx)(d7,{}),(0,l.jsx)(ci,{}),(0,l.jsxs)(rp.Z,{variant:"default-breakline",selectedIndex:t,onChange:i,fontSizeType:"3",tabListProps:{className:"px-[15px]"},tabPaneListProps:{className:"flex-grow"},children:[(0,l.jsx)(rp.Z.TabPane,{tabKey:"price",tabNode:s("page_title/price",{defaultValue:"Price"}),children:(0,l.jsxs)(rR,{children:[(0,l.jsx)(rF,{name:"subHeader",isMobileLayout:!0,children:(0,l.jsx)(dO,{})}),(0,l.jsx)(rF,{name:"chart",className:r,isMobileLayout:!0,children:(0,l.jsx)(d1,{namespace:"alpha",generateToolbar:dG({headerSlot:null})})}),(0,l.jsx)(rF,{name:"history",isMobileLayout:!0,children:(0,l.jsx)(rj,{})})]})}),(0,l.jsx)(rp.Z.TabPane,{tabKey:"info",tabNode:s("page_title/info",{defaultValue:"Info"}),children:(0,l.jsx)(it,{name:"coinInfoMobilePage",children:(0,l.jsx)(ct,{})})}),o?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(rp.Z.TabPane,{tabKey:"audit",tabNode:s("page_title/audit",{defaultValue:"Audit"}),children:(0,l.jsx)(it,{name:"coinAuditMobilePage",children:(0,l.jsx)(d9,{visible:2===t})})})]}),(0,l.jsx)(it,{name:"orderForm",children:(0,l.jsx)(dx,{alphaTokenId:a})}),(0,l.jsx)(it,{name:"footer",children:(0,l.jsx)(rm,{})})]})},cs=e=>{let{alphaTokenId:t}=e,{t:i}=(0,tF.cK)(),{data:r}=(0,sc.u)({alphaTokenId:t});(0,D.useEffect)(()=>{if(!(null==r?void 0:r.symbol)||!(null==r?void 0:r.price))return;let e=i("alpha-seo-title",{defaultValue:"{{price}} | {{token}} USD | Alpha Trade",token:null==r?void 0:r.symbol,price:(0,tW.Dn)((null==r?void 0:r.price)||"0",t$.Bu.HIGH_LOWEST)});document.title=e},[null==r?void 0:r.symbol,null==r?void 0:r.price,i])};var ca=i(59505);let co=()=>{let{t:e}=(0,tF.cK)(),{data:t}=ds(),i=da(t);return(0,l.jsxs)(is.ZP,{className:"text-PrimaryText w-full h-full",children:[(0,l.jsx)(is.ZP,{className:"h-[38px] leading-[38px] mt-[4px] px-[16px] border-0 border-b-[1px] border-solid border-Line font-[500] text-[14px]",children:e("limit-transactions",{defaultValue:"Limit Transactions"})}),(0,l.jsx)(is.ZP,{className:"mt-[8px] h-[calc(100%-42px)] text-[12px] font-[400] pl-[16px]",children:(0,l.jsx)(n4,{data:i})})]})};var cl=i(33649),cn=i(16223);let cd=({req:e})=>{if("undefined"!=typeof window)return void console.warn("[setServerThemeState] skipped in browser");try{let t=(0,cl.g)({request:e});t&&cn.Z.setState("theme",t)}catch(e){console.error("[setServerThemeState] error:",e)}},cc=["dark_classic","dark_midnight","light_glacier"],ch=()=>{try{i.g._buu||(i.g._buu={},i.g._buu.icon="premium",i.g._buu.subTheme=cc)}catch(e){console.error("[setServerBuuState] error:",e)}},cu={pageName:ii.Hf,df_business:ii.NP},cg=(0,tY.f2)("/alpha/$chainSymbol/$contractAddress")({loader:async e=>{let{context:t,params:i}=e;if("undefined"!=typeof window)return null;let{contractAddress:r}=i,{targetToken:s,isQueryTokenListSuccess:a}=t;cd({req:{headers:t.headers}});let o=new em.QueryClient;if(!s&&a)throw(0,i0.uX)({to:"/404",statusCode:404});if(s){o.setQueryData(iI.i.QUERY_ALPHA_TOKEN_MAP,(0,ca.d)([s]));let e={chainId:s.chainId,contractAddress:r},i={binanceChainId:s.chainId,contractAddress:r,requestId:(0,i8.v4)()},[a,l]=await (0,i4.g1)({promises:[i3(e),i6(i,{headers:{lang:t.locale}})],timeout:eC.tE,fallbackValue:[{code:"0",success:!1,data:{}},{code:"0",success:!1,data:{}}]});o.setQueryData(iI.i.QUERY_ALPHA_TOKEN_INFO(e),a),o.setQueryData(iI.i.QUERY_ALPHA_TOKEN_AUDIT(e),l),o.invalidateQueries()}return await Promise.all([(0,Q.EQ)({namespaces:er,locale:t.locale})]),{dehydratedState:(0,em.dehydrate)(o),isNeedRevalidatePath:!a}},component:function(){let e=cg.useLoaderData()||{},{isLeastWebSize:t,isMobile:i}=(0,el.F)(),[r,s]=(0,D.useState)(0),{alphaTokenId:a}=(0,sd.K)(),{data:o}=(0,sc.u)({alphaTokenId:a}),{chainId:n,contractAddress:d}=o||{chainId:"",contractAddress:""},c=(0,em.useQueryClient)(),h=d$()(dK),u=(0,D.useMemo)(()=>i5()("overflow-x-hidden",{"fixed w-full h-full top-0 left-0 z-[--zindex-header]":h,"rounded-none":i,"h-[593px]":i&&!h}),[h,i]),g=eU();return cs({alphaTokenId:a}),ch(),(0,D.useEffect)(()=>{g&&e$(ii.Ks.$pageView,{pageName:"alpha_trading"})},[g]),(0,D.useEffect)(()=>()=>{c.invalidateQueries({queryKey:iI.i.QUERY_ALPHA_TOKEN_INFO({chainId:n,contractAddress:d}),exact:!0,refetchActive:!1,refetchInactive:!1}),c.invalidateQueries({queryKey:iI.i.QUERY_ALPHA_TOKEN_AUDIT({chainId:n,contractAddress:d}),exact:!0,refetchActive:!1,refetchInactive:!1})},[c,n,d]),(0,l.jsxs)(em.Hydrate,{state:null==e?void 0:e.dehydratedState,children:[(0,l.jsx)(t5,{path:t2.uE,isNeedRevalidatePath:null==e?void 0:e.isNeedRevalidatePath}),(0,l.jsx)(iX,{defaultTrackingData:cu,sensorTrack:e$,children:i?(0,l.jsx)(it,{name:"mobileLayout",children:(0,l.jsx)(cr,{tabIndex:r,setTabIndex:s,chartClassName:u})}):(0,l.jsxs)(it,{name:"layout",children:[(0,l.jsx)(d7,{}),(0,l.jsxs)(rR,{children:[(0,l.jsx)(rF,{name:"subHeader",children:(0,l.jsx)(dO,{})}),(t||eM.s)&&(0,l.jsx)(rF,{name:"market",children:(0,l.jsx)(sY,{})}),!i&&(0,l.jsx)(rF,{name:"auditInfo",children:(0,l.jsx)(aZ,{})}),(0,l.jsx)(rF,{name:"chart",className:u,children:(0,l.jsx)(d1,{namespace:"alpha",generateToolbar:dG({headerSlot:null})})}),!i&&(0,l.jsx)(rF,{name:"transactions",children:(0,l.jsx)(co,{})}),(0,l.jsx)(rF,{name:"history",children:(0,l.jsx)(rj,{})}),(0,l.jsx)(rF,{name:"orderForm",children:(0,l.jsx)(dx,{alphaTokenId:a})}),(0,l.jsx)(it,{name:"footer",children:(0,l.jsx)(rm,{})})]})]})})]})}}),cm=tG.update({id:"/404",path:"/404",getParentRoute:()=>tX}),cp=t3.update({id:"/alpha/",path:"/alpha/",getParentRoute:()=>tX}),cx=iJ.update({id:"/alpha/limitfee",path:"/alpha/limitfee",getParentRoute:()=>tX}),cf=i1.update({id:"/alpha/$chainSymbol/",path:"/alpha/$chainSymbol/",getParentRoute:()=>tX}),cb=cg.update({id:"/alpha/$chainSymbol/$contractAddress",path:"/alpha/$chainSymbol/$contractAddress",getParentRoute:()=>tX}),cy=tX._addFileChildren({R404Route:cm,AlphaLimitfeeRoute:cx,AlphaIndexRoute:cp,AlphaChainSymbolContractAddressRoute:cb,AlphaChainSymbolIndexRoute:cf})._addFileTypes();if(i(18084),ch(),!function(){let{responseInterceptor:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{responseInterceptor:b};(0,c.py)({baseUrl:g?u.env.INTERNAL_API_HOST:void 0,responseInterceptor:e,accelerate:{defaultOrigin:p,origins:x,enbleSites:f,checkAccelerable:e=>{let[t]=e.split("?");return m.some(e=>{let[i]=e.split("?");return t===i})}}})}({responseInterceptor:k}),_.BB){let e=new I.G({wid:"ldZMo",rel:_.lO,enableApiMonitor:!0});e.installAll(),"undefined"!=typeof window&&(window.wm=e)}let cv=function(e){let{basepath:t,host:i,isRegionMode:r,targetToken:s,isQueryTokenListSuccess:a,locale:o}=e;return(0,M.p)({routeTree:cy,defaultPreload:"intent",defaultErrorComponent:z,defaultNotFoundComponent:()=>(0,l.jsx)(K,{}),scrollRestoration:!0,basepath:t,context:{targetToken:s,isQueryTokenListSuccess:a,isRegionMode:r,headers:{host:i},locale:o}})}({basepath:`${null==(s=document.querySelector("html"))?void 0:s.getAttribute("path-prefix")}`,isRegionMode:"true"==`${null==(a=document.querySelector("html"))?void 0:a.getAttribute("data-is-region-mode")}`,host:window.location.host,locale:(null==(o=document.querySelector("html"))?void 0:o.getAttribute("lang"))||"en",targetToken:void 0,isQueryTokenListSuccess:!1}),cC=document.getElementById("__APP");"undefined"!=typeof window&&!window.Sentry&&P&&(window.Sentry=P),_.BB&&E.S({dsn:_.oj,integrations:[B.I(cv),N.G()],environment:_.oV,release:_.mX,tracesSampleRate:.01,debug:!0,denyUrls:[/^chrome-extension:\/\//i],beforeSend:(e,t)=>{var i,r,s,a,o,l,n,d,c,h;let u=.01;e&&e.level&&"fatal"===e.level&&(u=1,(null==e||null==(s=e.exception)||null==(r=s.values)||null==(i=r[0])?void 0:i.mechanism)&&(e.exception.values[0].mechanism.handled=!1));try{let i=null==e||null==(h=e.exception)||null==(c=h.values)||null==(d=c[0])||null==(n=d.stacktrace)||null==(l=n.frames)||null==(o=l.slice(-1))||null==(a=o[0])?void 0:a.filename,{message:r}=t.originalException;if(r.includes("The object does not support the operation or argument")&&(i??"").includes("sensor"))return null}catch(e){console.error("Error during Sentry beforeSend filtering:",e)}if(e.extra||(e.extra={}),e.tags||(e.tags={}),t&&t.originalException){let i=t.originalException;if(i&&"ResizeObserver loop limit exceeded"===i.message)return null;if(i&&i.message&&i.message.includes("The quota has been exceeded"))try{let t,i=0;Object.keys(localStorage).forEach(r=>{t=(localStorage[r].length+r.length)*2,i+=t;let s=(t/1024).toFixed(2);parseFloat(s)>1&&(e.extra=e.extra||{},e.extra[r.substr(0,50)]=s)}),e.extra.localStorageTotal=(i/1024).toFixed(2),e.tags.localStorage="1"}catch{e.tags.localStorage="0"}if(i&&"Cannot redefine property: src"===i.message)try{e.extra.plugins=Array.from(navigator.plugins||[]).map(e=>e.name).join(),e.extra.OtAutoBlockTimes=Array.from(document.querySelectorAll("script")).filter(e=>e.src.includes("OtAutoBlock.js")).length,e.tags.plugins="1"}catch{e.tags.plugins="0"}}return Math.random()<=u?e:null}}),(0,n.hydrateRoot)(cC,(0,l.jsx)(d.M,{router:cv}))},38449:function(e,t,i){i.d(t,{Mi:()=>o,cK:()=>s,yk:()=>a});var r=i(68087);let s=()=>(0,r.ZK)("alpha-ui"),a=()=>(0,r.ZK)("futures-trade-ui"),o=()=>(0,r.ZK)("trade-ui")},89195:function(e,t,i){i.d(t,{E:()=>d,o:()=>c});var r=i(32963),s=i(82066),a=i(58565);let o=async()=>{let e;try{e=await (0,a.U2)("/bapi/defi/v1/private/wallet-direct/cloud-wallet/alpha")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,message:t,data:{list:[],totalValuation:null}}}return e},l=async e=>{let t;try{t=await (0,a.v_)("/bapi/apex/v1/private/apex/alpha/pnl/avg-cost",e)}catch(i){let e="";i instanceof Error&&(e=i.message),t={success:!1,msg:e,data:[]}}return t};var n=i(70088);let d=()=>{let e=(0,r._n)(),{isLoading:t,data:i,refetch:a}=(0,s.useQuery)(n.i.QUERY_ALPHA_WALLET_LIST,async()=>{let{data:e}=await o();return(null==e?void 0:e.list)||[]},{enabled:e,staleTime:1/0});return{data:i||[],isLoading:t,refetch:a}},c=e=>{let{alphaIdList:t}=e,i=(0,r._n)(),a=t.join(","),{isLoading:o,data:d,refetch:c}=(0,s.useQuery)([n.i.QUERY_ALPHA_AVG_COST["0"],a],async()=>{let{data:e}=await l({tokens:t});return(null==e?void 0:e.tokensAvgCost)||[]},{enabled:i&&t&&t.length>0,staleTime:1/0});return{data:d||[],isLoading:o,refetch:c}}},20763:function(e,t,i){i.d(t,{l:()=>x});var r=i(87363),s=i(51081),a=i(82946);let o=(e,t)=>{let i=void 0===t;if(i&&Array.isArray(e)){let t="string"==typeof e[0]&&1===e.length;if(t)return{message:e[0],props:{}};if(!t){if(1===e.length){let{message:t,...i}=e[0];return{message:t,props:i}}return{message:e[0],props:e[1]}}}else{if(i){let{message:t,...i}=e;return{message:t,props:i}}return{message:e,props:t}}};var l=i(52322),n=i(43396),d=i(86637),c=i(39750);let h=e=>"success"===e?(0,l.jsx)(n.Z,{className:"text-Success h-[20px] w-[20px]"}):"error"===e?(0,l.jsx)(d.Z,{className:"text-Error h-[20px] w-[20px]"}):"warning"===e||"cancel"===e?(0,l.jsx)(c.Z,{className:"text-PrimaryYellow h-[20px] w-[20px]"}):(0,l.jsx)(c.Z,{className:"text-PrimaryText h-[20px] w-[20px]"}),u=e=>{let t="bottom",i="end",r=e?.horizontal||"",s=e?.vertical||"";return"top"===s?t="top":"bottom"===s&&(t="bottom"),"left"===r?i="start":"center"===r?i="":"right"===r&&(i="end"),`${t}${i?`-${i}`:""}`};var g=i(49214);let m=(...e)=>{let{message:t,props:i}=o(e),r=a.G.getState(),{header:s="",title:l="",variant:n,anchorOrigin:d,placement:c,autoHideDuration:m,...p}=i||{},x=d||r?.anchorOrigin,f=m||r?.autoHideDuration;(0,g.Zs)({icon:h(n),title:s||l,message:t,duration:f,placement:c||u(x),...p})},p=()=>{let e=(0,r.useRef)(),{pushNotify:t,closeNotify:i}=(0,s.sJ)(),l=(0,r.useCallback)((e="",{header:r="",variant:s,placement:o,autoHideDuration:l,title:n,anchorOrigin:d,...c})=>{let g=a.G.getState(),p=d||g?.anchorOrigin,x=l||g?.autoHideDuration;return(t!==i?t:m)({icon:h(s),title:r||n,message:e,duration:x,placement:o||u(p),...c})},[t,i]);return{enqueueNotification:(0,r.useCallback)((...t)=>{let{message:i,props:r}=o(t);e.current=l(i,r)},[l]),closeNotification:(0,r.useCallback)(t=>{t?i(t):e.current&&i(e.current)},[i])}},x=()=>{let{enqueueNotification:e}=p();return{showSuccessNotification:(0,r.useCallback)((t,i)=>{e({variant:"success",message:t,title:i})},[e])}}},33980:function(e,t,i){i.d(t,{uz:()=>d,Yj:()=>c});var r=i(82066),s=i(58565);let a=async()=>{let e;try{e=await (0,s.U2)("/bapi/defi/v1/public/wallet-direct/buw/wallet/cex/alpha/chain/list")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,msg:t,data:[]}}return e};var o=i(33657),l=i(70088);let n=e=>e.reduce((e,t)=>(e[(0,o.o)(t.chainName)]=t,e),{}),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.useQuery)(l.i.QUERY_ALPHA_CHAIN_MAP,async()=>{let{data:e,success:t}=await a();return t?n(e):{}},{enabled:!0,notifyOnChangeProps:["data"],cacheTime:1/0,staleTime:1/0,select:e.select})},c=()=>d()},11457:function(e,t,i){i.d(t,{u:()=>a});var r=i(87363),s=i(59505);let a=e=>{let{alphaTokenId:t}=e,i=(0,r.useCallback)(e=>e[t],[t]),{data:a,isLoading:o}=(0,s.I)({select:i});return{data:a,isLoading:o}}},79710:function(e,t,i){i.d(t,{$:()=>o,f:()=>a});var r=i(87363),s=i(84383);let a=e=>{let{alphaId:t}=e,{data:i}=(0,s.R)(),a=(0,r.useMemo)(()=>i.reduce((e,t)=>(e[t.alphaId]=t,e),{}),[i]);return(null==a?void 0:a[t])||{}},o=()=>{let{data:e}=(0,s.R)();return(0,r.useMemo)(()=>e.reduce((e,t)=>(e[t.alphaId]=t,e),{}),[e])||{}}},84383:function(e,t,i){i.d(t,{R:()=>a});var r=i(59505);let s=e=>Object.values(e),a=function(){let{enabled:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:t,isLoading:i,isFetching:a}=(0,r.I)({select:s,enabled:e});return{data:t||[],isLoading:i,isFetching:a}}},1201:function(e,t,i){i.d(t,{_:()=>a});var r=i(59505);let s=e=>e,a=()=>(0,r.I)({select:s})},69007:function(e,t,i){i.d(t,{G:()=>a});var r=i(59505);let s=e=>Object.values(e).reduce((e,t)=>(e[t.alphaId]=t,e),{}),a=()=>{let{data:e,isLoading:t,isFetching:i}=(0,r.I)({select:s});return{data:e||{},isLoading:t,isFetching:i}}},59505:function(e,t,i){i.d(t,{d:()=>l,I:()=>n});var r=i(82066),s=i(58565);let a=async()=>{let e;try{e=await (0,s.U2)("/bapi/defi/v1/public/wallet-direct/buw/wallet/cex/alpha/all/token/list")}catch(i){let t="";i instanceof Error&&(t=i.message),e={success:!1,msg:t,data:[]}}return e};var o=i(70088);let l=e=>e.reduce((e,t)=>(e[`${t.chainId}-${t.contractAddress}`]={...t,close:t.price,quoteAsset:"USDT",quoteName:"USDT",baseAsset:t.symbol,baseAssetName:t.name,symbol:t.symbol,tickSize:`${t.decimals}`,volume:t.volume24h,logoUrl:t.iconUrl},e),{}),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.useQuery)(o.i.QUERY_ALPHA_TOKEN_MAP,async()=>{let{data:e,success:t}=await a();return t?l(e):{}},{notifyOnChangeProps:["data","isLoading"],cacheTime:1/0,staleTime:1/0,...e||{}})}},51817:function(e,t,i){i.d(t,{r:()=>a});var r=i(94724),s=i(11457);let a=()=>{let e=(0,r.K)();return(0,s.u)(e).data}},94724:function(e,t,i){i.d(t,{K:()=>d});var r=i(87051),s=i(27680),a=i(87363),o=i(33657),l=i(84383);let n=e=>{let{chainSymbol:t,contractAddress:i}=e,{data:r}=(0,l.R)(),s=(0,a.useMemo)(()=>r.reduce((e,t)=>{let i=(0,o.o)(t.chainName);return e[`${i}-${t.contractAddress}`]=`${t.chainId}-${t.contractAddress}`,e},{}),[r]);return{alphaTokenId:(null==s?void 0:s[`${t}-${i}`])||""}},d=()=>{let{chainSymbol:e,contractAddress:t}=(0,r.U)({from:s.uE}),{alphaTokenId:i}=n({chainSymbol:e,contractAddress:t});return{alphaTokenId:i,chainSymbol:e}}},73151:function(e,t,i){i.d(t,{F:()=>a});var r=i(4302),s=i(55887);function a(){let e=(0,r.ac)({query:"screen and (max-width: 767px)"}),t=(0,r.ac)({query:"screen and (min-width: 768px) and (max-width: 1024px)"}),i=(0,r.ac)({query:"screen and (min-width: 1025px) and (max-width: 1200px)"}),a=(0,r.ac)({query:"screen and (min-width: 1201px)"});return s.s?{isMobile:!1,isTablet:!1,isLargeTablet:!1,isLeastWebSize:!1}:{isMobile:e,isTablet:t,isLargeTablet:i,isLeastWebSize:a}}},3276:function(e,t,i){i.d(t,{P:()=>r,d:()=>s});let r=(0,i(777).U)(e=>({isInit:!1,setIsInit:t=>e(()=>({isInit:t}))})),s=()=>r(e=>e.isInit)},32963:function(e,t,i){i.d(t,{Pc:()=>a,_n:()=>l,f0:()=>o});var r=i(87363),s=i(84612);let a=()=>{let{value:e}=(0,s.vp)();return(0,r.useMemo)(()=>e||{},[e])},o=()=>{let{value:e,loading:t}=(0,s.jm)();return{isLoggedIn:e,isLoading:t}},l=()=>{let{value:e}=(0,s.jm)();return e}},66597:function(e,t,i){i.d(t,{Dr:()=>a,Hr:()=>o,Sr:()=>l,Tj:()=>s,V$:()=>r});let r={BUY:"BUY",SELL:"SELL"},s={SIDE:"side",CEX_ASSET:"cexAsset",FROM_AMOUNT:"fromCoinAmount",PRIORITY_MODE_FROM_RECOMMEND:"priorityModeFromRecommend",PRIORITY_MODE_FROM_USER:"priorityModeFromUser",CUSTOM_PRIORITY_SLIPPAGE:"customPrioritySlippage",CUSTOM_PRIORITY_NETWORK_FEE:"customPriorityNetworkFee",LIMIT_PRICE:"limitPrice",LIMIT_AMOUNT:"limitAmount",LIMIT_TOTAL:"limitTotal"},a={SUCCESS:"priorityOnSuccess",PRICE:"priorityOnPrice",CUSTOMIZE:"priorityOnCustom"},o=a.SUCCESS,l={[s.SIDE]:r.BUY,[s.CEX_ASSET]:"",[s.FROM_AMOUNT]:"",[s.PRIORITY_MODE_FROM_RECOMMEND]:void 0,[s.PRIORITY_MODE_FROM_USER]:void 0,[s.CUSTOM_PRIORITY_SLIPPAGE]:"",[s.CUSTOM_PRIORITY_NETWORK_FEE]:"",[s.LIMIT_PRICE]:"",[s.LIMIT_AMOUNT]:"",[s.LIMIT_TOTAL]:""}},60072:function(e,t,i){i.d(t,{I:()=>a,S:()=>s});var r=i(87363);let s=(0,r.createContext)(void 0),a=()=>(0,r.useContext)(s)},10225:function(e,t,i){i.d(t,{Sl:()=>c,Ui:()=>n});var r=i(30497),s=i(34291),a=i.n(s),o=i(87363),l=i(60072);let n=(0,o.createContext)(void 0),d=()=>(0,o.useContext)(n),c=()=>{let e=(0,l.I)(),t=d();return(0,r.D)((i,r,s)=>e?e(i,{...t,...r||{}},s||a()):a())}},15030:function(e,t,i){i.d(t,{v:()=>r});let r=new(i(52598)).v},98442:function(e,t,i){i.d(t,{IZ:()=>l,Kl:()=>a,L$:()=>o,fU:()=>c,x6:()=>d});var r=i(48373),s=i(14199);function a(e){return e.includes(".")?e.replace(/(\.\d*?)0+$/,"$1").replace(/\.$/,""):e}function o(e){let t=Number(e);if(t<1e6)return`${a((0,r.At)(t,2))}`;for(let e of[{threshold:1e9,suffix:"B"},{threshold:1e6,suffix:"M"}])if(t>=e.threshold){let i=t/e.threshold;return`${a((0,r.At)(i,2))}${e.suffix}`}return`${a((0,r.At)(t,2))}`}let l=(e,t)=>{let{canShowZero:i=!1}=t||{};return e?1e-4>Number(e)?i&&0===Number(e)?"0":"<$0.0001":`$${a((0,r.At)((0,r.yd)(e,4,s.N8),4))}`:s.X2},n=e=>{let t=Number(e)>1?2:6,i=(0,r.yd)(e,t,s.CP);return(0,r.At)(i,t)},d=e=>{let{amount:t,fiatPriceNumber:i,precision:r,symbol:a}=e,o=r||Number(i)>1?2:6,l=n(i),d=0===Number(l)?`<${a} 0.${"0".repeat(o-1)}1`:`${a} ${l}`;return{formattedFiatPrice:t?l:s.X2,formattedFiatAmountWithPrefix:t?d:s.X2}},c=e=>e?`${(0,r.At)(100*Number(e),2)}%`:s.X2},22265:function(e,t,i){i.d(t,{y:()=>r});let r=e=>{let{chainId:t,contractAddress:i}=e;return`${t}-${i}`}},33657:function(e,t,i){i.d(t,{o:()=>r});function r(e){return e?e.replace(/\s+/g,"-").toLowerCase():""}},44637:function(e,t,i){i.d(t,{Dn:()=>l,E$:()=>n,p8:()=>d});var r=i(78369),s=i(34460),a=i(14199),o=i(98442);function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.X2,l=r.mQ[t],n=Number(e);return n>=10?(0,o.Kl)((0,s.d6)(e,l[r.Bu.HIGH].maximum,l[r.Bu.HIGH].minimum,i)):n>=1&&n<10?(0,o.Kl)((0,s.d6)(e,l[r.Bu.MIDDLE].maximum,l[r.Bu.MIDDLE].minimum,i)):n>0?(0,o.Kl)((0,s.d6)(e,l[r.Bu.LOW].maximum,l[r.Bu.LOW].minimum,i)):a.X2}function n(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.X2;return(0,o.Kl)((0,s.d6)(e,r.md[t].maximum,r.md[t].minimum,i))}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-7;return 0===Number(e)&&(e=1),Math.floor(Math.abs(Math.log10(e)))}},87363:function(e){e.exports=React},61533:function(e){e.exports=ReactDOM},7855:function(){},68087:function(e,t,i){i.d(t,{bd:()=>R,EQ:()=>M,ZK:()=>k,tZ:()=>_,LP:()=>L});var r=i(87363);i(97729);var s=i(2446),a=i(95837),o=i(34406);let l=()=>o.env.I18N_BASE_PRIVATE||"";var n=i(58565),d=i(46150),c=i(45455),h=i(75486),u=i(18149);let g=(e={},t={})=>Object.keys(t).every(i=>e[i]&&u(t[i],e[i])),m=(e="")=>`i18n-info-${e}`,p=e=>h.createInstance({name:`i18n-data-${e}`}),x=({lng:e="en",namespace:t=""})=>p(e).getItem(t),f=async({lng:e="en",namespace:t=""})=>p(e).getItem(m(t)),b=async({lng:e="en",namespace:t})=>p(e).setItem(m(t),{lastModified:Date.now()}),y=async({lng:e,namespace:t,newI18nData:i})=>{let r=p(e),s=await x({lng:e,namespace:t});!c(i)&&(g(s||{},i)||(await r.setItem(t,i),b({lng:e,namespace:t})))},{fetch:v}="undefined"!=typeof window&&"function"==typeof window.fetch?window:(0,n.sO)(),C=async(e,t={})=>{let i=async(e,t={})=>{let i=await v(e,{method:"GET",mode:"cors",...t});if(i.ok)return i.json();throw Error(`get url:${e} resource fail`)},{basePath:r,namespace:s,locale:a="en",fallback:o="en",enable2NsKey:l=!1}=e;if(!r||!s)throw TypeError("basePath and namespace must be defined");try{let e=`${r}/${a}/${s}`,o=await i(e,t);if(!o||!Object.keys(o).length)throw Error("fallback i18n");if(l){let e={};return Object.keys(o).forEach(t=>{e[t]=`${s}:${t}`}),e}return o}catch(e){return console.error(`query i18n fail: ${s} | ${a}`,e),"string"==typeof o&&o!==a?C({basePath:r,namespace:s,locale:o,fallback:!1},t):Object.create(null)}},w=async({namespaces:e,locale:t,base:i})=>{let r=async e=>{try{let t=await v(e);if(t.ok)return await t.json();return{}}catch(t){return console.error(`[lib/i18n] query i18n fail: ${e}`,t),{}}},s=await Promise.all(e.map(e=>r(`${i}/${t}/${e}`)));return d(e,s)},S=async({lng:e="en",namespaces:t,base:i=""},{onSuccess:r})=>{let s={};await Promise.allSettled(t.map(async t=>{let i=await f({lng:e,namespace:t});if(i?.lastModified){let i=await x({lng:e,namespace:t});s[t]=i}})),"function"!=typeof r||c(s)||r(s);let a={};await Promise.allSettled(t.map(async t=>{let r=await C({namespace:t,locale:e,basePath:i},{Headers:{origin:window.location.origin}});a[t]=r,y({lng:e,namespace:t,newI18nData:r})})),"function"!=typeof r||c(a)||r(a)};s.Z.use(a.Db);var T=i(76699),A=i(24498);let _=()=>{let{i18n:e}=(0,T.$)();return e.language||"en"},L=()=>{let e=_(),t=(0,A.c)(e);return{direction:t,isRTL:"rtl"===t}},k=e=>(0,T.$)(e),I={allServerResources:{},usedServerResources:{}},P=()=>I.allServerResources,E=e=>{I.allServerResources=e,I.usedServerResources={}},B=()=>{I.usedServerResources={}},N=(e,t)=>{if(I.usedServerResources[e]||(I.usedServerResources[e]={}),I.allServerResources[e]){let i=I.allServerResources[e]?.[t];i?I.usedServerResources[e][t]=i:console.error(`i18n error: missing "${t}" key in "${e}" file, please submit new translation.`)}else console.error(`i18n error: missing "${e}" file, please check the withI18n namespaces configuration.`)};async function M({namespaces:e,locale:t}){E(await w({namespaces:e,locale:t,base:l()}))}var D=i(27843);let V={fallbackLng:"en",debug:!1,saveMissing:!1,react:{useSuspense:!1,bindI18nStore:"added"},partialBundledLanguages:!0,keySeparator:!1},j="undefined"==typeof window;function R({defaultNS:e,namespaces:t,children:i,serverLang:a,clientI18nBasePath:o}){let l=a||"en",n=j?P():window.__FINANCE_I18N__||{},[d,c]=(0,r.useState)(!1);if(!d){let i=[];if(j){let e="i18nServerRecorder";B(),s.Z.use({type:"postProcessor",name:e,process(t,i,r){try{let e=Array.isArray(r.ns)?r.ns[0]:r.ns,t=i[0];e&&N(e,t)}catch(t){console.error(`i18nProvider ${e} error:`,t)}return t}}),i.push(e)}else S({lng:l,namespaces:t,base:o},{onSuccess:e=>{Object.entries(e).forEach(([e,t])=>s.Z.addResourceBundle(a,e,t,!0,!0))}});c(!0),s.Z.init({...V,lng:l,ns:t,defaultNS:e,fallbackNS:t,fallbackLng:l,resources:{[l]:n},postProcess:i.length>0&&i})}return(0,r.useEffect)(()=>{s.Z.changeLanguage(l)},[l]),r.createElement(D.a,{i18n:s.Z},i)}}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,r)=>(i.f[r](e,t),t),[])),i.u=e=>"static/js/async/"+e+"."+({1024:"4e4e40fb",1105:"b9187c64",1592:"59e0c761",1847:"2c4c4008",1896:"a4689659",2519:"9b63afb1",2548:"d41e88f7",2643:"910228a9",2815:"29878f92",3116:"fef81b3e",340:"c61fb987",3419:"1d7b601c",3772:"91868605",3909:"14da9283",4025:"f8632d92",4297:"ff54f553",4329:"1c1120e2",4449:"8fbf93fc",4528:"b187d1f5",4645:"81504087",4851:"5c739f71",5082:"c8c3c845",5152:"5aa66ac2",5639:"52d81165",5764:"f7d8941f",5768:"4629ba2f",5987:"2675b2f2",6113:"e2a24ae1",6170:"2903b69d",6405:"08c51fca",6415:"5f2cf449",6470:"df34bf87",6514:"b0ff57de",6634:"8e00da5c",6735:"869466f1",6836:"23dbd3c7",6948:"653951d8",7227:"1fa74a14",7489:"3d64a220",7526:"e003f7e1",7656:"9d5d1aaf",7797:"1195a2fb",782:"e777a038",8170:"d545169a",8312:"7c1115b5",8340:"59a7d754",8411:"2a83d9fb",9102:"46ea98aa",9212:"e0272da8",9480:"0be46af6",9929:"812943f7",9995:"e8ce5a1e"})[e]+".js",i.miniCssF=e=>"static/css/async/"+e+"."+({1847:"0ef8c18a",4297:"c34fb218",4329:"6fb050d6",5764:"c34fb218",6735:"0ef8c18a"})[e]+".css",i.h=()=>"f875197663d702c0",i.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="alpha-ui:";i.l=function(r,s,a,o){if(e[r])return void e[r].push(s);if(void 0!==a)for(var l,n,d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){l=h;break}}l||(n=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.setAttribute("data-webpack",t+a),l.src=r),e[r]=[s];var u=function(t,i){l.onerror=l.onload=null,clearTimeout(g);var s=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach(function(e){return e(i)}),t)return t(i)},g=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),n&&document.head.appendChild(l)}})(),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e=[];i.O=(t,r,s,a)=>{if(r){a=a||0;for(var o=e.length;o>0&&e[o-1][2]>a;o--)e[o]=e[o-1];e[o]=[r,s,a];return}for(var l=1/0,o=0;o<e.length;o++){for(var[r,s,a]=e[o],n=!0,d=0;d<r.length;d++)(!1&a||l>=a)&&Object.keys(i.O).every(e=>i.O[e](r[d]))?r.splice(d--,1):(n=!1,a<l&&(l=a));if(n){e.splice(o--,1);var c=s();void 0!==c&&(t=c)}}return t}})(),i.p=(window.__STATIC_HOST__||"")+"/assets/",i.rv=()=>"1.3.3",(()=>{if("undefined"!=typeof document){var e=function(e,t,r,s,a){var o=document.createElement("link");return o.rel="stylesheet",o.type="text/css",i.nc&&(o.nonce=i.nc),o.onerror=o.onload=function(i){if(o.onerror=o.onload=null,"load"===i.type)s();else{var r=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.href||t,n=Error("Loading CSS chunk "+e+" failed.\\n("+l+")");n.code="CSS_CHUNK_LOAD_FAILED",n.type=r,n.request=l,o.parentNode&&o.parentNode.removeChild(o),a(n)}},o.href=t,r?r.parentNode.insertBefore(o,r.nextSibling):document.head.appendChild(o),o},t=function(e,t){for(var i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var s=i[r],a=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(a===e||a===t))return s}for(var o=document.getElementsByTagName("style"),r=0;r<o.length;r++){var s=o[r],a=s.getAttribute("data-href");if(a===e||a===t)return s}},r={2462:0};i.f.miniCss=function(s,a){if(r[s])a.push(r[s]);else 0!==r[s]&&({4297:1,4329:1,5764:1,1847:1,6735:1})[s]&&a.push(r[s]=new Promise(function(r,a){var o=i.miniCssF(s),l=i.p+o;if(t(o,l))return r();e(s,l,null,r,a)}).then(function(){r[s]=0},function(e){throw delete r[s],e}))}}})(),(()=>{var e={2462:0};i.f.j=function(t,r){var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var a=new Promise((i,r)=>s=e[t]=[i,r]);r.push(s[2]=a);var o=i.p+i.u(t),l=Error();i.l(o,function(r){if(i.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,s[1](l)}},"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,r)=>{var s,a,[o,l,n]=r,d=0;if(o.some(t=>0!==e[t])){for(s in l)i.o(l,s)&&(i.m[s]=l[s]);if(n)var c=n(i)}for(t&&t(r);d<o.length;d++)a=o[d],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(c)},r=self.webpackChunkalpha_ui=self.webpackChunkalpha_ui||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),i.ruid="bundler=rspack@1.3.3";var r=i.O(void 0,["1480"],function(){return i(48988)});r=i.O(r)})();
//# sourceMappingURL=client.16a8dfb7.js.map